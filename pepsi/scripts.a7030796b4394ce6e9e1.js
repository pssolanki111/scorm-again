/*! npm.im/object-fit-images 3.2.4 */
var objectFitImages=function(){"use strict";function e(e,t,i){var n=function(e,t){return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+e+"' height='"+t+"'%3E%3C/svg%3E"}(t||1,i||0);d.call(e,"src")!==n&&p.call(e,"src",n)}function t(e,i){e.naturalWidth?i(e):setTimeout(t,100,e,i)}function i(i){var r=function(e){for(var t,i=getComputedStyle(e).fontFamily,n={};null!==(t=s.exec(i));)n[t[1]]=t[2];return n}(i),o=i[a];if(r["object-fit"]=r["object-fit"]||"fill",!o.img){if("fill"===r["object-fit"])return;if(!o.skipTest&&l&&!r["object-position"])return}if(!o.img){o.img=new Image(i.width,i.height),o.img.srcset=d.call(i,"data-ofi-srcset")||i.srcset,o.img.src=d.call(i,"data-ofi-src")||i.src,p.call(i,"data-ofi-src",i.src),i.srcset&&p.call(i,"data-ofi-srcset",i.srcset),e(i,i.naturalWidth||i.width,i.naturalHeight||i.height),i.srcset&&(i.srcset="");try{n(i)}catch(i){window.console&&console.warn("https://bit.ly/ofi-old-browser")}}(function(e){if(e.srcset&&!h&&window.picturefill){var t=window.picturefill._;e[t.ns]&&e[t.ns].evaled||t.fillImg(e,{reselect:!0}),e[t.ns].curSrc||(e[t.ns].supported=!1,t.fillImg(e,{reselect:!0})),e.currentSrc=e[t.ns].curSrc||e.src}})(o.img),i.style.backgroundImage='url("'+(o.img.currentSrc||o.img.src).replace(/"/g,'\\"')+'")',i.style.backgroundPosition=r["object-position"]||"center",i.style.backgroundRepeat="no-repeat",i.style.backgroundOrigin="content-box",/scale-down/.test(r["object-fit"])?t(o.img,function(){i.style.backgroundSize=o.img.naturalWidth>i.width||o.img.naturalHeight>i.height?"contain":"auto"}):i.style.backgroundSize=r["object-fit"].replace("none","auto").replace("fill","100% 100%"),t(o.img,function(t){e(i,t.naturalWidth,t.naturalHeight)})}function n(e){var t={get:function(t){return e[a].img[t||"src"]},set:function(t,n){return e[a].img[n||"src"]=t,p.call(e,"data-ofi-"+n,t),i(e),t}};Object.defineProperty(e,"src",t),Object.defineProperty(e,"currentSrc",{get:function(){return t.get("currentSrc")}}),Object.defineProperty(e,"srcset",{get:function(){return t.get("srcset")},set:function(e){return t.set(e,"srcset")}})}function r(e,t){var n=!f&&!e;if(t=t||{},u&&!t.skipTest||!c)return!1;"img"===(e=e||"img")?e=document.getElementsByTagName("img"):"string"==typeof e?e=document.querySelectorAll(e):"length"in e||(e=[e]);for(var s=0;s<e.length;s++)e[s][a]=e[s][a]||{skipTest:t.skipTest},i(e[s]);n&&(document.body.addEventListener("load",function(e){"IMG"===e.target.tagName&&r(e.target,{skipTest:t.skipTest})},!0),f=!0,e="img"),t.watchMQ&&window.addEventListener("resize",r.bind(null,e,{skipTest:t.skipTest}))}var a="bfred-it:object-fit-images",s=/(object-fit|object-position)\s*:\s*([-.\w\s%]+)/g,o="undefined"==typeof Image?{style:{"object-position":1}}:new Image,l="object-fit"in o.style,u="object-position"in o.style,c="background-size"in o.style,h="string"==typeof o.currentSrc,d=o.getAttribute,p=o.setAttribute,f=!1;return r.supportsObjectFit=l,r.supportsObjectPosition=u,function(){function e(e,t){return e[a]&&e[a].img&&("src"===t||"srcset"===t)?e[a].img:e}u||(HTMLImageElement.prototype.getAttribute=function(t){return d.call(e(this,t),t)},HTMLImageElement.prototype.setAttribute=function(t,i){return p.call(e(this,t),t,String(i))})}(),r}();function escapeUnicode(e){return e.replace(/[^\0-~]/g,function(e){return"\\u"+("0000"+e.charCodeAt().toString(16)).slice(-4)})}function unescapeUnicode(e){return e.replace(/\\u([\d\w]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})}function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}var lmsoff=getParameterByName("lmsoff");void 0===window.USE_ONLINE&&""!==lmsoff&&(window.USE_ONLINE=1!=getParameterByName("lmsoff")),window.dcoff=1==getParameterByName("dcoff"),window.showifoff=1==getParameterByName("showifoff"),window.schdestination=getParameterByName("schdestination")||null;try{var protocol=window.location.href.split(":")[0],file=window.location.href.split("/").pop();"file"===protocol&&(file&&file.match(/index.html/g)?window.location.replace(window.location.href.replace("index.html","offline.html")):(window.USE_ONLINE=!1,window.dcoff=!0,window.protocol=protocol))}catch(error){}var courseDisabled=!1;function DisableCourse(e,t){console.log("SCORM: Disable Course")}function Initialize(){console.log("SCORM: Initialize")}var fatalErrorDisplayed=!1;function FatalLMSError(e){console.log("SCORM: FatalLMSError")}function CheckForLMSError(e,t){return console.log("SCORM: CheckForLMSError"),!1}var isIMC=/(lms.corpedia.com)|(lmsdemo.corpedia.com)/.test(window.location.href);function GetAPI(){return console.log("SCORM: Get API"),null}function getUserInfo(e){var t=e[0];objAPI=GetAPI();var i="",n="",r=e[1],a=read_cookie(GetAnalyticsCookieName()),s=QueryString();if(t)n=a.username;else{try{n=objAPI.LMSGetValue("cmi.core.student_id"),CheckForLMSError(objAPI,!0)}catch(o){i+="; learner_id: "+o}""==n&&(n="LMS_Default"),bake_cookie(t,GetAnalyticsCookieName(),a.logId,a.UID,n)}return{username:n,customerid:r,custom1:s.c1,custom2:s.c2,custom3:s.c3,lmserrors:i}}var dataSuccessful=!1,everSuccessful=!1,lastAlert=null,successiveAlerts=0;function dataSent(e){}function setGameCompleted(){}function setQuizScore(e){}function scorm_bookmark_set(e,t){localStorage.setItem("bookmark/"+t,e)}function scorm_bookmark_get(e){return localStorage.getItem("bookmark/"+e)}function get_learner_name(){return""}function get_learner_id(){return"OFFLINE_USER"}function clearData(){bookMarkData.length=0}function getBookMarkBit(e){return e+=bookmarkHeadersSize,byteIndex=Math.floor(e/8),bitOffset=e%8,value=bookMarkData[byteIndex],bitValue=1<<bitOffset,(value&bitValue)>0?1:0}function setBookMarkBit(e,t){e+=bookmarkHeadersSize,byteIndex=Math.floor(e/8),bitOffset=e%8,value=bookMarkData[byteIndex],mask=~(1<<bitOffset),value&=mask,bitValue=t<<bitOffset,bookMarkData[byteIndex]=value|bitValue}function getBookMarkData32(e){if(byteIndex=Math.floor(e/32),bitOffset=e%32,0!=bitOffset)return 0;for(var t="",i=e+31;i>=e;i--)t+=""+getBookMarkBit(i);return parseInt(t,2)}function setBookMarkData32(e,t){if(byteIndex=Math.floor(e/8),bitOffset=e%32,0!=bitOffset)return-1;bitString=t.toString(2);for(var i=bitString.length-1;i>=0;i--)setBookMarkBit(e,bitString.charAt(i)),e++;return 0}function setBookMarkGamePlayIDs(e,t){setBookMarkData32(0-bookmarkHeadersSize,e);var i=0;for(i=0;i<t.length;i++)setBookMarkData32(32*(i+1)-bookmarkHeadersSize,t.charCodeAt(i));setBookMarkData32(32*(i+1)-bookmarkHeadersSize,";".charCodeAt(0))}function getBookMarkLogID(){return getBookMarkData32(0-bookmarkHeadersSize)}function getBookMarkUniqeID(){var e=0,t="";for(e=0;e<bookmarkHeadersSize/32;e++){var i=getBookMarkData32(32*(e+1)-bookmarkHeadersSize);if(i===";".charCodeAt(0))break;t+=String.fromCharCode(i)}return t}function fetch(){if(bookMarkDataStrRaw=scorm_bookmark_get(),bookMarkDataStrRaw=lzw_decode(bookMarkDataStrRaw),0==bookMarkDataStrRaw.length){for(var e=0;e<750;e++)bookMarkData[e]=0;return!1}return bookMarkDataStr=decode64(bookMarkDataStrRaw,bookMarkData),!0}function push(){scorm_bookmark_set(lzw_encode(encode64(bookMarkData)))}function encode64(e){var t,i,n,r,a,s="",o="",l="",u=0;do{void 0===(t=e[u++])&&(t=0),void 0===(i=e[u++])&&(i=0),void 0===(o=e[u++])&&(o=0),n=t>>2,r=(3&t)<<4|i>>4,a=(15&i)<<2|o>>6,l=63&o,isNaN(i)?a=l=64:isNaN(o)&&(l=64),s=s+keyStr.charAt(n)+keyStr.charAt(r)+keyStr.charAt(a)+keyStr.charAt(l),t=i=o="",n=r=a=l=""}while(u<e.length);return s}function decode64(e,t){var i,n,r,a,s="",o="",l=0,u=0;do{n=keyStr.indexOf(e.charAt(l++)),i=(15&(r=keyStr.indexOf(e.charAt(l++))))<<4|(a=keyStr.indexOf(e.charAt(l++)))>>2,s=(3&a)<<6|(o=keyStr.indexOf(e.charAt(l++))),t[u++]=n<<2|r>>4,64!=a&&(t[u++]=i),64!=o&&(t[u++]=s),i=s="",n=r=a=o=""}while(l<e.length);return t}function mixleplex(){console.log("BITMASK: mixleplex")}function setStatusFailed(){console.log("BITMASK: setStatusFailed")}function lzw_encode(e){for(var t,i={},n=(e+"").split(""),r=[],a=n[0],s=256,o=1;o<n.length;o++)null!=i[a+(t=n[o])]?a+=t:(r.push(a.length>1?i[a]:a.charCodeAt(0)),i[a+t]=s,s++,a=t);for(r.push(a.length>1?i[a]:a.charCodeAt(0)),o=0;o<r.length;o++)r[o]=String.fromCharCode(r[o]);return r.join("")}function lzw_decode(e){for(var t,i={},n=(e+"").split(""),r=n[0],a=r,s=[r],o=256,l=1;l<n.length;l++){var u=n[l].charCodeAt(0);s.push(t=u<256?n[l]:i[u]?i[u]:a+r),r=t.charAt(0),i[o]=a+r,o++,a=t}return s.join("")}window.onbeforeunload=function(){},window.onunload=function(){},bookmarkSetFailureCount=0;var status_a="d",status_b="ed",status_c="ail",status_d="f",status_e="sse",status_f="pa",bookMarkData=new Array,bookmarkHeadersSize=960,keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",useOnlineLmsLibrary=function(){window.getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},window.protocol=getParameterByName("protocol"),window.isSCORM1dot2=!(!protocol||"scorm1dot2"!==protocol),window.isScorm2004=!(!protocol||"scorm2004"!==protocol),window.unloading=!1,window.startTimeStamp=new Date,window.courseDisabled=!1,window.DisableCourse=function(e,t){document.body.innerHTML="<div class='external-error'><div style='font-size: X-Large;'>ERROR</div><div>"+e+"</div></div>",courseDisabled||(courseDisabled=!0,t&&scorm_bookmark_set(""))},window.Initialize=function(){GetAPI(),isSCORM1dot2?(objAPI=GetAPI(),objAPI.LMSInitialize(""),CheckForLMSError(objAPI,!0),"passed"!=objAPI.LMSGetValue("cmi.core.lesson_status")&&(CheckForLMSError(objAPI,!0),objAPI.LMSSetValue("cmi.core.lesson_status","incomplete"),CheckForLMSError(objAPI,!0),objAPI.LMSCommit(""),CheckForLMSError(objAPI,!0))):(SCORM2004_objAPI=GetAPI(),SCORM2004_objAPI.Initialize(""),CheckForLMSError(SCORM2004_objAPI,!0))},window.fatalErrorDisplayed=!1,window.FatalLMSError=function(e){fatalErrorDisplayed||(fatalErrorDisplayed=!0,alert("ERROR!\n\nThis course was unable to establish communication with the LMS.\n\nPlease try launching the course again, and if this issue persists, contact your system administrator ("+e+")."),DisableCourse("This course was unable to establish communication with the LMS.\n\nPlease try launching the course again, and if this issue persists, contact your system administrator ("+e+").",!1))},window.CheckForLMSError=function(e,t){var i;return isSCORM1dot2?!(!(i=e.LMSGetLastError())||"0"==i||(t&&FatalLMSError(e.LMSGetErrorString(i)),0)):!(!(i=e.GetLastError())||"0"==i||(t&&FatalLMSError(e.GetErrorString(i)),0))},window.isIMC=/(lms.corpedia.com)|(lmsdemo.corpedia.com)|(www.corpedia.com)/.test(window.location.href),window.GetAPI=function(){return isSCORM1dot2?objAPI=findAPI("API"):isScorm2004?(objAPI=findAPI("API_1484_11"),SCORM2004_objAPI=objAPI):(objAPI=findAPI("API"),objAPI?isSCORM1dot2=!0:(objAPI=findAPI("API_1484_11"),SCORM2004_objAPI=objAPI,isScorm2004=!0)),objAPI||unloading||FatalLMSError("API Not Found"),objAPI},window.getUserInfo=function(e){var t=e[0];if(isSCORM1dot2){objAPI=GetAPI();var i="",n="",r=e[1],a=QueryString(),s=read_cookie(GetAnalyticsCookieName());if(t)n=s.username;else{try{n=objAPI.LMSGetValue("cmi.core.student_id"),CheckForLMSError(objAPI,!0)}catch(o){i+="; learner_id: "+o}""==n&&FatalLMSError("no learner id"),"string"==typeof n&&-1!==n.indexOf("error=401")&&FatalLMSError("invalid learner ID: "+n),s&&bake_cookie(t,GetAnalyticsCookieName(),s.logId,s.UID,n)}return 0<=location.search.indexOf("showuser=1")&&alert("LMS identified the learner id as:\n"+n),{username:n,customerid:r,custom1:a.c1,custom2:a.c2,custom3:a.c3,lmserrors:i}}if(SCORM2004_objAPI=GetAPI(),i="",n="",r=e[1],a=QueryString(),s=read_cookie(GetAnalyticsCookieName()),t)n=s.username;else{try{n=SCORM2004_objAPI.GetValue("cmi.learner_id"),CheckForLMSError(SCORM2004_objAPI,!0)}catch(o){i+="; learner_id: "+o}""==n&&FatalLMSError("no learner id"),s&&bake_cookie(t,GetAnalyticsCookieName(),s.logId,s.UID,n)}return 0<=location.search.indexOf("showuser=1")&&alert("LMS identified the learner id as:\n"+n),{username:n,customerid:r,custom1:a.c1,custom2:a.c2,custom3:a.c3,lmserrors:i}},window.dataSuccessful=!1,window.everSuccessful=!1,window.lastAlert=null,window.successiveAlerts=0,window.dataSent=function(e){if("success"==e)dataSuccessful=!0,everSuccessful=!0,lastAlert=null,successiveAlerts=0;else if(dataSuccessful)dataSuccessful=!1;else{var t=new Date;(null==lastAlert||t.getTime()-lastAlert.getTime()>1e4)&&(lastAlert=t,successiveAlerts++,alert('This course is unable connect to the reporting system. Be sure you are connected to the internet.\n\nIf so, go to https://secure.trueoffice.com/test.php. You should see "Connection Successful." If you don’t see this message, contact your IT service team to help troubleshoot access to this site.\n\nIf connection to the reporting system is not resolved, your progress WILL NOT BE RECORDED.'),(!everSuccessful||3<=successiveAlerts)&&DisableCourse('This course is unable connect to the reporting system. Be sure you are connected to the internet.\n\nIf so, go to https://secure.trueoffice.com/test.php. You should see "Connection Successful." If you don’t see this message, contact your IT service team to help troubleshoot access to this site.\n\nIf connection to the reporting system is not resolved, your progress WILL NOT BE RECORDED.',!0))}},window.setGameCompleted=function(){try{isSCORM1dot2?(objAPI=GetAPI(),objAPI.LMSSetValue("cmi.core.exit",""),CheckForLMSError(objAPI,!0),objAPI.LMSCommit(""),CheckForLMSError(objAPI,!0),(isIMC||0<=location.search.indexOf("earlyfinish=1"))&&objAPI.LMSFinish("")):(SCORM2004_objAPI=GetAPI(),SCORM2004_objAPI.SetValue("cmi.exit",""),CheckForLMSError(SCORM2004_objAPI,!0),SCORM2004_objAPI.Commit(""),CheckForLMSError(SCORM2004_objAPI,!0))}catch(e){FatalLMSError("setGameCompleted: "+e)}},window.onbeforeunload=function(){unloading||(unloading=!0,isSCORM1dot2?(objAPI=GetAPI(),objAPI&&objAPI.LMSFinish("")):(SCORM2004_objAPI=GetAPI(),SCORM2004_objAPI&&SCORM2004_objAPI.Terminate("")))},window.onunload=function(){unloading=!0,unloading||(isSCORM1dot2?(objAPI=GetAPI(),objAPI&&objAPI.LMSFinish("")):(SCORM2004_objAPI=GetAPI(),SCORM2004_objAPI&&SCORM2004_objAPI.Terminate("")))},window.setQuizScore=function(e){try{if(isSCORM1dot2){var t=parseFloat(e);objAPI=GetAPI(),objAPI.LMSSetValue("cmi.core.score.raw",t),CheckForLMSError(objAPI,!0),objAPI.LMSSetValue("cmi.core.score.max","100"),CheckForLMSError(objAPI,!1),objAPI.LMSSetValue("cmi.core.score.min","0"),CheckForLMSError(objAPI,!1),objAPI.LMSCommit(""),CheckForLMSError(objAPI,!0)}else t=parseFloat(e),SCORM2004_objAPI=GetAPI(),SCORM2004_objAPI.SetValue("cmi.score.raw",t),CheckForLMSError(SCORM2004_objAPI,!0),SCORM2004_objAPI.SetValue("cmi.score.scaled",t/100),CheckForLMSError(SCORM2004_objAPI,!0),SCORM2004_objAPI.Commit(""),CheckForLMSError(SCORM2004_objAPI,!0)}catch(i){FatalLMSError("setQuizScore: "+i)}},window.bookmarkSetFailureCount=0,window.scorm_bookmark_set=function(e){try{if(isSCORM1dot2){var t=!1,i=0;objAPI=GetAPI(),t||(i++,1==(r=e).length&&(r=e[0]),objAPI.LMSSetValue("cmi.suspend_data",r),t=CheckForLMSError(objAPI,!1)),t||(i++,objAPI.LMSSetValue("cmi.core.exit","suspend"),t=CheckForLMSError(objAPI,!1));var n=!1;return t||(i++,n=objAPI.LMSCommit(""),t=CheckForLMSError(objAPI,!1)),t?(bookmarkSetFailureCount++,bookmarkSetFailureCount>=3&&(1==(a=e.length)&&(a=e[0].length),FatalLMSError("Step: "+i+"; Len: "+a+"; Msg: "+objAPI.LMSGetErrorString(objAPI.LMSGetLastError())))):bookmarkSetFailureCount=0,t||(i++,objAPI.LMSSetValue("cmi.core.session_time",setScormTime())),n}var r,a;return t=!1,i=0,SCORM2004_objAPI=GetAPI(),t||(i++,1==(r=e).length&&(r=e[0]),SCORM2004_objAPI.SetValue("cmi.suspend_data",r),t=CheckForLMSError(SCORM2004_objAPI,!1)),t||(i++,SCORM2004_objAPI.SetValue("cmi.exit","suspend"),t=CheckForLMSError(SCORM2004_objAPI,!1)),n=!1,t||(i++,n=SCORM2004_objAPI.Commit(""),t=CheckForLMSError(SCORM2004_objAPI,!1)),t?(bookmarkSetFailureCount++,bookmarkSetFailureCount>=3&&(1==(a=e.length)&&(a=e[0].length),FatalLMSError("Step: "+i+"; Len: "+a+"; Msg: "+SCORM2004_objAPI.GetErrorString(SCORM2004_objAPI.GetLastError())))):bookmarkSetFailureCount=0,t||(i++,SCORM2004_objAPI.SetValue("cmi.session_time",setScorm2004Time())),n}catch(s){FatalLMSError("scorm_bookmark_set: "+s)}},window.scorm_bookmark_get=function(){if(isSCORM1dot2){objAPI=GetAPI();var e=objAPI.LMSGetValue("cmi.suspend_data");return CheckForLMSError(objAPI,!0),e}SCORM2004_objAPI=GetAPI(),e=SCORM2004_objAPI.GetValue("cmi.suspend_data");var t=SCORM2004_objAPI.GetLastError();return 403==t||"403"==t?e="":CheckForLMSError(SCORM2004_objAPI,!0),e},window.get_learner_name=function(){if(isSCORM1dot2){objAPI=GetAPI();var e=objAPI.LMSGetValue("cmi.core.student_name");return CheckForLMSError(objAPI,!1)?"":e}SCORM2004_objAPI=GetAPI();var t=SCORM2004_objAPI.GetValue("cmi.learner_name");return CheckForLMSError(SCORM2004_objAPI,!1)?"":t},window.get_learner_id=function(){if(isSCORM1dot2){objAPI=GetAPI();var e=objAPI.LMSGetValue("cmi.core.student_id");return CheckForLMSError(objAPI,!1)?"":e}SCORM2004_objAPI=GetAPI();var t=SCORM2004_objAPI.GetValue("cmi.learner_id");return CheckForLMSError(SCORM2004_objAPI,!1)?"":t},window.centisecsToISODuration=function(e){var t,i,n,r,a="P",s=e=Math.max(e,0),o=Math.floor(s/315576e4);return s-=315576e4*o,s-=26298e4*(t=Math.floor(s/26298e4)),s-=864e4*(i=Math.floor(s/864e4)),s-=36e4*(n=Math.floor(s/36e4)),s-=6e3*(r=Math.floor(s/6e3)),o>0&&(a+=o+"Y"),t>0&&(a+=t+"M"),i>0&&(a+=i+"D"),(n>0||r>0||s>0)&&(a+="T",n>0&&(a+=n+"H"),r>0&&(a+=r+"M"),s>0&&(a+=s/100+"S")),"P"==a&&(a="PT0H0M0S"),a},window.ConvertMilliSecondsToSCORMTime=function(e,t){var i,n,r,a,s;return null!=t&&null!=t||(t=!0),n=(e-(r=e%1e3))/1e3%60,intMinutes=(e-r-1e3*n)/6e4%60,1e4==(i=(e-r-1e3*n-6e4*intMinutes)/36e5)&&(i=9999,intMinutes=(e-36e5*i)/6e4,100==intMinutes&&(intMinutes=99),intMinutes=Math.floor(intMinutes),100==(n=(e-36e5*i-6e4*intMinutes)/1e3)&&(n=99),n=Math.floor(n),r=e-36e5*i-6e4*intMinutes-1e3*n),a=Math.floor(r/10),s=prepend(i,4)+":"+prepend(intMinutes,2)+":"+prepend(n,2),t&&(s+="."+a),i>9999&&(s="9999:99:99",t&&(s+=".99")),s},window.prepend=function(e,t){var i,n,r;if((n=(i=new String(e)).length)>t)i=i.substr(0,t);else for(r=n;r<t;r++)i="0"+i;return i},window.setScorm2004Time=function(){var e=(new Date).getTime()-startTimeStamp.getTime(),t=Math.floor(e/10);return centisecsToISODuration(t)},window.setScormTime=function(){var e=(new Date).getTime()-startTimeStamp.getTime();return ConvertMilliSecondsToSCORMTime(e,!1)},window.mixleplex=function(){try{isSCORM1dot2?(objAPI=GetAPI(),objAPI.LMSSetValue("cmi.core.lesson_status",status_f+status_e+status_a),CheckForLMSError(objAPI,!0),objAPI.LMSCommit(""),CheckForLMSError(objAPI,!0)):(SCORM2004_objAPI=GetAPI(),SCORM2004_objAPI.SetValue("cmi.completion_status","completed"),CheckForLMSError(SCORM2004_objAPI,!0),SCORM2004_objAPI.SetValue("cmi.success_status",status_f+status_e+status_a),CheckForLMSError(SCORM2004_objAPI,!0),SCORM2004_objAPI.Commit(""),CheckForLMSError(SCORM2004_objAPI,!0))}catch(e){FatalLMSError("mixleplex: "+e)}},window.setStatusFailed=function(){isSCORM1dot2?(objAPI=GetAPI(),objAPI.LMSSetValue("cmi.core.lesson_status",status_d+status_c+status_b),CheckForLMSError(objAPI,!0),objAPI.LMSCommit(""),CheckForLMSError(objAPI,!0)):(SCORM2004_objAPI=GetAPI(),SCORM2004_objAPI.SetValue("cmi.completion_status","completed"),CheckForLMSError(SCORM2004_objAPI,!0),SCORM2004_objAPI.SetValue("cmi.success_status",status_d+status_c+status_b),CheckForLMSError(SCORM2004_objAPI,!0),SCORM2004_objAPI.Commit(""),CheckForLMSError(SCORM2004_objAPI,!0))}},useOnlineTinCanLibrary=function(){window.getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},window.protocol=getParameterByName("protocol"),isXAPI=!(!protocol||"xAPI"!==protocol),window.unloading=!1,window.startTimeStamp=new Date,completedCourse=!1,window.courseDisabled=!1,window.DisableCourse=function(e,t){document.body.innerHTML="<div class='external-error'><div style='font-size: X-Large;'>ERROR</div><div>"+e+"</div></div>",courseDisabled||(courseDisabled=!0,t&&scorm_bookmark_set(""))},window.Initialize=function(){objAPI=GetAPI();var e=[];e.push({verb:{id:"http://adlnet.gov/expapi/verbs/initialized",display:{"en-US":"initialized"}},context:objAPI.context,result:{duration:"PT0S"}}),objAPI,objAPI.tincan.sendStatements(e,function(e){for(var t=0;t<e.length;t++)null!==e[t].err&&FatalLMSError(e[t].err)})},window.fatalErrorDisplayed=!1,window.FatalLMSError=function(e){fatalErrorDisplayed||(fatalErrorDisplayed=!0,alert("ERROR!\n\nThis course was unable to establish communication with the LMS.\n\nPlease try launching the course again, and if this issue persists, contact your system administrator ("+e+")."),DisableCourse("This course was unable to establish communication with the LMS.\n\nPlease try launching the course again, and if this issue persists, contact your system administrator ("+e+").",!1))},window.CheckForLMSError=function(e,t){var i;return isSCORM1dot2?!(!(i=e.LMSGetLastError())||"0"==i||(t&&FatalLMSError(e.LMSGetErrorString(i)),0)):!(!(i=e.GetLastError())||"0"==i||(t&&FatalLMSError(e.GetErrorString(i)),0))},window.isIMC=/(lms.corpedia.com)|(lmsdemo.corpedia.com)|(www.corpedia.com)/.test(window.location.href);var e=!0;function t(){if(actor=getParameterByName("actor"),learnerID=null,learnerName=null,actor){jsonData=null;try{jsonData=JSON.parse(actor)}catch(n){}jsonData&&(learnerID=jsonData&&jsonData.account&&Array.isArray(jsonData.account)&&jsonData.account[0]&&jsonData.account[0].accountName?jsonData.account[0].accountName:null,learnerID&&learnerID.indexOf("|")&&(learnerID=learnerID.split("|")[1]),learnerName=jsonData&&jsonData.name&&Array.isArray(jsonData.name)&&jsonData.name[0]?jsonData.name[0]:null,learnerID||(learnerID=jsonData&&jsonData.mbox&&Array.isArray(jsonData.mbox)&&jsonData.mbox[0]?jsonData.mbox[0]:null,learnerID&&0==learnerID.indexOf("mailto:")&&(learnerID=learnerID.split(":")[1])),learnerID||(learnerID=jsonData&&jsonData.mbox&&!Array.isArray(jsonData.mbox)?jsonData.mbox:null,learnerID&&0==learnerID.indexOf("mailto:")&&(learnerID=learnerID.split(":")[1]),learnerName=jsonData&&jsonData.name&&!Array.isArray(jsonData.name)?jsonData.name:learnerName))}activityID=getParameterByName("activity_id"),""===activityID&&(activityID=window.override.TinCanActivityID,activityID&&""!==activityID&&(activityID="http://id.tincanapi.com/activity/trueoffice/pulsecourse/"+activityID)),activityID&&""!==activityID||FatalLMSError("No activity ID found.  Expected to find 'activity_id' url parameter or TinCanActivityID defined in override file");var t=new TinCan({url:window.location.href,activity:{id:activityID,definition:{type:"http://adlnet.gov/expapi/activities/course",name:{"en-US":"True Office Course"},description:{"en-US":"True Office Training Course"}}}}),i={contextActivities:{grouping:[{id:activityID}],category:[{id:activityID,definition:{type:"http://id.tincanapi.com/activitytype/source",name:{"en-US":"E-learning course"},description:{"en-US":"True Office Training Course"}}}]}};return xAPI={learnerID:learnerID,learnerName:learnerName,endpoint:getParameterByName("endpoint"),tincan:t,context:i},e||(alert("Actor:\n"+actor),console.log(actor),alert(JSON.stringify(xAPI)),console.log(JSON.stringify(xAPI)),alert(activityID),console.log(activityID),e=!0),xAPI}window.GetAPI=function(){return isXAPI?(apiParams=t(),objAPI=apiParams.learnerID&&apiParams.endpoint?apiParams:null):(apiParams=t(),objAPI=apiParams.learnerID&&apiParams.endpoint?apiParams:null,objAPI&&(isXAPI=!0)),objAPI||unloading||FatalLMSError("API Not Found"),objAPI},window.getUserInfo=function(e){var t=e[0];xAPI=GetAPI();var i="",n="",r=e[1],a=QueryString(),s=read_cookie(GetAnalyticsCookieName());if(t)n=s.username;else{try{n=xAPI.learnerID}catch(o){i+="; learner_id: "+o}""==n&&FatalLMSError("no learner id"),bake_cookie(t,GetAnalyticsCookieName(),s.logId,s.UID,n)}return 0<=location.search.indexOf("showuser=1")&&alert("LMS identified the learner id as:\n"+n),{username:n,customerid:r,custom1:a.c1,custom2:a.c2,custom3:a.c3,lmserrors:i}},window.dataSuccessful=!1,window.everSuccessful=!1,window.lastAlert=null,window.successiveAlerts=0,window.dataSent=function(e){if("success"==e)dataSuccessful=!0,everSuccessful=!0,lastAlert=null,successiveAlerts=0;else if(dataSuccessful)dataSuccessful=!1;else{var t=new Date;(null==lastAlert||t.getTime()-lastAlert.getTime()>1e4)&&(lastAlert=t,successiveAlerts++,alert('This course is unable connect to the reporting system. Be sure you are connected to the internet.\n\nIf so, go to https://secure.trueoffice.com/test.php. You should see "Connection Successful." If you don’t see this message, contact your IT service team to help troubleshoot access to this site.\n\nIf connection to the reporting system is not resolved, your progress WILL NOT BE RECORDED.'),(!everSuccessful||3<=successiveAlerts)&&DisableCourse('This course is unable connect to the reporting system. Be sure you are connected to the internet.\n\nIf so, go to https://secure.trueoffice.com/test.php. You should see "Connection Successful." If you don’t see this message, contact your IT service team to help troubleshoot access to this site.\n\nIf connection to the reporting system is not resolved, your progress WILL NOT BE RECORDED.',!0))}},window.setGameCompleted=function(){completedCourse=!0},window.onbeforeunload=function(){unloading=!0,objAPI=GetAPI();var e=(new Date).getTime()-startTimeStamp.getTime(),t=[];completedCourse||t.push({verb:{id:"http://adlnet.gov/expapi/verbs/suspended",display:{"en-US":"suspended"}},context:objAPI.context,result:{duration:TinCan.Utils.convertMillisecondsToISO8601Duration(e)}}),t.push({verb:{id:"http://adlnet.gov/expapi/verbs/terminated",display:{"en-US":"terminated"}},context:objAPI.context,result:{duration:TinCan.Utils.convertMillisecondsToISO8601Duration(e)}}),objAPI.tincan.sendStatements(t,function(e){})},window.onunload=function(){unloading=!0},window.setQuizScore=function(e){var t=parseFloat(e);try{var i=[];i.push({verb:{id:"http://adlnet.gov/expapi/verbs/scored",display:{"en-US":"scored"}},context:objAPI.context,result:{score:{scaled:t/100,raw:t,min:0,max:100}}}),objAPI.tincan.sendStatements(i,function(e){for(var t=0;t<e.length;t++)null!==e[t].err&&FatalLMSError(e[t].err)})}catch(n){FatalLMSError("setQuizScore: "+n)}},window.bookmarkSetFailureCount=0,window.scorm_bookmark_set=function(e){try{objAPI=GetAPI();var t=e;1==t.length&&(t=e[0]),objAPI.tincan.setState("bookmarking-data",t,{callback:function(e){null!=e?bookmarkSetFailureCount++:bookmarkSetFailureCount=0,bookmarkSetFailureCount>=3&&FatalLMSError("Set bookmark response: "+e)}})}catch(i){FatalLMSError("scorm_bookmark_set: "+i)}},window.scorm_bookmark_get=function(){objAPI=GetAPI();var e=objAPI.tincan.getState("bookmarking-data");return null===e.err&&null!==e.state&&""!==e.state.contents?e.state.contents:""},window.get_learner_name=function(){return GetAPI().learnerName},window.get_learner_id=function(){return GetAPI().learnerID},window.centisecsToISODuration=function(e){var t,i,n,r,a="P",s=e=Math.max(e,0),o=Math.floor(s/315576e4);return s-=315576e4*o,s-=26298e4*(t=Math.floor(s/26298e4)),s-=864e4*(i=Math.floor(s/864e4)),s-=36e4*(n=Math.floor(s/36e4)),s-=6e3*(r=Math.floor(s/6e3)),o>0&&(a+=o+"Y"),t>0&&(a+=t+"M"),i>0&&(a+=i+"D"),(n>0||r>0||s>0)&&(a+="T",n>0&&(a+=n+"H"),r>0&&(a+=r+"M"),s>0&&(a+=s/100+"S")),"P"==a&&(a="PT0H0M0S"),a},window.ConvertMilliSecondsToSCORMTime=function(e,t){var i,n,r,a,s;return null!=t&&null!=t||(t=!0),n=(e-(r=e%1e3))/1e3%60,intMinutes=(e-r-1e3*n)/6e4%60,1e4==(i=(e-r-1e3*n-6e4*intMinutes)/36e5)&&(i=9999,intMinutes=(e-36e5*i)/6e4,100==intMinutes&&(intMinutes=99),intMinutes=Math.floor(intMinutes),100==(n=(e-36e5*i-6e4*intMinutes)/1e3)&&(n=99),n=Math.floor(n),r=e-36e5*i-6e4*intMinutes-1e3*n),a=Math.floor(r/10),s=prepend(i,4)+":"+prepend(intMinutes,2)+":"+prepend(n,2),t&&(s+="."+a),i>9999&&(s="9999:99:99",t&&(s+=".99")),s},window.prepend=function(e,t){var i,n,r;if((n=(i=new String(e)).length)>t)i=i.substr(0,t);else for(r=n;r<t;r++)i="0"+i;return i},window.setScorm2004Time=function(){var e=(new Date).getTime()-startTimeStamp.getTime(),t=Math.floor(e/10);return centisecsToISODuration(t)},window.setScormTime=function(){var e=(new Date).getTime()-startTimeStamp.getTime();return ConvertMilliSecondsToSCORMTime(e,!1)},window.mixleplex=function(){try{objAPI=GetAPI();var e=(new Date).getTime()-startTimeStamp.getTime(),t=[];return t.push({verb:{id:"http://adlnet.gov/expapi/verbs/"+status_f+status_e+status_a,display:{"en-US":status_f+status_e+status_a}},context:objAPI.context,result:{success:!0,duration:TinCan.Utils.convertMillisecondsToISO8601Duration(e)}}),t.push({verb:{id:"http://adlnet.gov/expapi/verbs/completed",display:{"en-US":"completed"}},context:objAPI.context,result:{completion:!0,duration:TinCan.Utils.convertMillisecondsToISO8601Duration(e)}}),void objAPI.tincan.sendStatements(t,function(e){for(var t=0;t<e.length;t++)null!==e[t].err&&FatalLMSError(e[t].err)})}catch(i){FatalLMSError("mixleplex: "+i)}},window.setStatusFailed=function(){objAPI=GetAPI();var e=(new Date).getTime()-startTimeStamp.getTime(),t=[];t.push({verb:{id:"http://adlnet.gov/expapi/verbs/"+status_d+status_c+status_b,display:{"en-US":status_d+status_c+status_b}},context:objAPI.context,result:{success:!1,duration:TinCan.Utils.convertMillisecondsToISO8601Duration(e)}}),t.push({verb:{id:"http://adlnet.gov/expapi/verbs/completed",display:{"en-US":"completed"}},context:objAPI.context,result:{completion:!0,duration:TinCan.Utils.convertMillisecondsToISO8601Duration(e)}}),objAPI.tincan.sendStatements(t,function(e){for(var t=0;t<e.length;t++)null!==e[t].err&&FatalLMSError(e[t].err)})}};findAPI=function(e){var t=null;return!(t=searchForAPI(window,e))&&window.opener&&(t=searchForAPI(window.opener,e)),!t&&window.opener&&window.opener.opener&&(t=searchForAPI(window.opener.opener,e)),t},searchForAPI=function(e,t){var i=null;if(!e)return i;try{i=e[t],isIMC&&(e.closeWindowOnLMSFinish=!1)}catch(n){}for(;!i&&e.parent&&e!=e.parent;){e=e.parent;try{i=e[t],isIMC&&(e.closeWindowOnLMSFinish=!1)}catch(n){}}return i};var CryptoJS=CryptoJS||function(e,t){var i={},n=i.lib={},r=function(){},a=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<e;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new s.init(i,t)}}),o=i.enc={},l=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s.init(i,t/2)}},u=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s.init(i,t)}},c=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,r=i.sigBytes,a=this.blockSize,o=r/(4*a);if(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0),r=e.min(4*(t=o*a),r),t){for(var l=0;l<t;l+=a)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=r}return new s.init(l,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new d.HMAC.init(e,i).finalize(t)}}});var d=i.algo={};return i}(Math);!function(){var e=CryptoJS,t=(r=e.lib).WordArray,i=r.Hasher,n=[],r=e.algo.SHA1=i.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=0;80>u;u++){if(16>u)n[u]=0|e[t+u];else{var c=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=c<<1|c>>>31}c=(r<<5|r>>>27)+l+n[u],c=20>u?c+(1518500249+(a&s|~a&o)):40>u?c+(1859775393+(a^s^o)):60>u?c+((a&s|a&o|s&o)-1894007588):c+((a^s^o)-899497514),l=o,o=s,s=a<<30|a>>>2,a=r,r=c}i[0]=i[0]+r|0,i[1]=i[1]+a|0,i[2]=i[2]+s|0,i[3]=i[3]+o|0,i[4]=i[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(r),e.HmacSHA1=i._createHmacHelper(r)}();var CryptoJS=CryptoJS||function(e,t){var i={},n=i.lib={},r=function(){},a=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<e;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new s.init(i,t)}}),o=i.enc={},l=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s.init(i,t/2)}},u=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s.init(i,t)}},c=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,r=i.sigBytes,a=this.blockSize,o=r/(4*a);if(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0),r=e.min(4*(t=o*a),r),t){for(var l=0;l<t;l+=a)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=r}return new s.init(l,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new d.HMAC.init(e,i).finalize(t)}}});var d=i.algo={};return i}(Math),TinCan;!function(e){for(var t=CryptoJS,i=(r=t.lib).WordArray,n=r.Hasher,r=t.algo,a=[],s=[],o=function(e){return 4294967296*(e-(0|e))|0},l=2,u=0;64>u;){var c;e:{for(var h=e.sqrt(c=l),d=2;d<=h;d++)if(!(c%d)){c=!1;break e}c=!0}c&&(8>u&&(a[u]=o(e.pow(l,.5))),s[u]=o(e.pow(l,1/3)),u++),l++}var p=[];r=r.SHA256=n.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],a=i[2],o=i[3],l=i[4],u=i[5],c=i[6],h=i[7],d=0;64>d;d++){if(16>d)p[d]=0|e[t+d];else{var f=p[d-15],m=p[d-2];p[d]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+p[d-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+p[d-16]}f=h+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&u^~l&c)+s[d]+p[d],m=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&r^n&a^r&a),h=c,c=u,u=l,l=o+f|0,o=a,a=r,r=n,n=f+m|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+o|0,i[4]=i[4]+l|0,i[5]=i[5]+u|0,i[6]=i[6]+c|0,i[7]=i[7]+h|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(n/4294967296),i[15+(r+64>>>9<<4)]=n,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=n._createHelper(r),t.HmacSHA256=n._createHmacHelper(r)}(Math),function(){var e=CryptoJS.lib.WordArray;CryptoJS.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var r=[],a=0;a<i;a+=3)for(var s=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,o=0;o<4&&a+.75*o<i;o++)r.push(n.charAt(s>>>6*(3-o)&63));var l=n.charAt(64);if(l)for(;r.length%4;)r.push(l);return r.join("")},parse:function(t){var i=t.length,n=this._map,r=n.charAt(64);if(r){var a=t.indexOf(r);-1!=a&&(i=a)}for(var s=[],o=0,l=0;l<i;l++)if(l%4){var u=n.indexOf(t.charAt(l-1))<<l%4*2,c=n.indexOf(t.charAt(l))>>>6-l%4*2;s[o>>>2]|=(u|c)<<24-o%4*8,o++}return e.create(s,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(){if("function"==typeof ArrayBuffer){var e=CryptoJS.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var i=e.byteLength,n=[],r=0;r<i;r++)n[r>>>2]|=e[r]<<24-r%4*8;t.call(this,n,i)}else t.apply(this,arguments)}).prototype=e}}(),function(){"use strict";var e={statementId:!0,voidedStatementId:!0,verb:!0,object:!0,registration:!0,context:!0,actor:!0,since:!0,until:!0,limit:!0,authoritative:!0,sparse:!0,instructor:!0,ascending:!0,continueToken:!0,agent:!0,activityId:!0,stateId:!0,profileId:!0,activity_platform:!0,grouping:!0,"Accept-Language":!0};(TinCan=function(e){this.log("constructor"),this.recordStores=[],this.actor=null,this.activity=null,this.registration=null,this.context=null,this.init(e)}).prototype={LOG_SRC:"TinCan",log:function(e,t){TinCan.DEBUG&&"undefined"!=typeof console&&console.log&&(t=t||this.LOG_SRC||"TinCan",console.log("TinCan."+t+": "+e))},init:function(e){var t;if(this.log("init"),(e=e||{}).hasOwnProperty("url")&&""!==e.url&&this._initFromQueryString(e.url),e.hasOwnProperty("recordStores")&&void 0!==e.recordStores)for(t=0;t<e.recordStores.length;t+=1)this.addRecordStore(e.recordStores[t]);e.hasOwnProperty("activity")&&(this.activity=e.activity instanceof TinCan.Activity?e.activity:new TinCan.Activity(e.activity)),e.hasOwnProperty("actor")&&(this.actor=e.actor instanceof TinCan.Agent?e.actor:new TinCan.Agent(e.actor)),e.hasOwnProperty("context")&&(this.context=e.context instanceof TinCan.Context?e.context:new TinCan.Context(e.context)),e.hasOwnProperty("registration")&&(this.registration=e.registration)},_initFromQueryString:function(t){this.log("_initFromQueryString");var i,n,r,a=TinCan.Utils.parseURL(t).params,s=["endpoint","auth"],o={},l=null;if(a.hasOwnProperty("actor")){this.log("_initFromQueryString - found actor: "+a.actor);try{this.actor=TinCan.Agent.fromJSON(a.actor),delete a.actor}catch(e){this.log("_initFromQueryString - failed to set actor: "+e)}}if(a.hasOwnProperty("activity_id")&&(this.activity=new TinCan.Activity({id:a.activity_id}),delete a.activity_id),(a.hasOwnProperty("activity_platform")||a.hasOwnProperty("registration")||a.hasOwnProperty("grouping"))&&(r={},a.hasOwnProperty("activity_platform")&&(r.platform=a.activity_platform,delete a.activity_platform),a.hasOwnProperty("registration")&&(r.registration=this.registration=a.registration,delete a.registration),a.hasOwnProperty("grouping")&&(r.contextActivities={},r.contextActivities.grouping=a.grouping,delete a.grouping),this.context=new TinCan.Context(r)),a.hasOwnProperty("endpoint")){for(i=0;i<s.length;i+=1)a.hasOwnProperty(n=s[i])&&(o[n]=a[n],delete a[n]);for(i in a)a.hasOwnProperty(i)&&(e.hasOwnProperty(i)?delete a[i]:(l=l||{})[i]=a[i]);null!==l&&(o.extended=l),o.allowFail=!1,this.addRecordStore(o)}},addRecordStore:function(e){var t;this.log("addRecordStore"),t=e instanceof TinCan.LRS?e:new TinCan.LRS(e),this.recordStores.push(t)},prepareStatement:function(e){return this.log("prepareStatement"),e instanceof TinCan.Statement||(e=new TinCan.Statement(e)),null===e.actor&&null!==this.actor&&(e.actor=this.actor),null===e.target&&null!==this.activity&&(e.target=this.activity),null!==this.context&&(null===e.context?e.context=this.context:(null===e.context.registration&&(e.context.registration=this.context.registration),null===e.context.platform&&(e.context.platform=this.context.platform),null!==this.context.contextActivities&&(null===e.context.contextActivities?e.context.contextActivities=this.context.contextActivities:(null!==this.context.contextActivities.grouping&&null===e.context.contextActivities.grouping&&(e.context.contextActivities.grouping=this.context.contextActivities.grouping),null!==this.context.contextActivities.parent&&null===e.context.contextActivities.parent&&(e.context.contextActivities.parent=this.context.contextActivities.parent),null!==this.context.contextActivities.other&&null===e.context.contextActivities.other&&(e.context.contextActivities.other=this.context.contextActivities.other))))),e},sendStatement:function(e,t){this.log("sendStatement");var i,n,r=this,a=this.prepareStatement(e),s=this.recordStores.length,o=[],l=[];if(s>0)for("function"==typeof t&&(n=function(e,i){r.log("sendStatement - callbackWrapper: "+s),s>1?(s-=1,l.push({err:e,xhr:i})):1===s?(l.push({err:e,xhr:i}),t.apply(this,[l,a])):r.log("sendStatement - unexpected record store count: "+s)}),i=0;i<s;i+=1)o.push(this.recordStores[i].saveStatement(a,{callback:n}));else this.log("[warning] sendStatement: No LRSs added yet (statement not sent)"),"function"==typeof t&&t.apply(this,[null,a]);return{statement:a,results:o}},getStatement:function(e,t,i){return this.log("getStatement"),(i=i||{}).params=i.params||{},this.recordStores.length>0?this.recordStores[0].retrieveStatement(e,{callback:t,params:i.params}):void this.log("[warning] getStatement: No LRSs added yet (statement not retrieved)")},voidStatement:function(e,t,i){this.log("voidStatement");var n,r,a,s,o=this,l=this.recordStores.length,u=[],c=[];if(e instanceof TinCan.Statement&&(e=e.id),void 0!==i.actor?n=i.actor:null!==this.actor&&(n=this.actor),r=new TinCan.Statement({actor:n,verb:{id:"http://adlnet.gov/expapi/verbs/voided"},target:{objectType:"StatementRef",id:e}}),l>0)for("function"==typeof t&&(s=function(e,i){o.log("voidStatement - callbackWrapper: "+l),l>1?(l-=1,c.push({err:e,xhr:i})):1===l?(c.push({err:e,xhr:i}),t.apply(this,[c,r])):o.log("voidStatement - unexpected record store count: "+l)}),a=0;a<l;a+=1)u.push(this.recordStores[a].saveStatement(r,{callback:s}));else this.log("[warning] voidStatement: No LRSs added yet (statement not sent)"),"function"==typeof t&&t.apply(this,[null,r]);return{statement:r,results:u}},getVoidedStatement:function(e,t){return this.log("getVoidedStatement"),this.recordStores.length>0?this.recordStores[0].retrieveVoidedStatement(e,{callback:t}):void this.log("[warning] getVoidedStatement: No LRSs added yet (statement not retrieved)")},sendStatements:function(e,t){this.log("sendStatements");var i,n,r=this,a=[],s=this.recordStores.length,o=[],l=[];if(0===e.length)"function"==typeof t&&t.apply(this,[null,a]);else{for(i=0;i<e.length;i+=1)a.push(this.prepareStatement(e[i]));if(s>0)for("function"==typeof t&&(n=function(e,i){r.log("sendStatements - callbackWrapper: "+s),s>1?(s-=1,l.push({err:e,xhr:i})):1===s?(l.push({err:e,xhr:i}),t.apply(this,[l,a])):r.log("sendStatements - unexpected record store count: "+s)}),i=0;i<s;i+=1)o.push(this.recordStores[i].saveStatements(a,{callback:n}));else this.log("[warning] sendStatements: No LRSs added yet (statements not sent)"),"function"==typeof t&&t.apply(this,[null,a])}return{statements:a,results:o}},getStatements:function(e){this.log("getStatements");var t,i,n={};return this.recordStores.length>0?(t=this.recordStores[0],i=(e=e||{}).params||{},e.sendActor&&null!==this.actor&&("0.9"===t.version||"0.95"===t.version?i.actor=this.actor:i.agent=this.actor),e.sendActivity&&null!==this.activity&&("0.9"===t.version||"0.95"===t.version?i.target=this.activity:i.activity=this.activity),void 0===i.registration&&null!==this.registration&&(i.registration=this.registration),n={params:i},void 0!==e.callback&&(n.callback=e.callback),t.queryStatements(n)):void this.log("[warning] getStatements: No LRSs added yet (statements not read)")},getState:function(e,t){var i,n;return this.log("getState"),this.recordStores.length>0?(n=this.recordStores[0],i={agent:void 0!==(t=t||{}).agent?t.agent:this.actor,activity:void 0!==t.activity?t.activity:this.activity},void 0!==t.registration?i.registration=t.registration:null!==this.registration&&(i.registration=this.registration),void 0!==t.callback&&(i.callback=t.callback),n.retrieveState(e,i)):void this.log("[warning] getState: No LRSs added yet (state not retrieved)")},setState:function(e,t,i){var n,r;return this.log("setState"),this.recordStores.length>0?(r=this.recordStores[0],n={agent:void 0!==(i=i||{}).agent?i.agent:this.actor,activity:void 0!==i.activity?i.activity:this.activity},void 0!==i.registration?n.registration=i.registration:null!==this.registration&&(n.registration=this.registration),void 0!==i.lastSHA1&&(n.lastSHA1=i.lastSHA1),void 0!==i.contentType&&(n.contentType=i.contentType,void 0!==i.overwriteJSON&&!i.overwriteJSON&&TinCan.Utils.isApplicationJSON(i.contentType)&&(n.method="POST")),void 0!==i.callback&&(n.callback=i.callback),r.saveState(e,t,n)):void this.log("[warning] setState: No LRSs added yet (state not saved)")},deleteState:function(e,t){var i,n;return this.log("deleteState"),this.recordStores.length>0?(n=this.recordStores[0],i={agent:void 0!==(t=t||{}).agent?t.agent:this.actor,activity:void 0!==t.activity?t.activity:this.activity},void 0!==t.registration?i.registration=t.registration:null!==this.registration&&(i.registration=this.registration),void 0!==t.callback&&(i.callback=t.callback),n.dropState(e,i)):void this.log("[warning] deleteState: No LRSs added yet (state not deleted)")},getActivityProfile:function(e,t){var i,n;return this.log("getActivityProfile"),this.recordStores.length>0?(n=this.recordStores[0],i={activity:void 0!==(t=t||{}).activity?t.activity:this.activity},void 0!==t.callback&&(i.callback=t.callback),n.retrieveActivityProfile(e,i)):void this.log("[warning] getActivityProfile: No LRSs added yet (activity profile not retrieved)")},setActivityProfile:function(e,t,i){var n,r;return this.log("setActivityProfile"),this.recordStores.length>0?(r=this.recordStores[0],n={activity:void 0!==(i=i||{}).activity?i.activity:this.activity},void 0!==i.callback&&(n.callback=i.callback),void 0!==i.lastSHA1&&(n.lastSHA1=i.lastSHA1),void 0!==i.contentType&&(n.contentType=i.contentType,void 0!==i.overwriteJSON&&!i.overwriteJSON&&TinCan.Utils.isApplicationJSON(i.contentType)&&(n.method="POST")),r.saveActivityProfile(e,t,n)):void this.log("[warning] setActivityProfile: No LRSs added yet (activity profile not saved)")},deleteActivityProfile:function(e,t){var i,n;return this.log("deleteActivityProfile"),this.recordStores.length>0?(n=this.recordStores[0],i={activity:void 0!==(t=t||{}).activity?t.activity:this.activity},void 0!==t.callback&&(i.callback=t.callback),n.dropActivityProfile(e,i)):void this.log("[warning] deleteActivityProfile: No LRSs added yet (activity profile not deleted)")},getAgentProfile:function(e,t){var i,n;return this.log("getAgentProfile"),this.recordStores.length>0?(n=this.recordStores[0],i={agent:void 0!==(t=t||{}).agent?t.agent:this.actor},void 0!==t.callback&&(i.callback=t.callback),n.retrieveAgentProfile(e,i)):void this.log("[warning] getAgentProfile: No LRSs added yet (agent profile not retrieved)")},setAgentProfile:function(e,t,i){var n,r;return this.log("setAgentProfile"),this.recordStores.length>0?(r=this.recordStores[0],n={agent:void 0!==(i=i||{}).agent?i.agent:this.actor},void 0!==i.callback&&(n.callback=i.callback),void 0!==i.lastSHA1&&(n.lastSHA1=i.lastSHA1),void 0!==i.contentType&&(n.contentType=i.contentType,void 0!==i.overwriteJSON&&!i.overwriteJSON&&TinCan.Utils.isApplicationJSON(i.contentType)&&(n.method="POST")),r.saveAgentProfile(e,t,n)):void this.log("[warning] setAgentProfile: No LRSs added yet (agent profile not saved)")},deleteAgentProfile:function(e,t){var i,n;return this.log("deleteAgentProfile"),this.recordStores.length>0?(n=this.recordStores[0],i={agent:void 0!==(t=t||{}).agent?t.agent:this.actor},void 0!==t.callback&&(i.callback=t.callback),n.dropAgentProfile(e,i)):void this.log("[warning] deleteAgentProfile: No LRSs added yet (agent profile not deleted)")}},TinCan.DEBUG=!1,TinCan.enableDebug=function(){TinCan.DEBUG=!0},TinCan.disableDebug=function(){TinCan.DEBUG=!1},TinCan.versions=function(){return["1.0.2","1.0.1","1.0.0","0.95","0.9"]},"object"==typeof module&&(module.exports=TinCan)}(),function(){"use strict";TinCan.Utils={defaultEncoding:"utf8",getUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},getISODateString:function(e){function t(e,t){var i,n;for(null!=e||(e=0),null!=t||(t=2),i=Math.pow(10,t-1),n=e.toString();e<i&&i>1;)n="0"+n,i/=10;return n}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+t(e.getUTCMilliseconds(),3)+"Z"},convertISO8601DurationToMilliseconds:function(e){var t,i,n,r,a=e.indexOf("-")>=0,s=e.indexOf("T"),o=e.indexOf("H"),l=e.indexOf("M"),u=e.indexOf("S");if(-1===s||-1!==l&&l<s||-1!==e.indexOf("D")||-1!==e.indexOf("Y"))throw new Error("ISO 8601 timestamps including years, months and/or days are not currently supported");return-1===o?(o=s,t=0):t=parseInt(e.slice(s+1,o),10),-1===l?(l=s,i=0):i=parseInt(e.slice(o+1,l),10),n=parseFloat(e.slice(l+1,u)),r=parseInt(1e3*(60*(60*t+i)+n),10),isNaN(r)&&(r=0),a&&(r*=-1),r},convertMillisecondsToISO8601Duration:function(e){var t,i,n,r=parseInt(e,10),a="",s="";return(n=Math.round(r/10))<0&&(a="-",n*=-1),s=a+"PT",(t=parseInt(n/36e4,10))>0&&(s+=t+"H"),(i=parseInt(n%36e4/6e3,10))>0&&(s+=i+"M"),s+(n%36e4%6e3/100+"S")},getSHA1String:function(e){return CryptoJS.SHA1(e).toString(CryptoJS.enc.Hex)},getSHA256String:function(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)&&(e=CryptoJS.lib.WordArray.create(e)),CryptoJS.SHA256(e).toString(CryptoJS.enc.Hex)},getBase64String:function(e){return CryptoJS.enc.Base64.stringify(CryptoJS.enc.Latin1.parse(e))},getLangDictionaryValue:function(e,t){var i,n=this[e];if(void 0!==t&&void 0!==n[t])return n[t];if(void 0!==n.und)return n.und;if(void 0!==n["en-US"])return n["en-US"];for(i in n)if(n.hasOwnProperty(i))return n[i];return""},parseURL:function(e,t){var i,n,r,a,s="/"===e.charAt(0),o=["(/[^?#]*)","(\\?[^#]*|)","(#.*|)$"],l=/\+/g,u=/([^&=]+)=?([^&]*)/g,c=function(e){return decodeURIComponent(e.replace(l," "))};if(t=t||{},s){if(void 0===t.allowRelative||!t.allowRelative)throw new Error("Refusing to parse relative URL without 'allowRelative' option")}else o.unshift("^(https?:)//","(([^:/?#]*)(?::([0-9]+))?)"),-1===e.indexOf("/",8)&&(e+="/");if(i=new RegExp(o.join("")),null===(n=e.match(i)))throw new Error("Unable to parse URL regular expression did not match: '"+e+"'");if(s?(r={protocol:null,host:null,hostname:null,port:null,path:null,pathname:n[1],search:n[2],hash:n[3],params:{}}).path=r.pathname:(r={protocol:n[1],host:n[2],hostname:n[3],port:n[4],pathname:n[5],search:n[6],hash:n[7],params:{}}).path=r.protocol+"//"+r.host+r.pathname,""!==r.search)for(;a=u.exec(r.search.substring(1));)r.params[c(a[1])]=c(a[2]);return r},getServerRoot:function(e){var t=e.split("/");return t[0]+"//"+t[2]},getContentTypeFromHeader:function(e){return String(e).split(";")[0]},isApplicationJSON:function(e){return 0===TinCan.Utils.getContentTypeFromHeader(e).toLowerCase().indexOf("application/json")},stringToArrayBuffer:function(){TinCan.prototype.log("stringToArrayBuffer not overloaded - no environment loaded?")},stringFromArrayBuffer:function(){TinCan.prototype.log("stringFromArrayBuffer not overloaded - no environment loaded?")}}}(),function(){"use strict";var e=TinCan.LRS=function(e){this.log("constructor"),this.endpoint=null,this.version=null,this.auth=null,this.allowFail=!0,this.extended=null,this.init(e)};e.prototype={LOG_SRC:"LRS",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=TinCan.versions(),n=!1;if((e=e||{}).hasOwnProperty("alertOnRequestFailure")&&this.log("'alertOnRequestFailure' is deprecated (alerts have been removed) no need to set it now"),!e.hasOwnProperty("endpoint")||null===e.endpoint||""===e.endpoint)throw this.log("[error] LRS invalid: no endpoint"),{code:3,mesg:"LRS invalid: no endpoint"};if(this.endpoint=String(e.endpoint),"/"!==this.endpoint.slice(-1)&&(this.log("adding trailing slash to endpoint"),this.endpoint+="/"),e.hasOwnProperty("allowFail")&&(this.allowFail=e.allowFail),e.hasOwnProperty("auth")?this.auth=e.auth:e.hasOwnProperty("username")&&e.hasOwnProperty("password")&&(this.auth="Basic "+TinCan.Utils.getBase64String(e.username+":"+e.password)),e.hasOwnProperty("extended")&&(this.extended=e.extended),this._initByEnvironment(e),void 0!==e.version){for(this.log("version: "+e.version),t=0;t<i.length;t+=1)if(i[t]===e.version){n=!0;break}if(!n)throw this.log("[error] LRS invalid: version not supported ("+e.version+")"),{code:5,mesg:"LRS invalid: version not supported ("+e.version+")"};this.version=e.version}else this.version=i[0]},_getBoundary:function(){return TinCan.Utils.getUUID().replace(/-/g,"")},_initByEnvironment:function(){this.log("_initByEnvironment not overloaded - no environment loaded?")},_makeRequest:function(){this.log("_makeRequest not overloaded - no environment loaded?")},_getMultipartRequestData:function(){this.log("_getMultipartRequestData not overloaded - no environment loaded?")},_IEModeConversion:function(){this.log("_IEModeConversion not overloaded - browser environment not loaded.")},_processGetStatementResult:function(e,t){var i,n,r,a,s={};if(!t.attachments)return TinCan.Statement.fromJSON(e.responseText);for(i=e.getResponseHeader("Content-Type").split("boundary=")[1],n=this._parseMultipart(i,e.response),r=JSON.parse(n[0].body),a=1;a<n.length;a+=1)s[n[a].headers["X-Experience-API-Hash"]]=n[a].body;return this._assignAttachmentContent([r],s),new TinCan.Statement(r)},sendRequest:function(e){this.log("sendRequest");var t,i=this.endpoint+e.url,n={};if(0===e.url.indexOf("http")&&(i=e.url),null!==this.extended)for(t in e.params=e.params||{},this.extended)this.extended.hasOwnProperty(t)&&(e.params.hasOwnProperty(t)||null!==this.extended[t]&&(e.params[t]=this.extended[t]));for(t in n.Authorization=this.auth,"0.9"!==this.version&&(n["X-Experience-API-Version"]=this.version),e.headers)e.headers.hasOwnProperty(t)&&(n[t]=e.headers[t]);return this._makeRequest(i,n,e)},about:function(e){var t,i,n;if(this.log("about"),t={url:"about",method:"GET",params:{}},void 0!==(e=e||{}).callback&&(t.callback=n=function(t,i){var n=i;null===t&&(n=TinCan.About.fromJSON(i.responseText)),e.callback(t,n)}),i=this.sendRequest(t),!n)return null===i.err&&(i.xhr=TinCan.About.fromJSON(i.xhr.responseText)),i},saveStatement:function(e,t){this.log("saveStatement");var i,n,r,a={url:"statements",headers:{}},s=[];t=t||{};try{i=e.asVersion(this.version)}catch(e){return this.allowFail?(this.log("[warning] statement could not be serialized in version ("+this.version+"): "+e),void 0!==t.callback?void t.callback(null,null):{err:null,xhr:null}):(this.log("[error] statement could not be serialized in version ("+this.version+"): "+e),void 0!==t.callback?void t.callback(e,null):{err:e,xhr:null})}if(i.hasOwnProperty("attachments")&&e.hasAttachmentWithContent()){for(n=this._getBoundary(),a.headers["Content-Type"]="multipart/mixed; boundary="+n,r=0;r<e.attachments.length;r+=1)null!==e.attachments[r].content&&s.push(e.attachments[r]);try{a.data=this._getMultipartRequestData(n,i,s)}catch(e){return this.allowFail?(this.log("[warning] multipart request data could not be created (attachments probably not supported): "+e),void 0!==t.callback?void t.callback(null,null):{err:null,xhr:null}):(this.log("[error] multipart request data could not be created (attachments probably not supported): "+e),void 0!==t.callback?void t.callback(e,null):{err:e,xhr:null})}}else a.headers["Content-Type"]="application/json",a.data=JSON.stringify(i);return null!==e.id?(a.method="PUT",a.params={statementId:e.id}):a.method="POST",void 0!==t.callback&&(a.callback=t.callback),this.sendRequest(a)},retrieveStatement:function(e,t){this.log("retrieveStatement");var i,n,r,a=this;return(t=t||{}).params=t.params||{},i={url:"statements",method:"GET",params:{statementId:e}},t.params.attachments&&(i.params.attachments=!0,i.expectMultipart=!0),void 0!==t.callback&&(i.callback=r=function(e,i){var n=i;null===e&&(n=a._processGetStatementResult(i,t.params)),t.callback(e,n)}),n=this.sendRequest(i),r||(n.statement=null,null===n.err&&(n.statement=a._processGetStatementResult(n.xhr,t.params))),n},retrieveVoidedStatement:function(e,t){this.log("retrieveVoidedStatement");var i,n,r,a=this;return(t=t||{}).params=t.params||{},i={url:"statements",method:"GET",params:{}},"0.9"===this.version||"0.95"===this.version?i.params.statementId=e:(i.params.voidedStatementId=e,t.params.attachments&&(i.params.attachments=!0,i.expectMultipart=!0)),void 0!==t.callback&&(i.callback=r=function(e,i){var n=i;null===e&&(n=a._processGetStatementResult(i,t.params)),t.callback(e,n)}),n=this.sendRequest(i),r||(n.statement=null,null===n.err&&(n.statement=a._processGetStatementResult(n.xhr,t.params))),n},saveStatements:function(e,t){this.log("saveStatements");var i,n,r,a,s={url:"statements",method:"POST",headers:{}},o=[],l=[];if(t=t||{},0===e.length)return void 0!==t.callback?void t.callback(new Error("no statements"),null):{err:new Error("no statements"),xhr:null};for(r=0;r<e.length;r+=1){try{i=e[r].asVersion(this.version)}catch(e){return this.allowFail?(this.log("[warning] statement could not be serialized in version ("+this.version+"): "+e),void 0!==t.callback?void t.callback(null,null):{err:null,xhr:null}):(this.log("[error] statement could not be serialized in version ("+this.version+"): "+e),void 0!==t.callback?void t.callback(e,null):{err:e,xhr:null})}if(e[r].hasAttachmentWithContent())for(a=0;a<e[r].attachments.length;a+=1)null!==e[r].attachments[a].content&&l.push(e[r].attachments[a]);o.push(i)}if(0!==l.length){n=this._getBoundary(),s.headers["Content-Type"]="multipart/mixed; boundary="+n;try{s.data=this._getMultipartRequestData(n,o,l)}catch(e){return this.allowFail?(this.log("[warning] multipart request data could not be created (attachments probably not supported): "+e),void 0!==t.callback?void t.callback(null,null):{err:null,xhr:null}):(this.log("[error] multipart request data could not be created (attachments probably not supported): "+e),void 0!==t.callback?void t.callback(e,null):{err:e,xhr:null})}}else s.headers["Content-Type"]="application/json",s.data=JSON.stringify(o);return void 0!==t.callback&&(s.callback=t.callback),this.sendRequest(s)},queryStatements:function(e){this.log("queryStatements");var t,i,n,r=this;(e=e||{}).params=e.params||{};try{t=this._queryStatementsRequestCfg(e),e.params.attachments&&(t.expectMultipart=!0)}catch(t){return this.log("[error] Query statements failed - "+t),void 0!==e.callback&&e.callback(t,{}),{err:t,statementsResult:null}}return void 0!==e.callback&&(t.callback=n=function(t,i){var n,a,s,o,l=i,u={};if(null===t)if(e.params.attachments){for(a=i.getResponseHeader("Content-Type").split("boundary=")[1],n=r._parseMultipart(a,i.response),s=JSON.parse(n[0].body),o=1;o<n.length;o+=1)u[n[o].headers["X-Experience-API-Hash"]]=n[o].body;for(r._assignAttachmentContent(s.statements,u),l=new TinCan.StatementsResult({statements:s.statements}),o=0;o<l.statements.length;o+=1)l.statements[o]instanceof TinCan.Statement||(l.statements[o]=new TinCan.Statement(l.statements[o]))}else l=TinCan.StatementsResult.fromJSON(i.responseText);e.callback(t,l)}),(i=this.sendRequest(t)).config=t,n||(i.statementsResult=null,null===i.err&&(i.statementsResult=TinCan.StatementsResult.fromJSON(i.xhr.responseText))),i},_queryStatementsRequestCfg:function(e){this.log("_queryStatementsRequestCfg");var t,i,n={},r={url:"statements",method:"GET",params:n},a=["agent","actor","object","instructor"],s=["verb","activity"],o=["registration","context","since","until","limit","authoritative","sparse","ascending","related_activities","related_agents","format","attachments"],l={verb:!0,registration:!0,since:!0,until:!0,limit:!0,ascending:!0},u={.9:{supported:{actor:!0,instructor:!0,target:!0,object:!0,context:!0,authoritative:!0,sparse:!0}},"1.0.0":{supported:{agent:!0,activity:!0,related_activities:!0,related_agents:!0,format:!0,attachments:!0}}};for(i in u[.95]=u[.9],u["1.0.1"]=u["1.0.0"],u["1.0.2"]=u["1.0.0"],e.params.hasOwnProperty("target")&&(e.params.object=e.params.target),e.params)if(e.params.hasOwnProperty(i)&&void 0===l[i]&&void 0===u[this.version].supported[i])throw"Unrecognized query parameter configured: "+i;for(t=0;t<a.length;t+=1)void 0!==e.params[a[t]]&&(n[a[t]]=JSON.stringify(e.params[a[t]].asVersion(this.version)));for(t=0;t<s.length;t+=1)void 0!==e.params[s[t]]&&(n[s[t]]=void 0===e.params[s[t]].id?e.params[s[t]]:e.params[s[t]].id);for(t=0;t<o.length;t+=1)null!=e.params[o[t]]&&(n[o[t]]=e.params[o[t]]);return r},_assignAttachmentContent:function(e,t){var i,n;for(i=0;i<e.length;i+=1)if(e[i].hasOwnProperty("attachments")&&null!==e[i].attachments)for(n=0;n<e[i].attachments.length;n+=1)t.hasOwnProperty(e[i].attachments[n].sha2)&&(e[i].attachments[n].content=t[e[i].attachments[n].sha2])},_parseMultipart:function(e,t){var i,n,r,a,s,o,l,u,c,h,d,p="--"+e,f=[];for(i=new Uint8Array(t),r=(n=this.__uint8ToString(i)).indexOf(p+"--"),a=n.indexOf(p);-1!==a;)s=n.indexOf(p,a+p.length),o=a+p.length+2,u=(l=n.indexOf("\r\n\r\n",a))+2+2,c=s-2,h=this._parseHeaders(this.__uint8ToString(new Uint8Array(t.slice(o,l)))),d=t.slice(u,c),0===f.length&&(d=TinCan.Utils.stringFromArrayBuffer(d)),f.push({headers:h,body:d}),a=s===r?-1:s;return f},__uint8ToString:function(e){var t,i="",n=e.byteLength;for(t=0;t<n;t+=1)i+=String.fromCharCode(e[t]);return i},_parseHeaders:function(e){var t,i,n,r={};for(t=e.split("\n"),n=0;n<t.length;n+=1)(null!==(i=t[n].split(":",2))[1]||"\t"===i[0].substring(0,1))&&(r[i[0]]=i[1].replace(/^\s+|\s+$/g,""));return r},moreStatements:function(e){var t,i,n,r,a;return this.log("moreStatements: "+e.url),r=TinCan.Utils.parseURL((e=e||{}).url,{allowRelative:!0}),a=TinCan.Utils.getServerRoot(this.endpoint),0===r.path.indexOf("/statements")&&(r.path=this.endpoint.replace(a,"")+r.path,this.log("converting non-standard more URL to "+r.path)),0!==r.path.indexOf("/")&&(r.path="/"+r.path),t={method:"GET",url:a+r.path,params:r.params},void 0!==e.callback&&(t.callback=n=function(t,i){var n=i;null===t&&(n=TinCan.StatementsResult.fromJSON(i.responseText)),e.callback(t,n)}),(i=this.sendRequest(t)).config=t,n||(i.statementsResult=null,null===i.err&&(i.statementsResult=TinCan.StatementsResult.fromJSON(i.xhr.responseText))),i},retrieveState:function(e,t){this.log("retrieveState");var i,n,r,a={},s={},o=this;if(r=t.requestHeaders||{},a={stateId:e,activityId:t.activity.id},"0.9"===this.version?a.actor=JSON.stringify(t.agent.asVersion(this.version)):a.agent=JSON.stringify(t.agent.asVersion(this.version)),null!=t.registration&&("0.9"===this.version?a.registrationId=t.registration:a.registration=t.registration),s={url:"activities/state",method:"GET",params:a,ignore404:!0,headers:r},void 0!==t.callback&&(s.callback=n=function(i,n){var r=n;if(null===i)if(404===n.status)r=null;else if((r=new TinCan.State({id:e,contents:n.responseText})).etag=void 0!==n.getResponseHeader&&null!==n.getResponseHeader("ETag")&&""!==n.getResponseHeader("ETag")?n.getResponseHeader("ETag"):'"'+TinCan.Utils.getSHA1String(n.responseText)+'"',void 0!==n.contentType?r.contentType=n.contentType:void 0!==n.getResponseHeader&&null!==n.getResponseHeader("Content-Type")&&""!==n.getResponseHeader("Content-Type")&&(r.contentType=n.getResponseHeader("Content-Type")),TinCan.Utils.isApplicationJSON(r.contentType))try{r.contents=JSON.parse(r.contents)}catch(e){o.log("retrieveState - failed to deserialize JSON: "+e)}t.callback(i,r)}),i=this.sendRequest(s),!n&&(i.state=null,null===i.err&&404!==i.xhr.status&&(i.state=new TinCan.State({id:e,contents:i.xhr.responseText}),i.state.etag=void 0!==i.xhr.getResponseHeader&&null!==i.xhr.getResponseHeader("ETag")&&""!==i.xhr.getResponseHeader("ETag")?i.xhr.getResponseHeader("ETag"):'"'+TinCan.Utils.getSHA1String(i.xhr.responseText)+'"',void 0!==i.xhr.contentType?i.state.contentType=i.xhr.contentType:void 0!==i.xhr.getResponseHeader&&null!==i.xhr.getResponseHeader("Content-Type")&&""!==i.xhr.getResponseHeader("Content-Type")&&(i.state.contentType=i.xhr.getResponseHeader("Content-Type")),TinCan.Utils.isApplicationJSON(i.state.contentType))))try{i.state.contents=JSON.parse(i.state.contents)}catch(e){this.log("retrieveState - failed to deserialize JSON: "+e)}return i},retrieveStateIds:function(e){this.log("retrieveStateIds");var t,i,n,r,a={};if(i=(e=e||{}).requestHeaders||{},a.activityId=e.activity.id,"0.9"===this.version?a.actor=JSON.stringify(e.agent.asVersion(this.version)):a.agent=JSON.stringify(e.agent.asVersion(this.version)),null!=e.registration&&("0.9"===this.version?a.registrationId=e.registration:a.registration=e.registration),t={url:"activities/state",method:"GET",params:a,headers:i,ignore404:!0},void 0!==e.callback&&(r=function(t,i){var n=i;if(null===t){if(404===i.status)n=[];else try{n=JSON.parse(i.responseText)}catch(e){t="Response JSON parse error: "+e}e.callback(t,n)}else e.callback(t,n)},t.callback=r),void 0!==e.since&&(t.params.since=e.since),n=this.sendRequest(t),!r){if(n.profileIds=null,null!==n.err)return n;if(404===n.xhr.status)n.profileIds=[];else try{n.profileIds=JSON.parse(n.xhr.responseText)}catch(e){n.err="retrieveStateIds - JSON parse error: "+e}}return n},saveState:function(e,t,i){var n,r,a;return this.log("saveState"),a=i.requestHeaders||{},void 0===i.contentType&&(i.contentType="application/octet-stream"),a["Content-Type"]=i.contentType,"object"==typeof t&&TinCan.Utils.isApplicationJSON(i.contentType)&&(t=JSON.stringify(t)),void 0!==i.method&&"POST"===i.method||(i.method="PUT"),n={stateId:e,activityId:i.activity.id},"0.9"===this.version?n.actor=JSON.stringify(i.agent.asVersion(this.version)):n.agent=JSON.stringify(i.agent.asVersion(this.version)),null!=i.registration&&("0.9"===this.version?n.registrationId=i.registration:n.registration=i.registration),r={url:"activities/state",method:i.method,params:n,data:t,headers:a},void 0!==i.callback&&(r.callback=i.callback),null!=i.lastSHA1&&(r.headers["If-Match"]=i.lastSHA1),this.sendRequest(r)},dropState:function(e,t){var i,n,r;return this.log("dropState"),r=t.requestHeaders||{},i={activityId:t.activity.id},"0.9"===this.version?i.actor=JSON.stringify(t.agent.asVersion(this.version)):i.agent=JSON.stringify(t.agent.asVersion(this.version)),null!==e&&(i.stateId=e),null!=t.registration&&("0.9"===this.version?i.registrationId=t.registration:i.registration=t.registration),n={url:"activities/state",method:"DELETE",params:i,headers:r},void 0!==t.callback&&(n.callback=t.callback),this.sendRequest(n)},retrieveActivity:function(e,t){this.log("retrieveActivity");var i,n,r={};return r={url:"activities",method:"GET",params:{activityId:e},ignore404:!0,headers:t.requestHeaders||{}},void 0!==t.callback&&(r.callback=n=function(i,n){var r=n;null===i&&(r=404===n.status?new TinCan.Activity({id:e}):TinCan.Activity.fromJSON(n.responseText)),t.callback(i,r)}),i=this.sendRequest(r),n||(i.activity=null,null===i.err&&(i.activity=404===i.xhr.status?new TinCan.Activity({id:e}):TinCan.Activity.fromJSON(i.xhr.responseText))),i},retrieveActivityProfile:function(e,t){this.log("retrieveActivityProfile");var i,n,r={},a=this;if(r={url:"activities/profile",method:"GET",params:{profileId:e,activityId:t.activity.id},ignore404:!0,headers:t.requestHeaders||{}},void 0!==t.callback&&(r.callback=n=function(i,n){var r=n;if(null===i)if(404===n.status)r=null;else if((r=new TinCan.ActivityProfile({id:e,activity:t.activity,contents:n.responseText})).etag=void 0!==n.getResponseHeader&&null!==n.getResponseHeader("ETag")&&""!==n.getResponseHeader("ETag")?n.getResponseHeader("ETag"):'"'+TinCan.Utils.getSHA1String(n.responseText)+'"',void 0!==n.contentType?r.contentType=n.contentType:void 0!==n.getResponseHeader&&null!==n.getResponseHeader("Content-Type")&&""!==n.getResponseHeader("Content-Type")&&(r.contentType=n.getResponseHeader("Content-Type")),TinCan.Utils.isApplicationJSON(r.contentType))try{r.contents=JSON.parse(r.contents)}catch(e){a.log("retrieveActivityProfile - failed to deserialize JSON: "+e)}t.callback(i,r)}),i=this.sendRequest(r),!n&&(i.profile=null,null===i.err&&404!==i.xhr.status&&(i.profile=new TinCan.ActivityProfile({id:e,activity:t.activity,contents:i.xhr.responseText}),i.profile.etag=void 0!==i.xhr.getResponseHeader&&null!==i.xhr.getResponseHeader("ETag")&&""!==i.xhr.getResponseHeader("ETag")?i.xhr.getResponseHeader("ETag"):'"'+TinCan.Utils.getSHA1String(i.xhr.responseText)+'"',void 0!==i.xhr.contentType?i.profile.contentType=i.xhr.contentType:void 0!==i.xhr.getResponseHeader&&null!==i.xhr.getResponseHeader("Content-Type")&&""!==i.xhr.getResponseHeader("Content-Type")&&(i.profile.contentType=i.xhr.getResponseHeader("Content-Type")),TinCan.Utils.isApplicationJSON(i.profile.contentType))))try{i.profile.contents=JSON.parse(i.profile.contents)}catch(e){this.log("retrieveActivityProfile - failed to deserialize JSON: "+e)}return i},retrieveActivityProfileIds:function(e){var t,i,n;if(this.log("retrieveActivityProfileIds"),t={url:"activities/profile",method:"GET",params:{activityId:(e=e||{}).activity.id},headers:e.requestHeaders||{},ignore404:!0},void 0!==e.callback&&(n=function(t,i){var n=i;if(null===t){if(404===i.status)n=[];else try{n=JSON.parse(i.responseText)}catch(e){t="Response JSON parse error: "+e}e.callback(t,n)}else e.callback(t,n)},t.callback=n),void 0!==e.since&&(t.params.since=e.since),i=this.sendRequest(t),!n){if(i.profileIds=null,null!==i.err)return i;if(404===i.xhr.status)i.profileIds=[];else try{i.profileIds=JSON.parse(i.xhr.responseText)}catch(e){i.err="retrieveActivityProfileIds - JSON parse error: "+e}}return i},saveActivityProfile:function(e,t,i){var n,r;return this.log("saveActivityProfile"),r=i.requestHeaders||{},void 0===i.contentType&&(i.contentType="application/octet-stream"),r["Content-Type"]=i.contentType,void 0!==i.method&&"POST"===i.method||(i.method="PUT"),"object"==typeof t&&TinCan.Utils.isApplicationJSON(i.contentType)&&(t=JSON.stringify(t)),n={url:"activities/profile",method:i.method,params:{profileId:e,activityId:i.activity.id},data:t,headers:r},void 0!==i.callback&&(n.callback=i.callback),null!=i.lastSHA1?n.headers["If-Match"]=i.lastSHA1:n.headers["If-None-Match"]="*",this.sendRequest(n)},dropActivityProfile:function(e,t){var i;return this.log("dropActivityProfile"),i={url:"activities/profile",method:"DELETE",params:{profileId:e,activityId:t.activity.id},headers:t.requestHeaders||{}},void 0!==t.callback&&(i.callback=t.callback),this.sendRequest(i)},retrieveAgentProfile:function(e,t){this.log("retrieveAgentProfile");var i,n,r={},a=this;if(r={method:"GET",params:{profileId:e},ignore404:!0,headers:t.requestHeaders||{}},"0.9"===this.version?(r.url="actors/profile",r.params.actor=JSON.stringify(t.agent.asVersion(this.version))):(r.url="agents/profile",r.params.agent=JSON.stringify(t.agent.asVersion(this.version))),void 0!==t.callback&&(r.callback=n=function(i,n){var r=n;if(null===i)if(404===n.status)r=null;else if((r=new TinCan.AgentProfile({id:e,agent:t.agent,contents:n.responseText})).etag=void 0!==n.getResponseHeader&&null!==n.getResponseHeader("ETag")&&""!==n.getResponseHeader("ETag")?n.getResponseHeader("ETag"):'"'+TinCan.Utils.getSHA1String(n.responseText)+'"',void 0!==n.contentType?r.contentType=n.contentType:void 0!==n.getResponseHeader&&null!==n.getResponseHeader("Content-Type")&&""!==n.getResponseHeader("Content-Type")&&(r.contentType=n.getResponseHeader("Content-Type")),TinCan.Utils.isApplicationJSON(r.contentType))try{r.contents=JSON.parse(r.contents)}catch(e){a.log("retrieveAgentProfile - failed to deserialize JSON: "+e)}t.callback(i,r)}),i=this.sendRequest(r),!n&&(i.profile=null,null===i.err&&404!==i.xhr.status&&(i.profile=new TinCan.AgentProfile({id:e,agent:t.agent,contents:i.xhr.responseText}),i.profile.etag=void 0!==i.xhr.getResponseHeader&&null!==i.xhr.getResponseHeader("ETag")&&""!==i.xhr.getResponseHeader("ETag")?i.xhr.getResponseHeader("ETag"):'"'+TinCan.Utils.getSHA1String(i.xhr.responseText)+'"',void 0!==i.xhr.contentType?i.profile.contentType=i.xhr.contentType:void 0!==i.xhr.getResponseHeader&&null!==i.xhr.getResponseHeader("Content-Type")&&""!==i.xhr.getResponseHeader("Content-Type")&&(i.profile.contentType=i.xhr.getResponseHeader("Content-Type")),TinCan.Utils.isApplicationJSON(i.profile.contentType))))try{i.profile.contents=JSON.parse(i.profile.contents)}catch(e){this.log("retrieveAgentProfile - failed to deserialize JSON: "+e)}return i},retrieveAgentProfileIds:function(e){this.log("retrieveAgentProfileIds");var t,i,n,r={};if(t={method:"GET",params:r,headers:(e=e||{}).requestHeaders||{},ignore404:!0},"0.9"===this.version?(t.url="actors/profile",r.actor=JSON.stringify(e.agent.asVersion(this.version))):(t.url="agents/profile",r.agent=JSON.stringify(e.agent.asVersion(this.version))),void 0!==e.callback&&(n=function(t,i){var n=i;if(null===t){if(404===i.status)n=[];else try{n=JSON.parse(i.responseText)}catch(e){t="Response JSON parse error: "+e}e.callback(t,n)}else e.callback(t,n)},t.callback=n),void 0!==e.since&&(t.params.since=e.since),i=this.sendRequest(t),!n){if(i.profileIds=null,null!==i.err)return i;if(404===i.xhr.status)i.profileIds=[];else try{i.profileIds=JSON.parse(i.xhr.responseText)}catch(e){i.err="retrieveAgentProfileIds - JSON parse error: "+e}}return i},saveAgentProfile:function(e,t,i){var n,r;return this.log("saveAgentProfile"),r=i.requestHeaders||{},void 0===i.contentType&&(i.contentType="application/octet-stream"),r["Content-Type"]=i.contentType,void 0!==i.method&&"POST"===i.method||(i.method="PUT"),"object"==typeof t&&TinCan.Utils.isApplicationJSON(i.contentType)&&(t=JSON.stringify(t)),n={method:i.method,params:{profileId:e},data:t,headers:r},"0.9"===this.version?(n.url="actors/profile",n.params.actor=JSON.stringify(i.agent.asVersion(this.version))):(n.url="agents/profile",n.params.agent=JSON.stringify(i.agent.asVersion(this.version))),void 0!==i.callback&&(n.callback=i.callback),null!=i.lastSHA1?n.headers["If-Match"]=i.lastSHA1:n.headers["If-None-Match"]="*",this.sendRequest(n)},dropAgentProfile:function(e,t){var i,n;return this.log("dropAgentProfile"),n={method:"DELETE",params:i={profileId:e},headers:t.requestHeaders||{}},"0.9"===this.version?(n.url="actors/profile",i.actor=JSON.stringify(t.agent.asVersion(this.version))):(n.url="agents/profile",i.agent=JSON.stringify(t.agent.asVersion(this.version))),void 0!==t.callback&&(n.callback=t.callback),this.sendRequest(n)}},e.syncEnabled=null}(),function(){"use strict";var e=TinCan.AgentAccount=function(e){this.log("constructor"),this.homePage=null,this.name=null,this.init(e)};e.prototype={LOG_SRC:"AgentAccount",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["name","homePage"];for(void 0!==(e=e||{}).accountServiceHomePage&&(e.homePage=e.accountServiceHomePage),void 0!==e.accountName&&(e.name=e.accountName),t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]])},toString:function(){this.log("toString");var e="";return null!==this.name||null!==this.homePage?(e+=null!==this.name?this.name:"-",e+=":",e+=null!==this.homePage?this.homePage:"-"):e="AgentAccount: unidentified",e},asVersion:function(e){this.log("asVersion: "+e);var t={};return"0.9"===(e=e||TinCan.versions()[0])?(t.accountName=this.name,t.accountServiceHomePage=this.homePage):(t.name=this.name,t.homePage=this.homePage),t}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.Agent=function(e){this.log("constructor"),this.name=null,this.mbox=null,this.mbox_sha1sum=null,this.openid=null,this.account=null,this.degraded=!1,this.init(e)};e.prototype={objectType:"Agent",LOG_SRC:"Agent",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i,n=["name","mbox","mbox_sha1sum","openid"];for(void 0!==(e=e||{}).lastName||void 0!==e.firstName?(e.name="",void 0!==e.firstName&&e.firstName.length>0&&(e.name=e.firstName[0],e.firstName.length>1&&(this.degraded=!0)),""!==e.name&&(e.name+=" "),void 0!==e.lastName&&e.lastName.length>0&&(e.name+=e.lastName[0],e.lastName.length>1&&(this.degraded=!0))):void 0===e.familyName&&void 0===e.givenName||(e.name="",void 0!==e.givenName&&e.givenName.length>0&&(e.name=e.givenName[0],e.givenName.length>1&&(this.degraded=!0)),""!==e.name&&(e.name+=" "),void 0!==e.familyName&&e.familyName.length>0&&(e.name+=e.familyName[0],e.familyName.length>1&&(this.degraded=!0))),"object"==typeof e.name&&null!==e.name&&(e.name.length>1&&(this.degraded=!0),e.name=e.name[0]),"object"==typeof e.mbox&&null!==e.mbox&&(e.mbox.length>1&&(this.degraded=!0),e.mbox=e.mbox[0]),"object"==typeof e.mbox_sha1sum&&null!==e.mbox_sha1sum&&(e.mbox_sha1sum.length>1&&(this.degraded=!0),e.mbox_sha1sum=e.mbox_sha1sum[0]),"object"==typeof e.openid&&null!==e.openid&&(e.openid.length>1&&(this.degraded=!0),e.openid=e.openid[0]),"object"==typeof e.account&&null!==e.account&&void 0===e.account.homePage&&void 0===e.account.name&&(0===e.account.length?delete e.account:(e.account.length>1&&(this.degraded=!0),e.account=e.account[0])),e.hasOwnProperty("account")&&(this.account=e.account instanceof TinCan.AgentAccount?e.account:new TinCan.AgentAccount(e.account)),t=0;t<n.length;t+=1)e.hasOwnProperty(n[t])&&null!==e[n[t]]&&(i=e[n[t]],"mbox"===n[t]&&-1===i.indexOf("mailto:")&&(i="mailto:"+i),this[n[t]]=i)},toString:function(){return this.log("toString"),null!==this.name?this.name:null!==this.mbox?this.mbox.replace("mailto:",""):null!==this.mbox_sha1sum?this.mbox_sha1sum:null!==this.openid?this.openid:null!==this.account?this.account.toString():this.objectType+": unidentified"},asVersion:function(e){this.log("asVersion: "+e);var t={objectType:this.objectType};return"0.9"===(e=e||TinCan.versions()[0])?(null!==this.mbox?t.mbox=[this.mbox]:null!==this.mbox_sha1sum?t.mbox_sha1sum=[this.mbox_sha1sum]:null!==this.openid?t.openid=[this.openid]:null!==this.account&&(t.account=[this.account.asVersion(e)]),null!==this.name&&(t.name=[this.name])):(null!==this.mbox?t.mbox=this.mbox:null!==this.mbox_sha1sum?t.mbox_sha1sum=this.mbox_sha1sum:null!==this.openid?t.openid=this.openid:null!==this.account&&(t.account=this.account.asVersion(e)),null!==this.name&&(t.name=this.name)),t}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.Group=function(e){this.log("constructor"),this.name=null,this.mbox=null,this.mbox_sha1sum=null,this.openid=null,this.account=null,this.member=[],this.init(e)};e.prototype={objectType:"Group",LOG_SRC:"Group",log:TinCan.prototype.log,init:function(e){var t;if(this.log("init"),TinCan.Agent.prototype.init.call(this,e=e||{}),void 0!==e.member)for(t=0;t<e.member.length;t+=1)this.member.push(e.member[t]instanceof TinCan.Agent?e.member[t]:new TinCan.Agent(e.member[t]))},toString:function(e){this.log("toString");var t=TinCan.Agent.prototype.toString.call(this,e);return t!==this.objectType+": unidentified"&&(t=this.objectType+": "+t),t},asVersion:function(e){var t,i;if(this.log("asVersion: "+e),e=e||TinCan.versions()[0],t=TinCan.Agent.prototype.asVersion.call(this,e),this.member.length>0)for(t.member=[],i=0;i<this.member.length;i+=1)t.member.push(this.member[i].asVersion(e));return t}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e={"http://adlnet.gov/expapi/verbs/experienced":"experienced","http://adlnet.gov/expapi/verbs/attended":"attended","http://adlnet.gov/expapi/verbs/attempted":"attempted","http://adlnet.gov/expapi/verbs/completed":"completed","http://adlnet.gov/expapi/verbs/passed":"passed","http://adlnet.gov/expapi/verbs/failed":"failed","http://adlnet.gov/expapi/verbs/answered":"answered","http://adlnet.gov/expapi/verbs/interacted":"interacted","http://adlnet.gov/expapi/verbs/imported":"imported","http://adlnet.gov/expapi/verbs/created":"created","http://adlnet.gov/expapi/verbs/shared":"shared","http://adlnet.gov/expapi/verbs/voided":"voided"},t=TinCan.Verb=function(e){this.log("constructor"),this.id=null,this.display=null,this.init(e)};t.prototype={LOG_SRC:"Verb",log:TinCan.prototype.log,init:function(t){this.log("init");var i,n,r=["id","display"];if("string"==typeof t){for(n in this.id=t,this.display={und:this.id},e)if(e.hasOwnProperty(n)&&e[n]===t){this.id=n;break}}else{for(t=t||{},i=0;i<r.length;i+=1)t.hasOwnProperty(r[i])&&null!==t[r[i]]&&(this[r[i]]=t[r[i]]);null===this.display&&void 0!==e[this.id]&&(this.display={und:e[this.id]})}},toString:function(e){return this.log("toString"),null!==this.display?this.getLangDictionaryValue("display",e):this.id},asVersion:function(t){var i;return this.log("asVersion"),"0.9"===(t=t||TinCan.versions()[0])?i=e[this.id]:(i={id:this.id},null!==this.display&&(i.display=this.display)),i},getLangDictionaryValue:TinCan.Utils.getLangDictionaryValue},t.fromJSON=function(e){t.prototype.log("fromJSON");var i=JSON.parse(e);return new t(i)}}(),function(){"use strict";var e=TinCan.Result=function(e){this.log("constructor"),this.score=null,this.success=null,this.completion=null,this.duration=null,this.response=null,this.extensions=null,this.init(e)};e.prototype={LOG_SRC:"Result",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["completion","duration","extensions","response","success"];for((e=e||{}).hasOwnProperty("score")&&null!==e.score&&(this.score=e.score instanceof TinCan.Score?e.score:new TinCan.Score(e.score)),t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]]);"Completed"===this.completion&&(this.completion=!0)},asVersion:function(e){this.log("asVersion");var t,i={},n=["success","duration","response","extensions"],r=["score"];for(e=e||TinCan.versions()[0],t=0;t<n.length;t+=1)null!==this[n[t]]&&(i[n[t]]=this[n[t]]);for(t=0;t<r.length;t+=1)null!==this[r[t]]&&(i[r[t]]=this[r[t]].asVersion(e));return null!==this.completion&&("0.9"===e?this.completion&&(i.completion="Completed"):i.completion=this.completion),i}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.Score=function(e){this.log("constructor"),this.scaled=null,this.raw=null,this.min=null,this.max=null,this.init(e)};e.prototype={LOG_SRC:"Score",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["scaled","raw","min","max"];for(e=e||{},t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]])},asVersion:function(e){this.log("asVersion");var t,i={},n=["scaled","raw","min","max"];for(e=e||TinCan.versions()[0],t=0;t<n.length;t+=1)null!==this[n[t]]&&(i[n[t]]=this[n[t]]);return i}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.InteractionComponent=function(e){this.log("constructor"),this.id=null,this.description=null,this.init(e)};e.prototype={LOG_SRC:"InteractionComponent",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["id","description"];for(e=e||{},t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]])},asVersion:function(e){this.log("asVersion");var t,i,n={id:this.id},r=["description"];for(e=e||TinCan.versions()[0],t=0;t<r.length;t+=1)null!==this[i=r[t]]&&(n[i]=this[i]);return n},getLangDictionaryValue:TinCan.Utils.getLangDictionaryValue},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e={"http://adlnet.gov/expapi/activities/course":"course","http://adlnet.gov/expapi/activities/module":"module","http://adlnet.gov/expapi/activities/meeting":"meeting","http://adlnet.gov/expapi/activities/media":"media","http://adlnet.gov/expapi/activities/performance":"performance","http://adlnet.gov/expapi/activities/simulation":"simulation","http://adlnet.gov/expapi/activities/assessment":"assessment","http://adlnet.gov/expapi/activities/interaction":"interaction","http://adlnet.gov/expapi/activities/cmi.interaction":"cmi.interaction","http://adlnet.gov/expapi/activities/question":"question","http://adlnet.gov/expapi/activities/objective":"objective","http://adlnet.gov/expapi/activities/link":"link"},t=TinCan.ActivityDefinition=function(e){this.log("constructor"),this.name=null,this.description=null,this.type=null,this.moreInfo=null,this.extensions=null,this.interactionType=null,this.correctResponsesPattern=null,this.choices=null,this.scale=null,this.source=null,this.target=null,this.steps=null,this.init(e)};t.prototype={LOG_SRC:"ActivityDefinition",log:TinCan.prototype.log,init:function(t){this.log("init");var i,n,r,a=["name","description","moreInfo","extensions","correctResponsesPattern"],s=[];if((t=t||{}).hasOwnProperty("type")&&null!==t.type){for(r in e)e.hasOwnProperty(r)&&e[r]===t.type&&(t.type=e[r]);this.type=t.type}if(t.hasOwnProperty("interactionType")&&null!==t.interactionType&&(this.interactionType=t.interactionType,"choice"===t.interactionType||"sequencing"===t.interactionType?s.push("choices"):"likert"===t.interactionType?s.push("scale"):"matching"===t.interactionType?(s.push("source"),s.push("target")):"performance"===t.interactionType&&s.push("steps"),s.length>0))for(i=0;i<s.length;i+=1)if(t.hasOwnProperty(r=s[i])&&null!==t[r])for(this[r]=[],n=0;n<t[r].length;n+=1)this[r].push(t[r][n]instanceof TinCan.InteractionComponent?t[r][n]:new TinCan.InteractionComponent(t[r][n]));for(i=0;i<a.length;i+=1)t.hasOwnProperty(a[i])&&null!==t[a[i]]&&(this[a[i]]=t[a[i]])},toString:function(e){return this.log("toString"),null!==this.name?this.getLangDictionaryValue("name",e):null!==this.description?this.getLangDictionaryValue("description",e):""},asVersion:function(t){this.log("asVersion");var i,n,r,a={},s=["name","description","interactionType","correctResponsesPattern","extensions"],o=["choices","scale","source","target","steps"];for(t=t||TinCan.versions()[0],null!==this.type&&(a.type="0.9"===t?e[this.type]:this.type),i=0;i<s.length;i+=1)null!==this[r=s[i]]&&(a[r]=this[r]);for(i=0;i<o.length;i+=1)if(null!==this[r=o[i]])for(a[r]=[],n=0;n<this[r].length;n+=1)a[r].push(this[r][n].asVersion(t));return 0!==t.indexOf("0.9")&&null!==this.moreInfo&&(a.moreInfo=this.moreInfo),a},getLangDictionaryValue:TinCan.Utils.getLangDictionaryValue},t.fromJSON=function(e){t.prototype.log("fromJSON");var i=JSON.parse(e);return new t(i)}}(),function(){"use strict";var e=TinCan.Activity=function(e){this.log("constructor"),this.objectType="Activity",this.id=null,this.definition=null,this.init(e)};e.prototype={LOG_SRC:"Activity",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["id"];for((e=e||{}).hasOwnProperty("definition")&&(this.definition=e.definition instanceof TinCan.ActivityDefinition?e.definition:new TinCan.ActivityDefinition(e.definition)),t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]])},toString:function(e){this.log("toString");var t="";return null!==this.definition&&""!==(t=this.definition.toString(e))?t:null!==this.id?this.id:"Activity: unidentified"},asVersion:function(e){this.log("asVersion");var t={id:this.id,objectType:this.objectType};return e=e||TinCan.versions()[0],null!==this.definition&&(t.definition=this.definition.asVersion(e)),t}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.ContextActivities=function(e){this.log("constructor"),this.category=null,this.parent=null,this.grouping=null,this.other=null,this.init(e)};e.prototype={LOG_SRC:"ContextActivities",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i,n,r=["category","parent","grouping","other"];for(e=e||{},t=0;t<r.length;t+=1)if(e.hasOwnProperty(n=r[t])&&null!==e[n])if("[object Array]"===Object.prototype.toString.call(e[n]))for(i=0;i<e[n].length;i+=1)this.add(n,e[n][i]);else this.add(n,e[n])},add:function(e,t){if("category"===e||"parent"===e||"grouping"===e||"other"===e)return null===this[e]&&(this[e]=[]),t instanceof TinCan.Activity||(t=new TinCan.Activity(t="string"==typeof t?{id:t}:t)),this[e].push(t),this[e].length-1},asVersion:function(e){this.log("asVersion");var t,i,n={},r=["parent","grouping","other"];for(e=e||TinCan.versions()[0],t=0;t<r.length;t+=1)if(null!==this[r[t]]&&this[r[t]].length>0)if("0.9"===e||"0.95"===e)this[r[t]].length>1&&this.log("[warning] version does not support multiple values in: "+r[t]),n[r[t]]=this[r[t]][0].asVersion(e);else for(n[r[t]]=[],i=0;i<this[r[t]].length;i+=1)n[r[t]].push(this[r[t]][i].asVersion(e));if(null!==this.category&&this.category.length>0){if("0.9"===e||"0.95"===e)throw this.log("[error] version does not support the 'category' property: "+e),new Error(e+" does not support the 'category' property");for(n.category=[],t=0;t<this.category.length;t+=1)n.category.push(this.category[t].asVersion(e))}return n}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.Context=function(e){this.log("constructor"),this.registration=null,this.instructor=null,this.team=null,this.contextActivities=null,this.revision=null,this.platform=null,this.language=null,this.statement=null,this.extensions=null,this.init(e)};e.prototype={LOG_SRC:"Context",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i,n,r=["registration","revision","platform","language","extensions"],a=["instructor","team"];for(e=e||{},t=0;t<r.length;t+=1)e.hasOwnProperty(i=r[t])&&null!==e[i]&&(this[i]=e[i]);for(t=0;t<a.length;t+=1)e.hasOwnProperty(i=a[t])&&null!==e[i]&&(void 0!==(n=e[i]).objectType&&"Person"!==n.objectType||(n.objectType="Agent"),"Agent"!==n.objectType||n instanceof TinCan.Agent?"Group"!==n.objectType||n instanceof TinCan.Group||(n=new TinCan.Group(n)):n=new TinCan.Agent(n),this[i]=n);e.hasOwnProperty("contextActivities")&&null!==e.contextActivities&&(this.contextActivities=e.contextActivities instanceof TinCan.ContextActivities?e.contextActivities:new TinCan.ContextActivities(e.contextActivities)),e.hasOwnProperty("statement")&&null!==e.statement&&(e.statement instanceof TinCan.StatementRef||e.statement instanceof TinCan.SubStatement?this.statement=e.statement:"StatementRef"===e.statement.objectType?this.statement=new TinCan.StatementRef(e.statement):"SubStatement"===e.statement.objectType?this.statement=new TinCan.SubStatement(e.statement):this.log("Unable to parse statement.context.statement property."))},asVersion:function(e){this.log("asVersion");var t,i={},n=["registration","revision","platform","language","extensions"],r=["instructor","team","contextActivities","statement"];if(e=e||TinCan.versions()[0],this.statement instanceof TinCan.SubStatement&&"0.9"!==e&&"0.95"!==e)throw this.log("[error] version does not support SubStatements in the 'statement' property: "+e),new Error(e+" does not support SubStatements in the 'statement' property");for(t=0;t<n.length;t+=1)null!==this[n[t]]&&(i[n[t]]=this[n[t]]);for(t=0;t<r.length;t+=1)null!==this[r[t]]&&(i[r[t]]=this[r[t]].asVersion(e));return i}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.StatementRef=function(e){this.log("constructor"),this.id=null,this.init(e)};e.prototype={objectType:"StatementRef",LOG_SRC:"StatementRef",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["id"];for(e=e||{},t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]])},toString:function(){return this.log("toString"),this.id},asVersion:function(e){this.log("asVersion");var t={objectType:this.objectType,id:this.id};return"0.9"===e&&(t.objectType="Statement"),t}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.SubStatement=function(e){this.log("constructor"),this.actor=null,this.verb=null,this.target=null,this.result=null,this.context=null,this.timestamp=null,this.init(e)};e.prototype={objectType:"SubStatement",LOG_SRC:"SubStatement",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["timestamp"];for((e=e||{}).hasOwnProperty("object")&&(e.target=e.object),e.hasOwnProperty("actor")&&(void 0!==e.actor.objectType&&"Person"!==e.actor.objectType||(e.actor.objectType="Agent"),"Agent"===e.actor.objectType?this.actor=e.actor instanceof TinCan.Agent?e.actor:new TinCan.Agent(e.actor):"Group"===e.actor.objectType&&(this.actor=e.actor instanceof TinCan.Group?e.actor:new TinCan.Group(e.actor))),e.hasOwnProperty("verb")&&(this.verb=e.verb instanceof TinCan.Verb?e.verb:new TinCan.Verb(e.verb)),e.hasOwnProperty("target")&&(e.target instanceof TinCan.Activity||e.target instanceof TinCan.Agent||e.target instanceof TinCan.Group||e.target instanceof TinCan.SubStatement||e.target instanceof TinCan.StatementRef?this.target=e.target:(void 0===e.target.objectType&&(e.target.objectType="Activity"),"Activity"===e.target.objectType?this.target=new TinCan.Activity(e.target):"Agent"===e.target.objectType?this.target=new TinCan.Agent(e.target):"Group"===e.target.objectType?this.target=new TinCan.Group(e.target):"SubStatement"===e.target.objectType?this.target=new TinCan.SubStatement(e.target):"StatementRef"===e.target.objectType?this.target=new TinCan.StatementRef(e.target):this.log("Unrecognized target type: "+e.target.objectType))),e.hasOwnProperty("result")&&(this.result=e.result instanceof TinCan.Result?e.result:new TinCan.Result(e.result)),e.hasOwnProperty("context")&&(this.context=e.context instanceof TinCan.Context?e.context:new TinCan.Context(e.context)),t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]])},toString:function(e){return this.log("toString"),(null!==this.actor?this.actor.toString(e):"")+" "+(null!==this.verb?this.verb.toString(e):"")+" "+(null!==this.target?this.target.toString(e):"")},asVersion:function(e){this.log("asVersion");var t,i,n=["timestamp"],r=["actor","verb","result","context"];for(t={objectType:this.objectType},e=e||TinCan.versions()[0],i=0;i<n.length;i+=1)null!==this[n[i]]&&(t[n[i]]=this[n[i]]);for(i=0;i<r.length;i+=1)null!==this[r[i]]&&(t[r[i]]=this[r[i]].asVersion(e));return null!==this.target&&(t.object=this.target.asVersion(e)),"0.9"===e&&(t.objectType="Statement"),t}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.Statement=function(e,t){this.log("constructor"),void 0===(t="number"==typeof t?{storeOriginal:t}:t||{}).storeOriginal&&(t.storeOriginal=null),void 0===t.doStamp&&(t.doStamp=!0),this.id=null,this.actor=null,this.verb=null,this.target=null,this.result=null,this.context=null,this.timestamp=null,this.stored=null,this.authority=null,this.attachments=null,this.version=null,this.degraded=!1,this.voided=null,this.inProgress=null,this.originalJSON=null,this.init(e,t)};e.prototype={LOG_SRC:"Statement",log:TinCan.prototype.log,init:function(e,t){this.log("init");var i,n=["id","stored","timestamp","version","inProgress","voided"];if(e=e||{},t.storeOriginal&&(this.originalJSON=JSON.stringify(e,null,t.storeOriginal)),e.hasOwnProperty("object")&&(e.target=e.object),e.hasOwnProperty("actor")&&(void 0!==e.actor.objectType&&"Person"!==e.actor.objectType||(e.actor.objectType="Agent"),"Agent"===e.actor.objectType?this.actor=e.actor instanceof TinCan.Agent?e.actor:new TinCan.Agent(e.actor):"Group"===e.actor.objectType&&(this.actor=e.actor instanceof TinCan.Group?e.actor:new TinCan.Group(e.actor))),e.hasOwnProperty("authority")&&(void 0!==e.authority.objectType&&"Person"!==e.authority.objectType||(e.authority.objectType="Agent"),"Agent"===e.authority.objectType?this.authority=e.authority instanceof TinCan.Agent?e.authority:new TinCan.Agent(e.authority):"Group"===e.authority.objectType&&(this.authority=e.actor instanceof TinCan.Group?e.authority:new TinCan.Group(e.authority))),e.hasOwnProperty("verb")&&(this.verb=e.verb instanceof TinCan.Verb?e.verb:new TinCan.Verb(e.verb)),e.hasOwnProperty("target")&&(e.target instanceof TinCan.Activity||e.target instanceof TinCan.Agent||e.target instanceof TinCan.Group||e.target instanceof TinCan.SubStatement||e.target instanceof TinCan.StatementRef?this.target=e.target:(void 0===e.target.objectType&&(e.target.objectType="Activity"),"Activity"===e.target.objectType?this.target=new TinCan.Activity(e.target):"Agent"===e.target.objectType?this.target=new TinCan.Agent(e.target):"Group"===e.target.objectType?this.target=new TinCan.Group(e.target):"SubStatement"===e.target.objectType?this.target=new TinCan.SubStatement(e.target):"StatementRef"===e.target.objectType?this.target=new TinCan.StatementRef(e.target):this.log("Unrecognized target type: "+e.target.objectType))),e.hasOwnProperty("result")&&(this.result=e.result instanceof TinCan.Result?e.result:new TinCan.Result(e.result)),e.hasOwnProperty("context")&&(this.context=e.context instanceof TinCan.Context?e.context:new TinCan.Context(e.context)),e.hasOwnProperty("attachments")&&null!==e.attachments)for(this.attachments=[],i=0;i<e.attachments.length;i+=1)this.attachments.push(e.attachments[i]instanceof TinCan.Attachment?e.attachments[i]:new TinCan.Attachment(e.attachments[i]));for(i=0;i<n.length;i+=1)e.hasOwnProperty(n[i])&&null!==e[n[i]]&&(this[n[i]]=e[n[i]]);t.doStamp&&this.stamp()},toString:function(e){return this.log("toString"),(null!==this.actor?this.actor.toString(e):"")+" "+(null!==this.verb?this.verb.toString(e):"")+" "+(null!==this.target?this.target.toString(e):"")},asVersion:function(e){this.log("asVersion");var t,i={},n=["id","timestamp"],r=["actor","verb","result","context","authority"];for(e=e||TinCan.versions()[0],t=0;t<n.length;t+=1)null!==this[n[t]]&&(i[n[t]]=this[n[t]]);for(t=0;t<r.length;t+=1)null!==this[r[t]]&&(i[r[t]]=this[r[t]].asVersion(e));if(null!==this.target&&(i.object=this.target.asVersion(e)),"0.9"!==e&&"0.95"!==e||null!==this.voided&&(i.voided=this.voided),"0.9"===e&&null!==this.inProgress&&(i.inProgress=this.inProgress),null!==this.attachments&&"0.9"!==e&&"0.95"!==e)for(i.attachments=[],t=0;t<this.attachments.length;t+=1)i.attachments.push(this.attachments[t]instanceof TinCan.Attachment?this.attachments[t].asVersion(e):new TinCan.Attachment(this.attachments[t]).asVersion(e));return i},stamp:function(){this.log("stamp"),null===this.id&&(this.id=TinCan.Utils.getUUID()),null===this.timestamp&&(this.timestamp=TinCan.Utils.getISODateString(new Date))},hasAttachmentWithContent:function(){var e;if(this.log("hasAttachmentWithContent"),null===this.attachments)return!1;for(e=0;e<this.attachments.length;e+=1)if(null!==this.attachments[e].content)return!0;return!1}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.StatementsResult=function(e){this.log("constructor"),this.statements=null,this.more=null,this.init(e)};e.prototype={LOG_SRC:"StatementsResult",log:TinCan.prototype.log,init:function(e){this.log("init"),(e=e||{}).hasOwnProperty("statements")&&(this.statements=e.statements),e.hasOwnProperty("more")&&(this.more=e.more)}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i,n,r,a=[];try{i=JSON.parse(t)}catch(t){e.prototype.log("fromJSON - JSON.parse error: "+t)}if(i){for(r=0;r<i.statements.length;r+=1){try{n=new TinCan.Statement(i.statements[r],4)}catch(t){e.prototype.log("fromJSON - statement instantiation failed: "+t+" ("+JSON.stringify(i.statements[r])+")"),n=new TinCan.Statement({id:i.statements[r].id},4)}a.push(n)}i.statements=a}return new e(i)}}(),function(){"use strict";var e=TinCan.State=function(e){this.log("constructor"),this.id=null,this.updated=null,this.contents=null,this.etag=null,this.contentType=null,this.init(e)};e.prototype={LOG_SRC:"State",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["id","contents","etag","contentType"];for(e=e||{},t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]]);this.updated=!1}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.ActivityProfile=function(e){this.log("constructor"),this.id=null,this.activity=null,this.updated=null,this.contents=null,this.etag=null,this.contentType=null,this.init(e)};e.prototype={LOG_SRC:"ActivityProfile",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["id","contents","etag","contentType"];for((e=e||{}).hasOwnProperty("activity")&&(this.activity=e.activity instanceof TinCan.Activity?e.activity:new TinCan.Activity(e.activity)),t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]]);this.updated=!1}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.AgentProfile=function(e){this.log("constructor"),this.id=null,this.agent=null,this.updated=null,this.contents=null,this.etag=null,this.contentType=null,this.init(e)};e.prototype={LOG_SRC:"AgentProfile",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["id","contents","etag","contentType"];for((e=e||{}).hasOwnProperty("agent")&&(this.agent=e.agent instanceof TinCan.Agent?e.agent:new TinCan.Agent(e.agent)),t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]]);this.updated=!1}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.About=function(e){this.log("constructor"),this.version=null,this.init(e)};e.prototype={LOG_SRC:"About",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["version"];for(e=e||{},t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]])}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)}}(),function(){"use strict";var e=TinCan.Attachment=function(e){this.log("constructor"),this.usageType=null,this.display=null,this.contentType=null,this.length=null,this.sha2=null,this.description=null,this.fileUrl=null,this.content=null,this.init(e)};e.prototype={LOG_SRC:"Attachment",log:TinCan.prototype.log,init:function(e){this.log("init");var t,i=["contentType","length","sha2","usageType","display","description","fileUrl"];for(e=e||{},t=0;t<i.length;t+=1)e.hasOwnProperty(i[t])&&null!==e[i[t]]&&(this[i[t]]=e[i[t]]);e.hasOwnProperty("content")&&null!==e.content&&("string"==typeof e.content?this.setContentFromString(e.content):this.setContent(e.content))},asVersion:function(e){var t;return this.log("asVersion"),"0.9"===(e=e||TinCan.versions()[0])||"0.95"===e?t=null:(t={contentType:this.contentType,display:this.display,length:this.length,sha2:this.sha2,usageType:this.usageType},null!==this.fileUrl&&(t.fileUrl=this.fileUrl),null!==this.description&&(t.description=this.description)),t},getLangDictionaryValue:TinCan.Utils.getLangDictionaryValue,setContent:function(e){this.content=e,this.length=e.byteLength,this.sha2=TinCan.Utils.getSHA256String(e)},setContentFromString:function(e){var t;t=TinCan.Utils.stringToArrayBuffer(e),this.setContent(t)},getContentAsString:function(){return TinCan.Utils.stringFromArrayBuffer(this.content)}},e.fromJSON=function(t){e.prototype.log("fromJSON");var i=JSON.parse(t);return new e(i)},e._defaultEncoding="utf-8"}(),function(){"use strict";var LOG_SRC="Environment.Browser",requestComplete,__IEModeConversion,nativeRequest,xdrRequest,__createJSONSegment,__createAttachmentSegment,__delay,env={},log=TinCan.prototype.log;"undefined"==typeof window?log("'window' not defined",LOG_SRC):(window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(e){var t,i,n="";if(e instanceof Object){if(e.constructor===Array){for(t=0;t<e.length;t+=1)n+=this.stringify(e[t])+",";return"["+n.substr(0,n.length-1)+"]"}if(e.toString!==Object.prototype.toString)return'"'+e.toString().replace(/"/g,"\\$&")+'"';for(i in e)e.hasOwnProperty(i)&&(n+='"'+i.replace(/"/g,"\\$&")+'":'+this.stringify(e[i])+",");return"{"+n.substr(0,n.length-1)+"}"}return"string"==typeof e?'"'+e.replace(/"/g,"\\$&")+'"':String(e)}}),Date.now||(Date.now=function(){return+new Date}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;var n,r=arguments[1];for(n=0;n<i;n+=1)n in t&&e.call(r,t[n],n,t)}),env.hasCORS=!1,env.useXDR=!1,"undefined"!=typeof XMLHttpRequest&&void 0!==(new XMLHttpRequest).withCredentials?env.hasCORS=!0:"undefined"!=typeof XDomainRequest&&(env.hasCORS=!0,env.useXDR=!0),requestComplete=function(e,t,i){var n,r;return log("requestComplete: "+i.finished+", xhr.status: "+e.status,LOG_SRC),r=void 0===e.status?i.fakeStatus:1223===e.status?204:e.status,i.finished?n:(i.finished=!0,r>=200&&r<400||t.ignore404&&404===r?t.callback?void t.callback(null,e):n={err:null,xhr:e}:(n={err:r,xhr:e},log(0===r?"[warning] There was a problem communicating with the Learning Record Store. Aborted, offline, or invalid CORS endpoint ("+r+")":"[warning] There was a problem communicating with the Learning Record Store. ("+r+" | "+e.responseText+")",LOG_SRC),t.callback&&t.callback(r,e),n))},__IEModeConversion=function(e,t,i,n){var r;for(r in t)t.hasOwnProperty(r)&&i.push(r+"="+encodeURIComponent(t[r]));return void 0!==n.data&&i.push("content="+encodeURIComponent(n.data)),t["Content-Type"]="application/x-www-form-urlencoded",e+="?method="+n.method,n.method="POST",n.params={},i.length>0&&(n.data=i.join("&")),e},nativeRequest=function(e,t,i){log("sendRequest using XMLHttpRequest",LOG_SRC);var n,r,a,s,o=this,l=[],u={finished:!1,fakeStatus:null},c=void 0!==i.callback,h=e;for(r in log("sendRequest using XMLHttpRequest - async: "+c,LOG_SRC),i.params)i.params.hasOwnProperty(r)&&l.push(r+"="+encodeURIComponent(i.params[r]));if(l.length>0&&(h+="?"+l.join("&")),h.length>=2048){if(void 0===i.method)return s=new Error("method must not be undefined for an IE Mode Request conversion"),void 0!==i.callback&&i.callback(s,null),{err:s,xhr:null};e=__IEModeConversion(e,t,l,i)}else e=h;if("undefined"!=typeof XMLHttpRequest)n=new XMLHttpRequest;else if(n=new ActiveXObject("Microsoft.XMLHTTP"),i.expectMultipart)return s=new Error("Attachment support not available"),void 0!==i.callback&&i.callback(s,null),{err:s,xhr:null};for(r in n.open(i.method,e,c),i.expectMultipart&&(n.responseType="arraybuffer"),t)t.hasOwnProperty(r)&&n.setRequestHeader(r,t[r]);a=i.data,c&&(n.onreadystatechange=function(){log("xhr.onreadystatechange - xhr.readyState: "+n.readyState,LOG_SRC),4===n.readyState&&requestComplete.call(o,n,i,u)});try{n.send(a)}catch(e){log("sendRequest caught send exception: "+e,LOG_SRC)}return c?n:requestComplete.call(this,n,i,u)},xdrRequest=function(e,t,i){log("sendRequest using XDomainRequest",LOG_SRC);var n,r,a,s,o,l=this,u=[],c={finished:!1,fakeStatus:null};if(i.expectMultipart)return o=new Error("Attachment support not available"),void 0!==i.callback&&i.callback(o,null),{err:o,xhr:null};for(a in e+="?method="+i.method,i.params)i.params.hasOwnProperty(a)&&u.push(a+"="+encodeURIComponent(i.params[a]));for(a in t)t.hasOwnProperty(a)&&u.push(a+"="+encodeURIComponent(t[a]));void 0!==i.data&&u.push("content="+encodeURIComponent(i.data)),r=u.join("&"),(n=new XDomainRequest).open("POST",e),i.callback?(n.onload=function(){c.fakeStatus=200,requestComplete.call(l,n,i,c)},n.onerror=function(){c.fakeStatus=400,requestComplete.call(l,n,i,c)},n.ontimeout=function(){c.fakeStatus=0,requestComplete.call(l,n,i,c)}):(n.onload=function(){c.fakeStatus=200},n.onerror=function(){c.fakeStatus=400},n.ontimeout=function(){c.fakeStatus=0}),n.onprogress=function(){},n.timeout=0;try{n.send(r)}catch(e){log("sendRequest caught send exception: "+e,LOG_SRC)}if(!i.callback){for(s=1e4+Date.now(),log("sendRequest - until: "+s+", finished: "+c.finished,LOG_SRC);Date.now()<s&&null===c.fakeStatus;)__delay();return requestComplete.call(l,n,i,c)}return n},TinCan.LRS.prototype._initByEnvironment=function(e){var t,i,n;if(log("_initByEnvironment",LOG_SRC),e=e||{},this._makeRequest=nativeRequest,this._IEModeConversion=__IEModeConversion,null===(t=this.endpoint.toLowerCase().match(/([A-Za-z]+:)\/\/([^:\/]+):?(\d+)?(\/.*)?$/)))throw log("[error] LRS invalid: failed to divide URL parts",LOG_SRC),{code:4,mesg:"LRS invalid: failed to divide URL parts"};if(n=location.port,i=location.protocol.toLowerCase()===t[1],""===n&&(n="http:"===location.protocol.toLowerCase()?"80":"https:"===location.protocol.toLowerCase()?"443":""),!i||location.hostname.toLowerCase()!==t[2]||n!==(null!=t[3]&&""!==t[3]?t[3]:"http:"===t[1]?"80":"https:"===t[1]?"443":""))if(env.hasCORS){if(env.useXDR&&i)this._makeRequest=xdrRequest;else if(env.useXDR&&!i){if(!e.allowFail)throw log("[error] LRS invalid: cross domain request for differing scheme in IE with XDR",LOG_SRC),{code:2,mesg:"LRS invalid: cross domain request for differing scheme in IE with XDR"};log("[warning] LRS invalid: cross domain request for differing scheme in IE with XDR (allowed to fail)",LOG_SRC)}}else{if(!e.allowFail)throw log("[error] LRS invalid: cross domain requests not supported in this browser",LOG_SRC),{code:1,mesg:"LRS invalid: cross domain requests not supported in this browser"};log("[warning] LRS invalid: cross domain requests not supported in this browser (allowed to fail)",LOG_SRC)}},__delay=function(){var e=new XMLHttpRequest,t=window.location+"?forcenocache="+TinCan.Utils.getUUID();e.open("GET",t,!1),e.send(null)},TinCan.LRS.syncEnabled=!0,TinCan.LRS.prototype._getMultipartRequestData=function(e,t,i){var n,r=[];for(r.push(__createJSONSegment(e,t)),n=0;n<i.length;n+=1)null!==i[n].content&&r.push(__createAttachmentSegment(e,i[n].content,i[n].sha2,i[n].contentType));return r.push("\r\n--"+e+"--\r\n"),new Blob(r)},__createJSONSegment=function(e,t){return["--"+e,"Content-Type: application/json","",JSON.stringify(t)].join("\r\n")+"\r\n"},__createAttachmentSegment=function(e,t,i,n){var r=[],a=["--"+e,"Content-Type: "+n,"Content-Transfer-Encoding: binary","X-Experience-API-Hash: "+i].join("\r\n");return r.push(a+="\r\n\r\n"),r.push(t),new Blob(r)},TinCan.Utils.stringToArrayBuffer=function(e,t){return t||(t=TinCan.Utils.defaultEncoding),new TextEncoder(t).encode(e).buffer},TinCan.Utils.stringFromArrayBuffer=function(e,t){return t||(t=TinCan.Utils.defaultEncoding),new TextDecoder(t).decode(e)})}(),function(e){"use strict";function t(e){switch(typeof e){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===e?"null":"object"}}function i(e){return Object.prototype.toString.call(e).replace(/^\[object *|\]$/g,"")}function n(e){return"function"==typeof e}function r(e){if(null===e||e===P)throw TypeError();return Object(e)}function a(e){return e>>0}function s(e){return e>>>0}function o(t){function i(e){Object.defineProperty(t,e,{get:function(){return t._getter(e)},set:function(i){t._setter(e,i)},enumerable:!0,configurable:!1})}if(!("TYPED_ARRAY_POLYFILL_NO_ARRAY_ACCESSORS"in e)){if(t.length>O)throw RangeError("Array too large for polyfill");var n;for(n=0;n<t.length;n+=1)i(n)}}function l(e,t){var i=32-t;return e<<i>>i}function u(e,t){var i=32-t;return e<<i>>>i}function c(e){return[255&e]}function h(e){return l(e[0],8)}function d(e){return[255&e]}function p(e){return u(e[0],8)}function f(e){return[(e=U(Number(e)))<0?0:e>255?255:255&e]}function m(e){return[255&e,e>>8&255]}function g(e){return l(e[1]<<8|e[0],16)}function v(e){return[255&e,e>>8&255]}function y(e){return u(e[1]<<8|e[0],16)}function _(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function b(e){return l(e[3]<<24|e[2]<<16|e[1]<<8|e[0],32)}function T(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function S(e){return u(e[3]<<24|e[2]<<16|e[1]<<8|e[0],32)}function w(e,t,i){function n(e){var t=L(e),i=e-t;return i<.5?t:i>.5||t%2?t+1:t}var r,a,s,o=(1<<t-1)-1;if(e!=e)a=(1<<t)-1,s=j(2,i-1),r=0;else if(e===1/0||e===-1/0)a=(1<<t)-1,s=0,r=e<0?1:0;else if(0===e)a=0,s=0,r=1/e==-1/0?1:0;else if(r=e<0,(e=D(e))>=j(2,1-o)){a=N(L(R(e)/I),1023);var l=e/j(2,a);l<1&&(a-=1,l*=2),l>=2&&(a+=1,l/=2);var u=j(2,i);a+=o,(s=n(l*u)-u)/u>=1&&(a+=1,s=0),a>2*o&&(a=(1<<t)-1,s=0)}else a=0,s=n(e/j(2,1-o-i));var c,h=[];for(c=i;c;c-=1)h.push(s%2?1:0),s=L(s/2);for(c=t;c;c-=1)h.push(a%2?1:0),a=L(a/2);h.push(r?1:0),h.reverse();for(var d=h.join(""),p=[];d.length;)p.unshift(parseInt(d.substring(0,8),2)),d=d.substring(8);return p}function C(e,t,i){var n,r,a,s,o,l,u,c,h=[];for(n=0;n<e.length;++n)for(a=e[n],r=8;r;r-=1)h.push(a%2?1:0),a>>=1;return h.reverse(),s=h.join(""),o=(1<<t-1)-1,l=parseInt(s.substring(0,1),2)?-1:1,u=parseInt(s.substring(1,1+t),2),c=parseInt(s.substring(1+t),2),u===(1<<t)-1?0!==c?NaN:l*(1/0):u>0?l*j(2,u-o)*(1+c/j(2,i)):0!==c?l*j(2,-(o-1))*(c/j(2,i)):l<0?-0:0}function k(e){return C(e,11,52)}function x(e){return w(e,11,52)}function E(e){return C(e,8,23)}function A(e){return w(e,8,23)}var P=void 0,O=1e5,I=Math.LN2,D=Math.abs,L=Math.floor,R=Math.log,M=Math.max,N=Math.min,j=Math.pow,U=Math.round;!function(){var e=Object.defineProperty,t=!function(){try{return Object.defineProperty({},"x",{})}catch(e){return!1}}();e&&!t||(Object.defineProperty=function(t,i,n){if(e)try{return e(t,i,n)}catch(e){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in n&&Object.prototype.__defineGetter__.call(t,i,n.get),Object.prototype.__defineSetter__&&"set"in n&&Object.prototype.__defineSetter__.call(t,i,n.set),"value"in n&&(t[i]=n.value),t})}(),function(){function l(e){if((e=a(e))<0)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"_bytes",{value:Array(e)});for(var t=0;t<e;t+=1)this._bytes[t]=0}function u(){if(!arguments.length||"object"!=typeof arguments[0])return(function(e){if((e=a(e))<0)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:e}),Object.defineProperty(this,"byteLength",{value:e*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new l(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}).apply(this,arguments);if(arguments.length>=1&&"object"===t(arguments[0])&&arguments[0]instanceof u)return(function(e){if(this.constructor!==e.constructor)throw TypeError();var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new l(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var i=0;i<this.length;i+=1)this._setter(i,e._getter(i))}).apply(this,arguments);if(arguments.length>=1&&"object"===t(arguments[0])&&!(arguments[0]instanceof u)&&!(arguments[0]instanceof l||"ArrayBuffer"===i(arguments[0])))return(function(e){var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new l(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var i=0;i<this.length;i+=1)this._setter(i,Number(e[i]))}).apply(this,arguments);if(arguments.length>=1&&"object"===t(arguments[0])&&(arguments[0]instanceof l||"ArrayBuffer"===i(arguments[0])))return(function(e,t,i){if((t=s(t))>e.byteLength)throw RangeError("byteOffset out of range");if(t%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(i===P){var n=e.byteLength-t;if(n%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");i=n/this.BYTES_PER_ELEMENT}else n=(i=s(i))*this.BYTES_PER_ELEMENT;if(t+n>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:n}),Object.defineProperty(this,"byteOffset",{value:t}),Object.defineProperty(this,"length",{value:i})}).apply(this,arguments);throw TypeError()}function w(e,t,i){var n=function(){Object.defineProperty(this,"constructor",{value:n}),u.apply(this,arguments),o(this)};"__proto__"in n?n.__proto__=u:(n.from=u.from,n.of=u.of),n.BYTES_PER_ELEMENT=e;var r=function(){};return r.prototype=C,n.prototype=new r,Object.defineProperty(n.prototype,"BYTES_PER_ELEMENT",{value:e}),Object.defineProperty(n.prototype,"_pack",{value:t}),Object.defineProperty(n.prototype,"_unpack",{value:i}),n}e.ArrayBuffer=e.ArrayBuffer||l,Object.defineProperty(u,"from",{value:function(e){return new this(e)}}),Object.defineProperty(u,"of",{value:function(){return new this(arguments)}});var C={};u.prototype=C,Object.defineProperty(u.prototype,"_getter",{value:function(e){if(arguments.length<1)throw SyntaxError("Not enough arguments");if((e=s(e))>=this.length)return P;var t,i,n=[];for(t=0,i=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,i+=1)n.push(this.buffer._bytes[i]);return this._unpack(n)}}),Object.defineProperty(u.prototype,"get",{value:u.prototype._getter}),Object.defineProperty(u.prototype,"_setter",{value:function(e,t){if(arguments.length<2)throw SyntaxError("Not enough arguments");if(!((e=s(e))>=this.length)){var i,n,r=this._pack(t);for(i=0,n=this.byteOffset+e*this.BYTES_PER_ELEMENT;i<this.BYTES_PER_ELEMENT;i+=1,n+=1)this.buffer._bytes[n]=r[i]}}}),Object.defineProperty(u.prototype,"constructor",{value:u}),Object.defineProperty(u.prototype,"copyWithin",{value:function(e,t){var i=arguments[2],n=r(this),o=n.length,l=s(o);l=M(l,0);var u,c=a(e);u=c<0?M(l+c,0):N(c,l);var h,d,p,f=a(t);h=f<0?M(l+f,0):N(f,l),p=(d=i===P?l:a(i))<0?M(l+d,0):N(d,l);var m,g=N(p-h,l-u);for(h<u&&u<h+g?(m=-1,h=h+g-1,u=u+g-1):m=1;g>0;)n._setter(u,n._getter(h)),h+=m,u+=m,g-=1;return n}}),Object.defineProperty(u.prototype,"every",{value:function(e){if(this===P||null===this)throw TypeError();var t=Object(this),i=s(t.length);if(!n(e))throw TypeError();for(var r=arguments[1],a=0;a<i;a++)if(!e.call(r,t._getter(a),a,t))return!1;return!0}}),Object.defineProperty(u.prototype,"fill",{value:function(e){var t=arguments[1],i=arguments[2],n=r(this),o=n.length,l=s(o);l=M(l,0);var u,c,h,d=a(t);for(u=d<0?M(l+d,0):N(d,l),h=(c=i===P?l:a(i))<0?M(l+c,0):N(c,l);u<h;)n._setter(u,e),u+=1;return n}}),Object.defineProperty(u.prototype,"filter",{value:function(e){if(this===P||null===this)throw TypeError();var t=Object(this),i=s(t.length);if(!n(e))throw TypeError();for(var r=[],a=arguments[1],o=0;o<i;o++){var l=t._getter(o);e.call(a,l,o,t)&&r.push(l)}return new this.constructor(r)}}),Object.defineProperty(u.prototype,"find",{value:function(e){var t=r(this),i=t.length,a=s(i);if(!n(e))throw TypeError();for(var o=arguments.length>1?arguments[1]:P,l=0;l<a;){var u=t._getter(l),c=e.call(o,u,l,t);if(Boolean(c))return u;++l}return P}}),Object.defineProperty(u.prototype,"findIndex",{value:function(e){var t=r(this),i=t.length,a=s(i);if(!n(e))throw TypeError();for(var o=arguments.length>1?arguments[1]:P,l=0;l<a;){var u=t._getter(l),c=e.call(o,u,l,t);if(Boolean(c))return l;++l}return-1}}),Object.defineProperty(u.prototype,"forEach",{value:function(e){if(this===P||null===this)throw TypeError();var t=Object(this),i=s(t.length);if(!n(e))throw TypeError();for(var r=arguments[1],a=0;a<i;a++)e.call(r,t._getter(a),a,t)}}),Object.defineProperty(u.prototype,"indexOf",{value:function(e){if(this===P||null===this)throw TypeError();var t=Object(this),i=s(t.length);if(0===i)return-1;var n=0;if(arguments.length>0&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*L(D(n)))),n>=i)return-1;for(var r=n>=0?n:M(i-D(n),0);r<i;r++)if(t._getter(r)===e)return r;return-1}}),Object.defineProperty(u.prototype,"join",{value:function(e){if(this===P||null===this)throw TypeError();for(var t=Object(this),i=s(t.length),n=Array(i),r=0;r<i;++r)n[r]=t._getter(r);return n.join(e===P?",":e)}}),Object.defineProperty(u.prototype,"lastIndexOf",{value:function(e){if(this===P||null===this)throw TypeError();var t=Object(this),i=s(t.length);if(0===i)return-1;var n=i;arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*L(D(n))));for(var r=n>=0?N(n,i-1):i-D(n);r>=0;r--)if(t._getter(r)===e)return r;return-1}}),Object.defineProperty(u.prototype,"map",{value:function(e){if(this===P||null===this)throw TypeError();var t=Object(this),i=s(t.length);if(!n(e))throw TypeError();var r=[];r.length=i;for(var a=arguments[1],o=0;o<i;o++)r[o]=e.call(a,t._getter(o),o,t);return new this.constructor(r)}}),Object.defineProperty(u.prototype,"reduce",{value:function(e){if(this===P||null===this)throw TypeError();var t=Object(this),i=s(t.length);if(!n(e))throw TypeError();if(0===i&&1===arguments.length)throw TypeError();var r,a=0;for(r=arguments.length>=2?arguments[1]:t._getter(a++);a<i;)r=e.call(P,r,t._getter(a),a,t),a++;return r}}),Object.defineProperty(u.prototype,"reduceRight",{value:function(e){if(this===P||null===this)throw TypeError();var t=Object(this),i=s(t.length);if(!n(e))throw TypeError();if(0===i&&1===arguments.length)throw TypeError();var r,a=i-1;for(r=arguments.length>=2?arguments[1]:t._getter(a--);a>=0;)r=e.call(P,r,t._getter(a),a,t),a--;return r}}),Object.defineProperty(u.prototype,"reverse",{value:function(){if(this===P||null===this)throw TypeError();for(var e=Object(this),t=s(e.length),i=L(t/2),n=0,r=t-1;n<i;++n,--r){var a=e._getter(n);e._setter(n,e._getter(r)),e._setter(r,a)}return e}}),Object.defineProperty(u.prototype,"set",{value:function(e,t){if(arguments.length<1)throw SyntaxError("Not enough arguments");var i,n,r,a,o,l,u,c,h,d;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(i=arguments[0],(r=s(arguments[1]))+i.length>this.length)throw RangeError("Offset plus length of array is out of range");if(c=this.byteOffset+r*this.BYTES_PER_ELEMENT,h=i.length*this.BYTES_PER_ELEMENT,i.buffer===this.buffer){for(d=[],o=0,l=i.byteOffset;o<h;o+=1,l+=1)d[o]=i.buffer._bytes[l];for(o=0,u=c;o<h;o+=1,u+=1)this.buffer._bytes[u]=d[o]}else for(o=0,l=i.byteOffset,u=c;o<h;o+=1,l+=1,u+=1)this.buffer._bytes[u]=i.buffer._bytes[l]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw TypeError("Unexpected argument type(s)");if(a=s((n=arguments[0]).length),(r=s(arguments[1]))+a>this.length)throw RangeError("Offset plus length of array is out of range");for(o=0;o<a;o+=1)l=n[o],this._setter(r+o,Number(l))}}}),Object.defineProperty(u.prototype,"slice",{value:function(e,t){for(var i=r(this),n=s(i.length),o=a(e),l=o<0?M(n+o,0):N(o,n),u=t===P?n:a(t),c=u<0?M(n+u,0):N(u,n),h=new(0,i.constructor)(c-l),d=0;l<c;){var p=i._getter(l);h._setter(d,p),++l,++d}return h}}),Object.defineProperty(u.prototype,"some",{value:function(e){if(this===P||null===this)throw TypeError();var t=Object(this),i=s(t.length);if(!n(e))throw TypeError();for(var r=arguments[1],a=0;a<i;a++)if(e.call(r,t._getter(a),a,t))return!0;return!1}}),Object.defineProperty(u.prototype,"sort",{value:function(e){if(this===P||null===this)throw TypeError();for(var t=Object(this),i=s(t.length),n=Array(i),r=0;r<i;++r)n[r]=t._getter(r);for(e?n.sort(e):n.sort(),r=0;r<i;++r)t._setter(r,n[r]);return t}}),Object.defineProperty(u.prototype,"subarray",{value:function(e,t){function i(e,t,i){return e<t?t:e>i?i:e}e=a(e),t=a(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=i(e,0,this.length);var n=(t=i(t,0,this.length))-e;return n<0&&(n=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,n)}});var O=w(1,c,h),I=w(1,d,p),R=w(1,f,p),j=w(2,m,g),U=w(2,v,y),F=w(4,_,b),B=w(4,T,S),H=w(4,A,E),q=w(8,x,k);e.Int8Array=e.Int8Array||O,e.Uint8Array=e.Uint8Array||I,e.Uint8ClampedArray=e.Uint8ClampedArray||R,e.Int16Array=e.Int16Array||j,e.Uint16Array=e.Uint16Array||U,e.Int32Array=e.Int32Array||F,e.Uint32Array=e.Uint32Array||B,e.Float32Array=e.Float32Array||H,e.Float64Array=e.Float64Array||q}(),function(){function t(e,t){return n(e.get)?e.get(t):e[t]}function r(e,t,n){if(!(e instanceof ArrayBuffer||"ArrayBuffer"===i(e)))throw TypeError();if((t=s(t))>e.byteLength)throw RangeError("byteOffset out of range");if(t+(n=n===P?e.byteLength-t:s(n))>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:n}),Object.defineProperty(this,"byteOffset",{value:t})}function a(e){return function(i,n){if((i=s(i))+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");i+=this.byteOffset;for(var r=new Uint8Array(this.buffer,i,e.BYTES_PER_ELEMENT),a=[],o=0;o<e.BYTES_PER_ELEMENT;o+=1)a.push(t(r,o));return Boolean(n)===Boolean(l)&&a.reverse(),t(new e(new Uint8Array(a).buffer),0)}}function o(e){return function(i,n,r){if((i=s(i))+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");var a,o=new e([n]),u=new Uint8Array(o.buffer),c=[];for(a=0;a<e.BYTES_PER_ELEMENT;a+=1)c.push(t(u,a));Boolean(r)===Boolean(l)&&c.reverse(),new Uint8Array(this.buffer,i,e.BYTES_PER_ELEMENT).set(c)}}var l=function(){var e=new Uint16Array([4660]);return 18===t(new Uint8Array(e.buffer),0)}();Object.defineProperty(r.prototype,"getUint8",{value:a(Uint8Array)}),Object.defineProperty(r.prototype,"getInt8",{value:a(Int8Array)}),Object.defineProperty(r.prototype,"getUint16",{value:a(Uint16Array)}),Object.defineProperty(r.prototype,"getInt16",{value:a(Int16Array)}),Object.defineProperty(r.prototype,"getUint32",{value:a(Uint32Array)}),Object.defineProperty(r.prototype,"getInt32",{value:a(Int32Array)}),Object.defineProperty(r.prototype,"getFloat32",{value:a(Float32Array)}),Object.defineProperty(r.prototype,"getFloat64",{value:a(Float64Array)}),Object.defineProperty(r.prototype,"setUint8",{value:o(Uint8Array)}),Object.defineProperty(r.prototype,"setInt8",{value:o(Int8Array)}),Object.defineProperty(r.prototype,"setUint16",{value:o(Uint16Array)}),Object.defineProperty(r.prototype,"setInt16",{value:o(Int16Array)}),Object.defineProperty(r.prototype,"setUint32",{value:o(Uint32Array)}),Object.defineProperty(r.prototype,"setInt32",{value:o(Int32Array)}),Object.defineProperty(r.prototype,"setFloat32",{value:o(Float32Array)}),Object.defineProperty(r.prototype,"setFloat64",{value:o(Float64Array)}),e.DataView=e.DataView||r}()}(self),function(e){"use strict";function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,i){var n=this.byteLength,r=t(e,n),a=n;if(void 0!==i&&(a=t(i,n)),r>a)return new ArrayBuffer(0);var s=a-r,o=new ArrayBuffer(s),l=new Uint8Array(o),u=new Uint8Array(this,r,s);return l.set(u),o})}(),"undefined"!=typeof module&&module.exports&&(this["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]),function(e){"use strict";function t(e,t,i){return t<=e&&e<=i}function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function n(e){return 0<=e&&e<=127}function r(e){this.tokens=[].slice.call(e),this.tokens.reverse()}function a(e,t){if(e)throw TypeError("Decoder error");return t||65533}function s(e){throw TypeError("The code point "+e+" could not be encoded.")}function o(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(F,e)?F[e]:null}function l(e,t){return t&&t[e]||null}function u(e,t){var i=t.indexOf(e);return-1===i?null:i}function c(t){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js?");return e["encoding-indexes"][t]}function h(e,t){if(!(this instanceof h))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):q,t=i(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=o(e);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+e);if(!H[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js?");var r=this;return r._encoding=n,Boolean(t.fatal)&&(r._error_mode="fatal"),Boolean(t.ignoreBOM)&&(r._ignoreBOM=!0),Object.defineProperty||(this.encoding=r._encoding.name.toLowerCase(),this.fatal="fatal"===r._error_mode,this.ignoreBOM=r._ignoreBOM),r}function d(t,n){if(!(this instanceof d))throw TypeError("Called as a function. Did you forget 'new'?");n=i(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";var r=this;if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){var a=o(t=void 0!==t?String(t):q);if(null===a||"replacement"===a.name)throw RangeError("Unknown encoding: "+t);if(!B[a.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js?");r._encoding=a}else r._encoding=o("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=r._encoding.name.toLowerCase()),r}function p(e){var i=e.fatal,n=0,r=0,s=0,o=128,l=191;this.handler=function(e,u){if(u===N&&0!==s)return s=0,a(i);if(u===N)return j;if(0===s){if(t(u,0,127))return u;if(t(u,194,223))s=1,n=u-192;else if(t(u,224,239))224===u&&(o=160),237===u&&(l=159),s=2,n=u-224;else{if(!t(u,240,244))return a(i);240===u&&(o=144),244===u&&(l=143),s=3,n=u-240}return n<<=6*s,null}if(!t(u,o,l))return n=s=r=0,o=128,l=191,e.prepend(u),a(i);if(o=128,l=191,n+=u-128<<6*(s-(r+=1)),r!==s)return null;var c=n;return n=s=r=0,c}}function f(e){this.handler=function(e,i){if(i===N)return j;if(t(i,0,127))return i;var n,r;t(i,128,2047)?(n=1,r=192):t(i,2048,65535)?(n=2,r=224):t(i,65536,1114111)&&(n=3,r=240);for(var a=[(i>>6*n)+r];n>0;)a.push(128|63&i>>6*(n-1)),n-=1;return a}}function m(e,t){var i=t.fatal;this.handler=function(t,r){if(r===N)return j;if(n(r))return r;var s=e[r-128];return null===s?a(i):s}}function g(e,t){this.handler=function(t,i){if(i===N)return j;if(M(i))return i;var n=u(i,e);return null===n&&s(i),n+128}}function v(e){var i=e.fatal,r=0,s=0,o=0;this.handler=function(e,u){if(u===N&&0===r&&0===s&&0===o)return j;var h;if(u!==N||0===r&&0===s&&0===o||(r=0,s=0,o=0,a(i)),0!==o){h=null,t(u,48,57)&&(h=function(e){if(e>39419&&e<189e3||e>1237575)return null;if(7457===e)return 59335;var t,i=0,n=0,r=c("gb18030");for(t=0;t<r.length;++t){var a=r[t];if(!(a[0]<=e))break;i=a[0],n=a[1]}return n+e-i}(10*(126*(10*(r-129)+(s-48))+(o-129))+u-48));var d=[s,o,u];return r=0,s=0,o=0,null===h?(e.prepend(d),a(i)):h}if(0!==s)return t(u,129,254)?(o=u,null):(e.prepend([s,u]),r=0,s=0,a(i));if(0!==r){if(t(u,48,57))return s=u,null;var p=r,f=null;r=0;var m=u<127?64:65;return(t(u,64,126)||t(u,128,254))&&(f=190*(p-129)+(u-m)),null===(h=null===f?null:l(f,c("gb18030")))&&n(u)&&e.prepend(u),null===h?a(i):h}return n(u)?u:128===u?8364:t(u,129,254)?(r=u,null):a(i)}}function y(e,t){this.handler=function(e,i){if(i===N)return j;if(M(i))return i;if(58853===i)return s(i);if(t&&8364===i)return 128;var n=u(i,c("gb18030"));if(null!==n){var r=n%190;return[R(n/190)+129,r+(r<63?64:65)]}if(t)return s(i);n=function(e){if(59335===e)return 7457;var t,i=0,n=0,r=c("gb18030");for(t=0;t<r.length;++t){var a=r[t];if(!(a[1]<=e))break;i=a[1],n=a[0]}return n+e-i}(i);var a=R(n/10/126/10),o=R((n-=10*a*126*10)/10/126),l=R((n-=10*o*126)/10);return[a+129,o+48,l+129,n-10*l+48]}}function _(e){var i=e.fatal,r=0;this.handler=function(e,s){if(s===N&&0!==r)return r=0,a(i);if(s===N&&0===r)return j;if(0!==r){var o=r,u=null;r=0;var h=s<127?64:98;switch((t(s,64,126)||t(s,161,254))&&(u=157*(o-129)+(s-h)),u){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var d=null===u?null:l(u,c("big5"));return null===d&&n(s)&&e.prepend(s),null===d?a(i):d}return n(s)?s:t(s,129,254)?(r=s,null):a(i)}}function b(e){this.handler=function(e,t){if(t===N)return j;if(M(t))return t;var i=function(e){var t=c("big5");return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):u(e,t)}(t);if(null===i)return s(t);var n=R(i/157)+129;if(n<161)return s(t);var r=i%157;return[n,r+(r<63?64:98)]}}function T(e){var i=e.fatal,r=!1,s=0;this.handler=function(e,o){if(o===N&&0!==s)return s=0,a(i);if(o===N&&0===s)return j;if(142===s&&t(o,161,223))return s=0,65377+o-161;if(143===s&&t(o,161,254))return r=!0,s=o,null;if(0!==s){var u=s;s=0;var h=null;return t(u,161,254)&&t(o,161,254)&&(h=l(94*(u-161)+(o-161),c(r?"jis0212":"jis0208"))),r=!1,t(o,161,254)||e.prepend(o),null===h?a(i):h}return n(o)?o:142===o||143===o||t(o,161,254)?(s=o,null):a(i)}}function S(e){this.handler=function(e,i){if(i===N)return j;if(M(i))return i;if(165===i)return 92;if(8254===i)return 126;if(t(i,65377,65439))return[142,i-65377+161];8722===i&&(i=65293);var n=u(i,c("jis0208"));return null===n?s(i):[R(n/94)+161,n%94+161]}}function w(e){var i=e.fatal,n=0,r=0,s=!1;this.handler=function(e,o){switch(n){default:case 0:return 27===o?(n=5,null):t(o,0,127)&&14!==o&&15!==o&&27!==o?(s=!1,o):o===N?j:(s=!1,a(i));case 1:return 27===o?(n=5,null):92===o?(s=!1,165):126===o?(s=!1,8254):t(o,0,127)&&14!==o&&15!==o&&27!==o&&92!==o&&126!==o?(s=!1,o):o===N?j:(s=!1,a(i));case 2:return 27===o?(n=5,null):t(o,33,95)?(s=!1,65377+o-33):o===N?j:(s=!1,a(i));case 3:return 27===o?(n=5,null):t(o,33,126)?(s=!1,r=o,n=4,null):o===N?j:(s=!1,a(i));case 4:if(27===o)return n=5,a(i);if(t(o,33,126)){n=3;var u=l(94*(r-33)+o-33,c("jis0208"));return null===u?a(i):u}return o===N?(n=3,e.prepend(o),a(i)):(n=3,a(i));case 5:return 36===o||40===o?(r=o,n=6,null):(e.prepend(o),s=!1,n=0,a(i));case 6:var h=r;r=0;var d=null;if(40===h&&66===o&&(d=0),40===h&&74===o&&(d=1),40===h&&73===o&&(d=2),36!==h||64!==o&&66!==o||(d=3),null!==d){n=n=d;var p=s;return s=!0,p?a(i):null}return e.prepend([h,o]),s=!1,n=0,a(i)}}}function C(e){var t=0;this.handler=function(e,i){if(i===N&&0!==t)return e.prepend(i),t=0,[27,40,66];if(i===N&&0===t)return j;if(!(0!==t&&1!==t||14!==i&&15!==i&&27!==i))return s(65533);if(0===t&&M(i))return i;if(1===t&&(M(i)&&92!==i&&126!==i||165==i||8254==i)){if(M(i))return i;if(165===i)return 92;if(8254===i)return 126}if(M(i)&&0!==t)return e.prepend(i),t=0,[27,40,66];if((165===i||8254===i)&&1!==t)return e.prepend(i),t=1,[27,40,74];8722===i&&(i=65293);var n=u(i,c("jis0208"));return null===n?s(i):2!==t?(e.prepend(i),t=2,[27,36,66]):[R(n/94)+33,n%94+33]}}function k(e){var i=e.fatal,r=0;this.handler=function(e,s){if(s===N&&0!==r)return r=0,a(i);if(s===N&&0===r)return j;if(0!==r){var o=r,u=null;r=0;var h=s<127?64:65,d=o<160?129:193;(t(s,64,126)||t(s,128,252))&&(u=188*(o-d)+s-h);var p=null===u?null:l(u,c("jis0208"));return null===p&&null!==u&&t(u,8836,10528)?57344+u-8836:(null===p&&n(s)&&e.prepend(s),null===p?a(i):p)}return n(s)||128===s?s:t(s,161,223)?65377+s-161:t(s,129,159)||t(s,224,252)?(r=s,null):a(i)}}function x(e){this.handler=function(e,i){if(i===N)return j;if(M(i)||128===i)return i;if(165===i)return 92;if(8254===i)return 126;if(t(i,65377,65439))return i-65377+161;8722===i&&(i=65293);var n=function(e){var i=u(e,c("jis0208"));return null===i||t(i,8272,8835)?null:i}(i);if(null===n)return s(i);var r=R(n/188),a=n%188;return[r+(r<31?129:193),a+(a<63?64:65)]}}function E(e){var i=e.fatal,r=0;this.handler=function(e,s){if(s===N&&0!==r)return r=0,a(i);if(s===N&&0===r)return j;if(0!==r){var o=r,u=null;r=0,t(s,65,254)&&(u=190*(o-129)+(s-65));var h=null===u?null:l(u,c("euc-kr"));return null===u&&n(s)&&e.prepend(s),null===h?a(i):h}return n(s)?s:t(s,129,254)?(r=s,null):a(i)}}function A(e){this.handler=function(e,t){if(t===N)return j;if(M(t))return t;var i=u(t,c("euc-kr"));return null===i?s(t):[R(i/190)+129,i%190+65]}}function P(e,t){var i=e>>8,n=255&e;return t?[i,n]:[n,i]}function O(e,i){var n=i.fatal,r=null,s=null;this.handler=function(i,o){if(o===N&&(null!==r||null!==s))return a(n);if(o===N&&null===r&&null===s)return j;if(null===r)return r=o,null;var l;if(l=e?(r<<8)+o:(o<<8)+r,r=null,null!==s){var u=s;return s=null,t(l,56320,57343)?65536+1024*(u-55296)+(l-56320):(i.prepend(P(l,e)),a(n))}return t(l,55296,56319)?(s=l,null):t(l,56320,57343)?a(n):l}}function I(e,i){this.handler=function(i,n){if(n===N)return j;if(t(n,0,65535))return P(n,e);var r=P(55296+(n-65536>>10),e),a=P(56320+(n-65536&1023),e);return r.concat(a)}}function D(e){this.handler=function(e,t){return t===N?j:n(t)?t:63360+t-128}}function L(e){this.handler=function(e,i){return i===N?j:M(i)?i:t(i,63360,63487)?i-63360+128:s(i)}}var R=Math.floor,M=n,N=-1;r.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():N},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var j=-1,U=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],F={};U.forEach(function(e){e.encodings.forEach(function(e){e.labels.forEach(function(t){F[t]=e})})});var B={},H={},q="utf-8";Object.defineProperty&&(Object.defineProperty(h.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(h.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(h.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),h.prototype.decode=function(e,t){var n;n="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._do_not_flush||(this._decoder=H[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var a,s=new r(n),o=[];;){var l=s.read();if(l===N)break;if((a=this._decoder.handler(s,l))===j)break;null!==a&&(Array.isArray(a)?o.push.apply(o,a):o.push(a))}if(!this._do_not_flush){do{if((a=this._decoder.handler(s,s.read()))===j)break;null!==a&&(Array.isArray(a)?o.push.apply(o,a):o.push(a))}while(!s.endOfStream());this._decoder=null}return(function(e){return!function(e,t){return-1!==["UTF-8","UTF-16LE","UTF-16BE"].indexOf(t)}(0,this._encoding.name)||this._ignoreBOM||this._BOMseen||(e.length>0&&65279===e[0]?(this._BOMseen=!0,e.shift()):e.length>0&&(this._BOMseen=!0)),function(e){for(var t="",i=0;i<e.length;++i){var n=e[i];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(e)}).call(this,o)},Object.defineProperty&&Object.defineProperty(d.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),d.prototype.encode=function(e,t){e=e?String(e):"",t=i(t),this._do_not_flush||(this._encoder=B[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var n,a=new r(function(e){for(var t=String(e),i=t.length,n=0,r=[];n<i;){var a=t.charCodeAt(n);if(a<55296||a>57343)r.push(a);else if(56320<=a&&a<=57343)r.push(65533);else if(55296<=a&&a<=56319)if(n===i-1)r.push(65533);else{var s=e.charCodeAt(n+1);56320<=s&&s<=57343?(r.push(65536+((1023&a)<<10)+(1023&s)),n+=1):r.push(65533)}n+=1}return r}(e)),s=[];;){var o=a.read();if(o===N)break;if((n=this._encoder.handler(a,o))===j)break;Array.isArray(n)?s.push.apply(s,n):s.push(n)}if(!this._do_not_flush){for(;(n=this._encoder.handler(a,a.read()))!==j;)Array.isArray(n)?s.push.apply(s,n):s.push(n);this._encoder=null}return new Uint8Array(s)},B["UTF-8"]=function(e){return new f(e)},H["UTF-8"]=function(e){return new p(e)},"encoding-indexes"in e&&U.forEach(function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach(function(e){var t=e.name,i=c(t.toLowerCase());H[t]=function(e){return new m(i,e)},B[t]=function(e){return new g(i,e)}})}),H.GBK=function(e){return new v(e)},B.GBK=function(e){return new y(e,!0)},B.gb18030=function(e){return new y(e)},H.gb18030=function(e){return new v(e)},B.Big5=function(e){return new b(e)},H.Big5=function(e){return new _(e)},B["EUC-JP"]=function(e){return new S(e)},H["EUC-JP"]=function(e){return new T(e)},B["ISO-2022-JP"]=function(e){return new C(e)},H["ISO-2022-JP"]=function(e){return new w(e)},B.Shift_JIS=function(e){return new x(e)},H.Shift_JIS=function(e){return new k(e)},B["EUC-KR"]=function(e){return new A(e)},H["EUC-KR"]=function(e){return new E(e)},B["UTF-16BE"]=function(e){return new I(!0,e)},H["UTF-16BE"]=function(e){return new O(!0,e)},B["UTF-16LE"]=function(e){return new I(!1,e)},H["UTF-16LE"]=function(e){return new O(!1,e)},B["x-user-defined"]=function(e){return new L(e)},H["x-user-defined"]=function(e){return new D(e)},e.TextEncoder||(e.TextEncoder=d),e.TextDecoder||(e.TextDecoder=h),"undefined"!=typeof module&&module.exports&&(module.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})}(this);var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,n,r,a,s,o,l="",u=0;for(e=Base64._utf8_encode(e);u<e.length;)r=(t=e.charCodeAt(u++))>>2,a=(3&t)<<4|(i=e.charCodeAt(u++))>>4,s=(15&i)<<2|(n=e.charCodeAt(u++))>>6,o=63&n,isNaN(i)?s=o=64:isNaN(n)&&(o=64),l=l+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(o);return l},decode:function(e){var t,i,n,r,a,s,o="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)n=this._keyStr.indexOf(e.charAt(l++)),t=(15&(r=this._keyStr.indexOf(e.charAt(l++))))<<4|(a=this._keyStr.indexOf(e.charAt(l++)))>>2,i=(3&a)<<6|(s=this._keyStr.indexOf(e.charAt(l++))),o+=String.fromCharCode(n<<2|r>>4),64!=a&&(o+=String.fromCharCode(t)),64!=s&&(o+=String.fromCharCode(i));return Base64._utf8_decode(o)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",i=0,n=c1=c2=0;i<e.length;)(n=e.charCodeAt(i))<128?(t+=String.fromCharCode(n),i++):n>191&&n<224?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),i+=3);return t}};function BulkDataObject(){this.DELIMITER="[TOpackage]",this.data=null,this._dataList=[]}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var i=[],n=i.slice,r=i.concat,a=i.push,s=i.indexOf,o={},l=o.toString,u=o.hasOwnProperty,c={},h=e.document,d="2.1.1 -css,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-deprecated,-event-alias,-wrap",p=function(e,t){return new p.fn.init(e,t)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,g=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};function y(e){var t=e.length,i=p.type(e);return"function"!==i&&!p.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}p.fn=p.prototype={jquery:d,constructor:p,selector:"",length:0,toArray:function(){return n.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:n.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return p.each(this,e,t)},map:function(e){return this.pushStack(p.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:a,sort:i.sort,splice:i.splice},p.extend=p.fn.extend=function(){var e,t,i,n,r,a,s=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[o]||{},o++),"object"==typeof s||p.isFunction(s)||(s={}),o===l&&(s=this,o--);l>o;o++)if(null!=(e=arguments[o]))for(t in e)i=s[t],s!==(n=e[t])&&(u&&n&&(p.isPlainObject(n)||(r=p.isArray(n)))?(r?(r=!1,a=i&&p.isArray(i)?i:[]):a=i&&p.isPlainObject(i)?i:{},s[t]=p.extend(u,a,n)):void 0!==n&&(s[t]=n));return s},p.extend({expando:"jQuery"+(d+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===p.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!p.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return!("object"!==p.type(e)||e.nodeType||p.isWindow(e)||e.constructor&&!u.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?o[l.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;(e=p.trim(e))&&(1===e.indexOf("use strict")?((t=h.createElement("script")).text=e,h.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(m,"ms-").replace(g,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var n=0,r=e.length,a=y(e);if(i){if(a)for(;r>n&&!1!==t.apply(e[n],i);n++);else for(n in e)if(!1===t.apply(e[n],i))break}else if(a)for(;r>n&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(f,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(y(Object(e))?p.merge(i,"string"==typeof e?[e]:e):a.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:s.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,a=e.length,s=!i;a>r;r++)!t(e[r],r)!==s&&n.push(e[r]);return n},map:function(e,t,i){var n,a=0,s=e.length,o=[];if(y(e))for(;s>a;a++)null!=(n=t(e[a],a,i))&&o.push(n);else for(a in e)null!=(n=t(e[a],a,i))&&o.push(n);return r.apply([],o)},guid:1,proxy:function(e,t){var i,r,a;return"string"==typeof t&&(i=e[t],t=e,e=i),p.isFunction(e)?(r=n.call(arguments,2),(a=function(){return e.apply(t||this,r.concat(n.call(arguments)))}).guid=e.guid=e.guid||p.guid++,a):void 0},now:Date.now,support:c}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){o["[object "+t+"]"]=t.toLowerCase()});var _,b=e.document.documentElement,T=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.oMatchesSelector||b.msMatchesSelector,S=function(e,t){if(e===t)return _=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i?e===h||p.contains(h,e)?-1:t===h||p.contains(h,t)?1:0:4&i?-1:1:e.compareDocumentPosition?-1:1};p.extend({find:function(e,t,i,n){var r,a,s=0;if(i=i||[],!e||"string"!=typeof e)return i;if(1!==(a=(t=t||h).nodeType)&&9!==a)return[];if(n)for(;r=n[s++];)p.find.matchesSelector(r,e)&&i.push(r);else p.merge(i,t.querySelectorAll(e));return i},unique:function(e){var t,i=[],n=0,r=0;if(_=!1,e.sort(S),_){for(;t=e[n++];)t===e[n]&&(r=i.push(n));for(;r--;)e.splice(i[r],1)}return e},text:function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r)return e.textContent;if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=p.text(t);return i},contains:function(e,t){var i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(9===e.nodeType?e.documentElement:e).contains(i))},isXMLDoc:function(e){return"HTML"!==(e.ownerDocument||e).documentElement.nodeName},expr:{attrHandle:{},match:{bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]/}}}),p.extend(p.find,{matches:function(e,t){return p.find(e,null,null,t)},matchesSelector:function(e,t){return T.call(e,t)},attr:function(e,t){return e.getAttribute(t)}});var w=p.expr.match.needsContext,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^.[^:#\[\.,]*$/;function x(e,t,i){if(p.isFunction(t))return p.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return p.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(k.test(t))return p.filter(t,e,i);t=p.filter(t,e)}return p.grep(e,function(e){return s.call(t,e)>=0!==i})}p.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?p.find.matchesSelector(n,e)?[n]:[]:p.find.matches(e,p.grep(t,function(e){return 1===e.nodeType}))},p.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(p(e).filter(function(){for(t=0;i>t;t++)if(p.contains(r[t],this))return!0}));for(t=0;i>t;t++)p.find(e,r[t],n);return(n=this.pushStack(i>1?p.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&w.test(e)?p(e):e||[],!1).length}});var E,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:A.exec(e))||!i[1]&&t)return!t||t.jquery?(t||E).find(e):this.constructor(t).find(e);if(i[1]){if(p.merge(this,p.parseHTML(i[1],(t=t instanceof p?t[0]:t)&&t.nodeType?t.ownerDocument||t:h,!0)),C.test(i[1])&&p.isPlainObject(t))for(i in t)p.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(n=h.getElementById(i[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=h,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?void 0!==E.ready?E.ready(e):e(p):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))}).prototype=p.fn,E=p(h);var P=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}p.extend({dir:function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&p(e).is(i))break;n.push(e)}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),p.fn.extend({has:function(e){var t=p(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(p.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,a=[],s=w.test(e)||"string"!=typeof e?p(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&p.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(a.length>1?p.unique(a):a)},index:function(e){return e?"string"==typeof e?s.call(p(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.unique(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return p.dir(e,"parentNode")},parentsUntil:function(e,t,i){return p.dir(e,"parentNode",i)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return p.dir(e,"nextSibling")},prevAll:function(e){return p.dir(e,"previousSibling")},nextUntil:function(e,t,i){return p.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return p.dir(e,"previousSibling",i)},siblings:function(e){return p.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return p.sibling(e.firstChild)},contents:function(e){return e.contentDocument||p.merge([],e.childNodes)}},function(e,t){p.fn[e]=function(i,n){var r=p.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=p.filter(n,r)),this.length>1&&(O[e]||p.unique(r),P.test(e)&&r.reverse()),this.pushStack(r)}});var D,L=/\S+/g,R={};function M(){h.removeEventListener("DOMContentLoaded",M,!1),e.removeEventListener("load",M,!1),p.ready()}p.Callbacks=function(e){e="string"==typeof e?R[e]||function(e){var t=R[e]={};return p.each(e.match(L)||[],function(e,i){t[i]=!0}),t}(e):p.extend({},e);var t,i,n,r,a,s,o=[],l=!e.once&&[],u=function(h){for(t=e.memory&&h,i=!0,s=r||0,r=0,a=o.length,n=!0;o&&a>s;s++)if(!1===o[s].apply(h[0],h[1])&&e.stopOnFalse){t=!1;break}n=!1,o&&(l?l.length&&u(l.shift()):t?o=[]:c.disable())},c={add:function(){if(o){var i=o.length;!function t(i){p.each(i,function(i,n){var r=p.type(n);"function"===r?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==r&&t(n)})}(arguments),n?a=o.length:t&&(r=i,u(t))}return this},remove:function(){return o&&p.each(arguments,function(e,t){for(var i;(i=p.inArray(t,o,i))>-1;)o.splice(i,1),n&&(a>=i&&a--,s>=i&&s--)}),this},has:function(e){return e?p.inArray(e,o)>-1:!(!o||!o.length)},empty:function(){return o=[],a=0,this},disable:function(){return o=l=t=void 0,this},disabled:function(){return!o},lock:function(){return l=void 0,t||c.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!o||i&&!l||(t=[e,(t=t||[]).slice?t.slice():t],n?l.push(t):u(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred(function(i){p.each(t,function(t,a){var s=p.isFunction(e[t])&&e[t];r[a[1]](function(){var e=s&&s.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[a[0]+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?p.extend(e,n):n}},r={};return n.pipe=n.then,p.each(t,function(e,a){var s=a[2],o=a[3];n[a[1]]=s.add,o&&s.add(function(){i=o},t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?n:this,arguments),this},r[a[0]+"With"]=s.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,r,a=0,s=n.call(arguments),o=s.length,l=1!==o||e&&p.isFunction(e.promise)?o:0,u=1===l?e:p.Deferred(),c=function(e,i,r){return function(a){i[e]=this,r[e]=arguments.length>1?n.call(arguments):a,r===t?u.notifyWith(i,r):--l||u.resolveWith(i,r)}};if(o>1)for(t=new Array(o),i=new Array(o),r=new Array(o);o>a;a++)s[a]&&p.isFunction(s[a].promise)?s[a].promise().done(c(a,r,s)).fail(u.reject).progress(c(a,i,t)):--l;return l||u.resolveWith(r,s),u.promise()}}),p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){(!0===e?--p.readyWait:p.isReady)||(p.isReady=!0,!0!==e&&--p.readyWait>0||(D.resolveWith(h,[p]),p.fn.triggerHandler&&(p(h).triggerHandler("ready"),p(h).off("ready"))))}}),p.ready.promise=function(t){return D||(D=p.Deferred(),"complete"===h.readyState?setTimeout(p.ready):(h.addEventListener("DOMContentLoaded",M,!1),e.addEventListener("load",M,!1))),D.promise(t)},p.ready.promise();var N=p.access=function(e,t,i,n,r,a,s){var o=0,l=e.length,u=null==i;if("object"===p.type(i))for(o in r=!0,i)p.access(e,t,o,i[o],!0,a,s);else if(void 0!==n&&(r=!0,p.isFunction(n)||(s=!0),u&&(s?(t.call(e,n),t=null):(u=t,t=function(e,t,i){return u.call(p(e),i)})),t))for(;l>o;o++)t(e[o],i,s?n:n.call(e[o],o,t(e[o],i)));return r?e:u?t.call(e):l?t(e[0],i):a};function j(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=p.expando+Math.random()}p.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},j.uid=1,j.accepts=p.acceptData,j.prototype={key:function(e){if(!j.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=j.uid++;try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,p.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,r=this.key(e),a=this.cache[r];if("string"==typeof t)a[t]=i;else if(p.isEmptyObject(a))p.extend(this.cache[r],t);else for(n in t)a[n]=t[n];return a},get:function(e,t){var i=this.cache[this.key(e)];return void 0===t?i:i[t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?void 0!==(n=this.get(e,t))?n:this.get(e,p.camelCase(t)):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,a=this.key(e),s=this.cache[a];if(void 0===t)this.cache[a]={};else{p.isArray(t)?n=t.concat(t.map(p.camelCase)):(r=p.camelCase(t),n=t in s?[t,r]:(n=r)in s?[n]:n.match(L)||[]),i=n.length;for(;i--;)delete s[n[i]]}},hasData:function(e){return!p.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var U=new j,F=new j,B=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,H=/([A-Z])/g;function q(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(H,"-$1").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:B.test(i)?p.parseJSON(i):i)}catch(r){}F.set(e,t,i)}else i=void 0;return i}p.extend({hasData:function(e){return F.hasData(e)||U.hasData(e)},data:function(e,t,i){return F.access(e,t,i)},removeData:function(e,t){F.remove(e,t)},_data:function(e,t,i){return U.access(e,t,i)},_removeData:function(e,t){U.remove(e,t)}}),p.fn.extend({data:function(e,t){var i,n,r,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(r=F.get(a),1===a.nodeType&&!U.get(a,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=p.camelCase(n.slice(5)),q(a,n,r[n]));U.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){F.set(this,e)}):N(this,function(t){var i,n=p.camelCase(e);if(a&&void 0===t){if(void 0!==(i=F.get(a,e)))return i;if(void 0!==(i=F.get(a,n)))return i;if(void 0!==(i=q(a,n,void 0)))return i}else this.each(function(){var i=F.get(this,n);F.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&F.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){F.remove(this,e)})}}),p.extend({queue:function(e,t,i){var n;return e?(n=U.get(e,t=(t||"fx")+"queue"),i&&(!n||p.isArray(i)?n=U.access(e,t,p.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){var i=p.queue(e,t=t||"fx"),n=i.length,r=i.shift(),a=p._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,function(){p.dequeue(e,t)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return U.get(e,i)||U.access(e,i,{empty:p.Callbacks("once memory").add(function(){U.remove(e,[t+"queue",i])})})}}),p.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?p.queue(this[0],e):void 0===t?this:this.each(function(){var i=p.queue(this,e,t);p._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=p.Deferred(),a=this,s=this.length,o=function(){--n||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=U.get(a[s],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(o));return o(),r.promise(t)}});var V=/^(?:checkbox|radio)$/i;!function(){var e=h.createDocumentFragment().appendChild(h.createElement("div")),t=h.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),c.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",c.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var W="undefined";c.focusinBubbles="onfocusin"in e;var z=/^key/,G=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,J=/^([^.]*)(?:\.(.+)|)$/;function Y(){return!0}function K(){return!1}function $(){try{return h.activeElement}catch(e){}}p.event={global:{},add:function(e,t,i,n,r){var a,s,o,l,u,c,h,d,f,m,g,v=U.get(e);if(v)for(i.handler&&(i=(a=i).handler,r=a.selector),i.guid||(i.guid=p.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(t){return typeof p!==W&&p.event.triggered!==t.type?p.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(L)||[""]).length;u--;)f=g=(o=J.exec(t[u])||[])[1],m=(o[2]||"").split(".").sort(),f&&(h=p.event.special[f]||{},h=p.event.special[f=(r?h.delegateType:h.bindType)||f]||{},c=p.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&p.expr.match.needsContext.test(r),namespace:m.join(".")},a),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,m,s)||e.addEventListener&&e.addEventListener(f,s,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),p.event.global[f]=!0)},remove:function(e,t,i,n,r){var a,s,o,l,u,c,h,d,f,m,g,v=U.hasData(e)&&U.get(e);if(v&&(l=v.events)){for(u=(t=(t||"").match(L)||[""]).length;u--;)if(f=g=(o=J.exec(t[u])||[])[1],m=(o[2]||"").split(".").sort(),f){for(h=p.event.special[f]||{},d=l[f=(n?h.delegateType:h.bindType)||f]||[],o=o[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=d.length;a--;)c=d[a],!r&&g!==c.origType||i&&i.guid!==c.guid||o&&!o.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,m,v.handle)||p.removeEvent(e,f,v.handle),delete l[f])}else for(f in l)p.event.remove(e,f+t[u],i,n,!0);p.isEmptyObject(l)&&(delete v.handle,U.remove(e,"events"))}},trigger:function(t,i,n,r){var a,s,o,l,c,d,f,m=[n||h],g=u.call(t,"type")?t.type:t,v=u.call(t,"namespace")?t.namespace.split("."):[];if(s=o=n=n||h,3!==n.nodeType&&8!==n.nodeType&&!X.test(g+p.event.triggered)&&(g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[p.expando]?t:new p.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=v.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:p.makeArray(i,[t]),f=p.event.special[g]||{},r||!f.trigger||!1!==f.trigger.apply(n,i))){if(!r&&!f.noBubble&&!p.isWindow(n)){for(X.test((l=f.delegateType||g)+g)||(s=s.parentNode);s;s=s.parentNode)m.push(s),o=s;o===(n.ownerDocument||h)&&m.push(o.defaultView||o.parentWindow||e)}for(a=0;(s=m[a++])&&!t.isPropagationStopped();)t.type=a>1?l:f.bindType||g,(d=(U.get(s,"events")||{})[t.type]&&U.get(s,"handle"))&&d.apply(s,i),(d=c&&s[c])&&d.apply&&p.acceptData(s)&&(t.result=d.apply(s,i),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(m.pop(),i)||!p.acceptData(n)||c&&p.isFunction(n[g])&&!p.isWindow(n)&&((o=n[c])&&(n[c]=null),p.event.triggered=g,n[g](),p.event.triggered=void 0,o&&(n[c]=o)),t.result}},dispatch:function(e){e=p.event.fix(e);var t,i,r,a,s,o=[],l=n.call(arguments),u=(U.get(this,"events")||{})[e.type]||[],c=p.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(o=p.event.handlers.call(this,e,u),t=0;(a=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,i=0;(s=a.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,void 0!==(r=((p.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,l))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,a,s=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(n=[],i=0;o>i;i++)void 0===n[r=(a=t[i]).selector+" "]&&(n[r]=a.needsContext?p(r,this).index(l)>=0:p.find(r,this,null,[l]).length),n[r]&&n.push(a);n.length&&s.push({elem:l,handlers:n})}return o<t.length&&s.push({elem:this,handlers:t.slice(o)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,a=t.button;return null==e.pageX&&null!=t.clientX&&(r=(i=e.target.ownerDocument||h).body,e.pageX=t.clientX+((n=i.documentElement)&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[p.expando])return e;var t,i,n,r=e.type,a=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=G.test(r)?this.mouseHooks:z.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new p.Event(a),t=n.length;t--;)e[i=n[t]]=a[i];return e.target||(e.target=h),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==$()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===$()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&p.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=p.extend(new p.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?p.event.trigger(r,null,t):p.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},p.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},p.Event=function(e,t){return this instanceof p.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Y:K):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),void(this[p.expando]=!0)):new p.Event(e,t)},p.Event.prototype={isDefaultPrevented:K,isPropagationStopped:K,isImmediatePropagationStopped:K,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Y,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Y,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Y,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,a=e.handleObj;return(!r||r!==n&&!p.contains(n,r))&&(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}}),c.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){p.event.simulate(t,e.target,p.event.fix(e),!0)};p.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=U.access(n,t);r||n.addEventListener(e,i,!0),U.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=U.access(n,t)-1;r?U.access(n,t,r):(n.removeEventListener(e,i,!0),U.remove(n,t))}}}),p.fn.extend({on:function(e,t,i,n,r){var a,s;if("object"==typeof e){for(s in"string"!=typeof t&&(i=i||t,t=void 0),e)this.on(s,t,i,e[s],r);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),!1===n)n=K;else if(!n)return this;return 1===r&&(a=n,(n=function(e){return p().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=p.guid++)),this.each(function(){p.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,p(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(!1===t||"function"==typeof t)&&(i=t,t=void 0),!1===i&&(i=K),this.each(function(){p.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){p.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?p.event.trigger(e,t,i,!0):void 0}});var Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Z=/<([\w:]+)/,ee=/<|&#?\w+;/,te=/<(?:script|style|link)/i,ie=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^$|\/(?:java|ecma)script/i,re=/^true\/(.*)/,ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,se={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function oe(e,t){return p.nodeName(e,"table")&&p.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ue(e){var t=re.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ce(e,t){for(var i=0,n=e.length;n>i;i++)U.set(e[i],"globalEval",!t||U.get(t[i],"globalEval"))}function he(e,t){var i,n,r,a,s,o,l,u;if(1===t.nodeType){if(U.hasData(e)&&(a=U.access(e),s=U.set(t,a),u=a.events))for(r in delete s.handle,s.events={},u)for(i=0,n=u[r].length;n>i;i++)p.event.add(t,r,u[r][i]);F.hasData(e)&&(o=F.access(e),l=p.extend({},o),F.set(t,l))}}function de(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&p.nodeName(e,t)?p.merge([e],i):i}function pe(e,t){var i=t.nodeName.toLowerCase();"input"===i&&V.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}se.optgroup=se.option,se.tbody=se.tfoot=se.colgroup=se.caption=se.thead,se.th=se.td,p.extend({clone:function(e,t,i){var n,r,a,s,o=e.cloneNode(!0),l=p.contains(e.ownerDocument,e);if(!(c.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||p.isXMLDoc(e)))for(s=de(o),n=0,r=(a=de(e)).length;r>n;n++)pe(a[n],s[n]);if(t)if(i)for(a=a||de(e),s=s||de(o),n=0,r=a.length;r>n;n++)he(a[n],s[n]);else he(e,o);return(s=de(o,"script")).length>0&&ce(s,!l&&de(e,"script")),o},buildFragment:function(e,t,i,n){for(var r,a,s,o,l,u,c=t.createDocumentFragment(),h=[],d=0,f=e.length;f>d;d++)if((r=e[d])||0===r)if("object"===p.type(r))p.merge(h,r.nodeType?[r]:r);else if(ee.test(r)){for(a=a||c.appendChild(t.createElement("div")),s=(Z.exec(r)||["",""])[1].toLowerCase(),a.innerHTML=(o=se[s]||se._default)[1]+r.replace(Q,"<$1></$2>")+o[2],u=o[0];u--;)a=a.lastChild;p.merge(h,a.childNodes),(a=c.firstChild).textContent=""}else h.push(t.createTextNode(r));for(c.textContent="",d=0;r=h[d++];)if((!n||-1===p.inArray(r,n))&&(l=p.contains(r.ownerDocument,r),a=de(c.appendChild(r),"script"),l&&ce(a),i))for(u=0;r=a[u++];)ne.test(r.type||"")&&i.push(r);return c},cleanData:function(e){for(var t,i,n,r,a=p.event.special,s=0;void 0!==(i=e[s]);s++){if(p.acceptData(i)&&(r=i[U.expando])&&(t=U.cache[r])){if(t.events)for(n in t.events)a[n]?p.event.remove(i,n):p.removeEvent(i,n,t.handle);U.cache[r]&&delete U.cache[r]}delete F.cache[i[F.expando]]}}}),p.fn.extend({text:function(e){return N(this,function(e){return void 0===e?p.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||oe(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?p.filter(e,this):this,r=0;null!=(i=n[r]);r++)t||1!==i.nodeType||p.cleanData(de(i)),i.parentNode&&(t&&p.contains(i.ownerDocument,i)&&ce(de(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(p.cleanData(de(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return p.clone(this,e,t)})},html:function(e){return N(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!te.test(e)&&!se[(Z.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Q,"<$1></$2>");try{for(;n>i;i++)1===(t=this[i]||{}).nodeType&&(p.cleanData(de(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,p.cleanData(de(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=r.apply([],e);var i,n,a,s,o,l,u=0,h=this.length,d=this,f=h-1,m=e[0],g=p.isFunction(m);if(g||h>1&&"string"==typeof m&&!c.checkClone&&ie.test(m))return this.each(function(i){var n=d.eq(i);g&&(e[0]=m.call(this,i,n.html())),n.domManip(e,t)});if(h&&(n=(i=p.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===i.childNodes.length&&(i=n),n)){for(s=(a=p.map(de(i,"script"),le)).length;h>u;u++)o=i,u!==f&&(o=p.clone(o,!0,!0),s&&p.merge(a,de(o,"script"))),t.call(this[u],o,u);if(s)for(l=a[a.length-1].ownerDocument,p.map(a,ue),u=0;s>u;u++)ne.test((o=a[u]).type||"")&&!U.access(o,"globalEval")&&p.contains(l,o)&&(o.src?p._evalUrl&&p._evalUrl(o.src):p.globalEval(o.textContent.replace(ae,"")))}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){p.fn[e]=function(e){for(var i,n=[],r=p(e),s=r.length-1,o=0;s>=o;o++)i=o===s?this:this.clone(!0),p(r[o])[t](i),a.apply(n,i.get());return this.pushStack(n)}}),p.fn.delay=function(e,t){return e=p.fx&&p.fx.speeds[e]||e,this.queue(t=t||"fx",function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e=h.createElement("input"),t=h.createElement("select"),i=t.appendChild(h.createElement("option"));e.type="checkbox",c.checkOn=""!==e.value,c.optSelected=i.selected,t.disabled=!0,c.optDisabled=!i.disabled,(e=h.createElement("input")).value="t",e.type="radio",c.radioValue="t"===e.value}();var fe,me=p.expr.attrHandle;p.fn.extend({attr:function(e,t){return N(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}}),p.extend({attr:function(e,t,i){var n,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===W?p.prop(e,t,i):(1===a&&p.isXMLDoc(e)||(t=t.toLowerCase(),n=p.attrHooks[t]||(p.expr.match.bool.test(t)?fe:void 0)),void 0===i?n&&"get"in n&&null!==(r=n.get(e,t))?r:null==(r=p.find.attr(e,t))?void 0:r:null!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void p.removeAttr(e,t))},removeAttr:function(e,t){var i,n,r=0,a=t&&t.match(L);if(a&&1===e.nodeType)for(;i=a[r++];)n=p.propFix[i]||i,p.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!c.radioValue&&"radio"===t&&p.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),fe={set:function(e,t,i){return!1===t?p.removeAttr(e,i):e.setAttribute(i,i),i}},p.each(p.expr.match.bool.source.match(/\w+/g),function(e,t){var i=me[t]||p.find.attr;me[t]=function(e,t,n){var r,a;return n||(a=me[t],me[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,me[t]=a),r}});var ge=/^(?:input|select|textarea|button)$/i;p.fn.extend({prop:function(e,t){return N(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[p.propFix[e]||e]})}}),p.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,i){var n,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return(1!==a||!p.isXMLDoc(e))&&(r=p.propHooks[t=p.propFix[t]||t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||ge.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),c.optSelected||(p.propHooks.selected={get:function(e){return null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});var ve=/[\t\r\n\f]/g;p.fn.extend({addClass:function(e){var t,i,n,r,a,s,o="string"==typeof e&&e,l=0,u=this.length;if(p.isFunction(e))return this.each(function(t){p(this).addClass(e.call(this,t,this.className))});if(o)for(t=(e||"").match(L)||[];u>l;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(ve," "):" ")){for(a=0;r=t[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s=p.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(e){var t,i,n,r,a,s,o=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(p.isFunction(e))return this.each(function(t){p(this).removeClass(e.call(this,t,this.className))});if(o)for(t=(e||"").match(L)||[];u>l;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(ve," "):"")){for(a=0;r=t[a++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");s=e?p.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(p.isFunction(e)?function(i){p(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,r=p(this),a=e.match(L)||[];t=a[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(i===W||"boolean"===i)&&(this.className&&U.set(this,"__className__",this.className),this.className=this.className||!1===e?"":U.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ve," ").indexOf(t)>=0)return!0;return!1}});var ye=/\r/g;p.fn.extend({val:function(e){var t,i,n,r=this[0];return arguments.length?(n=p.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(null==(r=n?e.call(this,i,p(this).val()):e)?r="":"number"==typeof r?r+="":p.isArray(r)&&(r=p.map(r,function(e){return null==e?"":e+""})),(t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=p.valHooks[r.type]||p.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(ye,""):null==i?"":i:void 0}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return null!=t?t:p.trim(p.text(e))}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,s=a?null:[],o=a?r+1:n.length,l=0>r?o:a?r:0;o>l;l++)if(!(!(i=n[l]).selected&&l!==r||(c.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&p.nodeName(i.parentNode,"optgroup"))){if(t=p(i).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,a=p.makeArray(t),s=r.length;s--;)((n=r[s]).selected=p.inArray(n.value,a)>=0)&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,t){return p.isArray(t)?e.checked=p.inArray(p(e).val(),t)>=0:void 0}},c.checkOn||(p.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){p.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var _e=p.now(),be=/\?/;p.parseJSON=function(e){return JSON.parse(e+"")},p.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+e),t};var Te,Se,we=/#.*$/,Ce=/([?&])_=[^&]*/,ke=/^(.*?):[ \t]*([^\r\n]*)$/gm,xe=/^(?:GET|HEAD)$/,Ee=/^\/\//,Ae=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Pe={},Oe={},Ie="*/".concat("*");try{Se=location.href}catch(Ke){(Se=h.createElement("a")).href="",Se=Se.href}function De(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,a=t.toLowerCase().match(L)||[];if(p.isFunction(i))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Le(e,t,i,n){var r={},a=e===Oe;function s(o){var l;return r[o]=!0,p.each(e[o]||[],function(e,o){var u=o(t,i,n);return"string"!=typeof u||a||r[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),s(u),!1)}),l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function Re(e,t){var i,n,r=p.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&p.extend(!0,e,n),e}Te=Ae.exec(Se.toLowerCase())||[],p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Se,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Te[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Re(Re(e,p.ajaxSettings),t):Re(p.ajaxSettings,e)},ajaxPrefilter:De(Pe),ajaxTransport:De(Oe),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var i,n,r,a,s,o,l,u,c=p.ajaxSetup({},t=t||{}),h=c.context||c,d=c.context&&(h.nodeType||h.jquery)?p(h):p.event,f=p.Deferred(),m=p.Callbacks("once memory"),g=c.statusCode||{},v={},y={},_=0,b="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!a)for(a={};t=ke.exec(r);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?r:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return _||(e=y[i]=y[i]||e,v[e]=t),this},overrideMimeType:function(e){return _||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)g[t]=[g[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||b;return i&&i.abort(t),w(0,t),this}};if(f.promise(T).complete=m.add,T.success=T.done,T.error=T.fail,c.url=((e||c.url||Se)+"").replace(we,"").replace(Ee,Te[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=p.trim(c.dataType||"*").toLowerCase().match(L)||[""],null==c.crossDomain&&(o=Ae.exec(c.url.toLowerCase()),c.crossDomain=!(!o||o[1]===Te[1]&&o[2]===Te[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(Te[3]||("http:"===Te[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=p.param(c.data,c.traditional)),Le(Pe,c,t,T),2===_)return T;for(u in(l=c.global)&&0==p.active++&&p.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!xe.test(c.type),n=c.url,c.hasContent||(c.data&&(n=c.url+=(be.test(n)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=Ce.test(n)?n.replace(Ce,"$1_="+_e++):n+(be.test(n)?"&":"?")+"_="+_e++)),c.ifModified&&(p.lastModified[n]&&T.setRequestHeader("If-Modified-Since",p.lastModified[n]),p.etag[n]&&T.setRequestHeader("If-None-Match",p.etag[n])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&T.setRequestHeader("Content-Type",c.contentType),T.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Ie+"; q=0.01":""):c.accepts["*"]),c.headers)T.setRequestHeader(u,c.headers[u]);if(c.beforeSend&&(!1===c.beforeSend.call(h,T,c)||2===_))return T.abort();for(u in b="abort",{success:1,error:1,complete:1})T[u](c[u]);if(i=Le(Oe,c,t,T)){T.readyState=1,l&&d.trigger("ajaxSend",[T,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){T.abort("timeout")},c.timeout));try{_=1,i.send(v,w)}catch(S){if(!(2>_))throw S;w(-1,S)}}else w(-1,"No Transport");function w(e,t,a,o){var u,v,y,b,S,w=t;2!==_&&(_=2,s&&clearTimeout(s),i=void 0,r=o||"",T.readyState=e>0?4:0,u=e>=200&&300>e||304===e,a&&(b=function(e,t,i){for(var n,r,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in o)if(o[r]&&o[r].test(n)){l.unshift(r);break}if(l[0]in i)a=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}s||(s=r)}a=a||s}return a?(a!==l[0]&&l.unshift(a),i[a]):void 0}(c,T,a)),b=function(e,t,i,n){var r,a,s,o,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=u[l+" "+a]||u["* "+a]))for(r in u)if((o=r.split(" "))[1]===a&&(s=u[l+" "+o[0]]||u["* "+o[0]])){!0===s?s=u[r]:!0!==u[r]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(c,b,T,u),u?(c.ifModified&&((S=T.getResponseHeader("Last-Modified"))&&(p.lastModified[n]=S),(S=T.getResponseHeader("etag"))&&(p.etag[n]=S)),204===e||"HEAD"===c.type?w="nocontent":304===e?w="notmodified":(w=b.state,v=b.data,u=!(y=b.error))):(y=w,(e||!w)&&(w="error",0>e&&(e=0))),T.status=e,T.statusText=(t||w)+"",u?f.resolveWith(h,[v,w,T]):f.rejectWith(h,[T,w,y]),T.statusCode(g),g=void 0,l&&d.trigger(u?"ajaxSuccess":"ajaxError",[T,c,u?v:y]),m.fireWith(h,[T,w]),l&&(d.trigger("ajaxComplete",[T,c]),--p.active||p.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,i){return p.get(e,t,i,"json")},getScript:function(e,t){return p.get(e,void 0,t,"script")}}),p.each(["get","post"],function(e,t){p[t]=function(e,i,n,r){return p.isFunction(i)&&(r=r||n,n=i,i=void 0),p.ajax({url:e,type:t,dataType:r,data:i,success:n})}}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){p.fn[t]=function(e){return this.on(t,e)}}),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};var Me=/%20/g,Ne=/\[\]$/,je=/\r?\n/g,Ue=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;function Be(e,t,i,n){var r;if(p.isArray(t))p.each(t,function(t,r){i||Ne.test(e)?n(e,r):Be(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==p.type(t))n(e,t);else for(r in t)Be(e+"["+r+"]",t[r],i,n)}p.param=function(e,t){var i,n=[],r=function(e,t){t=p.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){r(this.name,this.value)});else for(i in e)Be(i,e[i],t,r);return n.join("&").replace(Me,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&Fe.test(this.nodeName)&&!Ue.test(e)&&(this.checked||!V.test(e))}).map(function(e,t){var i=p(this).val();return null==i?null:p.isArray(i)?p.map(i,function(e){return{name:t.name,value:e.replace(je,"\r\n")}}):{name:t.name,value:i.replace(je,"\r\n")}}).get()}}),p.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var He=0,qe={},Ve={0:200,1223:204},We=p.ajaxSettings.xhr();e.ActiveXObject&&p(e).on("unload",function(){for(var e in qe)qe[e]()}),c.cors=!!We&&"withCredentials"in We,c.ajax=We=!!We,p.ajaxTransport(function(e){var t;return c.cors||We&&!e.crossDomain?{send:function(i,n){var r,a=e.xhr(),s=++He;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];for(r in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(r,i[r]);t=function(e){return function(){t&&(delete qe[s],t=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?n(a.status,a.statusText):n(Ve[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:void 0,a.getAllResponseHeaders()))}},a.onload=t(),a.onerror=t("error"),t=qe[s]=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(o){if(t)throw o}},abort:function(){t&&t()}}:void 0}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),p.ajaxTransport("script",function(e){var t,i;if(e.crossDomain)return{send:function(n,r){t=p("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),h.head.appendChild(t[0])},abort:function(){i&&i()}}});var ze=[],Ge=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ze.pop()||p.expando+"_"+_e++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",function(t,i,n){var r,a,s,o=!1!==t.jsonp&&(Ge.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ge.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Ge,"$1"+r):!1!==t.jsonp&&(t.url+=(be.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||p.error(r+" was not called"),s[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){s=arguments},n.always(function(){e[r]=a,t[r]&&(t.jsonpCallback=i.jsonpCallback,ze.push(r)),s&&p.isFunction(a)&&a(s[0]),s=a=void 0}),"script"):void 0}),p.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||h;var n=C.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=p.buildFragment([e],t,r),r&&r.length&&p(r).remove(),p.merge([],n.childNodes))};var Xe=p.fn.load;p.fn.load=function(e,t,i){if("string"!=typeof e&&Xe)return Xe.apply(this,arguments);var n,r,a,s=this,o=e.indexOf(" ");return o>=0&&(n=p.trim(e.slice(o)),e=e.slice(0,o)),p.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&p.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){a=arguments,s.html(n?p("<div>").append(p.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){s.each(i,a||[e.responseText,t,e])}),this},"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var Je=e.jQuery,Ye=e.$;return p.noConflict=function(t){return e.$===p&&(e.$=Ye),t&&e.jQuery===p&&(e.jQuery=Je),p},typeof t===W&&(e.jQuery=e.$=p),p}),DataCaptureClient=function(e,t){if(this.CHECK_CONNECTION="TOCHECKCONNECTION",this.SERIALIZATION_DELIMITER="|",this.anonymized=e,this._firstRequest=!0,null==read_cookie(GetAnalyticsCookieName())&&bake_cookie(this.anonymized,GetAnalyticsCookieName(),"",""),this.CAPTURE_INTERVAL=9e3,this.TIMEOUT=9e4,this._instance=null,this.dateClass={getMilliseconds:function(){return(new Date).getTime()},getTime:function(){return(new Date).getTime()}},this.SCORM_SUCCESS="success",this.SCORM_FAIL="fail",this._gameURL="",this.SERVER={data:"",uniqueId:""},this._defaultMeasure=null,null!=this._instance)throw new Error("Singleton class can only be instanced once");this._user=new DataCaptureUser(this.anonymized,t),this._bulkDataToSend=new BulkDataObject,this._processingBulkData=new BulkDataObject,this._serializedData=this.seralize(),this._serverProcessing=!1,this._requestFailed=!1,this._lastResponseTime=0,this._lastUploadTime=0,this.timeSinceUpload=this.getTimeSinceUpload(),this.timeSinceResponse=this.getTimeSinceResponse(),this.timeToUpload=this.getTimeToUpload(),this.timeToProcess=this.getTimeToProcess(),this.serverDelay=this.getServerDelay(),this._isEnabled=!1},DataCaptureClient.prototype.registerBookmarkFunction=function(e){this._bookmarkCallback=e},DataCaptureClient.prototype.triggerBookmark=function(){this._bookmarkCallback&&this._bookmarkCallback()},DataCaptureClient.prototype.record=function(e,t,i){if(Debug.log("DataCaptureClient::record - Data recorded."),null==t){if(null==this._defaultMeasure)throw new Error("Must supply default measure if you wish to omit a measure within the client's record function");t=this._defaultMeasure}this._isEnabled&&(this._bulkDataToSend.add(t,e,i),this.triggerBookmark())},DataCaptureClient.prototype.sendHeartbeat=function(){Debug.log(new Date+" - heartbeat");var e=document.createElement("iframe");e.style.display="none";var t=this;e.onload=function(){e.parentNode.removeChild(e),t.process()};var i=DataCaptureURL.getServerID().split("/");e.src=i[0]+"//"+i[2]+"/heartbeat.png?nocache="+Math.random(),document.body.appendChild(e)},DataCaptureClient.prototype.process=function(){Debug.log("DataCaptureClient::process - Process Tick");var e=this;if(this._lastProcessTime=this.dateClass.getMilliseconds(),this._serverProcessing){if(Debug.log("DataCaptureClient::process - Server processing flagged"),!(this.getTimeSinceUpload()>this.TIMEOUT))return void Debug.log("DataCaptureClient::process - Server Processing -- Timeout in: "+String(this.TIMEOUT-this.getTimeSinceUpload()));ExternalCalls.scorm_call(ScormFunction.SCORM_DATA_SENT,this.SCORM_FAIL),this._requestFailed=!0,this._serverProcessing=!1;try{this._currentRequest.abort()}catch(error){Debug.log("ERROR -> DataCaptureClient::process - Invalid Stream Error -- "+error)}}if(this._user.getId()==DataCaptureUser.NO_ID)return Debug.log("DataCaptureClient::process - No user ID, one has been requested."),this._currentRequest=this._user.getReportingHandle(),this._serverProcessing=!0,this._requestFailed=!1,this._lastUploadTime=this.dateClass.getMilliseconds(),this._currentRequest.done(function(t){void 0!==t&&null!=t&&""!=t&&(e.ret=e.parseUniqueId(t),e.SERVER.uniqueId=e.ret,e.handleServerLoadComplete())}),void this._currentRequest.fail(function(t,i,n){e.handleServerIOError(t.statusText)});this._requestFailed?(Debug.log("DataCaptureClient::process - Previous request has failed, attempting again."),this._bulkDataToSend.containsData()&&(this._processingBulkData.concatenate(this._bulkDataToSend),this._bulkDataToSend.clear(),this.dataToSend=this._processingBulkData.request(e))):this._bulkDataToSend.containsData()?(Debug.log("DataCaptureClient::process - Sending New Data..."),this._processingBulkData=this._bulkDataToSend,this._bulkDataToSend=new BulkDataObject,this.dataToSend=this._processingBulkData.request(e)):Debug.log("DataCaptureClient::process - No new data."),this.isEmpty(this.dataToSend)||(Debug.log("DataCaptureClient::process - New request!"),this._currentRequest=this.upload(this.dataToSend),this._currentRequest.done(function(t){e.SERVER.data=t,e.handleServerLoadComplete()}),this._currentRequest.fail(function(t){e.handleServerIOError(t.responseText)}),this._serializedData=this.seralize(),this.displayProcessingData())},DataCaptureClient.prototype.displayProcessingData=function(){var e=this._processingBulkData._dataList;Debug.log("--------Sending Data--------");for(var t=0;t<e.length;t++)Debug.log(e[t].data);Debug.log("----------------------------")},DataCaptureClient.prototype.upload=function(e){Debug.log("DataCaptureClient::upload - ",e),this._serverProcessing=!0,this._requestFailed=!1,this._lastUploadTime=this.dateClass.getTime();try{return $.ajax({url:DataCaptureURL.getServerID(),method:"POST",data:{data:e.data,method:e.method}})}catch(error){this.handleServerIOError(error)}},DataCaptureClient.prototype.checkConnectionRequest=function(){var e="Version=&DeviceTimeStamp=&device_timestamp=&method="+DataCaptureMethods.SEND_REPORT_METHOD+"&Reserved=&MeasureName=&ID="+encodeURIComponent(this.CHECK_CONNECTION)+"&data_record_timestamp="+encodeURIComponent(Math.round((new Date).getTime()/1e3).toString())+"&MeasureValue=&Log=";try{var t=$.ajax({url:DataCaptureURL.getServerID(),method:"POST",data:e});t.done(function(e){Debug.log("Connection successful::Server response - ",e)}),t.fail(function(e){Debug.log("Connection error::Server response - ",e)})}catch(error){Debug.log("Connection error::Server response - ",error)}},DataCaptureClient.prototype.handleServerLoadComplete=function(){this._serverProcessing=!1,this._requestFailed=!1,this._currentRequest=null,this._firstRequest=!1,this._lastResponseTime=this.dateClass.getMilliseconds();var e=this.SERVER.data;switch(e){case DataCaptureResponses.DATA_SENT_SUCCESS:this._processingBulkData.clear(),this.dataToSend={},this._serializedData=this.seralize(),this.triggerBookmark();case DataCaptureResponses.VALID_CONNECTION:ExternalCalls.scorm_call(ScormFunction.SCORM_DATA_SENT,this.SCORM_SUCCESS),Debug.log("DataCaptureClient::handleServerLoadComplete - Server Response: "+e);break;case DataCaptureResponses.DATA_SENT_FAILED:ExternalCalls.scorm_call(ScormFunction.SCORM_DATA_SENT,this.SCORM_FAIL),this._requestFailed=!0;break;default:null!=this.SERVER.uniqueId?this.SERVER.uniqueId==DataCaptureUser.NO_ID?(ExternalCalls.scorm_call(ScormFunction.SCORM_DATA_SENT,this.SCORM_FAIL),this._requestFailed=!0):(ExternalCalls.scorm_call(ScormFunction.SCORM_DATA_SENT,this.SCORM_SUCCESS),this._user.getId()==DataCaptureUser.NO_ID&&(ExternalCalls.java_log("DataCaptureClient::handleServerLoadComplete - Setting UniqueID: "+this.SERVER.uniqueId),this._user.setId(this.SERVER.uniqueId))):(Debug.log("ERROR -> DataCaptureClient::handleServerLoadComplete - Unknown Server Response: "+e),ExternalCalls.scorm_call(ScormFunction.SCORM_DATA_SENT,this.SCORM_FAIL),this._requestFailed=!0)}},DataCaptureClient.prototype.handleServerIOError=function(e){this._serverProcessing=!1,this._requestFailed=!0,Debug.log("ERROR -> DataCaptureClient::handleServerIOError - "+e);try{if(this._firstRequest&&navigator.userAgent.match(/Trident.*rv\:11\./))return this._firstRequest=!1,Debug.log("Proactively switching to heartbeat mode to try to work around connection error"),clearInterval(this.SYSTEM_CLOCK),void(this.SYSTEM_CLOCK=setInterval(this.sendHeartbeat.bind(this),this.CAPTURE_INTERVAL))}catch(error){Debug.log("Error running heartbeat fallback check "+error)}this._firstRequest=!1,ExternalCalls.scorm_call(ScormFunction.SCORM_DATA_SENT,this.SCORM_FAIL)},DataCaptureClient.prototype.handleSecurityError=function(e){this._serverProcessing=!1,this._requestFailed=!0,Debug.log("ERROR -> DataCaptureClient::handleSecurityError - "+e),ExternalCalls.scorm_call(ScormFunction.SCORM_DATA_SENT,this.SCORM_FAIL)},DataCaptureClient.prototype.getInstance=function(){return null==this._instance&&(this._instance=new DataCaptureClient),this._instance},DataCaptureClient.prototype.getUser=function(){return this._user},DataCaptureClient.prototype.getDefaultMeasure=function(){return this._defaultMeasure},DataCaptureClient.prototype.setDefaultMeasure=function(e){this._defaultMeasure=e},DataCaptureClient.prototype.load=function(e){Debug.log("LOAD DATA CAPTURE: "+e);var t=e.split(this.SERIALIZATION_DELIMITER);this._user.load(t[0]),this._bulkDataToSend.load(t[1]),this._processingBulkData.load(t[2]),this._bulkDataToSend.concatenate(this._processingBulkData),this._processingBulkData.clear()},DataCaptureClient.prototype.seralize=function(){return this._user.serialize()+this.SERIALIZATION_DELIMITER+this._bulkDataToSend.seralize()+this.SERIALIZATION_DELIMITER+this._processingBulkData.seralize()},DataCaptureClient.prototype.getIsEnabled=function(){return this._isEnabled},DataCaptureClient.prototype.setIsEnabled=function(e,t){this._isEnabled=e,this._isEnabled?(Debug.log("DataCaptureClient::isEnabled - Data Capture ON - "+DataCaptureURL.getServerID()),this.SYSTEM_CLOCK=t?setInterval(this.sendHeartbeat.bind(this),this.CAPTURE_INTERVAL):setInterval(this.process.bind(this),this.CAPTURE_INTERVAL)):(Debug.log("DataCaptureClient::isEnabled - Data Capture OFF"),clearInterval(this.SYSTEM_CLOCK))},DataCaptureClient.prototype.getTimeSinceUpload=function(){return this.dateClass.getTime()-this._lastUploadTime},DataCaptureClient.prototype.getTimeSinceResponse=function(){return this.dateClass.getTime()-this._lastResponseTime},DataCaptureClient.prototype.getServerDelay=function(){var e=this._lastResponseTime-this._lastUploadTime;return e<0?0:e},DataCaptureClient.prototype.getTimeToUpload=function(){return this._serverProcessing?this.serverDelay:this._bulkDataToSend.containsData()||this._processingBulkData.containsData()?this.timeToProcess:-1},DataCaptureClient.prototype.getTimeToProcess=function(){var e=this.CAPTURE_INTERVAL-(this.dateClass.getMilliseconds()-this._lastProcessTime);return e<0?0:e},DataCaptureClient.prototype.getServerProcessing=function(){return this._serverProcessing},DataCaptureClient.prototype.getRequestFailed=function(){return this._requestFailed},DataCaptureClient.prototype.getSerializedData=function(){return this._serializedData},DataCaptureClient.prototype.checkIfUndefined=function(e,t){void 0===e&&(e=t)},DataCaptureClient.prototype.parseUniqueId=function(e){return e.split("&")[1].replace("uniqueID=","")},DataCaptureClient.prototype.isEmpty=function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,i=Number(arguments[1])||0;for((i=i<0?Math.ceil(i):Math.floor(i))<0&&(i+=t);i<t;i++)if(i in this&&this[i]===e)return i;return-1}),DataCaptureUser=function(e,t){this.NO_ID="noID",this.user_anonymized=e,this.COOKIE=read_cookie(GetAnalyticsCookieName()),this._loadFlag=!1,this._currentRunCount=this.incrementRunCount(),this._userID=this.readCookieID(),this._userInfoXML=this.getUserInfo(t),Debug.log("DataCaptureUser::Constructor - UniqueID: "+this._userID+" RunCount: "+this._currentRunCount)},DataCaptureUser.prototype.getReportingHandle=function(){var e=null;try{e=$.ajax({url:DataCaptureURL.getServerID(),type:"POST",data:"method="+DataCaptureMethods.GET_REPORTING_HANDLE_METHOD+"&gameID="+encodeURIComponent(this.getGameID())+"&devInfo="+encodeURIComponent(this.getDeviceInfo())+"&reserved_playerHandleID=&customerID="+encodeURIComponent(this.getCustomerID())})}catch(error){this.handleServerIOError(error)}return e},DataCaptureUser.prototype.getUserInfo=function(e){var t=ExternalCalls.scorm_call(ScormFunction.GET_USER_INFO,[this.user_anonymized,e]);return userinfo=t||{username:"LMS Fallback",customerid:0,lmserrors:"No LMS Detected",custom1:"",custom2:"",custom3:""},userinfo},DataCaptureUser.prototype.safe_flush=function(){try{bake_cookie(this.user_anonymized,GetAnalyticsCookieName(),this.COOKIE.logId,this.COOKIE.UID,this.COOKIE.username)?Debug.log("DataCaptureUser - Cookie flush success!"):Debug.log("DataCaptureUser - Cookie flush pending.")}catch(e){Debug.log("ERROR -> COOKIE flush failed. Attempting again in 1 second."),ExternalCalls.scorm_call(ScormFunction.SCORM_DATA_SENT,DataCaptureClient.SCORM_FAIL),setTimeout(this.safe_flush,1e3)}},DataCaptureUser.prototype.readCookieID=function(){return null!=this.COOKIE.UID&&""!=this.COOKIE.UID&&void 0!==this.COOKIE.UID?this.COOKIE.UID:this.NO_ID},DataCaptureUser.prototype.incrementRunCount=function(){if(void 0!==this.COOKIE&&null!=this.COOKIE){var e=this.COOKIE.logId;e++,this.COOKIE.logId=e}else this.COOKIE={logId:1};return this.safe_flush(),this.COOKIE.logId},DataCaptureUser.prototype.getUserBrowser=function(){var e,t,i,n;return null!=(e=navigator.userAgent)&&e.length>0?(-1!=e.indexOf("Safari")?(t=e.indexOf("Safari"),i=e.substring(t+7),n="Safari"):-1!=e.indexOf("Firefox")?(t=e.indexOf("Firefox"),i=e.substring(t+8),n="Firefox"):-1!=e.indexOf("Chrome")?(t=e.indexOf("Chrome"),i=e.substring(t+7),n="Chrome"):-1!=e.indexOf("MSIE")?(t=e.indexOf("MSIE"),i=e.substring(t+5),n="Internet Explorer"):-1!=e.indexOf("Opera")?(t=e.indexOf("Opera"),i=e.substring(t+6),n="Opera"):n="[Unknown Browser]",null!=i&&i.length>0&&(-1!=i.indexOf(";")&&(i=i.substring(0,i.indexOf(";"))),-1!=i.indexOf(" ")&&(i=i.substring(0,i.indexOf(" "))),n=n+" "+i)):n="[No ExternalInterface]",n},DataCaptureUser.prototype.getDeviceInfo=function(){var e="-",t="";screen.width&&(width=screen.width?screen.width:"",height=screen.height?screen.height:"",t+=width+" x "+height);var i,n,r,a=navigator.appVersion,s=navigator.userAgent,o=navigator.appName,l=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10);-1!=(n=s.indexOf("Opera"))?(o="Opera",l=s.substring(n+6),-1!=(n=s.indexOf("Version"))&&(l=s.substring(n+8))):-1!=(n=s.indexOf("MSIE"))?(o="Microsoft Internet Explorer",l=s.substring(n+5)):-1!=(n=s.indexOf("Chrome"))?(o="Chrome",l=s.substring(n+7)):-1!=(n=s.indexOf("Safari"))?(o="Safari",l=s.substring(n+7),-1!=(n=s.indexOf("Version"))&&(l=s.substring(n+8))):-1!=(n=s.indexOf("Firefox"))?(o="Firefox",l=s.substring(n+8)):-1!=s.indexOf("Trident/")?(o="Microsoft Internet Explorer",l=s.substring(s.indexOf("rv:")+3)):(i=s.lastIndexOf(" ")+1)<(n=s.lastIndexOf("/"))&&(o=s.substring(i,n),l=s.substring(n+1),o.toLowerCase()==o.toUpperCase()&&(o=navigator.appName)),-1!=(r=l.indexOf(";"))&&(l=l.substring(0,r)),-1!=(r=l.indexOf(" "))&&(l=l.substring(0,r)),-1!=(r=l.indexOf(")"))&&(l=l.substring(0,r)),u=parseInt(""+l,10),isNaN(u)&&(l=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10));var c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(a),h=!!navigator.cookieEnabled;void 0!==navigator.cookieEnabled||h||(document.cookie="testcookie",h=-1!=document.cookie.indexOf("testcookie"));var d=e,p=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var f in p){var m=p[f];if(m.r.test(s)){d=m.s;break}}var g=e;try{switch(/Windows/.test(d)&&(g=/Windows (.*)/.exec(d="Windows")[1]),d){case"Mac OS X":g=/Mac OS X ([0-9][\.\_\d]+)/.exec(s)[1];break;case"Android":g=/Android ([\.\_\d]+)/.exec(s)[1];break;case"iOS":g=(g=/OS (\d+)_(\d+)_?(\d+)?/.exec(a))[1]+"."+g[2]+"."+(0|g[3])}}catch(_){g=e}var v="no check";if("undefined"!=typeof swfobject){var y=swfobject.getFlashPlayerVersion();v=y.major>0?y.major+"."+y.minor+" r"+y.release:e}return JSON.stringify({screenResolution:t,browser:o+" "+l,mobile:c,operatingSystem:d+" "+g,cookies:h,flashVersion:v})},DataCaptureUser.prototype.serialize=function(){return JSON.stringify([this.getCurrentRunCount(),this.getId()])},DataCaptureUser.prototype.load=function(e){this._loadFlag=!0;var t=JSON.parse(e);this.setCurrentRunCount(parseInt(t[0])),this.setId(t[1])},DataCaptureUser.prototype.getCurrentRunCount=function(){return this._currentRunCount},DataCaptureUser.prototype.setCurrentRunCount=function(e){this._currentRunCount=e,this.COOKIE.logId=this._currentRunCount,this.safe_flush()},DataCaptureUser.prototype.getGameName=function(){return this._gameName},DataCaptureUser.prototype.setGameName=function(e){this._gameName=e},DataCaptureUser.prototype.getGameID=function(){return this._gameID},DataCaptureUser.prototype.setGameID=function(e){this._gameID=e},DataCaptureUser.prototype.getUserInfoXML=function(){return this._userInfoXML},DataCaptureUser.prototype.getUserName=function(){return this._userInfoXML.username},DataCaptureUser.prototype.setUserName=function(e){this._userInfoXML.username=e},DataCaptureUser.prototype.getCustomerID=function(){return this._userInfoXML.customerid},DataCaptureUser.prototype.setCustomerID=function(e){this._userInfoXML.customerid=e},DataCaptureUser.prototype.getId=function(){return this._userID},DataCaptureUser.prototype.setId=function(e){this._userID=e,this.COOKIE.UID=e,this.safe_flush()},DataCaptureUser.prototype.getLoadFlag=function(){return this._loadFlag},DataCaptureUser.prototype.getRawXML=function(){var e="<userinfo>";return e+="<username>"+this._userInfoXML.username+"</username>",e+="<customerid>"+this._userInfoXML.customerid+"</customerid>",e+="<custom1>"+this._userInfoXML.custom1+"</custom1>",e+="<custom2>"+this._userInfoXML.custom2+"</custom2>",e+="<custom3>"+this._userInfoXML.custom3+"</custom3>",(e+="<lmserrors>"+this._userInfoXML.lmserrors+"</lmserrors>")+"</userinfo>"},DataCaptureUser.prototype.getGameURL=function(){return this._gameURL},DataCaptureUser.prototype.setGameURL=function(e){this._gameURL=e},DataCaptureUser.NO_ID="noID",BulkDataObject.prototype.clear=function(){this._dataList=[]},BulkDataObject.prototype.concatenate=function(e){this._dataList=this._dataList.concat(e._dataList)},BulkDataObject.prototype.add=function(e,t,i){var n=Math.round((new Date).getTime()/1e3).toString();return i&&(n=i),this._dataList.push({measure:e,data:t,deviceTimestamp:n}),this._dataList.length},BulkDataObject.prototype.containsData=function(){return this._dataList.length>0},BulkDataObject.prototype.getData=function(e){for(var t="",i=0;i<this._dataList.length;i++)t+=this.DELIMITER+"Version=&device_timestamp="+encodeURIComponent(this._dataList[i].deviceTimestamp)+"&Reserved=&MeasureName="+encodeURIComponent(this._dataList[i].measure)+"&ID="+encodeURIComponent(e._user.getId())+"&data_record_timestamp="+encodeURIComponent(Math.round((new Date).getTime()/1e3).toString())+"&MeasureValue="+encodeURIComponent(this._dataList[i].data)+"&Log="+encodeURIComponent(e._user.getCurrentRunCount());return t},BulkDataObject.prototype.load=function(e){e=JSON.parse(e),this._dataList=[];for(var t=0;t<e.length;t++)this._dataList.push(e[t])},BulkDataObject.prototype.seralize=function(){return JSON.stringify(this._dataList)},BulkDataObject.prototype.request=function(e){return{data:this.getData(e),method:DataCaptureMethods.SEND_BULK_DATA_METHOD}},DataCaptureURL=function(){},DataCaptureURL.throwError=function(){try{throw new Error("No")}catch(e){Debug.log(e.name+": "+e.message)}},DataCaptureURL.getServerID=function(){return this._serverID},DataCaptureURL.setServerID=function(e){if(-1===this.SERVERS.indexOf(e))throw new Error("Unaccepted Server");this._serverID=e},DataCaptureURL.PRODUCTION="https://secure.trueoffice.com/api/client",DataCaptureURL.QA="https://qasecure.trueoffice.com/api/client",DataCaptureURL.DEVELOPMENT="http://devsecure3.trueoffice.com/api/client",DataCaptureURL.TIME_OUT="http://10.0.1.100",DataCaptureURL.DEVELOPMENT_HTTPS="https://devsecure3.trueoffice.com/api/client",DataCaptureURL.SERVERS=["https://secure.trueoffice.com/api/client","https://qasecure.trueoffice.com/api/client","http://devsecure3.trueoffice.com/api/client","http://10.0.1.100","https://devsecure3.trueoffice.com/api/client"],DataCaptureURL._serverID=DataCaptureURL.QA,DataCaptureMethods=function(){},DataCaptureMethods.GET_REPORTING_HANDLE_METHOD="getReportingHandle",DataCaptureMethods.SEND_REPORT_METHOD="sendReportData",DataCaptureMethods.SEND_BULK_DATA_METHOD="sendBulkData",DataCaptureResponses=function(){},DataCaptureResponses.VALID_CONNECTION="OK",DataCaptureResponses.DATA_SENT_SUCCESS="0XBABECAFE",DataCaptureResponses.DATA_SENT_FAILED="0";var Debug={_isDebug:!1,on:function(){this._isDebug=!0},log:function(e,t){this._isDebug&&(void 0!==t?console.log(e,t):console.log(e))},isDebug:function(){return this._isDebug}};function isCookieEnabled(){return document.cookie.length>0||(document.cookie="testcookie",cookieEnabled=-1!=document.cookie.indexOf("testcookie"))}ExternalCalls=function(){},ExternalCalls.java_log=function(e){if(window)try{console.log(e)}catch(t){console.log("java_log:",String(t))}else console.log("JavaLog:",e)},ExternalCalls.scorm_call=function(e){if(window)try{var t=window[e],i=[].slice.call(arguments);return i.shift(),t.apply(null,i)}catch(n){return ScormFunction.SCORM_CALL_FAIL}},ExternalCalls.scorm_bookmark_set=function(){"function"==typeof window.bookmark&&window.bookmark()},ScormFunction=function(){},ScormFunction.SET_STATUS_PASSED="setStatusPassed",ScormFunction.SET_STATUS_FAILED="setStatusFailed",ScormFunction.SET_GAME_COMPLETED="setGameCompleted",ScormFunction.GET_BOOKMARKING="scorm_bookmark_get",ScormFunction.SET_BOOKMARKING="scorm_bookmark_set",ScormFunction.SET_QUIZ_SCORE="setQuizScore",ScormFunction.GET_USER_INFO="getUserInfo",ScormFunction.SET_GAME_COMPLETE_OBFUSCATED="mixleplex",ScormFunction.SCORM_CALL_FAIL="callFailed",ScormFunction.SCORM_DISABLE_COURSE="DisableCourse",ScormFunction.SCORM_DATA_SENT="dataSent";var cookieEnabled=isCookieEnabled();function bake_cookie(e,t,i,n,r){var a=n,s=(window,""),o=Math.floor(9e3*Math.random())+1e3;null!==read_cookie(GetAnalyticsCookieName())&&(s=read_cookie(GetAnalyticsCookieName()).username),void 0!==r&&""!=r?s=r:e&&(s="Anonymous_"+(new Date).getTime()+"_"+o);var l=getExpiryDate(3650),u={};u.UID=a,u.logId=i,u.username=s;var c=JSON.stringify(u),h=t+"="+Base64.encode(c)+"; expires="+l;return cookieEnabled?document.cookie=h:window.cookie=h,!0}function GetAnalyticsCookieName(){return"Analytics_"+window.location.pathname.hashCode()}function read_cookie(e){var t=(cookieEnabled?document.cookie:window.cookie).match(new RegExp(e+"=([^;]+)"));if(t)try{t=JSON.parse(Base64.decode(t[1]))}catch(error){t=JSON.parse(t[1])}return t}function delete_cookie(e){return document.cookie=[e,"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.",window.location.host.toString()].join(""),!0}function randomUUID(){for(var e=[],t=0;t<36;t++)e[t]=Math.floor(16*Math.random());for(e[14]=4,e[19]=3&e[19]|8,t=0;t<36;t++)e[t]="0123456789ABCDEF"[e[t]];return e[8]=e[13]=e[18]=e[23]="-",e.join("")}function getExpiryDate(e){var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t.toGMTString()}
/*!
 * jQuery-ajaxTransport-XDomainRequest - v1.0.4 - 2015-03-05
 * https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 * Copyright (c) 2015 Jason Moon (@JSONMOON)
 * Licensed MIT (/blob/master/LICENSE.txt)
 */function QueryString(){var e={},t=window.location.search.substring(1);""==t&&(t=window.location.hash.substring(3));for(var i=t.split("&"),n=0;n<i.length;n++){var r=i[n].split("=");if(void 0===e[r[0]])e[r[0]]=decodeURIComponent(r[1]);else if("string"==typeof e[r[0]]){var a=[e[r[0]],decodeURIComponent(r[1])];e[r[0]]=a}else e[r[0]].push(decodeURIComponent(r[1]))}return e}cookieEnabled||(window.cookie=""),String.prototype.hashCode=function(){var e=0;if(0==this.length)return e;for(i=0;i<this.length;i++)char=this.charCodeAt(i),e=(e<<5)-e+char,e&=e;return e},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){if(e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return e;var t=/^(https?:)?\/\//i,i=/^get|post$/i,n=new RegExp("^(//|"+location.protocol+")","i");return e.ajaxTransport("* text html xml json",function(r,a,s){if(r.crossDomain&&r.async&&i.test(r.type)&&t.test(r.url)&&n.test(r.url)){var o=null;return{send:function(t,i){var n="",s=(a.dataType||"").toLowerCase();o=new XDomainRequest,/^\d+$/.test(a.timeout)&&(o.timeout=a.timeout),o.ontimeout=function(){i(500,"timeout")},o.onload=function(){var t="Content-Length: "+o.responseText.length+"\r\nContent-Type: "+o.contentType,n={code:200,message:"success"},r={text:o.responseText};try{if("html"===s||/text\/html/i.test(o.contentType))r.html=o.responseText;else if("json"===s||"text"!==s&&/\/json/i.test(o.contentType))try{r.json=e.parseJSON(o.responseText)}catch(l){n.code=500,n.message="parseerror"}else if("xml"===s||"text"!==s&&/\/xml/i.test(o.contentType)){var a=new ActiveXObject("Microsoft.XMLDOM");a.async=!1;try{a.loadXML(o.responseText)}catch(l){a=void 0}if(!a||!a.documentElement||a.getElementsByTagName("parsererror").length)throw n.code=500,n.message="parseerror","Invalid XML: "+o.responseText;r.xml=a}}catch(u){throw u}finally{i(n.code,n.message,r,t)}},o.onprogress=function(){},o.onerror=function(){i(500,"error",{text:o.responseText})},a.data&&(n="string"===e.type(a.data)?a.data:e.param(a.data)),o.open(r.type,r.url),o.send(n)},abort:function(){o&&o.abort()}}}}),e}),function(){for(var e,t=function(){},i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],n=i.length,r=window.console=window.console||{};n--;)r[e=i[n]]||(r[e]=t)}(),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var i=e instanceof Node;t.appendChild(i?e:document.createTextNode(String(e)))}),this.appendChild(t)}})}),function(){"use strict";if("undefined"!=typeof window){var e=window.navigator.userAgent.match(/Edge\/(\d{2})\./),t=e?parseInt(e[1],10):null,i=!!t&&16<=t&&t<=18;if("objectFit"in document.documentElement.style==0||i){var n=function(e,t,i){var n,r,a,s,o;if((i=i.split(" ")).length<2&&(i[1]=i[0]),"x"===e)n=i[0],r=i[1],a="left",s="right",o=t.clientWidth;else{if("y"!==e)return;n=i[1],r=i[0],a="top",s="bottom",o=t.clientHeight}if(n!==a&&r!==a){if(n!==s&&r!==s)return"center"===n||"50%"===n?(t.style[a]="50%",void(t.style["margin-"+a]=o/-2+"px")):void(0<=n.indexOf("%")?(n=parseInt(n,10))<50?(t.style[a]=n+"%",t.style["margin-"+a]=o*(n/-100)+"px"):(n=100-n,t.style[s]=n+"%",t.style["margin-"+s]=o*(n/-100)+"px"):t.style[a]=n);t.style[s]="0"}else t.style[a]="0"},r=function(e){var t=e.dataset?e.dataset.objectFit:e.getAttribute("data-object-fit"),i=e.dataset?e.dataset.objectPosition:e.getAttribute("data-object-position");t=t||"cover",i=i||"50% 50%";var r=e.parentNode;return function(e){var t=window.getComputedStyle(e,null),i=t.getPropertyValue("position"),n=t.getPropertyValue("overflow"),r=t.getPropertyValue("display");i&&"static"!==i||(e.style.position="relative"),"hidden"!==n&&(e.style.overflow="hidden"),r&&"inline"!==r||(e.style.display="block"),0===e.clientHeight&&(e.style.height="100%"),-1===e.className.indexOf("object-fit-polyfill")&&(e.className=e.className+" object-fit-polyfill")}(r),function(e){var t=window.getComputedStyle(e,null),i={"max-width":"none","max-height":"none","min-width":"0px","min-height":"0px",top:"auto",right:"auto",bottom:"auto",left:"auto","margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px"};for(var n in i)t.getPropertyValue(n)!==i[n]&&(e.style[n]=i[n])}(e),e.style.position="absolute",e.style.width="auto",e.style.height="auto","scale-down"===t&&(t=e.clientWidth<r.clientWidth&&e.clientHeight<r.clientHeight?"none":"contain"),"none"===t?(n("x",e,i),void n("y",e,i)):"fill"===t?(e.style.width="100%",e.style.height="100%",n("x",e,i),void n("y",e,i)):(e.style.height="100%",void("cover"===t&&e.clientWidth>r.clientWidth||"contain"===t&&e.clientWidth<r.clientWidth?(e.style.top="0",e.style.marginTop="0",n("x",e,i)):(e.style.width="100%",e.style.height="auto",e.style.left="0",e.style.marginLeft="0",n("y",e,i))))},a=function(e){if(void 0===e||e instanceof Event)e=document.querySelectorAll("[data-object-fit]");else if(e&&e.nodeName)e=[e];else{if("object"!=typeof e||!e.length||!e[0].nodeName)return!1;e=e}for(var t=0;t<e.length;t++)if(e[t].nodeName){var n=e[t].nodeName.toLowerCase();if("img"===n){if(i)continue;e[t].complete?r(e[t]):e[t].addEventListener("load",function(){r(this)})}else"video"===n?0<e[t].readyState?r(e[t]):e[t].addEventListener("loadedmetadata",function(){r(this)}):r(e[t])}return!0};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a(),window.addEventListener("resize",a),window.objectFitPolyfill=a}else window.objectFitPolyfill=function(){return!1}}}();
/*!
 * VERSION: 2.1.3
 * DATE: 2019-05-17
 * UPDATES AND DOCS AT: http://greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var e,t,i,n,r,a,s,o,l,u,c,h,d,p;_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var n=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},r=function(e,t,i){var n,r,a=e.cycle;for(n in a)e[n]="function"==typeof(r=a[n])?r(i,t[i],t):r[i%r.length];delete e.cycle},a=function(e){if("function"==typeof e)return e;var t="object"==typeof e?e:{each:e},i=t.ease,n=t.from||0,r=t.base||0,a={},s=isNaN(n),o=t.axis,l={center:.5,end:1}[n]||0;return function(e,u,c){var h,d,p,f,m,g,v,y,_,b=(c||t).length,T=a[b];if(!T){if(!(_="auto"===t.grid?0:(t.grid||[1/0])[0])){for(v=-1/0;v<(v=c[_++].getBoundingClientRect().left)&&_<b;);_--}for(T=a[b]=[],h=s?Math.min(_,b)*l-.5:n%_,d=s?b*l/_-.5:n/_|0,v=0,y=1/0,g=0;g<b;g++)p=g%_-h,f=d-(g/_|0),T[g]=m=o?Math.abs("y"===o?f:p):Math.sqrt(p*p+f*f),m>v&&(v=m),m<y&&(y=m);T.max=v-y,T.min=y,T.v=b=t.amount||t.each*(_>b?b-1:o?"y"===o?b/_:_:Math.max(_,b/_))||0,T.b=b<0?r-b:r}return b=(T[e]-T.min)/T.max,T.b+(i?i.getRatio(b):b)*T.v}},s=function(e,t,n){i.call(this,e,t,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=s.prototype.render},o=1e-8,l=i._internals,u=l.isSelector,c=l.isArray,h=s.prototype=i.to({},.1,{}),d=[];s.version="2.1.3",h.constructor=s,h.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=i.killTweensOf,s.getTweensOf=i.getTweensOf,s.lagSmoothing=i.lagSmoothing,s.ticker=i.ticker,s.render=i.render,s.distribute=a,h.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),i.prototype.invalidate.call(this)},h.updateTo=function(e,t){var n,r=this,a=r.ratio,s=r.vars.immediateRender||e.immediateRender;for(n in t&&r._startTime<r._timeline._time&&(r._startTime=r._timeline._time,r._uncache(!1),r._gc?r._enabled(!0,!1):r._timeline.insert(r,r._startTime-r._delay)),e)r.vars[n]=e[n];if(r._initted||s)if(t)r._initted=!1,s&&r.render(0,!0,!0);else if(r._gc&&r._enabled(!0,!1),r._notifyPluginsOfEnabled&&r._firstPT&&i._onPluginEvent("_onDisable",r),r._time/r._duration>.998){var o=r._totalTime;r.render(0,!0,!1),r._initted=!1,r.render(o,!0,!1)}else if(r._initted=!1,r._init(),r._time>0||s)for(var l,u=1/(1-a),c=r._firstPT;c;)l=c.s+c.c,c.c*=u,c.s=l-c.c,c=c._next;return r},h.render=function(e,t,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,a,s,u,c,h,d,p,f,m=this,g=m._dirty?m.totalDuration():m._totalDuration,v=m._time,y=m._totalTime,_=m._cycle,b=m._duration,T=m._rawPrevTime;if(e>=g-o&&e>=0?(m._totalTime=g,m._cycle=m._repeat,m._yoyo&&0!=(1&m._cycle)?(m._time=0,m.ratio=m._ease._calcEnd?m._ease.getRatio(0):0):(m._time=b,m.ratio=m._ease._calcEnd?m._ease.getRatio(1):1),m._reversed||(r=!0,a="onComplete",n=n||m._timeline.autoRemoveChildren),0===b&&(m._initted||!m.vars.lazy||n)&&(m._startTime===m._timeline._duration&&(e=0),(T<0||e<=0&&e>=-1e-8||T===o&&"isPause"!==m.data)&&T!==e&&(n=!0,T>o&&(a="onReverseComplete")),m._rawPrevTime=p=!t||e||T===e?e:o)):e<o?(m._totalTime=m._time=m._cycle=0,m.ratio=m._ease._calcEnd?m._ease.getRatio(0):0,(0!==y||0===b&&T>0)&&(a="onReverseComplete",r=m._reversed),e>-1e-8?e=0:e<0&&(m._active=!1,0===b&&(m._initted||!m.vars.lazy||n)&&(T>=0&&(n=!0),m._rawPrevTime=p=!t||e||T===e?e:o)),m._initted||(n=!0)):(m._totalTime=m._time=e,0!==m._repeat&&(m._cycle=m._totalTime/(u=b+m._repeatDelay)>>0,0!==m._cycle&&m._cycle===m._totalTime/u&&y<=e&&m._cycle--,m._time=m._totalTime-m._cycle*u,m._yoyo&&0!=(1&m._cycle)&&(m._time=b-m._time,(f=m._yoyoEase||m.vars.yoyoEase)&&(m._yoyoEase||(m._yoyoEase=f=!0!==f||m._initted?!0===f?m._ease:f instanceof Ease?f:Ease.map[f]:(f=m.vars.ease)?f instanceof Ease?f:"function"==typeof f?new Ease(f,m.vars.easeParams):Ease.map[f]||i.defaultEase:i.defaultEase),m.ratio=f?1-f.getRatio((b-m._time)/b):0)),m._time>b?m._time=b:m._time<0&&(m._time=0)),m._easeType&&!f?(c=m._time/b,(1===(h=m._easeType)||3===h&&c>=.5)&&(c=1-c),3===h&&(c*=2),1===(d=m._easePower)?c*=c:2===d?c*=c*c:3===d?c*=c*c*c:4===d&&(c*=c*c*c*c),m.ratio=1===h?1-c:2===h?c:m._time/b<.5?c/2:1-c/2):f||(m.ratio=m._ease.getRatio(m._time/b))),v!==m._time||n||_!==m._cycle){if(!m._initted){if(m._init(),!m._initted||m._gc)return;if(!n&&m._firstPT&&(!1!==m.vars.lazy&&m._duration||m.vars.lazy&&!m._duration))return m._time=v,m._totalTime=y,m._rawPrevTime=T,m._cycle=_,l.lazyTweens.push(m),void(m._lazy=[e,t]);!m._time||r||f?r&&this._ease._calcEnd&&!f&&(m.ratio=m._ease.getRatio(0===m._time?0:1)):m.ratio=m._ease.getRatio(m._time/b)}for(!1!==m._lazy&&(m._lazy=!1),m._active||!m._paused&&m._time!==v&&e>=0&&(m._active=!0),0===y&&(2===m._initted&&e>0&&m._init(),m._startAt&&(e>=0?m._startAt.render(e,!0,n):a||(a="_dummyGS")),m.vars.onStart&&(0===m._totalTime&&0!==b||t||m._callback("onStart"))),s=m._firstPT;s;)s.f?s.t[s.p](s.c*m.ratio+s.s):s.t[s.p]=s.c*m.ratio+s.s,s=s._next;m._onUpdate&&(e<0&&m._startAt&&m._startTime&&m._startAt.render(e,!0,n),t||(m._totalTime!==y||a)&&m._callback("onUpdate")),m._cycle!==_&&(t||m._gc||m.vars.onRepeat&&m._callback("onRepeat")),a&&(m._gc&&!n||(e<0&&m._startAt&&!m._onUpdate&&m._startTime&&m._startAt.render(e,!0,n),r&&(m._timeline.autoRemoveChildren&&m._enabled(!1,!1),m._active=!1),!t&&m.vars[a]&&m._callback(a),0===b&&m._rawPrevTime===o&&p!==o&&(m._rawPrevTime=0)))}else y!==m._totalTime&&m._onUpdate&&(t||m._callback("onUpdate"))},s.to=function(e,t,i){return new s(e,t,i)},s.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new s(e,t,i)},s.fromTo=function(e,t,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new s(e,t,n)},s.staggerTo=s.allTo=function(e,t,o,l,h,p,f){var m,g,v,y,_=[],b=a(o.stagger||l),T=o.cycle,S=(o.startAt||d).cycle;for(c(e)||("string"==typeof e&&(e=i.selector(e)||e),u(e)&&(e=n(e))),m=(e=e||[]).length-1,v=0;v<=m;v++){for(y in g={},o)g[y]=o[y];if(T&&(r(g,e,v),null!=g.duration&&(t=g.duration,delete g.duration)),S){for(y in S=g.startAt={},o.startAt)S[y]=o.startAt[y];r(g.startAt,e,v)}g.delay=b(v,e[v],e)+(g.delay||0),v===m&&h&&(g.onComplete=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),h.apply(f||o.callbackScope||this,p||d)}),_[v]=new s(e[v],t,g)}return _},s.staggerFrom=s.allFrom=function(e,t,i,n,r,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,s.staggerTo(e,t,i,n,r,a,o)},s.staggerFromTo=s.allFromTo=function(e,t,i,n,r,a,o,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,s.staggerTo(e,t,n,r,a,o,l)},s.delayedCall=function(e,t,i,n,r){return new s(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,useFrames:r,overwrite:0})},s.set=function(e,t){return new s(e,0,t)},s.isTweening=function(e){return i.getTweensOf(e,!0).length>0};var p=function(e,t){for(var n=[],r=0,a=e._first;a;)a instanceof i?n[r++]=a:(t&&(n[r++]=a),r=(n=n.concat(p(a,t))).length),a=a._next;return n},f=s.getAllTweens=function(t){return p(e._rootTimeline,t).concat(p(e._rootFramesTimeline,t))};s.killAll=function(e,i,n,r){null==i&&(i=!0),null==n&&(n=!0);var a,s,o,l=f(0!=r),u=l.length,c=i&&n&&r;for(o=0;o<u;o++)s=l[o],(c||s instanceof t||(a=s.target===s.vars.onComplete)&&n||i&&!a)&&(e?s.totalTime(s._reversed?0:s.totalDuration()):s._enabled(!1,!1))},s.killChildTweensOf=function(e,t){if(null!=e){var r,a,o,h,d,p=l.tweenLookup;if("string"==typeof e&&(e=i.selector(e)||e),u(e)&&(e=n(e)),c(e))for(h=e.length;--h>-1;)s.killChildTweensOf(e[h],t);else{for(o in r=[],p)for(a=p[o].target.parentNode;a;)a===e&&(r=r.concat(p[o].tweens)),a=a.parentNode;for(d=r.length,h=0;h<d;h++)t&&r[h].totalTime(r[h].totalDuration()),r[h]._enabled(!1,!1)}}};var m=function(e,i,n,r){i=!1!==i,n=!1!==n;for(var a,s,o=f(r=!1!==r),l=i&&n&&r,u=o.length;--u>-1;)s=o[u],(l||s instanceof t||(a=s.target===s.vars.onComplete)&&n||i&&!a)&&s.paused(e)};return s.pauseAll=function(e,t,i){m(!0,e,t,i)},s.resumeAll=function(e,t,i){m(!1,e,t,i)},s.globalTimeScale=function(t){var n=e._rootTimeline,r=i.ticker.time;return arguments.length?(n._startTime=r-(r-n._startTime)*n._timeScale/(t=t||o),(n=e._rootFramesTimeline)._startTime=(r=i.ticker.frame)-(r-n._startTime)*n._timeScale/t,n._timeScale=e._rootTimeline._timeScale=t,t):n._timeScale},h.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this.duration()?this._time/this._duration:this.ratio},h.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},h.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,r=n*(i+this._repeatDelay);return e>i&&(e=i),this.totalTime(this._yoyo&&1&n?i-e+r:this._repeat?e+r:e,t)},h.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},h.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},h.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},h.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},h.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},s},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var n=function(e){t.call(this,e);var i,n,r=this,a=r.vars;for(n in r._labels={},r.autoRemoveChildren=!!a.autoRemoveChildren,r.smoothChildTiming=!!a.smoothChildTiming,r._sortChildren=!0,r._onUpdate=a.onUpdate,a)l(i=a[n])&&-1!==i.join("").indexOf("{self}")&&(a[n]=r._swapSelfInParams(i));l(a.tweens)&&r.add(a.tweens,0,a.align,a.stagger)},r=1e-8,a=i._internals,s=n._internals={},o=a.isSelector,l=a.isArray,u=a.lazyTweens,c=a.lazyRender,h=_gsScope._gsDefine.globals,d=function(e){var t,i={};for(t in e)i[t]=e[t];return i},p=function(e,t,i){var n,r,a=e.cycle;for(n in a)e[n]="function"==typeof(r=a[n])?r(i,t[i],t):r[i%r.length];delete e.cycle},f=s.pauseCallback=function(){},m=function(e,t,i,n){var r="immediateRender";return r in t||(t[r]=!(i&&!1===i[r]||n)),t},g=function(e){if("function"==typeof e)return e;var t="object"==typeof e?e:{each:e},i=t.ease,n=t.from||0,r=t.base||0,a={},s=isNaN(n),o=t.axis,l={center:.5,end:1}[n]||0;return function(e,u,c){var h,d,p,f,m,g,v,y,_,b=(c||t).length,T=a[b];if(!T){if(!(_="auto"===t.grid?0:(t.grid||[1/0])[0])){for(v=-1/0;v<(v=c[_++].getBoundingClientRect().left)&&_<b;);_--}for(T=a[b]=[],h=s?Math.min(_,b)*l-.5:n%_,d=s?b*l/_-.5:n/_|0,v=0,y=1/0,g=0;g<b;g++)p=g%_-h,f=d-(g/_|0),T[g]=m=o?Math.abs("y"===o?f:p):Math.sqrt(p*p+f*f),m>v&&(v=m),m<y&&(y=m);T.max=v-y,T.min=y,T.v=b=t.amount||t.each*(_>b?b-1:o?"y"===o?b/_:_:Math.max(_,b/_))||0,T.b=b<0?r-b:r}return b=(T[e]-T.min)/T.max,T.b+(i?i.getRatio(b):b)*T.v}},v=n.prototype=new t;return n.version="2.1.3",n.distribute=g,v.constructor=n,v.kill()._gc=v._forcingPlayhead=v._hasPause=!1,v.to=function(e,t,n,r){return t?this.add(new(n.repeat&&h.TweenMax||i)(e,t,n),r):this.set(e,n,r)},v.from=function(e,t,n,r){return this.add((n.repeat&&h.TweenMax||i).from(e,t,m(0,n)),r)},v.fromTo=function(e,t,n,r,a){var s=r.repeat&&h.TweenMax||i;return r=m(0,r,n),t?this.add(s.fromTo(e,t,n,r),a):this.set(e,r,a)},v.staggerTo=function(e,t,r,a,s,l,u,c){var h,f,m=new n({onComplete:l,onCompleteParams:u,callbackScope:c,smoothChildTiming:this.smoothChildTiming}),v=g(r.stagger||a),y=r.startAt,_=r.cycle;for("string"==typeof e&&(e=i.selector(e)||e),o(e=e||[])&&(e=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i}(e)),f=0;f<e.length;f++)h=d(r),y&&(h.startAt=d(y),y.cycle&&p(h.startAt,e,f)),_&&(p(h,e,f),null!=h.duration&&(t=h.duration,delete h.duration)),m.to(e[f],t,h,v(f,e[f],e));return this.add(m,s)},v.staggerFrom=function(e,t,i,n,r,a,s,o){return i.runBackwards=!0,this.staggerTo(e,t,m(0,i),n,r,a,s,o)},v.staggerFromTo=function(e,t,i,n,r,a,s,o,l){return n.startAt=i,this.staggerTo(e,t,m(0,n,i),r,a,s,o,l)},v.call=function(e,t,n,r){return this.add(i.delayedCall(0,e,t,n),r)},v.set=function(e,t,n){return this.add(new i(e,0,m(0,t,null,!0)),n)},n.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var r,a,s,o,l=new n(e),u=l._timeline;for(null==t&&(t=!0),u._remove(l,!0),l._startTime=0,l._rawPrevTime=l._time=l._totalTime=u._time,s=u._first;s;)o=s._next,t&&s instanceof i&&s.target===s.vars.onComplete||((a=s._startTime-s._delay)<0&&(r=1),l.add(s,a)),s=o;return u.add(l,0),r&&l.totalDuration(),l},v.add=function(r,a,s,o){var u,c,h,d,p,f,m=this;if("number"!=typeof a&&(a=m._parseTimeOrLabel(a,0,!0,r)),!(r instanceof e)){if(r instanceof Array||r&&r.push&&l(r)){for(s=s||"normal",o=o||0,u=a,c=r.length,h=0;h<c;h++)l(d=r[h])&&(d=new n({tweens:d})),m.add(d,u),"string"!=typeof d&&"function"!=typeof d&&("sequence"===s?u=d._startTime+d.totalDuration()/d._timeScale:"start"===s&&(d._startTime-=d.delay())),u+=o;return m._uncache(!0)}if("string"==typeof r)return m.addLabel(r,a);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(t.prototype.add.call(m,r,a),(r._time||!r._duration&&r._initted)&&(u=(m.rawTime()-r._startTime)*r._timeScale,(!r._duration||Math.abs(Math.max(0,Math.min(r.totalDuration(),u)))-r._totalTime>1e-5)&&r.render(u,!1,!1)),(m._gc||m._time===m._duration)&&!m._paused&&m._duration<m.duration())for(f=(p=m).rawTime()>r._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return m},v.remove=function(t){if(t instanceof e){this._remove(t,!1);var i=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;return t._startTime=(t._paused?t._pauseTime:i._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&l(t)){for(var n=t.length;--n>-1;)this.remove(t[n]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},v._remove=function(e,i){return t.prototype._remove.call(this,e,i),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},v.insert=v.insertMultiple=function(e,t,i,n){return this.add(e,t||0,i,n)},v.appendMultiple=function(e,t,i,n){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,n)},v.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},v.addPause=function(e,t,n,r){var a=i.delayedCall(0,f,n,r||this);return a.vars.onComplete=a.vars.onReverseComplete=t,a.data="isPause",this._hasPause=!0,this.add(a,e)},v.removeLabel=function(e){return delete this._labels[e],this},v.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},v._parseTimeOrLabel=function(t,i,n,r){var a,s;if(r instanceof e&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&l(r)))for(s=r.length;--s>-1;)r[s]instanceof e&&r[s].timeline===this&&this.remove(r[s]);if(a="number"!=typeof t||i?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof t&&null==this._labels[i]?t-a:0,n);if(i=i||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=a);else{if(-1===(s=t.indexOf("=")))return null==this._labels[t]?n?this._labels[t]=a+i:i:this._labels[t]+i;i=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1)),t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,n):a}return Number(t)+i},v.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(e,t){return this.play(e,t)},v.gotoAndStop=function(e,t){return this.pause(e,t)},v.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,a,s,o,l,h,d,p,f=this,m=f._time,g=f._dirty?f.totalDuration():f._totalDuration,v=f._startTime,y=f._timeScale,_=f._paused;if(m!==f._time&&(e+=f._time-m),f._hasPause&&!f._forcingPlayhead&&!t){if(e>m)for(n=f._first;n&&n._startTime<=e&&!h;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===f._rawPrevTime||(h=n),n=n._next;else for(n=f._last;n&&n._startTime>=e&&!h;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(h=n),n=n._prev;h&&(f._time=f._totalTime=e=h._startTime,p=f._startTime+(f._reversed?f._duration-e:e)/f._timeScale)}if(e>=g-r&&e>=0)f._totalTime=f._time=g,f._reversed||f._hasPausedChild()||(a=!0,o="onComplete",l=!!f._timeline.autoRemoveChildren,0===f._duration&&(e<=0&&e>=-1e-8||f._rawPrevTime<0||f._rawPrevTime===r)&&f._rawPrevTime!==e&&f._first&&(l=!0,f._rawPrevTime>r&&(o="onReverseComplete"))),f._rawPrevTime=f._duration||!t||e||f._rawPrevTime===e?e:r,e=g+1e-4;else if(e<r)if(f._totalTime=f._time=0,e>-1e-8&&(e=0),(0!==m||0===f._duration&&f._rawPrevTime!==r&&(f._rawPrevTime>0||e<0&&f._rawPrevTime>=0))&&(o="onReverseComplete",a=f._reversed),e<0)f._active=!1,f._timeline.autoRemoveChildren&&f._reversed?(l=a=!0,o="onReverseComplete"):f._rawPrevTime>=0&&f._first&&(l=!0),f._rawPrevTime=e;else{if(f._rawPrevTime=f._duration||!t||e||f._rawPrevTime===e?e:r,0===e&&a)for(n=f._first;n&&0===n._startTime;)n._duration||(a=!1),n=n._next;e=0,f._initted||(l=!0)}else f._totalTime=f._time=f._rawPrevTime=e;if(f._time!==m&&f._first||i||l||h){if(f._initted||(f._initted=!0),f._active||!f._paused&&f._time!==m&&e>0&&(f._active=!0),0===m&&f.vars.onStart&&(0===f._time&&f._duration||t||f._callback("onStart")),(d=f._time)>=m)for(n=f._first;n&&(s=n._next,d===f._time&&(!f._paused||_));)(n._active||n._startTime<=d&&!n._paused&&!n._gc)&&(h===n&&(f.pause(),f._pauseTime=p),n.render(n._reversed?(n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale:(e-n._startTime)*n._timeScale,t,i)),n=s;else for(n=f._last;n&&(s=n._prev,d===f._time&&(!f._paused||_));){if(n._active||n._startTime<=m&&!n._paused&&!n._gc){if(h===n){for(h=n._prev;h&&h.endTime()>f._time;)h.render(h._reversed?h.totalDuration()-(e-h._startTime)*h._timeScale:(e-h._startTime)*h._timeScale,t,i),h=h._prev;h=null,f.pause(),f._pauseTime=p}n.render(n._reversed?(n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale:(e-n._startTime)*n._timeScale,t,i)}n=s}f._onUpdate&&(t||(u.length&&c(),f._callback("onUpdate"))),o&&(f._gc||v!==f._startTime&&y===f._timeScale||(0===f._time||g>=f.totalDuration())&&(a&&(u.length&&c(),f._timeline.autoRemoveChildren&&f._enabled(!1,!1),f._active=!1),!t&&f.vars[o]&&f._callback(o)))}},v._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof n&&e._hasPausedChild())return!0;e=e._next}return!1},v.getChildren=function(e,t,n,r){r=r||-9999999999;for(var a=[],s=this._first,o=0;s;)s._startTime<r||(s instanceof i?!1!==t&&(a[o++]=s):(!1!==n&&(a[o++]=s),!1!==e&&(o=(a=a.concat(s.getChildren(!0,t,n))).length))),s=s._next;return a},v.getTweensOf=function(e,t){var n,r,a=this._gc,s=[],o=0;for(a&&this._enabled(!0,!0),r=(n=i.getTweensOf(e)).length;--r>-1;)(n[r].timeline===this||t&&this._contains(n[r]))&&(s[o++]=n[r]);return a&&this._enabled(!1,!0),s},v.recent=function(){return this._recent},v._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},v.shiftChildren=function(e,t,i){i=i||0;for(var n,r=this._first,a=this._labels;r;)r._startTime>=i&&(r._startTime+=e),r=r._next;if(t)for(n in a)a[n]>=i&&(a[n]+=e);return this._uncache(!0)},v._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(e,t)&&(r=!0);return r},v.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;--i>-1;)t[i]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},v._enabled=function(e,i){if(e===this._gc)for(var n=this._first;n;)n._enabled(e,!0),n=n._next;return t.prototype._enabled.call(this,e,i)},v.totalTime=function(t,i,n){this._forcingPlayhead=!0;var r=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},v.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,i,n=0,r=this,a=r._last,s=999999999999;a;)t=a._prev,a._dirty&&a.totalDuration(),a._startTime>s&&r._sortChildren&&!a._paused&&!r._calculatingDuration?(r._calculatingDuration=1,r.add(a,a._startTime-a._delay),r._calculatingDuration=0):s=a._startTime,a._startTime<0&&!a._paused&&(n-=a._startTime,r._timeline.smoothChildTiming&&(r._startTime+=a._startTime/r._timeScale,r._time-=a._startTime,r._totalTime-=a._startTime,r._rawPrevTime-=a._startTime),r.shiftChildren(-a._startTime,!1,-9999999999),s=0),(i=a._startTime+a._totalDuration/a._timeScale)>n&&(n=i),a=t;r._duration=r._totalDuration=n,r._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},v.paused=function(t){if(!1===t&&this._paused)for(var i=this._first;i;)i._startTime===this._time&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return e.prototype.paused.apply(this,arguments)},v.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},v.rawTime=function(e){return e&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},n},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,i){var n=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0},r=1e-8,a=t._internals,s=a.lazyTweens,o=a.lazyRender,l=_gsScope._gsDefine.globals,u=new i(null,null,1,0),c=n.prototype=new e;return c.constructor=n,c.kill()._gc=!1,n.version="2.1.3",c.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},c.addCallback=function(e,i,n,r){return this.add(t.delayedCall(0,e,n,r),i)},c.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var i=this.getTweensOf(e,!1),n=i.length,r=this._parseTimeOrLabel(t);--n>-1;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},c.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},c.tweenTo=function(e,i){i=i||{};var n,r,a,s={ease:u,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},o=i.repeat&&l.TweenMax||t;for(r in i)s[r]=i[r];return s.time=this._parseTimeOrLabel(e),n=Math.abs(Number(s.time)-this._time)/this._timeScale||.001,a=new o(this,n,s),s.onStart=function(){a.target.paused(!0),a.vars.time===a.target.time()||n!==a.duration()||a.isFromTo||a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale).render(a.time(),!0,!0),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||a,i.onStartParams||[])},a},c.tweenFromTo=function(e,t,i){i=i||{},e=this._parseTimeOrLabel(e),i.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var n=this.tweenTo(t,i);return n.isFromTo=1,n.duration(Math.abs(n.vars.time-e)/this._timeScale||.001)},c.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,a,l,u,c,h,d,p,f,m=this,g=m._time,v=m._dirty?m.totalDuration():m._totalDuration,y=m._duration,_=m._totalTime,b=m._startTime,T=m._timeScale,S=m._rawPrevTime,w=m._paused,C=m._cycle;if(g!==m._time&&(e+=m._time-g),e>=v-r&&e>=0)m._locked||(m._totalTime=v,m._cycle=m._repeat),m._reversed||m._hasPausedChild()||(a=!0,u="onComplete",c=!!m._timeline.autoRemoveChildren,0===m._duration&&(e<=0&&e>=-1e-8||S<0||S===r)&&S!==e&&m._first&&(c=!0,S>r&&(u="onReverseComplete"))),m._rawPrevTime=m._duration||!t||e||m._rawPrevTime===e?e:r,m._yoyo&&1&m._cycle?m._time=e=0:(m._time=y,e=y+1e-4);else if(e<r)if(m._locked||(m._totalTime=m._cycle=0),m._time=0,e>-1e-8&&(e=0),(0!==g||0===y&&S!==r&&(S>0||e<0&&S>=0)&&!m._locked)&&(u="onReverseComplete",a=m._reversed),e<0)m._active=!1,m._timeline.autoRemoveChildren&&m._reversed?(c=a=!0,u="onReverseComplete"):S>=0&&m._first&&(c=!0),m._rawPrevTime=e;else{if(m._rawPrevTime=y||!t||e||m._rawPrevTime===e?e:r,0===e&&a)for(n=m._first;n&&0===n._startTime;)n._duration||(a=!1),n=n._next;e=0,m._initted||(c=!0)}else 0===y&&S<0&&(c=!0),m._time=m._rawPrevTime=e,m._locked||(m._totalTime=e,0!==m._repeat&&(m._cycle=m._totalTime/(h=y+m._repeatDelay)>>0,m._cycle&&m._cycle===m._totalTime/h&&_<=e&&m._cycle--,m._time=m._totalTime-m._cycle*h,m._yoyo&&1&m._cycle&&(m._time=y-m._time),m._time>y?(m._time=y,e=y+1e-4):m._time<0?m._time=e=0:e=m._time));if(m._hasPause&&!m._forcingPlayhead&&!t){if((e=m._time)>g||m._repeat&&C!==m._cycle)for(n=m._first;n&&n._startTime<=e&&!d;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===m._rawPrevTime||(d=n),n=n._next;else for(n=m._last;n&&n._startTime>=e&&!d;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(d=n),n=n._prev;d&&(f=m._startTime+(m._reversed?m._duration-d._startTime:d._startTime)/m._timeScale,d._startTime<y&&(m._time=m._rawPrevTime=e=d._startTime,m._totalTime=e+m._cycle*(m._totalDuration+m._repeatDelay)))}if(m._cycle!==C&&!m._locked){var k=m._yoyo&&0!=(1&C),x=k===(m._yoyo&&0!=(1&m._cycle)),E=m._totalTime,A=m._cycle,P=m._rawPrevTime,O=m._time;if(m._totalTime=C*y,m._cycle<C?k=!k:m._totalTime+=y,m._time=g,m._rawPrevTime=0===y?S-1e-4:S,m._cycle=C,m._locked=!0,m.render(g=k?0:y,t,0===y),t||m._gc||m.vars.onRepeat&&(m._cycle=A,m._locked=!1,m._callback("onRepeat")),g!==m._time)return;if(x&&(m._cycle=C,m._locked=!0,m.render(g=k?y+1e-4:-1e-4,!0,!1)),m._locked=!1,m._paused&&!w)return;m._time=O,m._totalTime=E,m._cycle=A,m._rawPrevTime=P}if(m._time!==g&&m._first||i||c||d){if(m._initted||(m._initted=!0),m._active||!m._paused&&m._totalTime!==_&&e>0&&(m._active=!0),0===_&&m.vars.onStart&&(0===m._totalTime&&m._totalDuration||t||m._callback("onStart")),(p=m._time)>=g)for(n=m._first;n&&(l=n._next,p===m._time&&(!m._paused||w));)(n._active||n._startTime<=m._time&&!n._paused&&!n._gc)&&(d===n&&(m.pause(),m._pauseTime=f),n.render(n._reversed?(n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale:(e-n._startTime)*n._timeScale,t,i)),n=l;else for(n=m._last;n&&(l=n._prev,p===m._time&&(!m._paused||w));){if(n._active||n._startTime<=g&&!n._paused&&!n._gc){if(d===n){for(d=n._prev;d&&d.endTime()>m._time;)d.render(d._reversed?d.totalDuration()-(e-d._startTime)*d._timeScale:(e-d._startTime)*d._timeScale,t,i),d=d._prev;d=null,m.pause(),m._pauseTime=f}n.render(n._reversed?(n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale:(e-n._startTime)*n._timeScale,t,i)}n=l}m._onUpdate&&(t||(s.length&&o(),m._callback("onUpdate"))),u&&(m._locked||m._gc||b!==m._startTime&&T===m._timeScale||(0===m._time||v>=m.totalDuration())&&(a&&(s.length&&o(),m._timeline.autoRemoveChildren&&m._enabled(!1,!1),m._active=!1),!t&&m.vars[u]&&m._callback(u)))}else _!==m._totalTime&&m._onUpdate&&(t||m._callback("onUpdate"))},c.getActive=function(e,t,i){var n,r,a=[],s=this.getChildren(e||null==e,t||null==e,!!i),o=0,l=s.length;for(n=0;n<l;n++)(r=s[n]).isActive()&&(a[o++]=r);return a},c.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,i=this.getLabelsArray(),n=i.length;for(t=0;t<n;t++)if(i[t].time>e)return i[t].name;return null},c.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length;--i>-1;)if(t[i].time<e)return t[i].name;return null},c.getLabelsArray=function(){var e,t=[],i=0;for(e in this._labels)t[i++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},c.invalidate=function(){return this._locked=!1,e.prototype.invalidate.call(this)},c.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()||0},c.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()||0},c.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},c.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,r=n*(i+this._repeatDelay);return e>i&&(e=i),this.totalTime(this._yoyo&&1&n?i-e+r:this._repeat?e+r:e,t)},c.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},c.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},c.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},c.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+r)},n},!0),e=180/Math.PI,t=[],i=[],n=[],r={},a=_gsScope._gsDefine.globals,s=function(e,t,i,n){i===n&&(i=n-(n-t)/1e6),e===t&&(t=e+(i-e)/1e6),this.a=e,this.b=t,this.c=i,this.d=n,this.da=n-e,this.ca=i-e,this.ba=t-e},o=function(e,t,i,n){var r={a:e},a={},s={},o={c:n},l=(e+t)/2,u=(t+i)/2,c=(i+n)/2,h=(l+u)/2,d=(u+c)/2,p=(d-h)/8;return r.b=l+(e-l)/4,a.b=h+p,r.c=a.a=(r.b+a.b)/2,a.c=s.a=(h+d)/2,s.b=d-p,o.b=c+(n-c)/4,s.c=o.a=(s.b+o.b)/2,[r,a,s,o]},l=function(e,r,a,s,l){var u,c,h,d,p,f,m,g,v,y,_,b,T,S=e.length-1,w=0,C=e[0].a;for(u=0;u<S;u++)c=(p=e[w]).a,h=p.d,d=e[w+1].d,l?(T=((b=i[u])+(_=t[u]))*r*.25/(s?.5:n[u]||.5),g=h-((f=h-(h-c)*(s?.5*r:0!==_?T/_:0))+(((m=h+(d-h)*(s?.5*r:0!==b?T/b:0))-f)*(3*_/(_+b)+.5)/4||0))):g=h-((f=h-(h-c)*r*.5)+(m=h+(d-h)*r*.5))/2,m+=g,p.c=v=f+=g,p.b=0!==u?C:C=p.a+.6*(p.c-p.a),p.da=h-c,p.ca=v-c,p.ba=C-c,a?(y=o(c,C,v,h),e.splice(w,1,y[0],y[1],y[2],y[3]),w+=4):w++,C=m;(p=e[w]).b=C,p.c=C+.4*(p.d-C),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=C-p.a,a&&(y=o(p.a,C,p.c,p.d),e.splice(w,1,y[0],y[1],y[2],y[3]))},u=function(e,n,r,a){var o,l,u,c,h,d,p=[];if(a)for(l=(e=[a].concat(e)).length;--l>-1;)"string"==typeof(d=e[l][n])&&"="===d.charAt(1)&&(e[l][n]=a[n]+Number(d.charAt(0)+d.substr(2)));if((o=e.length-2)<0)return p[0]=new s(e[0][n],0,0,e[0][n]),p;for(l=0;l<o;l++)p[l]=new s(u=e[l][n],0,0,c=e[l+1][n]),r&&(h=e[l+2][n],t[l]=(t[l]||0)+(c-u)*(c-u),i[l]=(i[l]||0)+(h-c)*(h-c));return p[l]=new s(e[l][n],0,0,e[l+1][n]),p},c=function(e,a,s,o,c,h){var d,p,f,m,g,v,y,_,b={},T=[],S=h||e[0];for(p in c="string"==typeof c?","+c+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==a&&(a=1),e[0])T.push(p);if(e.length>1){for(_=e[e.length-1],y=!0,d=T.length;--d>-1;)if(p=T[d],Math.abs(S[p]-_[p])>.05){y=!1;break}y&&(e=e.concat(),h&&e.unshift(h),e.push(e[1]),h=e[e.length-3])}for(t.length=i.length=n.length=0,d=T.length;--d>-1;)r[p=T[d]]=-1!==c.indexOf(","+p+","),b[p]=u(e,p,r[p],h);for(d=t.length;--d>-1;)t[d]=Math.sqrt(t[d]),i[d]=Math.sqrt(i[d]);if(!o){for(d=T.length;--d>-1;)if(r[p])for(v=(f=b[T[d]]).length-1,m=0;m<v;m++)n[m]=(n[m]||0)+(g=f[m+1].da/i[m]+f[m].da/t[m]||0)*g;for(d=n.length;--d>-1;)n[d]=Math.sqrt(n[d])}for(d=T.length,m=s?4:1;--d>-1;)l(f=b[p=T[d]],a,s,o,r[p]),y&&(f.splice(0,m),f.splice(f.length-m,m));return b},h=function(e,t,i){for(var n,r,a,s,o,l,u,c,h,d,p,f=1/i,m=e.length;--m>-1;)for(s=(d=e[m]).d-(a=d.a),o=d.c-a,l=d.b-a,n=r=0,c=1;c<=i;c++)n=r-(r=((u=f*c)*u*s+3*(h=1-u)*(u*o+h*l))*u),t[p=m*i+c-1]=(t[p]||0)+n*n},d=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.9",API:2,global:!0,init:function(e,t,i){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var n,r,a,o,l,u=t.values||[],d={},p=u[0],f=t.autoRotate||i.vars.orientToBezier;for(n in this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",!0===f?0:Number(f)||0]]:null,p)this._props.push(n);for(a=this._props.length;--a>-1;)this._overwriteProps.push(n=this._props[a]),r=this._func[n]="function"==typeof e[n],d[n]=r?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),l||d[n]!==u[0][n]&&(l=d);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?c(u,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,l):function(e,t,i){var n,r,a,o,l,u,c,h,d,p,f={},m="cubic"===(t=t||"soft")?3:2,g="soft"===t,v=[];if(g&&i&&(e=[i].concat(e)),null==e||e.length<m+1)throw"invalid Bezier data";for(h in e[0])v.push(h);for(l=v.length;--l>-1;){for(f[h=v[l]]=o=[],d=0,c=e.length,u=0;u<c;u++)n=null==i?e[u][h]:"string"==typeof(p=e[u][h])&&"="===p.charAt(1)?i[h]+Number(p.charAt(0)+p.substr(2)):Number(p),g&&u>1&&u<c-1&&(o[d++]=(n+o[d-2])/2),o[d++]=n;for(c=d-m+1,d=0,u=0;u<c;u+=m)n=o[u],r=o[u+1],a=o[u+2],o[d++]=p=3===m?new s(n,r,a,2===m?0:o[u+3]):new s(n,(2*r+n)/3,(2*r+a)/3,a);o.length=d}return f}(u,t.type,d),this._segCount=this._beziers[n].length,this._timeRes){var m=function(e,t){var i,n,r,a,s=[],o=[],l=0,u=0,c=(t=t>>0||6)-1,d=[],p=[];for(i in e)h(e[i],s,t);for(r=s.length,n=0;n<r;n++)l+=Math.sqrt(s[n]),p[a=n%t]=l,a===c&&(u+=l,d[a=n/t>>0]=p,o[a]=u,l=0,p=[]);return{length:u,lengths:o,segments:d}}(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),a=f.length;--a>-1;){for(o=0;o<3;o++)this._func[n=f[a][o]]="function"==typeof e[n]&&e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)];this._initialRotations[a]=(this._func[n=f[a][2]]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(t){var i,n,r,a,s,o,l,u,c,h,d,p=this._segCount,f=this._func,m=this._target,g=t!==this._startRatio;if(this._timeRes){if(c=this._lengths,h=this._curSeg,r=this._li,(d=t*this._length)>this._l2&&r<p-1){for(u=p-1;r<u&&(this._l2=c[++r])<=d;);this._l1=c[r-1],this._li=r,this._curSeg=h=this._segments[r],this._s2=h[this._s1=this._si=0]}else if(d<this._l1&&r>0){for(;r>0&&(this._l1=c[--r])>=d;);0===r&&d<this._l1?this._l1=0:r++,this._l2=c[r],this._li=r,this._curSeg=h=this._segments[r],this._s1=h[(this._si=h.length-1)-1]||0,this._s2=h[this._si]}if(i=r,r=this._si,(d-=this._l1)>this._s2&&r<h.length-1){for(u=h.length-1;r<u&&(this._s2=h[++r])<=d;);this._s1=h[r-1],this._si=r}else if(d<this._s1&&r>0){for(;r>0&&(this._s1=h[--r])>=d;);0===r&&d<this._s1?this._s1=0:r++,this._s2=h[r],this._si=r}o=1===t?1:(r+(d-this._s1)/(this._s2-this._s1))*this._prec||0}else o=(t-(i=t<0?0:t>=1?p-1:p*t>>0)*(1/p))*p;for(n=1-o,r=this._props.length;--r>-1;)l=(o*o*(s=this._beziers[a=this._props[r]][i]).da+3*n*(o*s.ca+n*s.ba))*o+s.a,this._mod[a]&&(l=this._mod[a](l,m)),f[a]?m[a](l):m[a]=l;if(this._autoRotate){var v,y,_,b,T,S,w,C=this._autoRotate;for(r=C.length;--r>-1;)a=C[r][2],S=C[r][3]||0,w=!0===C[r][4]?1:e,v=this._beziers[C[r][1]],(s=this._beziers[C[r][0]])&&v&&(y=(s=s[i]).a+(s.b-s.a)*o,y+=((b=s.b+(s.c-s.b)*o)-y)*o,b+=(s.c+(s.d-s.c)*o-b)*o,_=(v=v[i]).a+(v.b-v.a)*o,_+=((T=v.b+(v.c-v.b)*o)-_)*o,T+=(v.c+(v.d-v.c)*o-T)*o,l=g?Math.atan2(T-_,b-y)*w+S:this._initialRotations[r],this._mod[a]&&(l=this._mod[a](l,m)),f[a]?m[a](l):m[a]=l)}}}),p=d.prototype,d.bezierThrough=c,d.cubicToQuadratic=o,d._autoCSS=!0,d.quadraticToCubic=function(e,t,i){return new s(e,(2*t+e)/3,(2*t+i)/3,i)},d._cssRegister=function(){var e=a.CSSPlugin;if(e){var t=e._internals,i=t._parseToProxy,n=t._setPluginRatio,r=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,a,s,o,l){t instanceof Array&&(t={values:t}),l=new d;var u,c,h,p=t.values,f=p.length-1,m=[],g={};if(f<0)return o;for(u=0;u<=f;u++)h=i(e,p[u],s,o,l,f!==u),m[u]=h.end;for(c in t)g[c]=t[c];return g.values=m,(o=new r(e,"bezier",0,0,h.pt,2)).data=h,o.plugin=l,o.setRatio=n,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(u=!0===g.autoRotate?0:Number(g.autoRotate),g.autoRotate=null!=h.end.left?[["left","top","rotation",u,!1]]:null!=h.end.x&&[["x","y","rotation",u,!1]]),g.autoRotate&&(s._transform||s._enableTransforms(!1),h.autoRotate=s._target._gsTransform,h.proxy.rotation=h.autoRotate.rotation||0,s._overwriteProps.push("rotation")),l._onInitTween(h.proxy,g,s._tween),o}})}},p._mod=function(e){for(var t,i=this._overwriteProps,n=i.length;--n>-1;)(t=e[i[n]])&&"function"==typeof t&&(this._mod[i[n]]=t)},p._kill=function(e){var t,i,n=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],i=n.length;--i>-1;)n[i]===t&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;--i>-1;)e[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,e)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var i,n,r,a,s=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=s.prototype.setRatio},o=_gsScope._gsDefine.globals,l={},u=s.prototype=new e("css");u.constructor=s,s.version="2.1.3",s.API=2,s.defaultTransformPerspective=0,s.defaultSkewType="compensated",s.defaultSmoothOrigin=!0,s.suffixMap={top:u="px",right:u,bottom:u,left:u,width:u,height:u,fontSize:u,padding:u,margin:u,perspective:u,lineHeight:""};var c,h,d,p,f,m,g,v,y=/(?:\-|\.|\b)(\d|\.|e\-)+/g,_=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,b=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,T=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b),?/gi,S=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,C=/opacity *= *([^)]*)/i,k=/opacity:([^;]*)/i,x=/alpha\(opacity *=.+?\)/i,E=/^(rgb|hsl)/,A=/([A-Z])/g,P=/-([a-z])/gi,O=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,I=function(e,t){return t.toUpperCase()},D=/(?:Left|Right|Width)/i,L=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,R=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,M=/,(?=[^\)]*(?:\(|$))/gi,N=/[\s,\(]/i,j=Math.PI/180,U=180/Math.PI,F={},B={style:{}},H=_gsScope.document||{createElement:function(){return B}},q=function(e,t){var i=H.createElementNS?H.createElementNS(t||"http://www.w3.org/1999/xhtml",e):H.createElement(e);return i.style?i:H.createElement(e)},V=q("div"),W=q("img"),z=s._internals={_specialProps:l},G=(_gsScope.navigator||{}).userAgent||"",X=function(){var e=G.indexOf("Android"),t=q("a");return d=-1!==G.indexOf("Safari")&&-1===G.indexOf("Chrome")&&(-1===e||parseFloat(G.substr(e+8,2))>3),f=d&&parseFloat(G.substr(G.indexOf("Version/")+8,2))<6,p=-1!==G.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(G)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(G))&&(m=parseFloat(RegExp.$1)),!!t&&(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity))}(),J=function(e){return C.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Y=function(e){_gsScope.console&&console.log(e)},K="",$="",Q=function(e,t){var i,n,r=(t=t||V).style;if(void 0!==r[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===r[i[n]+e];);return n>=0?(K="-"+($=3===n?"ms":i[n]).toLowerCase()+"-",$+e):null},Z="undefined"!=typeof window?window:H.defaultView||{getComputedStyle:function(){}},ee=function(e){return Z.getComputedStyle(e)},te=s.getStyle=function(e,t,i,n,r){var a;return X||"opacity"!==t?(!n&&e.style[t]?a=e.style[t]:(i=i||ee(e))?a=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(A,"-$1").toLowerCase()):e.currentStyle&&(a=e.currentStyle[t]),null==r||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:r):J(e)},ie=z.convertToPixels=function(e,i,n,r,a){if("px"===r||!r&&"lineHeight"!==i)return n;if("auto"===r||!n)return 0;var o,l,u,c=D.test(i),h=e,d=V.style,p=n<0,f=1===n;if(p&&(n=-n),f&&(n*=100),"lineHeight"!==i||r)if("%"===r&&-1!==i.indexOf("border"))o=n/100*(c?e.clientWidth:e.clientHeight);else{if(d.cssText="border:0 solid red;position:"+te(e,"position")+";line-height:0;","%"!==r&&h.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)d[c?"borderLeftWidth":"borderTopWidth"]=n+r;else{if(-1!==te(h=e.parentNode||H.body,"display").indexOf("flex")&&(d.position="absolute"),u=t.ticker.frame,(l=h._gsCache)&&c&&l.time===u)return l.width*n/100;d[c?"width":"height"]=n+r}h.appendChild(V),o=parseFloat(V[c?"offsetWidth":"offsetHeight"]),h.removeChild(V),c&&"%"===r&&!1!==s.cacheWidths&&((l=h._gsCache=h._gsCache||{}).time=u,l.width=o/n*100),0!==o||a||(o=ie(e,i,n,r,!0))}else l=ee(e).lineHeight,e.style.lineHeight=n,o=parseFloat(ee(e).lineHeight),e.style.lineHeight=l;return f&&(o/=100),p?-o:o},ne=z.calculateOffset=function(e,t,i){if("absolute"!==te(e,"position",i))return 0;var n="left"===t?"Left":"Top",r=te(e,"margin"+n,i);return e["offset"+n]-(ie(e,t,parseFloat(r),r.replace(w,""))||0)},re=function(e,t){var i,n,r,a={};if(t=t||ee(e))if(i=t.length)for(;--i>-1;)-1!==(r=t[i]).indexOf("-transform")&&Ie!==r||(a[r.replace(P,I)]=t.getPropertyValue(r));else for(i in t)-1!==i.indexOf("Transform")&&Oe!==i||(a[i]=t[i]);else if(t=e.currentStyle||e.style)for(i in t)"string"==typeof i&&void 0===a[i]&&(a[i.replace(P,I)]=t[i]);return X||(a.opacity=J(e)),n=We(e,t,!1),a.rotation=n.rotation,a.skewX=n.skewX,a.scaleX=n.scaleX,a.scaleY=n.scaleY,a.x=n.x,a.y=n.y,Le&&(a.z=n.z,a.rotationX=n.rotationX,a.rotationY=n.rotationY,a.scaleZ=n.scaleZ),a.filters&&delete a.filters,a},ae=function(e,t,i,n,r){var a,s,o,l={},u=e.style;for(s in i)"cssText"!==s&&"length"!==s&&isNaN(s)&&(t[s]!==(a=i[s])||r&&r[s])&&-1===s.indexOf("Origin")&&("number"!=typeof a&&"string"!=typeof a||(l[s]="auto"!==a||"left"!==s&&"top"!==s?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof t[s]||""===t[s].replace(S,"")?a:0:ne(e,s),void 0!==u[s]&&(o=new be(u,s,u[s],o))));if(n)for(s in n)"className"!==s&&(l[s]=n[s]);return{difs:l,firstMPT:o}},se={width:["Left","Right"],height:["Top","Bottom"]},oe=["marginLeft","marginRight","marginTop","marginBottom"],le=function(e,t,i){if("svg"===(e.nodeName+"").toLowerCase())return(i||ee(e))[t]||0;if(e.getCTM&&He(e))return e.getBBox()[t]||0;var n=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),r=se[t],a=r.length;for(i=i||ee(e);--a>-1;)n-=parseFloat(te(e,"padding"+r[a],i,!0))||0,n-=parseFloat(te(e,"border"+r[a]+"Width",i,!0))||0;return n},ue=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";null!=e&&""!==e||(e="0 0");var i,n=e.split(" "),r=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":n[0],a=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":n[1];if(n.length>3&&!t){for(n=e.split(", ").join(",").split(","),e=[],i=0;i<n.length;i++)e.push(ue(n[i]));return e.join(",")}return null==a?a="center"===r?"50%":"0":"center"===a&&(a="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e=r+" "+a+(n.length>2?" "+n[2]:""),t&&(t.oxp=-1!==r.indexOf("%"),t.oyp=-1!==a.indexOf("%"),t.oxr="="===r.charAt(1),t.oyr="="===a.charAt(1),t.ox=parseFloat(r.replace(S,"")),t.oy=parseFloat(a.replace(S,"")),t.v=e),t||e},ce=function(e,t){return"function"==typeof e&&(e=e(v,g)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},he=function(e,t){"function"==typeof e&&(e=e(v,g));var i="string"==typeof e&&"="===e.charAt(1);return"string"==typeof e&&"v"===e.charAt(e.length-2)&&(e=(i?e.substr(0,2):0)+window["inner"+("vh"===e.substr(-2)?"Height":"Width")]*(parseFloat(i?e.substr(2):e)/100)),null==e?t:i?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},de=function(e,t,i,n){var r,a,s,o,l,u=1e-6;return"function"==typeof e&&(e=e(v,g)),null==e?o=t:"number"==typeof e?o=e:(r=360,a=e.split("_"),s=((l="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===e.indexOf("rad")?1:U)-(l?0:t),a.length&&(n&&(n[i]=t+s),-1!==e.indexOf("short")&&(s%=r)!=s%180&&(s=s<0?s+r:s-r),-1!==e.indexOf("_cw")&&s<0?s=(s+3599999999640)%r-(s/r|0)*r:-1!==e.indexOf("ccw")&&s>0&&(s=(s-3599999999640)%r-(s/r|0)*r)),o=t+s),o<u&&o>-u&&(o=0),o},pe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},fe=function(e,t,i){return 255*(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)+.5|0},me=s.parseColor=function(e,t){var i,n,r,a,s,o,l,u,c,h,d;if(e)if("number"==typeof e)i=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),pe[e])i=pe[e];else if("#"===e.charAt(0))4===e.length&&(n=e.charAt(1),r=e.charAt(2),a=e.charAt(3),e="#"+n+n+r+r+a+a),i=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(i=d=e.match(y),t){if(-1!==e.indexOf("="))return e.match(_)}else s=Number(i[0])%360/360,o=Number(i[1])/100,n=2*(l=Number(i[2])/100)-(r=l<=.5?l*(o+1):l+o-l*o),i.length>3&&(i[3]=Number(i[3])),i[0]=fe(s+1/3,n,r),i[1]=fe(s,n,r),i[2]=fe(s-1/3,n,r);else i=e.match(y)||pe.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=pe.black;return t&&!d&&(n=i[0]/255,r=i[1]/255,a=i[2]/255,l=((u=Math.max(n,r,a))+(c=Math.min(n,r,a)))/2,u===c?s=o=0:(h=u-c,o=l>.5?h/(2-u-c):h/(u+c),s=u===n?(r-a)/h+(r<a?6:0):u===r?(a-n)/h+2:(n-r)/h+4,s*=60),i[0]=s+.5|0,i[1]=100*o+.5|0,i[2]=100*l+.5|0),i},ge=function(e,t){var i,n,r,a=e.match(ve)||[],s=0,o="";if(!a.length)return e;for(i=0;i<a.length;i++)s+=(r=e.substr(s,e.indexOf(n=a[i],s)-s)).length+n.length,3===(n=me(n,t)).length&&n.push(1),o+=r+(t?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return o+e.substr(s)},ve="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(u in pe)ve+="|"+u+"\\b";ve=new RegExp(ve+")","gi"),s.colorStringFilter=function(e){var t,i=e[0]+" "+e[1];ve.test(i)&&(t=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),e[0]=ge(e[0],t),e[1]=ge(e[1],t)),ve.lastIndex=0},t.defaultStringFilter||(t.defaultStringFilter=s.colorStringFilter);var ye=function(e,t,i,n){if(null==e)return function(e){return e};var r,a=t?(e.match(ve)||[""])[0]:"",s=e.split(a).join("").match(b)||[],o=e.substr(0,e.indexOf(s[0])),l=")"===e.charAt(e.length-1)?")":"",u=-1!==e.indexOf(" ")?" ":",",c=s.length,h=c>0?s[0].replace(y,""):"";return c?r=t?function(e){var t,d,p,f;if("number"==typeof e)e+=h;else if(n&&M.test(e)){for(f=e.replace(M,"|").split("|"),p=0;p<f.length;p++)f[p]=r(f[p]);return f.join(",")}if(t=(e.match(ve)||[a])[0],p=(d=e.split(t).join("").match(b)||[]).length,c>p--)for(;++p<c;)d[p]=i?d[(p-1)/2|0]:s[p];return o+d.join(u)+u+t+l+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,a,d;if("number"==typeof e)e+=h;else if(n&&M.test(e)){for(a=e.replace(M,"|").split("|"),d=0;d<a.length;d++)a[d]=r(a[d]);return a.join(",")}if(d=(t=e.match(","===u?b:T)||[]).length,c>d--)for(;++d<c;)t[d]=i?t[(d-1)/2|0]:s[d];return(o&&"none"!==e&&e.substr(0,e.indexOf(t[0]))||o)+t.join(u)+l}:function(e){return e}},_e=function(e){return e=e.split(","),function(t,i,n,r,a,s,o){var l,u=(i+"").split(" ");for(o={},l=0;l<4;l++)o[e[l]]=u[l]=u[l]||u[(l-1)/2>>0];return r.parse(t,o,a,s)}},be=(z._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,i,n,r,a,s=this.data,o=s.proxy,l=s.firstMPT,u=1e-6;l;)t=o[l.v],l.r?t=l.r(t):t<u&&t>-u&&(t=0),l.t[l.p]=t,l=l._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod.call(this._tween,o.rotation,this.t,this._tween):o.rotation),1===e||0===e)for(l=s.firstMPT,a=1===e?"e":"b";l;){if((i=l.t).type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;n<i.l;n++)r+=i["xn"+n]+i["xs"+(n+1)];i[a]=r}}else i[a]=i.s+i.xs0;l=l._next}},function(e,t,i,n,r){this.t=e,this.p=t,this.v=i,this.r=r,n&&(n._prev=this,this._next=n)}),Te=(z._parseToProxy=function(e,t,i,n,r,a){var s,o,l,u,c,h=n,d={},p={},f=i._transform,m=F;for(i._transform=null,F=t,n=c=i.parse(e,t,n,r),F=m,a&&(i._transform=f,h&&(h._prev=null,h._prev&&(h._prev._next=null)));n&&n!==h;){if(n.type<=1&&(p[o=n.p]=n.s+n.c,d[o]=n.s,a||(u=new be(n,"s",o,u,n.r),n.c=0),1===n.type))for(s=n.l;--s>0;)p[o=n.p+"_"+(l="xn"+s)]=n.data[l],d[o]=n[l],a||(u=new be(n,l,o,u,n.rxp[l]));n=n._next}return{proxy:d,end:p,firstMPT:u,pt:c}},z.CSSPropTween=function(e,t,n,r,s,o,l,u,c,h,d){this.t=e,this.p=t,this.s=n,this.c=r,this.n=l||t,e instanceof Te||a.push(this.n),this.r=u?"function"==typeof u?u:Math.round:u,this.type=o||0,c&&(this.pr=c,i=!0),this.b=void 0===h?n:h,this.e=void 0===d?n+r:d,s&&(this._next=s,s._prev=this)}),Se=function(e,t,i,n,r,a){var s=new Te(e,t,i,n-i,r,-1,a);return s.b=i,s.e=s.xs0=n,s},we=s.parseComplex=function(e,t,i,n,r,a,o,l,u,h){i=i||a||"","function"==typeof n&&(n=n(v,g)),o=new Te(e,t,0,0,o,h?2:1,null,!1,l,i,n),n+="",r&&ve.test(n+i)&&(s.colorStringFilter(n=[i,n]),i=n[0],n=n[1]);var d,p,f,m,b,T,S,w,C,k,x,E,A,P=i.split(", ").join(",").split(" "),O=n.split(", ").join(",").split(" "),I=P.length,D=!1!==c;for(-1===n.indexOf(",")&&-1===i.indexOf(",")||(-1!==(n+i).indexOf("rgb")||-1!==(n+i).indexOf("hsl")?(P=P.join(" ").replace(M,", ").split(" "),O=O.join(" ").replace(M,", ").split(" ")):(P=P.join(" ").split(",").join(", ").split(" "),O=O.join(" ").split(",").join(", ").split(" ")),I=P.length),I!==O.length&&(I=(P=(a||"").split(" ")).length),o.plugin=u,o.setRatio=h,ve.lastIndex=0,d=0;d<I;d++)if(m=P[d],b=O[d]+"",(w=parseFloat(m))||0===w)o.appendXtra("",w,ce(b,w),b.replace(_,""),!(!D||-1===b.indexOf("px"))&&Math.round,!0);else if(r&&ve.test(m))E=")"+((E=b.indexOf(")")+1)?b.substr(E):""),A=-1!==b.indexOf("hsl")&&X,k=b,m=me(m,A),b=me(b,A),(C=m.length+b.length>6)&&!X&&0===b[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(O[d]).join("transparent")):(X||(C=!1),A?o.appendXtra(k.substr(0,k.indexOf("hsl"))+(C?"hsla(":"hsl("),m[0],ce(b[0],m[0]),",",!1,!0).appendXtra("",m[1],ce(b[1],m[1]),"%,",!1).appendXtra("",m[2],ce(b[2],m[2]),C?"%,":"%"+E,!1):o.appendXtra(k.substr(0,k.indexOf("rgb"))+(C?"rgba(":"rgb("),m[0],b[0]-m[0],",",Math.round,!0).appendXtra("",m[1],b[1]-m[1],",",Math.round).appendXtra("",m[2],b[2]-m[2],C?",":E,Math.round),C&&o.appendXtra("",m=m.length<4?1:m[3],(b.length<4?1:b[3])-m,E,!1)),ve.lastIndex=0;else if(T=m.match(y)){if(!(S=b.match(_))||S.length!==T.length)return o;for(f=0,p=0;p<T.length;p++)k=m.indexOf(x=T[p],f),o.appendXtra(m.substr(f,k-f),Number(x),ce(S[p],x),"",!(!D||"px"!==m.substr(k+x.length,2))&&Math.round,0===p),f=k+x.length;o["xs"+o.l]+=m.substr(f)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+b:b;if(-1!==n.indexOf("=")&&o.data){for(E=o.xs0+o.data.s,d=1;d<o.l;d++)E+=o["xs"+d]+o.data["xn"+d];o.e=E+o["xs"+d]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},Ce=9;for((u=Te.prototype).l=u.pr=0;--Ce>0;)u["xn"+Ce]=0,u["xs"+Ce]="";u.xs0="",u._next=u._prev=u.xfirst=u.data=u.plugin=u.setRatio=u.rxp=null,u.appendXtra=function(e,t,i,n,r,a){var s=this,o=s.l;return s["xs"+o]+=a&&(o||s["xs"+o])?" "+e:e||"",i||0===o||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=n||"",o>0?(s.data["xn"+o]=t+i,s.rxp["xn"+o]=r,s["xn"+o]=t,s.plugin||(s.xfirst=new Te(s,"xn"+o,t,i,s.xfirst||s,0,s.n,r,s.pr),s.xfirst.xs0=0),s):(s.data={s:t+i},s.rxp={},s.s=t,s.c=i,s.r=r,s)):(s["xs"+o]+=t+(n||""),s)};var ke=function(e,t){this.p=(t=t||{}).prefix&&Q(e)||e,l[e]=l[this.p]=this,this.format=t.formatter||ye(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.allowFunc=t.allowFunc,this.pr=t.priority||0},xe=z._registerComplexSpecialProp=function(e,t,i){"object"!=typeof t&&(t={parser:i});var n,r=e.split(","),a=t.defaultValue;for(i=i||[a],n=0;n<r.length;n++)t.prefix=0===n&&t.prefix,t.defaultValue=i[n]||a,new ke(r[n],t)},Ee=z._registerPluginProp=function(e){if(!l[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";xe(e,{parser:function(e,i,n,r,a,s,u){var c=o.com.greensock.plugins[t];return c?(c._cssRegister(),l[n].parse(e,i,n,r,a,s,u)):(Y("Error: "+t+" js file not loaded."),a)}})}};(u=ke.prototype).parseComplex=function(e,t,i,n,r,a){var s,o,l,u,c,h,d=this.keyword;if(this.multi&&(M.test(i)||M.test(t)?(o=t.replace(M,"|").split("|"),l=i.replace(M,"|").split("|")):d&&(o=[t],l=[i])),l){for(u=l.length>o.length?l.length:o.length,s=0;s<u;s++)t=o[s]=o[s]||this.dflt,i=l[s]=l[s]||this.dflt,d&&(c=t.indexOf(d))!==(h=i.indexOf(d))&&(-1===h?o[s]=o[s].split(d).join(""):-1===c&&(o[s]+=" "+d));t=o.join(", "),i=l.join(", ")}return we(e,this.p,t,i,this.clrs,this.dflt,n,this.pr,r,a)},u.parse=function(e,t,i,n,a,s,o){return this.parseComplex(e.style,this.format(te(e,this.p,r,!1,this.dflt)),this.format(t),a,s)},s.registerSpecialProp=function(e,t,i){xe(e,{parser:function(e,n,r,a,s,o,l){var u=new Te(e,r,0,0,s,2,r,!1,i);return u.plugin=o,u.setRatio=t(e,n,a._tween,r),u},priority:i})},s.useSVGTransformAttr=!0;var Ae,Pe="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Oe=Q("transform"),Ie=K+"transform",De=Q("transformOrigin"),Le=null!==Q("perspective"),Re=z.Transform=function(){this.perspective=parseFloat(s.defaultTransformPerspective)||0,this.force3D=!(!1===s.defaultForce3D||!Le)&&(s.defaultForce3D||"auto")},Me=_gsScope.SVGElement,Ne=function(e,t,i){var n,r=H.createElementNS("http://www.w3.org/2000/svg",e),a=/([a-z])([A-Z])/g;for(n in i)r.setAttributeNS(null,n.replace(a,"$1-$2").toLowerCase(),i[n]);return t.appendChild(r),r},je=H.documentElement||{},Ue=function(){var e,t,i,n=m||/Android/i.test(G)&&!_gsScope.chrome;return H.createElementNS&&je.appendChild&&!n&&(e=Ne("svg",je),i=(t=Ne("rect",e,{width:100,height:50,x:100})).getBoundingClientRect().width,t.style[De]="50% 50%",t.style[Oe]="scaleX(0.5)",n=i===t.getBoundingClientRect().width&&!(p&&Le),je.removeChild(e)),n}(),Fe=function(e,t,i,n,r,a){var o,l,u,c,h,d,p,f,m,g,v,y,_,b,T=e._gsTransform,S=Ve(e,!0);T&&(_=T.xOrigin,b=T.yOrigin),(!n||(o=n.split(" ")).length<2)&&(0===(p=e.getBBox()).x&&0===p.y&&p.width+p.height===0&&(p={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),o=[(-1!==(t=ue(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*p.width:parseFloat(t[0]))+p.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*p.height:parseFloat(t[1]))+p.y]),i.xOrigin=c=parseFloat(o[0]),i.yOrigin=h=parseFloat(o[1]),n&&S!==qe&&(g=S[4],v=S[5],(y=(d=S[0])*(m=S[3])-(p=S[1])*(f=S[2]))&&(u=c*(-p/y)+h*(d/y)-(d*v-p*g)/y,c=i.xOrigin=o[0]=l=c*(m/y)+h*(-f/y)+(f*v-m*g)/y,h=i.yOrigin=o[1]=u)),T&&(a&&(i.xOffset=T.xOffset,i.yOffset=T.yOffset,T=i),r||!1!==r&&!1!==s.defaultSmoothOrigin?(T.xOffset+=(l=c-_)*S[0]+(u=h-b)*S[2]-l,T.yOffset+=l*S[1]+u*S[3]-u):T.xOffset=T.yOffset=0),a||e.setAttribute("data-svg-origin",o.join(" "))},Be=function(e){var t,i=q("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(je.appendChild(i),i.appendChild(this),this.style.display="block",e)try{t=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Be}catch(s){}else this._originalGetBBox&&(t=this._originalGetBBox());return r?n.insertBefore(this,r):n.appendChild(this),je.removeChild(i),this.style.cssText=a,t},He=function(e){return!(!Me||!e.getCTM||e.parentNode&&!e.ownerSVGElement||!function(e){try{return e.getBBox()}catch(error){return Be.call(e,!0)}}(e))},qe=[1,0,0,1,0,0],Ve=function(e,t){var i,n,r,a,s,o,l,u=e._gsTransform||new Re,c=1e5,h=e.style;if(Oe?n=te(e,Ie,null,!0):e.currentStyle&&(n=(n=e.currentStyle.filter.match(L))&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),u.x||0,u.y||0].join(","):""),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,Oe&&i&&!e.offsetParent&&e!==je&&(a=h.display,h.display="block",(l=e.parentNode)&&e.offsetParent||(s=1,o=e.nextSibling,je.appendChild(e)),i=!(n=te(e,Ie,null,!0))||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,a?h.display=a:Je(h,"display"),s&&(o?l.insertBefore(e,o):l?l.appendChild(e):je.removeChild(e))),(u.svg||e.getCTM&&He(e))&&(i&&-1!==(h[Oe]+"").indexOf("matrix")&&(n=h[Oe],i=0),r=e.getAttribute("transform"),i&&r&&(n="matrix("+(r=e.transform.baseVal.consolidate().matrix).a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")",i=0)),i)return qe;for(r=(n||"").match(y)||[],Ce=r.length;--Ce>-1;)a=Number(r[Ce]),r[Ce]=(s=a-(a|=0))?(s*c+(s<0?-.5:.5)|0)/c+a:a;return t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},We=z.getTransform=function(e,i,n,r){if(e._gsTransform&&n&&!r)return e._gsTransform;var a,o,l,u,c,h,d=n&&e._gsTransform||new Re,p=d.scaleX<0,f=2e-5,m=1e5,g=Le&&(parseFloat(te(e,De,i,!1,"0 0 0").split(" ")[2])||d.zOrigin)||0,v=parseFloat(s.defaultTransformPerspective)||0;if(d.svg=!(!e.getCTM||!He(e)),d.svg&&(Fe(e,te(e,De,i,!1,"50% 50%")+"",d,e.getAttribute("data-svg-origin")),Ae=s.useSVGTransformAttr||Ue),(a=Ve(e))!==qe){if(16===a.length){var y,_,b,T,S,w=a[0],C=a[1],k=a[2],x=a[3],E=a[4],A=a[5],P=a[6],O=a[7],I=a[8],D=a[9],L=a[10],R=a[12],M=a[13],N=a[14],j=a[11],F=Math.atan2(P,L);d.zOrigin&&(R=I*(N=-d.zOrigin)-a[12],M=D*N-a[13],N=L*N+d.zOrigin-a[14]),d.rotationX=F*U,F&&(y=E*(T=Math.cos(-F))+I*(S=Math.sin(-F)),_=A*T+D*S,b=P*T+L*S,I=E*-S+I*T,D=A*-S+D*T,L=P*-S+L*T,j=O*-S+j*T,E=y,A=_,P=b),F=Math.atan2(-k,L),d.rotationY=F*U,F&&(_=C*(T=Math.cos(-F))-D*(S=Math.sin(-F)),b=k*T-L*S,D=C*S+D*T,L=k*S+L*T,j=x*S+j*T,w=y=w*T-I*S,C=_,k=b),F=Math.atan2(C,w),d.rotation=F*U,F&&(y=w*(T=Math.cos(F))+C*(S=Math.sin(F)),_=E*T+A*S,b=I*T+D*S,C=C*T-w*S,A=A*T-E*S,D=D*T-I*S,w=y,E=_,I=b),d.rotationX&&Math.abs(d.rotationX)+Math.abs(d.rotation)>359.9&&(d.rotationX=d.rotation=0,d.rotationY=180-d.rotationY),F=Math.atan2(E,A),d.scaleX=(Math.sqrt(w*w+C*C+k*k)*m+.5|0)/m,d.scaleY=(Math.sqrt(A*A+P*P)*m+.5|0)/m,d.scaleZ=(Math.sqrt(I*I+D*D+L*L)*m+.5|0)/m,w/=d.scaleX,E/=d.scaleY,C/=d.scaleX,A/=d.scaleY,Math.abs(F)>f?(d.skewX=F*U,E=0,"simple"!==d.skewType&&(d.scaleY*=1/Math.cos(F))):d.skewX=0,d.perspective=j?1/(j<0?-j:j):0,d.x=R,d.y=M,d.z=N,d.svg&&(d.x-=d.xOrigin-(d.xOrigin*w-d.yOrigin*E),d.y-=d.yOrigin-(d.yOrigin*C-d.xOrigin*A))}else if(!Le||r||!a.length||d.x!==a[4]||d.y!==a[5]||!d.rotationX&&!d.rotationY){var B=a.length>=6,H=B?a[0]:1,q=a[1]||0,V=a[2]||0,W=B?a[3]:1;d.x=a[4]||0,d.y=a[5]||0,l=Math.sqrt(H*H+q*q),u=Math.sqrt(W*W+V*V),c=H||q?Math.atan2(q,H)*U:d.rotation||0,h=V||W?Math.atan2(V,W)*U+c:d.skewX||0,d.scaleX=l,d.scaleY=u,d.rotation=c,d.skewX=h,Le&&(d.rotationX=d.rotationY=d.z=0,d.perspective=v,d.scaleZ=1),d.svg&&(d.x-=d.xOrigin-(d.xOrigin*H+d.yOrigin*V),d.y-=d.yOrigin-(d.xOrigin*q+d.yOrigin*W))}for(o in Math.abs(d.skewX)>90&&Math.abs(d.skewX)<270&&(p?(d.scaleX*=-1,d.skewX+=d.rotation<=0?180:-180,d.rotation+=d.rotation<=0?180:-180):(d.scaleY*=-1,d.skewX+=d.skewX<=0?180:-180)),d.zOrigin=g,d)d[o]<f&&d[o]>-f&&(d[o]=0)}return n&&(e._gsTransform=d,d.svg&&(Ae&&e.style[Oe]?t.delayedCall(.001,function(){Je(e.style,Oe)}):!Ae&&e.getAttribute("transform")&&t.delayedCall(.001,function(){e.removeAttribute("transform")}))),d},ze=function(e){var t,i,n=this.data,r=-n.rotation*j,a=r+n.skewX*j,s=1e5,o=(Math.cos(r)*n.scaleX*s|0)/s,l=(Math.sin(r)*n.scaleX*s|0)/s,u=(Math.sin(a)*-n.scaleY*s|0)/s,c=(Math.cos(a)*n.scaleY*s|0)/s,h=this.t.style,d=this.t.currentStyle;if(d){i=l,l=-u,u=-i,t=d.filter,h.filter="";var p,f,g=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==d.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+l+", M21="+u+", M22="+c,b=n.x+g*n.xPercent/100,T=n.y+v*n.yPercent/100;if(null!=n.ox&&(b+=(p=(n.oxp?g*n.ox*.01:n.ox)-g/2)-(p*o+(f=(n.oyp?v*n.oy*.01:n.oy)-v/2)*l),T+=f-(p*u+f*c)),_+=y?", Dx="+((p=g/2)-(p*o+(f=v/2)*l)+b)+", Dy="+(f-(p*u+f*c)+T)+")":", sizingMethod='auto expand')",h.filter=-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?t.replace(R,_):_+" "+t,0!==e&&1!==e||1===o&&0===l&&0===u&&1===c&&(y&&-1===_.indexOf("Dx=0, Dy=0")||C.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&h.removeAttribute("filter")),!y){var S,k,x,E=m<8?1:-1;for(p=n.ieOffsetX||0,f=n.ieOffsetY||0,n.ieOffsetX=Math.round((g-((o<0?-o:o)*g+(l<0?-l:l)*v))/2+b),n.ieOffsetY=Math.round((v-((c<0?-c:c)*v+(u<0?-u:u)*g))/2+T),Ce=0;Ce<4;Ce++)x=(i=-1!==(S=d[k=oe[Ce]]).indexOf("px")?parseFloat(S):ie(this.t,k,parseFloat(S),S.replace(w,""))||0)!==n[k]?Ce<2?-n.ieOffsetX:-n.ieOffsetY:Ce<2?p-n.ieOffsetX:f-n.ieOffsetY,h[k]=(n[k]=Math.round(i-x*(0===Ce||2===Ce?1:E)))+"px"}}},Ge=z.set3DTransformRatio=z.setTransformRatio=function(e){var t,i,n,r,a,s,o,l,u,c,h,d,f,m,g,v,y,_,b,T,S,w,C,k=this.data,x=this.t.style,E=k.rotation,A=k.rotationX,P=k.rotationY,O=k.scaleX,I=k.scaleY,D=k.scaleZ,L=k.x,R=k.y,M=k.z,N=k.svg,U=k.perspective,F=k.force3D,B=k.skewY,H=k.skewX;if(B&&(H+=B,E+=B),!((1!==e&&0!==e||"auto"!==F||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&F||M||U||P||A||1!==D)||Ae&&N||!Le)E||H||N?(E*=j,w=H*j,C=1e5,i=Math.cos(E)*O,a=Math.sin(E)*O,n=Math.sin(E-w)*-I,s=Math.cos(E-w)*I,w&&"simple"===k.skewType&&(t=Math.tan(w-B*j),n*=t=Math.sqrt(1+t*t),s*=t,B&&(t=Math.tan(B*j),i*=t=Math.sqrt(1+t*t),a*=t)),N&&(L+=k.xOrigin-(k.xOrigin*i+k.yOrigin*n)+k.xOffset,R+=k.yOrigin-(k.xOrigin*a+k.yOrigin*s)+k.yOffset,Ae&&(k.xPercent||k.yPercent)&&(g=this.t.getBBox(),L+=.01*k.xPercent*g.width,R+=.01*k.yPercent*g.height),L<(g=1e-6)&&L>-g&&(L=0),R<g&&R>-g&&(R=0)),b=(i*C|0)/C+","+(a*C|0)/C+","+(n*C|0)/C+","+(s*C|0)/C+","+L+","+R+")",N&&Ae?this.t.setAttribute("transform","matrix("+b):x[Oe]=(k.xPercent||k.yPercent?"translate("+k.xPercent+"%,"+k.yPercent+"%) matrix(":"matrix(")+b):x[Oe]=(k.xPercent||k.yPercent?"translate("+k.xPercent+"%,"+k.yPercent+"%) matrix(":"matrix(")+O+",0,0,"+I+","+L+","+R+")";else{if(p&&(O<(g=1e-4)&&O>-g&&(O=D=2e-5),I<g&&I>-g&&(I=D=2e-5),!U||k.z||k.rotationX||k.rotationY||(U=0)),E||H)E*=j,v=i=Math.cos(E),y=a=Math.sin(E),H&&(E-=H*j,v=Math.cos(E),y=Math.sin(E),"simple"===k.skewType&&(t=Math.tan((H-B)*j),v*=t=Math.sqrt(1+t*t),y*=t,k.skewY&&(t=Math.tan(B*j),i*=t=Math.sqrt(1+t*t),a*=t))),n=-y,s=v;else{if(!(P||A||1!==D||U||N))return void(x[Oe]=(k.xPercent||k.yPercent?"translate("+k.xPercent+"%,"+k.yPercent+"%) translate3d(":"translate3d(")+L+"px,"+R+"px,"+M+"px)"+(1!==O||1!==I?" scale("+O+","+I+")":""));i=s=1,n=a=0}c=1,r=o=l=u=h=d=0,f=U?-1/U:0,m=k.zOrigin,g=1e-6,T=",",S="0",(E=P*j)&&(v=Math.cos(E),l=-(y=Math.sin(E)),h=f*-y,r=i*y,o=a*y,c=v,f*=v,i*=v,a*=v),(E=A*j)&&(t=n*(v=Math.cos(E))+r*(y=Math.sin(E)),_=s*v+o*y,u=c*y,d=f*y,r=n*-y+r*v,o=s*-y+o*v,c*=v,f*=v,n=t,s=_),1!==D&&(r*=D,o*=D,c*=D,f*=D),1!==I&&(n*=I,s*=I,u*=I,d*=I),1!==O&&(i*=O,a*=O,l*=O,h*=O),(m||N)&&(m&&(L+=r*-m,R+=o*-m,M+=c*-m+m),N&&(L+=k.xOrigin-(k.xOrigin*i+k.yOrigin*n)+k.xOffset,R+=k.yOrigin-(k.xOrigin*a+k.yOrigin*s)+k.yOffset),L<g&&L>-g&&(L=S),R<g&&R>-g&&(R=S),M<g&&M>-g&&(M=0)),b=k.xPercent||k.yPercent?"translate("+k.xPercent+"%,"+k.yPercent+"%) matrix3d(":"matrix3d(",b+=(i<g&&i>-g?S:i)+T+(a<g&&a>-g?S:a)+T+(l<g&&l>-g?S:l),b+=T+(h<g&&h>-g?S:h)+T+(n<g&&n>-g?S:n)+T+(s<g&&s>-g?S:s),A||P||1!==D?(b+=T+(u<g&&u>-g?S:u)+T+(d<g&&d>-g?S:d)+T+(r<g&&r>-g?S:r),b+=T+(o<g&&o>-g?S:o)+T+(c<g&&c>-g?S:c)+T+(f<g&&f>-g?S:f)+T):b+=",0,0,0,0,1,0,",x[Oe]=b+=L+T+R+T+M+T+(U?1+-M/U:1)+")"}};(u=Re.prototype).x=u.y=u.z=u.skewX=u.skewY=u.rotation=u.rotationX=u.rotationY=u.zOrigin=u.xPercent=u.yPercent=u.xOffset=u.yOffset=0,u.scaleX=u.scaleY=u.scaleZ=1,xe("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,n,a,o,l){if(n._lastParsedTransform===l)return a;n._lastParsedTransform=l;var u=l.scale&&"function"==typeof l.scale?l.scale:0;u&&(l.scale=u(v,e));var c,h,d,p,f,m,y,_,b,T=e._gsTransform,S=e.style,w=1e-6,C=Pe.length,k=l,x={},E="transformOrigin",A=We(e,r,!0,k.parseTransform),P=k.transform&&("function"==typeof k.transform?k.transform(v,g):k.transform);if(A.skewType=k.skewType||A.skewType||s.defaultSkewType,n._transform=A,"rotationZ"in k&&(k.rotation=k.rotationZ),P&&"string"==typeof P&&Oe)(h=V.style)[Oe]=P,h.display="block",h.position="absolute",-1!==P.indexOf("%")&&(h.width=te(e,"width"),h.height=te(e,"height")),H.body.appendChild(V),c=We(V,null,!1),"simple"===A.skewType&&(c.scaleY*=Math.cos(c.skewX*j)),A.svg&&(m=A.xOrigin,y=A.yOrigin,c.x-=A.xOffset,c.y-=A.yOffset,(k.transformOrigin||k.svgOrigin)&&(P={},Fe(e,ue(k.transformOrigin),P,k.svgOrigin,k.smoothOrigin,!0),m=P.xOrigin,y=P.yOrigin,c.x-=P.xOffset-A.xOffset,c.y-=P.yOffset-A.yOffset),(m||y)&&(_=Ve(V,!0),c.x-=m-(m*_[0]+y*_[2]),c.y-=y-(m*_[1]+y*_[3]))),H.body.removeChild(V),c.perspective||(c.perspective=A.perspective),null!=k.xPercent&&(c.xPercent=he(k.xPercent,A.xPercent)),null!=k.yPercent&&(c.yPercent=he(k.yPercent,A.yPercent));else if("object"==typeof k){if(c={scaleX:he(null!=k.scaleX?k.scaleX:k.scale,A.scaleX),scaleY:he(null!=k.scaleY?k.scaleY:k.scale,A.scaleY),scaleZ:he(k.scaleZ,A.scaleZ),x:he(k.x,A.x),y:he(k.y,A.y),z:he(k.z,A.z),xPercent:he(k.xPercent,A.xPercent),yPercent:he(k.yPercent,A.yPercent),perspective:he(k.transformPerspective,A.perspective)},null!=(f=k.directionalRotation))if("object"==typeof f)for(h in f)k[h]=f[h];else k.rotation=f;"string"==typeof k.x&&-1!==k.x.indexOf("%")&&(c.x=0,c.xPercent=he(k.x,A.xPercent)),"string"==typeof k.y&&-1!==k.y.indexOf("%")&&(c.y=0,c.yPercent=he(k.y,A.yPercent)),c.rotation=de("rotation"in k?k.rotation:"shortRotation"in k?k.shortRotation+"_short":A.rotation,A.rotation,"rotation",x),Le&&(c.rotationX=de("rotationX"in k?k.rotationX:"shortRotationX"in k?k.shortRotationX+"_short":A.rotationX||0,A.rotationX,"rotationX",x),c.rotationY=de("rotationY"in k?k.rotationY:"shortRotationY"in k?k.shortRotationY+"_short":A.rotationY||0,A.rotationY,"rotationY",x)),c.skewX=de(k.skewX,A.skewX),c.skewY=de(k.skewY,A.skewY)}for(Le&&null!=k.force3D&&(A.force3D=k.force3D,p=!0),(d=A.force3D||A.z||A.rotationX||A.rotationY||c.z||c.rotationX||c.rotationY||c.perspective)||null==k.scale||(c.scaleZ=1);--C>-1;)((P=c[b=Pe[C]]-A[b])>w||P<-w||null!=k[b]||null!=F[b])&&(p=!0,a=new Te(A,b,A[b],P,a),b in x&&(a.e=x[b]),a.xs0=0,a.plugin=o,n._overwriteProps.push(a.n));return P="function"==typeof k.transformOrigin?k.transformOrigin(v,g):k.transformOrigin,A.svg&&(P||k.svgOrigin)&&(m=A.xOffset,y=A.yOffset,Fe(e,ue(P),c,k.svgOrigin,k.smoothOrigin),a=Se(A,"xOrigin",(T?A:c).xOrigin,c.xOrigin,a,E),a=Se(A,"yOrigin",(T?A:c).yOrigin,c.yOrigin,a,E),m===A.xOffset&&y===A.yOffset||(a=Se(A,"xOffset",T?m:A.xOffset,A.xOffset,a,E),a=Se(A,"yOffset",T?y:A.yOffset,A.yOffset,a,E)),P="0px 0px"),(P||Le&&d&&A.zOrigin)&&(Oe?(p=!0,b=De,P||(P=(P=(te(e,b,r,!1,"50% 50%")+"").split(" "))[0]+" "+P[1]+" "+A.zOrigin+"px"),P+="",(a=new Te(S,b,0,0,a,-1,E)).b=S[b],a.plugin=o,Le?(h=A.zOrigin,P=P.split(" "),A.zOrigin=(P.length>2?parseFloat(P[2]):h)||0,a.xs0=a.e=P[0]+" "+(P[1]||"50%")+" 0px",(a=new Te(A,"zOrigin",0,0,a,-1,a.n)).b=h,a.xs0=a.e=A.zOrigin):a.xs0=a.e=P):ue(P+"",A)),p&&(n._transformType=A.svg&&Ae||!d&&3!==this._transformType?2:3),u&&(l.scale=u),a},allowFunc:!0,prefix:!0}),xe("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),xe("clipPath",{defaultValue:"inset(0%)",prefix:!0,multi:!0,formatter:ye("inset(0% 0% 0% 0%)",!1,!0)}),xe("borderRadius",{defaultValue:"0px",parser:function(e,t,i,a,s,o){t=this.format(t);var l,u,c,h,d,p,f,m,g,v,y,_,b,T,S,w,C=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],k=e.style;for(g=parseFloat(e.offsetWidth),v=parseFloat(e.offsetHeight),l=t.split(" "),u=0;u<C.length;u++)this.p.indexOf("border")&&(C[u]=Q(C[u])),-1!==(d=h=te(e,C[u],r,!1,"0px")).indexOf(" ")&&(h=d.split(" "),d=h[0],h=h[1]),p=c=l[u],f=parseFloat(d),_=d.substr((f+"").length),(b="="===p.charAt(1))?(m=parseInt(p.charAt(0)+"1",10),p=p.substr(2),m*=parseFloat(p),y=p.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(p),y=p.substr((m+"").length)),""===y&&(y=n[i]||_),y!==_&&(T=ie(e,"borderLeft",f,_),S=ie(e,"borderTop",f,_),"%"===y?(d=T/g*100+"%",h=S/v*100+"%"):"em"===y?(d=T/(w=ie(e,"borderLeft",1,"em"))+"em",h=S/w+"em"):(d=T+"px",h=S+"px"),b&&(p=parseFloat(d)+m+y,c=parseFloat(h)+m+y)),s=we(k,C[u],d+" "+h,p+" "+c,!1,"0px",s);return s},prefix:!0,formatter:ye("0px 0px 0px 0px",!1,!0)}),xe("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,n,a,s){return we(e.style,i,this.format(te(e,i,r,!1,"0px 0px")),this.format(t),!1,"0px",a)},prefix:!0,formatter:ye("0px 0px",!1,!0)}),xe("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,n,a,s){var o,l,u,c,h,d,p="background-position",f=r||ee(e),g=this.format((f?m?f.getPropertyValue(p+"-x")+" "+f.getPropertyValue(p+"-y"):f.getPropertyValue(p):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),v=this.format(t);if(-1!==g.indexOf("%")!=(-1!==v.indexOf("%"))&&v.split(",").length<2&&(d=te(e,"backgroundImage").replace(O,""))&&"none"!==d){for(o=g.split(" "),l=v.split(" "),W.setAttribute("src",d),u=2;--u>-1;)(c=-1!==(g=o[u]).indexOf("%"))!=(-1!==l[u].indexOf("%"))&&(h=0===u?e.offsetWidth-W.width:e.offsetHeight-W.height,o[u]=c?parseFloat(g)/100*h+"px":parseFloat(g)/h*100+"%");g=o.join(" ")}return this.parseComplex(e.style,g,v,a,s)},formatter:ue}),xe("backgroundSize",{defaultValue:"0 0",formatter:function(e){return"co"===(e+="").substr(0,2)?e:ue(-1===e.indexOf(" ")?e+" "+e:e)}}),xe("perspective",{defaultValue:"0px",prefix:!0}),xe("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),xe("transformStyle",{prefix:!0}),xe("backfaceVisibility",{prefix:!0}),xe("userSelect",{prefix:!0}),xe("margin",{parser:_e("marginTop,marginRight,marginBottom,marginLeft")}),xe("padding",{parser:_e("paddingTop,paddingRight,paddingBottom,paddingLeft")}),xe("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,n,a,s){var o,l,u;return m<9?(o="rect("+(l=e.currentStyle).clipTop+(u=m<8?" ":",")+l.clipRight+u+l.clipBottom+u+l.clipLeft+")",t=this.format(t).split(",").join(u)):(o=this.format(te(e,this.p,r,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,o,t,a,s)}}),xe("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),xe("autoRound,strictUnits",{parser:function(e,t,i,n,r){return r}}),xe("border",{defaultValue:"0px solid #000",parser:function(e,t,i,n,a,s){var o=te(e,"borderTopWidth",r,!1,"0px"),l=this.format(t).split(" "),u=l[0].replace(w,"");return"px"!==u&&(o=parseFloat(o)/ie(e,"borderTopWidth",1,u)+u),this.parseComplex(e.style,this.format(o+" "+te(e,"borderTopStyle",r,!1,"solid")+" "+te(e,"borderTopColor",r,!1,"#000")),l.join(" "),a,s)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ve)||["#000"])[0]}}),xe("borderWidth",{parser:_e("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),xe("float,cssFloat,styleFloat",{parser:function(e,t,i,n,r,a){var s=e.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new Te(s,o,0,0,r,-1,i,!1,0,s[o],t)}});var Xe=function(e){var t,i=this.t,n=i.filter||te(this.data,"filter")||"",r=this.s+this.c*e|0;100===r&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),t=!te(this.data,"filter")):(i.filter=n.replace(x,""),t=!0)),t||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),-1===n.indexOf("pacity")?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(C,"opacity="+r))};xe("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,n,a,s){var o=parseFloat(te(e,"opacity",r,!1,"1")),l=e.style,u="autoAlpha"===i;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+o),u&&1===o&&"hidden"===te(e,"visibility",r)&&0!==t&&(o=0),X?a=new Te(l,"opacity",o,t-o,a):((a=new Te(l,"opacity",100*o,100*(t-o),a)).xn1=u?1:0,l.zoom=1,a.type=2,a.b="alpha(opacity="+a.s+")",a.e="alpha(opacity="+(a.s+a.c)+")",a.data=e,a.plugin=s,a.setRatio=Xe),u&&((a=new Te(l,"visibility",0,0,a,-1,null,!1,0,0!==o?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",n._overwriteProps.push(a.n),n._overwriteProps.push(i)),a}});var Je=function(e,t){t&&(e.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty(t.replace(A,"-$1").toLowerCase())):e.removeAttribute(t))},Ye=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,i=this.t.style;t;)t.v?i[t.p]=t.v:Je(i,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};xe("className",{parser:function(e,t,n,a,s,o,l){var u,c,h,d,p,f=e.getAttribute("class")||"",m=e.style.cssText;if((s=a._classNamePT=new Te(e,n,0,0,s,2)).setRatio=Ye,s.pr=-11,i=!0,s.b=f,c=re(e,r),h=e._gsClassPT){for(d={},p=h.data;p;)d[p.p]=1,p=p._next;h.setRatio(1)}return e._gsClassPT=s,s.e="="!==t.charAt(1)?t:f.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",s.e),u=ae(e,c,re(e),l,d),e.setAttribute("class",f),s.data=u.firstMPT,e.style.cssText!==m&&(e.style.cssText=m),s.xfirst=a.parse(e,u.difs,s,o)}});var Ke=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,i,n,r,a,s=this.t.style,o=l.transform.parse;if("all"===this.e)s.cssText="",r=!0;else for(n=(t=this.e.split(" ").join("").split(",")).length;--n>-1;)l[i=t[n]]&&(l[i].parse===o?r=!0:i="transformOrigin"===i?De:l[i].p),Je(s,i);r&&(Je(s,Oe),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(xe("clearProps",{parser:function(e,t,n,r,a){return(a=new Te(e,n,0,0,a,2)).setRatio=Ke,a.e=t,a.pr=-10,a.data=r._tween,i=!0,a}}),u="bezier,throwProps,physicsProps,physics2D".split(","),Ce=u.length;Ce--;)Ee(u[Ce]);(u=s.prototype)._firstPT=u._lastParsedTransform=u._transform=null,u._onInitTween=function(e,t,o,u){if(!e.nodeType)return!1;this._target=g=e,this._tween=o,this._vars=t,v=u,c=t.autoRound,i=!1,n=t.suffixMap||s.suffixMap,r=ee(e),a=this._overwriteProps;var p,m,y,_,b,T,S,w,C,x=e.style;if(h&&""===x.zIndex&&("auto"!==(p=te(e,"zIndex",r))&&""!==p||this._addLazySet(x,"zIndex",0)),"string"==typeof t&&(_=x.cssText,p=re(e,r),x.cssText=_+";"+t,p=ae(e,p,re(e)).difs,!X&&k.test(t)&&(p.opacity=parseFloat(RegExp.$1)),t=p,x.cssText=_),this._firstPT=m=t.className?l.className.parse(e,t.className,"className",this,null,null,t):this.parse(e,t,null),this._transformType){for(C=3===this._transformType,Oe?d&&(h=!0,""===x.zIndex&&("auto"!==(S=te(e,"zIndex",r))&&""!==S||this._addLazySet(x,"zIndex",0)),f&&this._addLazySet(x,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(C?"visible":"hidden"))):x.zoom=1,y=m;y&&y._next;)y=y._next;w=new Te(e,"transform",0,0,null,2),this._linkCSSP(w,null,y),w.setRatio=Oe?Ge:ze,w.data=this._transform||We(e,r,!0),w.tween=o,w.pr=-1,a.pop()}if(i){for(;m;){for(T=m._next,y=_;y&&y.pr>m.pr;)y=y._next;(m._prev=y?y._prev:b)?m._prev._next=m:_=m,(m._next=y)?y._prev=m:b=m,m=T}this._firstPT=_}return!0},u.parse=function(e,t,i,a){var s,o,u,h,d,p,f,m,y,_,b=e.style;for(s in t){if(o=l[s],"function"!=typeof(p=t[s])||o&&o.allowFunc||(p=p(v,g)),o)i=o.parse(e,p,s,this,i,a,t);else{if("--"===s.substr(0,2)){this._tween._propLookup[s]=this._addTween.call(this._tween,e.style,"setProperty",ee(e).getPropertyValue(s)+"",p+"",s,!1,s);continue}d=te(e,s,r)+"",y="string"==typeof p,"color"===s||"fill"===s||"stroke"===s||-1!==s.indexOf("Color")||y&&E.test(p)?(y||(p=((p=me(p)).length>3?"rgba(":"rgb(")+p.join(",")+")"),i=we(b,s,d,p,!0,"transparent",i,0,a)):y&&N.test(p)?i=we(b,s,d,p,!0,null,i,0,a):(f=(u=parseFloat(d))||0===u?d.substr((u+"").length):"",""!==d&&"auto"!==d||("width"===s||"height"===s?(u=le(e,s,r),f="px"):"left"===s||"top"===s?(u=ne(e,s,r),f="px"):(u="opacity"!==s?0:1,f="")),(_=y&&"="===p.charAt(1))?(h=parseInt(p.charAt(0)+"1",10),p=p.substr(2),h*=parseFloat(p),m=p.replace(w,"")):(h=parseFloat(p),m=y?p.replace(w,""):""),""===m&&(m=s in n?n[s]:f),p=h||0===h?(_?h+u:h)+m:t[s],f!==m&&(""===m&&"lineHeight"!==s||(h||0===h)&&u&&(u=ie(e,s,u,f),"%"===m?(u/=ie(e,s,100,"%")/100,!0!==t.strictUnits&&(d=u+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?u/=ie(e,s,1,m):"px"!==m&&(h=ie(e,s,h,m),m="px"),_&&(h||0===h)&&(p=h+u+m))),_&&(h+=u),!u&&0!==u||!h&&0!==h?void 0!==b[s]&&(p||p+""!="NaN"&&null!=p)?(i=new Te(b,s,h||u||0,0,i,-1,s,!1,0,d,p)).xs0="none"!==p||"display"!==s&&-1===s.indexOf("Style")?p:d:Y("invalid "+s+" tween value: "+t[s]):(i=new Te(b,s,u,h-u,i,0,s,!1!==c&&("px"===m||"zIndex"===s),0,d,p)).xs0=m)}a&&i&&!i.plugin&&(i.plugin=a)}return i},u.setRatio=function(e){var t,i,n,r=this._firstPT,a=1e-6;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(t=r.c*e+r.s,r.r?t=r.r(t):t<a&&t>-a&&(t=0),r.type)if(1===r.type)if(2===(n=r.l))r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+t+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(e);else r.t[r.p]=t+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(e),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(t=r.r(r.s+r.c),r.type){if(1===r.type){for(n=r.l,i=r.xs0+t+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}}else r.t[r.p]=t+r.xs0;else r.t[r.p]=r.e;else r.setRatio(e);r=r._next}},u._enableTransforms=function(e){this._transform=this._transform||We(this._target,r,!0),this._transformType=this._transform.svg&&Ae||!e&&3!==this._transformType?2:3};var $e=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};u._addLazySet=function(e,t,i){var n=this._firstPT=new Te(e,t,0,0,this._firstPT,2);n.e=i,n.setRatio=$e,n.data=this},u._linkCSSP=function(e,t,i,n){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,n=!0),i?i._next=e:n||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=i),e},u._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&(t.r=e[t.p]),t=t._next},u._kill=function(t){var i,n,r,a=t;if(t.autoAlpha||t.alpha){for(n in a={},t)a[n]=t[n];a.opacity=1,a.autoAlpha&&(a.visibility=1)}for(t.className&&(i=this._classNamePT)&&((r=i.xfirst)&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==n&&i.plugin._kill&&(i.plugin._kill(t),n=i.plugin),i=i._next;return e.prototype._kill.call(this,a)};var Qe=function(e,t,i){var n,r,a,s;if(e.slice)for(r=e.length;--r>-1;)Qe(e[r],t,i);else for(r=(n=e.childNodes).length;--r>-1;)s=(a=n[r]).type,a.style&&(t.push(re(a)),i&&i.push(a)),1!==s&&9!==s&&11!==s||!a.childNodes.length||Qe(a,t,i)};return s.cascadeTo=function(e,i,n){var r,a,s,o,l=t.to(e,i,n),u=[l],c=[],h=[],d=[],p=t._internals.reservedProps;for(Qe(e=l._targets||l.target,c,d),l.render(i,!0,!0),Qe(e,h),l.render(0,!0,!0),l._enabled(!0),r=d.length;--r>-1;)if((a=ae(d[r],c[r],h[r])).firstMPT){for(s in a=a.difs,n)p[s]&&(a[s]=n[s]);for(s in o={},a)o[s]=c[r][s];u.push(t.fromTo(d[r],i,o,a))}return u},e.activate([s]),s},!0),function(){var e=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(e,t,i){return this._tween=i,!0}}),t=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(i){return(Math.round(i/e)*e*t|0)/t}},i=function(e,t){for(;e;)e.f||e.blob||(e.m=t||Math.round),e=e._next},n=e.prototype;n._onInitAllProps=function(){var e,n,r,a,s=this._tween,o=s.vars.roundProps,l={},u=s._propLookup.roundProps;if("object"!=typeof o||o.push)for("string"==typeof o&&(o=o.split(",")),r=o.length;--r>-1;)l[o[r]]=Math.round;else for(a in o)l[a]=t(o[a]);for(a in l)for(e=s._firstPT;e;)n=e._next,e.pg?e.t._mod(l):e.n===a&&(2===e.f&&e.t?i(e.t._firstPT,l[a]):(this._add(e.t,a,e.s,e.c,l[a]),n&&(n._prev=e._prev),e._prev?e._prev._next=n:s._firstPT===e&&(s._firstPT=n),e._next=e._prev=null,s._propLookup[a]=u)),e=n;return!1},n._add=function(e,t,i,n,r){this._addTween(e,t,i,i+n,t,r||Math.round),this._overwriteProps.push(t)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,i,n){var r,a;if("function"!=typeof e.setAttribute)return!1;for(r in t)"function"==typeof(a=t[r])&&(a=a(n,e)),this._addTween(e,"setAttribute",e.getAttribute(r)+"",a+"",r,!1,r),this._overwriteProps.push(r);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,i,n){"object"!=typeof t&&(t={rotation:t}),this.finals={};var r,a,s,o,l,u,c=!0===t.useRadians?2*Math.PI:360,h=1e-6;for(r in t)"useRadians"!==r&&("function"==typeof(o=t[r])&&(o=o(n,e)),a=(u=(o+"").split("_"))[0],s=parseFloat("function"!=typeof e[r]?e[r]:e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]()),l=(o=this.finals[r]="string"==typeof a&&"="===a.charAt(1)?s+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0)-s,u.length&&(-1!==(a=u.join("_")).indexOf("short")&&(l%=c)!=l%(c/2)&&(l=l<0?l+c:l-c),-1!==a.indexOf("_cw")&&l<0?l=(l+9999999999*c)%c-(l/c|0)*c:-1!==a.indexOf("ccw")&&l>0&&(l=(l-9999999999*c)%c-(l/c|0)*c)),(l>h||l<-h)&&(this._addTween(e,r,s,s+l,r),this._overwriteProps.push(r)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var t,i,n,r,a=_gsScope.GreenSockGlobals||_gsScope,s=2*Math.PI,o=Math.PI/2,l=a.com.greensock._class,u=function(t,i){var n=l("easing."+t,function(){},!0),r=n.prototype=new e;return r.constructor=n,r.getRatio=i,n},c=e.register||function(){},h=function(e,t,i,n,r){var a=l("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new n},!0);return c(a,e),a},d=function(e,t,i){this.t=e,this.v=t,i&&(this.next=i,i.prev=this,this.c=i.v-t,this.gap=i.t-e)},p=function(t,i){var n=l("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new e;return r.constructor=n,r.getRatio=i,r.config=function(e){return new n(e)},n},f=h("Back",p("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),p("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),p("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),m=l("easing.SlowMo",function(e,t,i){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),g=m.prototype=new e;return g.constructor=m,g.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1===e?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},m.ease=new m(.7,.7),g.config=m.config=function(e,t,i){return new m(e,t,i)},(g=(t=l("easing.SteppedEase",function(e,t){this._p1=1/(e=e||1),this._p2=e+(t?0:1),this._p3=t?1:0},!0)).prototype=new e).constructor=t,g.getRatio=function(e){return e<0?e=0:e>=1&&(e=.999999999),((this._p2*e|0)+this._p3)*this._p1},g.config=t.config=function(e,i){return new t(e,i)},(g=(i=l("easing.ExpoScaleEase",function(e,t,i){this._p1=Math.log(t/e),this._p2=t-e,this._p3=e,this._ease=i},!0)).prototype=new e).constructor=i,g.getRatio=function(e){return this._ease&&(e=this._ease.getRatio(e)),(this._p3*Math.exp(this._p1*e)-this._p3)/this._p2},g.config=i.config=function(e,t,n){return new i(e,t,n)},(g=(n=l("easing.RoughEase",function(t){for(var i,n,r,a,s,o,l=(t=t||{}).taper||"none",u=[],c=0,h=0|(t.points||20),p=h,f=!1!==t.randomize,m=!0===t.clamp,g=t.template instanceof e?t.template:null,v="number"==typeof t.strength?.4*t.strength:.4;--p>-1;)i=f?Math.random():1/h*p,n=g?g.getRatio(i):i,r="none"===l?v:"out"===l?(a=1-i)*a*v:"in"===l?i*i*v:i<.5?(a=2*i)*a*.5*v:(a=2*(1-i))*a*.5*v,f?n+=Math.random()*r-.5*r:p%2?n+=.5*r:n-=.5*r,m&&(n>1?n=1:n<0&&(n=0)),u[c++]={x:i,y:n};for(u.sort(function(e,t){return e.x-t.x}),o=new d(1,1,null),p=h;--p>-1;)o=new d((s=u[p]).x,s.y,o);this._prev=new d(0,0,0!==o.t?o:o.next)},!0)).prototype=new e).constructor=n,g.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},g.config=function(e){return new n(e)},n.ease=new n,h("Bounce",u("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),u("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),u("BounceInOut",function(e){var t=e<.5;return(e=t?1-2*e:2*e-1)<1/2.75?e*=7.5625*e:e=e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),h("Circ",u("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),u("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),u("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),h("Elastic",(r=function(t,i,n){var r=l("easing."+t,function(e,t){this._p1=e>=1?e:1,this._p2=(t||n)/(e<1?e:1),this._p3=this._p2/s*(Math.asin(1/this._p1)||0),this._p2=s/this._p2},!0),a=r.prototype=new e;return a.constructor=r,a.getRatio=i,a.config=function(e,t){return new r(e,t)},r})("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),r("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),r("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),h("Expo",u("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),u("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),u("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),h("Sine",u("SineOut",function(e){return Math.sin(e*o)}),u("SineIn",function(e){return 1-Math.cos(e*o)}),u("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),l("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),c(a.SlowMo,"SlowMo","ease,"),c(n,"RoughEase","ease,"),c(t,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e,t){"use strict";var i={},n=e.document,r=e.GreenSockGlobals=e.GreenSockGlobals||e,a=r.TweenMax;if(a)return"undefined"!=typeof module&&module.exports&&(module.exports=a),a;var s,o,l,u,c,h,d,p=function(e){var t,i=e.split("."),n=r;for(t=0;t<i.length;t++)n[i[t]]=n=n[i[t]]||{};return n},f=p("com.greensock"),m=1e-8,g=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},v=function(){},y=(d=(h=Object.prototype.toString).call([]),function(e){return null!=e&&(e instanceof Array||"object"==typeof e&&!!e.push&&h.call(e)===d)}),_={},b=function(t,n,a,s){this.sc=_[t]?_[t].sc:[],_[t]=this,this.gsClass=null,this.func=a;var o=[];this.check=function(l){for(var u,c,h,d,f=n.length,m=f;--f>-1;)(u=_[n[f]]||new b(n[f],[])).gsClass?(o[f]=u.gsClass,m--):l&&u.sc.push(this);if(0===m&&a){if(h=(c=("com.greensock."+t).split(".")).pop(),d=p(c.join("."))[h]=this.gsClass=a.apply(a,o),s)if(r[h]=i[h]=d,"undefined"!=typeof module&&module.exports)if("TweenMax"===t)for(f in module.exports=i.TweenMax=d,i)d[f]=i[f];else i.TweenMax&&(i.TweenMax[h]=d);else"function"==typeof define&&define.amd&&define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+t.split(".").pop(),[],function(){return d});for(f=0;f<this.sc.length;f++)this.sc[f].check()}},this.check(!0)},T=e._gsDefine=function(e,t,i,n){return new b(e,t,i,n)},S=f._class=function(e,t,i){return t=t||function(){},T(e,[],function(){return t},i),t};T.globals=r;var w=[0,0,1,1],C=S("easing.Ease",function(e,t,i,n){this._func=e,this._type=i||0,this._power=n||0,this._params=t?w.concat(t):w},!0),k=C.map={},x=C.register=function(e,t,i,n){for(var r,a,s,o,l=t.split(","),u=l.length,c=(i||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(a=l[u],r=n?S("easing."+a,null,!0):f.easing[a]||{},s=c.length;--s>-1;)k[a+"."+(o=c[s])]=k[o+a]=r[o]=e.getRatio?e:e[o]||new e};for((l=C.prototype)._calcEnd=!1,l.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,n=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===t?1-n:2===t?n:e<.5?n/2:1-n/2},o=(s=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--o>-1;)l=s[o]+",Power"+o,x(new C(null,null,1,o),l,"easeOut",!0),x(new C(null,null,2,o),l,"easeIn"+(0===o?",easeNone":"")),x(new C(null,null,3,o),l,"easeInOut");k.linear=f.easing.Linear.easeIn,k.swing=f.easing.Quad.easeInOut;var E=S("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});(l=E.prototype).addEventListener=function(e,t,i,n,r){r=r||0;var a,s,o=this._listeners[e],l=0;for(this!==u||c||u.wake(),null==o&&(this._listeners[e]=o=[]),s=o.length;--s>-1;)(a=o[s]).c===t&&a.s===i?o.splice(s,1):0===l&&a.pr<r&&(l=s+1);o.splice(l,0,{c:t,s:i,up:n,pr:r})},l.removeEventListener=function(e,t){var i,n=this._listeners[e];if(n)for(i=n.length;--i>-1;)if(n[i].c===t)return void n.splice(i,1)},l.dispatchEvent=function(e){var t,i,n,r=this._listeners[e];if(r)for((t=r.length)>1&&(r=r.slice(0)),i=this._eventTarget;--t>-1;)(n=r[t])&&(n.up?n.c.call(n.s||i,{type:e,target:i}):n.c.call(n.s||i))};var A=e.requestAnimationFrame,P=e.cancelAnimationFrame,O=Date.now||function(){return(new Date).getTime()},I=O();for(o=(s=["ms","moz","webkit","o"]).length;--o>-1&&!A;)A=e[s[o]+"RequestAnimationFrame"],P=e[s[o]+"CancelAnimationFrame"]||e[s[o]+"CancelRequestAnimationFrame"];S("Ticker",function(e,t){var i,r,a,s,o,l=this,h=O(),d=!(!1===t||!A)&&"auto",p=500,f=33,m=function(e){var t,n,u=O()-I;u>p&&(h+=u-f),l.time=((I+=u)-h)/1e3,t=l.time-o,(!i||t>0||!0===e)&&(l.frame++,o+=t+(t>=s?.004:s-t),n=!0),!0!==e&&(a=r(m)),n&&l.dispatchEvent("tick")};E.call(l),l.time=l.frame=0,l.tick=function(){m(!0)},l.lagSmoothing=function(e,t){if(!arguments.length)return p<1e8;p=e||1e8,f=Math.min(t,p,0)},l.sleep=function(){null!=a&&(d&&P?P(a):clearTimeout(a),r=v,a=null,l===u&&(c=!1))},l.wake=function(e){null!==a?l.sleep():e?h+=-I+(I=O()):l.frame>10&&(I=O()-p+5),r=0===i?v:d&&A?A:function(e){return setTimeout(e,1e3*(o-l.time)+1|0)},l===u&&(c=!0),m(2)},l.fps=function(e){if(!arguments.length)return i;o=this.time+(s=1/((i=e)||60)),l.wake()},l.useRAF=function(e){if(!arguments.length)return d;l.sleep(),d=e,l.fps(i)},l.fps(e),setTimeout(function(){"auto"===d&&l.frame<5&&"hidden"!==(n||{}).visibilityState&&l.useRAF(!1)},1500)}),(l=f.Ticker.prototype=new f.events.EventDispatcher).constructor=f.Ticker;var D=S("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!!t.immediateRender,this.data=t.data,this._reversed=!!t.reversed,Q){c||u.wake();var i=this.vars.useFrames?$:Q;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});u=D.ticker=new f.Ticker,(l=D.prototype)._dirty=l._gc=l._initted=l._paused=!1,l._totalTime=l._time=0,l._rawPrevTime=-1,l._next=l._last=l._onUpdate=l._timeline=l.timeline=null,l._paused=!1;var L=function(){c&&O()-I>2e3&&("hidden"!==(n||{}).visibilityState||!u.lagSmoothing())&&u.wake();var e=setTimeout(L,2e3);e.unref&&e.unref()};L(),l.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},l.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},l.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},l.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},l.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},l.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},l.render=function(e,t,i){},l.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},l.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<i+this.totalDuration()/this._timeScale-m},l._enabled=function(e,t){return c||u.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},l._kill=function(e,t){return this._enabled(!1,!1)},l.kill=function(e,t){return this._kill(e,t),this},l._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},l._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();--t>-1;)"{self}"===e[t]&&(i[t]=this);return i},l._callback=function(e){var t=this.vars,i=t[e],n=t[e+"Params"],r=t[e+"Scope"]||t.callbackScope||this;switch(n?n.length:0){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}},l.eventCallback=function(e,t,i,n){if("on"===(e||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[e];null==t?delete r[e]:(r[e]=t,r[e+"Params"]=y(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[e+"Scope"]=n),"onUpdate"===e&&(this._onUpdate=t)}return this},l.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},l.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},l.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},l.totalTime=function(e,t,i){if(c||u.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(e>n&&!i&&(e=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-e:e)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(j.length&&ee(),this.render(e,t,!1),j.length&&ee())}return this},l.progress=l.totalProgress=function(e,t){var i=this.duration();return arguments.length?this.totalTime(i*e,t):i?this._time/i:this.ratio},l.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},l.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},l.timeScale=function(e){if(!arguments.length)return this._timeScale;var t,i;for(e=e||m,this._timeline&&this._timeline.smoothChildTiming&&(i=(t=this._pauseTime)||0===t?t:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/e),this._timeScale=e,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},l.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},l.paused=function(e){if(!arguments.length)return this._paused;var t,i,n=this._timeline;return e!=this._paused&&n&&(c||e||u.wake(),i=(t=n.rawTime())-this._pauseTime,!e&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==i&&this._initted&&this.duration()&&this.render(t=n.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,t===this._totalTime,!0)),this._gc&&!e&&this._enabled(!0,!1),this};var R=S("core.SimpleTimeline",function(e){D.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});(l=R.prototype=new D).constructor=R,l.kill()._gc=!1,l._first=l._last=l._recent=null,l._sortChildren=!1,l.add=l.insert=function(e,t,i,n){var r,a;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=this.rawTime()-(e._timeline.rawTime()-e._pauseTime)),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),r=this._last,this._sortChildren)for(a=e._startTime;r&&r._startTime>a;)r=r._prev;return r?(e._next=r._next,r._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=r,this._recent=e,this._timeline&&this._uncache(!0),this},l._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},l.render=function(e,t,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;r;)n=r._next,(r._active||e>=r._startTime&&!r._paused&&!r._gc)&&r.render(r._reversed?(r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale:(e-r._startTime)*r._timeScale,t,i),r=n},l.rawTime=function(){return c||u.wake(),this._totalTime};var M=S("TweenLite",function(t,i,n){if(D.call(this,i,n),this.render=M.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:M.selector(t)||t;var r,a,s,o=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?K[M.defaultOverwrite]:"number"==typeof l?l>>0:K[l],(o||t instanceof Array||t.push&&y(t))&&"number"!=typeof t[0])for(this._targets=s=g(t),this._propLookup=[],this._siblings=[],r=0;r<s.length;r++)(a=s[r])?"string"!=typeof a?a.length&&a!==e&&a[0]&&(a[0]===e||a[0].nodeType&&a[0].style&&!a.nodeType)?(s.splice(r--,1),this._targets=s=s.concat(g(a))):(this._siblings[r]=te(a,this,!1),1===l&&this._siblings[r].length>1&&ne(a,this,null,1,this._siblings[r])):"string"==typeof(a=s[r--]=M.selector(a))&&s.splice(r+1,1):s.splice(r--,1);else this._propLookup={},this._siblings=te(t,this,!1),1===l&&this._siblings.length>1&&ne(t,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-8,this.render(Math.min(0,-this._delay)))},!0),N=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)};(l=M.prototype=new D).constructor=M,l.kill()._gc=!1,l.ratio=0,l._firstPT=l._targets=l._overwrittenProps=l._startAt=null,l._notifyPluginsOfEnabled=l._lazy=!1,M.version="2.1.3",M.defaultEase=l._ease=new C(null,null,1,1),M.defaultOverwrite="auto",M.ticker=u,M.autoSleep=120,M.lagSmoothing=function(e,t){u.lagSmoothing(e,t)},M.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;return i?(M.selector=i,i(t)):(n||(n=e.document),n?n.querySelectorAll?n.querySelectorAll(t):n.getElementById("#"===t.charAt(0)?t.substr(1):t):t)};var j=[],U={},F=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,B=/[\+-]=-?[\.\d]/,H=function(e){for(var t,i=this._firstPT,n=1e-6;i;)t=i.blob?1===e&&null!=this.end?this.end:e?this.join(""):this.start:i.c*e+i.s,i.m?t=i.m.call(this._tween,t,this._target||i.t,this._tween):t<n&&t>-n&&!i.blob&&(t=0),i.f?i.fp?i.t[i.p](i.fp,t):i.t[i.p](t):i.t[i.p]=t,i=i._next},q=function(e){return(1e3*e|0)/1e3+""},V=function(e,t,i,n){var r,a,s,o,l,u,c,h=[],d=0,p="",f=0;for(h.start=e,h.end=t,e=h[0]=e+"",t=h[1]=t+"",i&&(i(h),e=h[0],t=h[1]),h.length=0,r=e.match(F)||[],a=t.match(F)||[],n&&(n._next=null,n.blob=1,h._firstPT=h._applyPT=n),l=a.length,o=0;o<l;o++)p+=(u=t.substr(d,t.indexOf(c=a[o],d)-d))||!o?u:",",d+=u.length,f?f=(f+1)%5:"rgba("===u.substr(-5)&&(f=1),c===r[o]||r.length<=o?p+=c:(p&&(h.push(p),p=""),s=parseFloat(r[o]),h.push(s),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:s,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-s)||0,f:0,m:f&&f<4?Math.round:q}),d+=c.length;return(p+=t.substr(d))&&h.push(p),h.setRatio=H,B.test(t)&&(h.end=null),h},W=function(e,t,i,n,r,a,s,o,l){"function"==typeof n&&(n=n(l||0,e));var u=typeof e[t],c="function"!==u?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),h="get"!==i?i:c?s?e[c](s):e[c]():e[t],d="string"==typeof n&&"="===n.charAt(1),p={t:e,p:t,s:h,f:"function"===u,pg:0,n:r||t,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:d?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-h||0};if(("number"!=typeof h||"number"!=typeof n&&!d)&&(s||isNaN(h)||!d&&isNaN(n)||"boolean"==typeof h||"boolean"==typeof n?(p.fp=s,p={t:V(h,d?parseFloat(p.s)+p.c+(p.s+"").replace(/[0-9\-\.]/g,""):n,o||M.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||t,pr:0,m:0}):(p.s=parseFloat(h),d||(p.c=parseFloat(n)-p.s||0))),p.c)return(p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p},z=M._internals={isArray:y,isSelector:N,lazyTweens:j,blobDif:V},G=M._plugins={},X=z.tweenLookup={},J=0,Y=z.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},K={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},$=D._rootFramesTimeline=new R,Q=D._rootTimeline=new R,Z=30,ee=z.lazyRender=function(){var e,t,i=j.length;for(U={},e=0;e<i;e++)(t=j[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);j.length=0};Q._startTime=u.time,$._startTime=u.frame,Q._active=$._active=!0,setTimeout(ee,1),D._updateRoot=M.render=function(){var e,t,i;if(j.length&&ee(),Q.render((u.time-Q._startTime)*Q._timeScale,!1,!1),$.render((u.frame-$._startTime)*$._timeScale,!1,!1),j.length&&ee(),u.frame>=Z){for(i in Z=u.frame+(parseInt(M.autoSleep,10)||120),X){for(e=(t=X[i].tweens).length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete X[i]}if((!(i=Q._first)||i._paused)&&M.autoSleep&&!$._first&&1===u._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||u.sleep()}}},u.addEventListener("tick",D._updateRoot);var te=function(e,t,i){var n,r,a=e._gsTweenID;if(X[a||(e._gsTweenID=a="t"+J++)]||(X[a]={target:e,tweens:[]}),t&&((n=X[a].tweens)[r=n.length]=t,i))for(;--r>-1;)n[r]===t&&n.splice(r,1);return X[a].tweens},ie=function(e,t,i,n){var r,a,s=e.vars.onOverwrite;return s&&(r=s(e,t,i,n)),(s=M.onOverwrite)&&(a=s(e,t,i,n)),!1!==r&&!1!==a},ne=function(e,t,i,n,r){var a,s,o,l;if(1===n||n>=4){for(l=r.length,a=0;a<l;a++)if((o=r[a])!==t)o._gc||o._kill(null,e,t)&&(s=!0);else if(5===n)break;return s}var u,c=t._startTime+m,h=[],d=0,p=0===t._duration;for(a=r.length;--a>-1;)(o=r[a])===t||o._gc||o._paused||(o._timeline!==t._timeline?(u=u||re(t,0,p),0===re(o,u,p)&&(h[d++]=o)):o._startTime<=c&&o._startTime+o.totalDuration()/o._timeScale>c&&((p||!o._initted)&&c-o._startTime<=2e-8||(h[d++]=o)));for(a=d;--a>-1;)if(l=(o=h[a])._firstPT,2===n&&o._kill(i,e,t)&&(s=!0),2!==n||!o._firstPT&&o._initted&&l){if(2!==n&&!ie(o,t))continue;o._enabled(!1,!1)&&(s=!0)}return s},re=function(e,t,i){for(var n=e._timeline,r=n._timeScale,a=e._startTime;n._timeline;){if(a+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return(a/=r)>t?a-t:i&&a===t||!e._initted&&a-t<2e-8?m:(a+=e.totalDuration()/e._timeScale/r)>t+m?0:a-t-m};l._init=function(){var e,t,i,n,r,a,s=this.vars,o=this._overwrittenProps,l=this._duration,u=!!s.immediateRender,c=s.ease,h=this._startAt;if(s.startAt){for(n in h&&(h.render(-1,!0),h.kill()),r={},s.startAt)r[n]=s.startAt[n];if(r.data="isStart",r.overwrite=!1,r.immediateRender=!0,r.lazy=u&&!1!==s.lazy,r.startAt=r.delay=null,r.onUpdate=s.onUpdate,r.onUpdateParams=s.onUpdateParams,r.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=M.to(this.target||{},0,r),u)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(s.runBackwards&&0!==l)if(h)h.render(-1,!0),h.kill(),this._startAt=null;else{for(n in 0!==this._time&&(u=!1),i={},s)Y[n]&&"autoCSS"!==n||(i[n]=s[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=u&&!1!==s.lazy,i.immediateRender=u,this._startAt=M.to(this.target,0,i),u){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof C?c:"function"==typeof c?new C(c,s.easeParams):k[c]||M.defaultEase:M.defaultEase,s.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,e=0;e<a;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],o?o[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,o,0);if(t&&M._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},l._initProps=function(t,i,n,r,a){var s,o,l,u,c,h;if(null==t)return!1;for(s in U[t._gsTweenID]&&ee(),this.vars.css||t.style&&t!==e&&t.nodeType&&G.css&&!1!==this.vars.autoCSS&&function(e,t){var i,n={};for(i in e)Y[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!G[i]||G[i]&&G[i]._autoCSS)||(n[i]=e[i],delete e[i]);e.css=n}(this.vars,t),this.vars)if(h=this.vars[s],Y[s])h&&(h instanceof Array||h.push&&y(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[s]=h=this._swapSelfInParams(h,this));else if(G[s]&&(u=new G[s])._onInitTween(t,this.vars[s],this,a)){for(this._firstPT=c={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:u._priority,m:0},o=u._overwriteProps.length;--o>-1;)i[u._overwriteProps[o]]=this._firstPT;(u._priority||u._onInitAllProps)&&(l=!0),(u._onDisable||u._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else i[s]=W.call(this,t,s,"get",h,s,0,null,this.vars.stringFilter,a);return r&&this._kill(r,t)?this._initProps(t,i,n,r,a):this._overwrite>1&&this._firstPT&&n.length>1&&ne(t,this,i,this._overwrite,n)?(this._kill(i,t),this._initProps(t,i,n,r,a)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(U[t._gsTweenID]=!0),l)},l.render=function(e,t,i){var n,r,a,s,o=this,l=o._time,u=o._duration,c=o._rawPrevTime;if(e>=u-m&&e>=0)o._totalTime=o._time=u,o.ratio=o._ease._calcEnd?o._ease.getRatio(1):1,o._reversed||(n=!0,r="onComplete",i=i||o._timeline.autoRemoveChildren),0===u&&(o._initted||!o.vars.lazy||i)&&(o._startTime===o._timeline._duration&&(e=0),(c<0||e<=0&&e>=-1e-8||c===m&&"isPause"!==o.data)&&c!==e&&(i=!0,c>m&&(r="onReverseComplete")),o._rawPrevTime=s=!t||e||c===e?e:m);else if(e<m)o._totalTime=o._time=0,o.ratio=o._ease._calcEnd?o._ease.getRatio(0):0,(0!==l||0===u&&c>0)&&(r="onReverseComplete",n=o._reversed),e>-1e-8?e=0:e<0&&(o._active=!1,0===u&&(o._initted||!o.vars.lazy||i)&&(c>=0&&(c!==m||"isPause"!==o.data)&&(i=!0),o._rawPrevTime=s=!t||e||c===e?e:m)),(!o._initted||o._startAt&&o._startAt.progress())&&(i=!0);else if(o._totalTime=o._time=e,o._easeType){var h=e/u,d=o._easeType,p=o._easePower;(1===d||3===d&&h>=.5)&&(h=1-h),3===d&&(h*=2),1===p?h*=h:2===p?h*=h*h:3===p?h*=h*h*h:4===p&&(h*=h*h*h*h),o.ratio=1===d?1-h:2===d?h:e/u<.5?h/2:1-h/2}else o.ratio=o._ease.getRatio(e/u);if(o._time!==l||i){if(!o._initted){if(o._init(),!o._initted||o._gc)return;if(!i&&o._firstPT&&(!1!==o.vars.lazy&&o._duration||o.vars.lazy&&!o._duration))return o._time=o._totalTime=l,o._rawPrevTime=c,j.push(o),void(o._lazy=[e,t]);o._time&&!n?o.ratio=o._ease.getRatio(o._time/u):n&&o._ease._calcEnd&&(o.ratio=o._ease.getRatio(0===o._time?0:1))}for(!1!==o._lazy&&(o._lazy=!1),o._active||!o._paused&&o._time!==l&&e>=0&&(o._active=!0),0===l&&(o._startAt&&(e>=0?o._startAt.render(e,!0,i):r||(r="_dummyGS")),o.vars.onStart&&(0===o._time&&0!==u||t||o._callback("onStart"))),a=o._firstPT;a;)a.f?a.t[a.p](a.c*o.ratio+a.s):a.t[a.p]=a.c*o.ratio+a.s,a=a._next;o._onUpdate&&(e<0&&o._startAt&&-1e-4!==e&&o._startAt.render(e,!0,i),t||(o._time!==l||n||i)&&o._callback("onUpdate")),r&&(o._gc&&!i||(e<0&&o._startAt&&!o._onUpdate&&-1e-4!==e&&o._startAt.render(e,!0,i),n&&(o._timeline.autoRemoveChildren&&o._enabled(!1,!1),o._active=!1),!t&&o.vars[r]&&o._callback(r),0===u&&o._rawPrevTime===m&&s!==m&&(o._rawPrevTime=0)))}},l._kill=function(e,t,i){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:M.selector(t)||t;var n,r,a,s,o,l,u,c,h,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,p=this._firstPT;if((y(t)||N(t))&&"number"!=typeof t[0])for(n=t.length;--n>-1;)this._kill(e,t[n],i)&&(l=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(t===this._targets[n]){o=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(o){if(u=e||o,c=e!==r&&"all"!==r&&e!==o&&("object"!=typeof e||!e._tempKill),i&&(M.onOverwrite||this.vars.onOverwrite)){for(a in u)o[a]&&(h||(h=[]),h.push(a));if((h||!e)&&!ie(this,i,t,h))return!1}for(a in u)(s=o[a])&&(d&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,l=!0),s.pg&&s.t._kill(u)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete o[a]),c&&(r[a]=1);!this._firstPT&&this._initted&&p&&this._enabled(!1,!1)}}return l},l.invalidate=function(){this._notifyPluginsOfEnabled&&M._onPluginEvent("_onDisable",this);var e=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],D.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-8,this.render(e,!1,!1!==this.vars.lazy)),this},l._enabled=function(e,t){if(c||u.wake(),e&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=te(n[i],this,!0);else this._siblings=te(this.target,this,!0)}return D.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&M._onPluginEvent(e?"_onEnable":"_onDisable",this)},M.to=function(e,t,i){return new M(e,t,i)},M.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new M(e,t,i)},M.fromTo=function(e,t,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new M(e,t,n)},M.delayedCall=function(e,t,i,n,r){return new M(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},M.set=function(e,t){return new M(e,0,t)},M.getTweensOf=function(e,t){if(null==e)return[];var i,n,r,a;if(e="string"!=typeof e?e:M.selector(e)||e,(y(e)||N(e))&&"number"!=typeof e[0]){for(i=e.length,n=[];--i>-1;)n=n.concat(M.getTweensOf(e[i],t));for(i=n.length;--i>-1;)for(a=n[i],r=i;--r>-1;)a===n[r]&&n.splice(i,1)}else if(e._gsTweenID)for(i=(n=te(e).concat()).length;--i>-1;)(n[i]._gc||t&&!n[i].isActive())&&n.splice(i,1);return n||[]},M.killTweensOf=M.killDelayedCallsTo=function(e,t,i){"object"==typeof t&&(i=t,t=!1);for(var n=M.getTweensOf(e,t),r=n.length;--r>-1;)n[r]._kill(i,e)};var ae=S("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=ae.prototype},!0);if(l=ae.prototype,ae.version="1.19.0",ae.API=2,l._firstPT=null,l._addTween=W,l.setRatio=H,l._kill=function(e){var t,i=this._overwriteProps,n=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;--t>-1;)null!=e[i[t]]&&i.splice(t,1);for(;n;)null!=e[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},l._mod=l._roundProps=function(e){for(var t,i=this._firstPT;i;)(t=e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")])&&"function"==typeof t&&(2===i.f?i.t._applyPT.m=t:i.m=t),i=i._next},M._onPluginEvent=function(e,t){var i,n,r,a,s,o=t._firstPT;if("_onInitAllProps"===e){for(;o;){for(s=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:a)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:a=o,o=s}o=t._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[e]&&o.t[e]()&&(i=!0),o=o._next;return i},ae.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===ae.API&&(G[(new e[t])._propName]=e[t]);return!0},T.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,n=e.priority||0,r=e.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=S("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){ae.call(this,i,n),this._overwriteProps=r||[]},!0===e.global),o=s.prototype=new ae(i);for(t in o.constructor=s,s.API=e.API,a)"function"==typeof e[t]&&(o[a[t]]=e[t]);return s.version=e.version,ae.activate([s]),s},s=e._gsQueue){for(o=0;o<s.length;o++)s[o]();for(l in _)_[l].func||e.console.log("GSAP encountered missing dependency: "+l)}c=!1}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window),
/**
 * @license
 * Video.js 7.11.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).videojs=t()}(this,function(){"use strict";var e="7.11.4",t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var r,a="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},s={},o=void 0!==t?t:"undefined"!=typeof window?window:{};"undefined"!=typeof document?r=document:(r=o["__GLOBAL_DOCUMENT_CACHE@4"])||(r=o["__GLOBAL_DOCUMENT_CACHE@4"]=s);var l=r,u=[],c=function e(t){var i,n="info",r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i("log",n,t)};return i=function(e,t){return function(i,n,r){var s=t.levels[n],o=new RegExp("^("+s+")$");if("log"!==i&&r.unshift(i.toUpperCase()+":"),r.unshift(e+":"),u){u.push([].concat(r));var l=u.length-1e3;u.splice(0,l>0?l:0)}if(a.console){var c=a.console[i];c||"debug"!==i||(c=a.console.info||a.console.log),c&&s&&o.test(i)&&c[Array.isArray(r)?"apply":"call"](a.console,r)}}}(t,r),r.createLogger=function(i){return e(t+": "+i)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},r.level=function(e){if("string"==typeof e){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');n=e}return n},(r.history=function(){return u?[].concat(u):[]}).filter=function(e){return(u||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},r.history.clear=function(){u&&(u.length=0)},r.history.disable=function(){null!==u&&(u.length=0,u=null)},r.history.enable=function(){null===u&&(u=[])},r.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("error",n,t)},r.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("warn",n,t)},r.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("debug",n,t)},r}("VIDEOJS"),h=c.createLogger,d=n(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},t.apply(this,arguments)}e.exports=t}),p=Object.prototype.toString,f=function(e){return v(e)?Object.keys(e):[]};function m(e,t){f(e).forEach(function(i){return t(e[i],i)})}function g(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Object.assign?d.apply(void 0,[e].concat(i)):(i.forEach(function(t){t&&m(t,function(t,i){e[i]=t})}),e)}function v(e){return!!e&&"object"==typeof e}function y(e){return v(e)&&"[object Object]"===p.call(e)&&e.constructor===Object}function _(e,t){if(!e||!t)return"";if("function"==typeof a.getComputedStyle){var i=a.getComputedStyle(e);return i?i.getPropertyValue(t)||i[t]:""}return""}function b(e){return"string"==typeof e&&Boolean(e.trim())}function T(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function S(){return l===a.document}function w(e){return v(e)&&1===e.nodeType}function C(){try{return a.parent!==a.self}catch(e){return!0}}function k(e){return function(t,i){if(!b(t))return l[e](null);b(i)&&(i=l.querySelector(i));var n=w(i)?i:l;return n[e]&&n[e](t)}}function x(e,t,i,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===i&&(i={});var r=l.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var i=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(c.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+i+"."),r.setAttribute(e,i)):"textContent"===e?E(r,i):r[e]===i&&"tabIndex"!==e||(r[e]=i)}),Object.getOwnPropertyNames(i).forEach(function(e){r.setAttribute(e,i[e])}),n&&G(r,n),r}function E(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function A(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function P(e,t){return T(t),e.classList?e.classList.contains(t):(i=t,new RegExp("(^|\\s)"+i+"($|\\s)")).test(e.className);var i}function O(e,t){return e.classList?e.classList.add(t):P(e,t)||(e.className=(e.className+" "+t).trim()),e}function I(e,t){return e.classList?e.classList.remove(t):(T(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function D(e,t,i){var n=P(e,t);if("function"==typeof i&&(i=i(e,t)),"boolean"!=typeof i&&(i=!n),i!==n)return i?O(e,t):I(e,t),e}function L(e,t){Object.getOwnPropertyNames(t).forEach(function(i){var n=t[i];null==n||!1===n?e.removeAttribute(i):e.setAttribute(i,!0===n?"":n)})}function R(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var i=e.attributes,n=i.length-1;n>=0;n--){var r=i[n].name,a=i[n].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(a=null!==a),t[r]=a}return t}function M(e,t){return e.getAttribute(t)}function N(e,t,i){e.setAttribute(t,i)}function j(e,t){e.removeAttribute(t)}function U(){l.body.focus(),l.onselectstart=function(){return!1}}function F(){l.onselectstart=function(){return!0}}function B(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(_(e,"height"))),i.width||(i.width=parseFloat(_(e,"width"))),i}}function H(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};var t=e.offsetWidth,i=e.offsetHeight,n=0,r=0;do{n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent}while(e);return{left:n,top:r,width:t,height:i}}function q(e,t){var i={},n=H(t.target),r=H(e),a=r.width,s=t.offsetY-(r.top-n.top),o=t.offsetX-(r.left-n.left);return t.changedTouches&&(o=t.changedTouches[0].pageX-r.left,s=t.changedTouches[0].pageY+r.top),i.y=1-Math.max(0,Math.min(1,s/r.height)),i.x=Math.max(0,Math.min(1,o/a)),i}function V(e){return v(e)&&3===e.nodeType}function W(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function z(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),w(e)||V(e)?e:"string"==typeof e&&/\S/.test(e)?l.createTextNode(e):void 0}).filter(function(e){return e})}function G(e,t){return z(t).forEach(function(t){return e.appendChild(t)}),e}function X(e,t){return G(W(e),t)}function J(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var Y,K=k("querySelector"),$=k("querySelectorAll"),Q=Object.freeze({__proto__:null,isReal:S,isEl:w,isInFrame:C,createEl:x,textContent:E,prependTo:A,hasClass:P,addClass:O,removeClass:I,toggleClass:D,setAttributes:L,getAttributes:R,getAttribute:M,setAttribute:N,removeAttribute:j,blockTextSelection:U,unblockTextSelection:F,getBoundingClientRect:B,findPosition:H,getPointerPosition:q,isTextNode:V,emptyEl:W,normalizeContent:z,appendContent:G,insertContent:X,isSingleLeftClick:J,$:K,$$:$}),Z=!1,ee=function(){if(S()&&!1!==Y.options.autoSetup){var e=Array.prototype.slice.call(l.getElementsByTagName("video")),t=Array.prototype.slice.call(l.getElementsByTagName("audio")),i=Array.prototype.slice.call(l.getElementsByTagName("video-js")),n=e.concat(t,i);if(n&&n.length>0)for(var r=0,a=n.length;r<a;r++){var s=n[r];if(!s||!s.getAttribute){te(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&Y(s)}else Z||te(1)}};function te(e,t){t&&(Y=t),a.setTimeout(ee,e)}function ie(){Z=!0,a.removeEventListener("load",ie)}S()&&("complete"===l.readyState?ie():a.addEventListener("load",ie));var ne,re=function(e){var t=l.createElement("style");return t.className=e,t},ae=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},se=3;function oe(){return se++}a.WeakMap||(ne=function(){function e(){this.vdata="vdata"+Math.floor(a.performance&&a.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var i=e[this.vdata]||oe();return e[this.vdata]||(e[this.vdata]=i),this.data[i]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];c("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var le,ue=a.WeakMap?new WeakMap:new ne;function ce(e,t){if(ue.has(e)){var i=ue.get(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&ue.delete(e)}}function he(e,t,i,n){i.forEach(function(i){e(t,i,n)})}function de(e){if(e.fixed_)return e;function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped){var n=e||a.event;for(var r in e={},n)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&n.preventDefault||(e[r]=n[r]));if(e.target||(e.target=e.srcElement||l),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!=e.clientX){var s=l.documentElement,o=l.body;e.pageX=e.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var pe=["touchstart","touchmove"];function fe(e,t,i){if(Array.isArray(t))return he(fe,e,t,i);ue.has(e)||ue.set(e,{});var n=ue.get(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),i.guid||(i.guid=oe()),n.handlers[t].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,i){if(!n.disabled){t=de(t);var r=n.handlers[t.type];if(r)for(var a=r.slice(0),s=0,o=a.length;s<o&&!t.isImmediatePropagationStopped();s++)try{a[s].call(e,t,i)}catch(l){c.error(l)}}}),1===n.handlers[t].length)if(e.addEventListener){var r=!1;(function(){if("boolean"!=typeof le){le=!1;try{var e=Object.defineProperty({},"passive",{get:function(){le=!0}});a.addEventListener("test",null,e),a.removeEventListener("test",null,e)}catch(t){}}return le})()&&pe.indexOf(t)>-1&&(r={passive:!0}),e.addEventListener(t,n.dispatcher,r)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function me(e,t,i){if(ue.has(e)){var n=ue.get(e);if(n.handlers){if(Array.isArray(t))return he(me,e,t,i);var r=function(e,t){n.handlers[t]=[],ce(e,t)};if(void 0!==t){var a=n.handlers[t];if(a)if(i){if(i.guid)for(var s=0;s<a.length;s++)a[s].guid===i.guid&&a.splice(s--,1);ce(e,t)}else r(e,t)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(e,o)}}}function ge(e,t,i){var n=ue.has(e)?ue.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=de(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles)ge.call(null,r,t,i);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){ue.has(t.target)||ue.set(t.target,{});var a=ue.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function ve(e,t,i){if(Array.isArray(t))return he(ve,e,t,i);var n=function n(){me(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||oe(),fe(e,t,n)}function ye(e,t,i){var n=function n(){me(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||oe(),fe(e,t,n)}var _e,be=Object.freeze({__proto__:null,fixEvent:de,on:fe,off:me,trigger:ge,one:ve,any:ye}),Te=30,Se=function(e,t,i){t.guid||(t.guid=oe());var n=t.bind(e);return n.guid=i?i+"_"+t.guid:t.guid,n},we=function(e,t){var i=a.performance.now();return function(){var n=a.performance.now();n-i>=t&&(e.apply(void 0,arguments),i=n)}},Ce=function(){};Ce.prototype.allowedEvents_={},Ce.prototype.addEventListener=Ce.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},fe(this,e,t),this.addEventListener=i},Ce.prototype.removeEventListener=Ce.prototype.off=function(e,t){me(this,e,t)},Ce.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},ve(this,e,t),this.addEventListener=i},Ce.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},ye(this,e,t),this.addEventListener=i},Ce.prototype.dispatchEvent=Ce.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=de(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),ge(this,e)},Ce.prototype.queueTrigger=function(e){var t=this;_e||(_e=new Map);var i=e.type||e,n=_e.get(this);n||(n=new Map,_e.set(this,n));var r=n.get(i);n.delete(i),a.clearTimeout(r);var s=a.setTimeout(function(){0===n.size&&(n=null,_e.delete(t)),t.trigger(e)},0);n.set(i,s)};var ke=function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},xe=function(e){return e instanceof Ce||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},Ee=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Ae=function(e,t,i){if(!e||!e.nodeName&&!xe(e))throw new Error("Invalid target for "+ke(t)+"#"+i+"; must be a DOM node or evented object.")},Pe=function(e,t,i){if(!Ee(e))throw new Error("Invalid event type for "+ke(t)+"#"+i+"; must be a non-empty string or array.")},Oe=function(e,t,i){if("function"!=typeof e)throw new Error("Invalid listener for "+ke(t)+"#"+i+"; must be a function.")},Ie=function(e,t,i){var n,r,a,s=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return s?(n=e.eventBusEl_,t.length>=3&&t.shift(),r=t[0],a=t[1]):(n=t[0],r=t[1],a=t[2]),Ae(n,e,i),Pe(r,e,i),Oe(a,e,i),{isTargetingSelf:s,target:n,type:r,listener:a=Se(e,a)}},De=function(e,t,i,n){Ae(e,e,t),e.nodeName?be[t](e,i,n):e[t](i,n)},Le={on:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=Ie(this,i,"on"),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(De(s,"on",o,l),!a){var u=function(){return e.off(s,o,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,De(this,"on","dispose",u),De(s,"on","dispose",c)}},one:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=Ie(this,i,"one"),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)De(s,"one",o,l);else{var u=function t(){e.off(s,o,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};u.guid=l.guid,De(s,"one",o,u)}},any:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=Ie(this,i,"any"),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)De(s,"any",o,l);else{var u=function t(){e.off(s,o,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};u.guid=l.guid,De(s,"any",o,u)}},off:function(e,t,i){if(!e||Ee(e))me(this.eventBusEl_,e,t);else{var n=e,r=t;Ae(n,this,"off"),Pe(r,this,"off"),Oe(i,this,"off"),i=Se(this,i),this.off("dispose",i),n.nodeName?(me(n,r,i),me(n,"dispose",i)):xe(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(e,t){if(Ae(this.eventBusEl_,this,"trigger"),!Ee(e&&"string"!=typeof e?e.type:e)){var i="Invalid event type for "+ke(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(i);(this.log||c).error(i)}return ge(this.eventBusEl_,e,t)}};function Re(e,t){void 0===t&&(t={});var i=t.eventBusKey;if(i){if(!e[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');e.eventBusEl_=e[i]}else e.eventBusEl_=x("span",{className:"vjs-event-bus"});return g(e,Le),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),a.setTimeout(function(){e.eventBusEl_=null},0)}),e}var Me={state:{},setState:function(e){var t,i=this;return"function"==typeof e&&(e=e()),m(e,function(e,n){i.state[n]!==e&&((t=t||{})[n]={from:i.state[n],to:e}),i.state[n]=e}),t&&xe(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Ne(e,t){return g(e,Me),e.state=g({},e.state,t),"function"==typeof e.handleStateChanged&&xe(e)&&e.on("statechanged",e.handleStateChanged),e}var je=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})},Ue=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})};function Fe(){for(var e={},t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach(function(t){t&&m(t,function(t,i){y(t)?(y(e[i])||(e[i]={}),e[i]=Fe(e[i],t)):e[i]=t})}),e}var Be=a.Map?a.Map:function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var i in this.map_)e.call(t,this.map_[i],i,this)},e}(),He=a.Set?a.Set:function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var i in this.set_)e.call(t,i,i,this)},e}(),qe=function(){function e(e,t,i){if(this.player_=!e&&this.play?e=this:e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Fe({},this.options_),t=this.options_=Fe(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var n=e&&e.id&&e.id()||"no_player";this.id_=n+"_component_"+oe()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&(Re(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Ne(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new He,this.setIntervalIds_=new He,this.rafIds_=new He,this.namedRafs_=new Be,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ue.has(this.el_)&&ue.delete(this.el_),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=Fe(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,i){return x(e,t,i)},t.localize=function(e,t,i){void 0===i&&(i=e);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[n],s=n&&n.split("-")[0],o=r&&r[s],l=i;return a&&a[e]?l=a[e]:o&&o[e]&&(l=o[e]),t&&(l=l.replace(/\{(\d+)\}/g,function(e,i){var n=t[i-1],r=n;return void 0===n&&(r=e),r})),l},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t=t.reduce(function(e,t){return e.concat(t)},[]);for(var n=this,r=0;r<t.length;r++)if(!(n=n.getChild(t[r]))||!n.getChild)return;return n},t.addChild=function(t,i,n){var r,a;if(void 0===i&&(i={}),void 0===n&&(n=this.children_.length),"string"==typeof t){a=Ue(t);var s=i.componentClass||a;i.name=a;var o=e.getComponent(s);if(!o)throw new Error("Component "+s+" does not exist");if("function"!=typeof o)return null;r=new o(this.player_||this,i)}else r=t;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(a=a||r.name&&Ue(r.name()))&&(this.childNameIndex_[a]=r,this.childNameIndex_[je(a)]=r),"function"==typeof r.el&&r.el()){var l=null;this.children_[n+1]&&(this.children_[n+1].el_?l=this.children_[n+1].el_:w(this.children_[n+1])&&(l=this.children_[n+1])),this.contentEl().insertBefore(r.el(),l)}return r},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Ue(e.name())]=null,this.childNameIndex_[je(e.name())]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,i=this.options_.children;if(i){var n,r=this.options_,a=e.getComponent("Tech");(n=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(e){return!n.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var n,r;return"string"==typeof e?r=i[n=e]||t.options_[n]||{}:(n=e.name,r=e),{name:n,opts:r}}).filter(function(t){var i=e.getComponent(t.opts.componentClass||Ue(t.name));return i&&!a.isTech(i)}).forEach(function(e){var i=e.name,n=e.opts;if(void 0!==r[i]&&(n=r[i]),!1!==n){!0===n&&(n={}),n.playerOptions=t.options_.playerOptions;var a=t.addChild(i,n);a&&(t[i]=a)}})}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(e,t){return K(e,t||this.contentEl())},t.$$=function(e,t){return $(e,t||this.contentEl())},t.hasClass=function(e){return P(this.el_,e)},t.addClass=function(e){O(this.el_,e)},t.removeClass=function(e){I(this.el_,e)},t.toggleClass=function(e,t){D(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return M(this.el_,e)},t.setAttribute=function(e,t){N(this.el_,e,t)},t.removeAttribute=function(e){j(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t==t||(t=0),this.el_.style[e]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+Ue(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=_(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var i="offset"+Ue(e);t=this.el_[i]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,i=null;this.on("touchstart",function(n){1===n.touches.length&&(i={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},t=a.performance.now(),e=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)e=!1;else if(i){var n=t.touches[0].pageX-i.pageX,r=t.touches[0].pageY-i.pageY;Math.sqrt(n*n+r*r)>10&&(e=!1)}});var n=function(){e=!1};this.on("touchleave",n),this.on("touchcancel",n),this.on("touchend",function(n){i=null,!0===e&&a.performance.now()-t<200&&(n.preventDefault(),this.trigger("tap"))})},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=Se(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var i=function(i){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}},t.setTimeout=function(e,t){var i,n=this;return e=Se(this,e),this.clearTimersOnDispose_(),i=a.setTimeout(function(){n.setTimeoutIds_.has(i)&&n.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),a.clearTimeout(e)),e},t.setInterval=function(e,t){e=Se(this,e),this.clearTimersOnDispose_();var i=a.setInterval(e,t);return this.setIntervalIds_.add(i),i},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),a.clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=Se(this,e),t=a.requestAnimationFrame(function(){i.rafIds_.has(t)&&i.rafIds_.delete(t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var i=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=Se(this,t);var n=this.requestAnimationFrame(function(){t(),i.namedRafs_.has(e)&&i.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),a.cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var i=t[1];e[t[0]].forEach(function(t,n){return e[i](n)})}),e.clearingTimersOnDispose_=!1}))},e.registerComponent=function(t,i){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var n=e.getComponent("Tech"),r=n&&n.isTech(i),a=e===i||e.prototype.isPrototypeOf(i.prototype);if(r||!a)throw new Error('Illegal component, "'+t+'"; '+(r?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");t=Ue(t),e.components_||(e.components_={});var s=e.getComponent("Player");if("Player"===t&&s&&s.players){var o=s.players,l=Object.keys(o);if(o&&l.length>0&&l.map(function(e){return o[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=i,e.components_[je(t)]=i,i},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();qe.prototype.supportsRaf_="function"==typeof a.requestAnimationFrame&&"function"==typeof a.cancelAnimationFrame,qe.registerComponent("Component",qe);var Ve=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};n(function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(i)}e.exports=t}),n(function(e){function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(i)}e.exports=t});var We,ze=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},Ge=a.navigator&&a.navigator.userAgent||"",Xe=/AppleWebKit\/([\d.]+)/i.exec(Ge),Je=Xe?parseFloat(Xe.pop()):null,Ye=/iPod/i.test(Ge),Ke=(We=Ge.match(/OS (\d+)_/i))&&We[1]?We[1]:null,$e=/Android/i.test(Ge),Qe=function(){var e=Ge.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),Ze=$e&&Qe<5&&Je<537,et=/Firefox/i.test(Ge),tt=/Edg/i.test(Ge),it=!tt&&(/Chrome/i.test(Ge)||/CriOS/i.test(Ge)),nt=function(){var e=Ge.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),rt=function(){var e=/MSIE\s(\d+)\.\d/.exec(Ge),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(Ge)&&/rv:11.0/.test(Ge)&&(t=11),t}(),at=/Safari/i.test(Ge)&&!it&&!$e&&!tt,st=/Windows/i.test(Ge),ot=Boolean(S()&&("ontouchstart"in a||a.navigator.maxTouchPoints||a.DocumentTouch&&a.document instanceof a.DocumentTouch)),lt=/iPad/i.test(Ge)||at&&ot&&!/iPhone/i.test(Ge),ut=/iPhone/i.test(Ge)&&!lt,ct=ut||lt||Ye,ht=(at||ct)&&!it,dt=Object.freeze({__proto__:null,IS_IPOD:Ye,IOS_VERSION:Ke,IS_ANDROID:$e,ANDROID_VERSION:Qe,IS_NATIVE_ANDROID:Ze,IS_FIREFOX:et,IS_EDGE:tt,IS_CHROME:it,CHROME_VERSION:nt,IE_VERSION:rt,IS_SAFARI:at,IS_WINDOWS:st,TOUCH_ENABLED:ot,IS_IPAD:lt,IS_IPHONE:ut,IS_IOS:ct,IS_ANY_SAFARI:ht});function pt(e,t,i,n){return function(e,t,i){if("number"!=typeof t||t<0||t>i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}(e,n,i.length-1),i[n][t]}function ft(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:pt.bind(null,"start",0,e),end:pt.bind(null,"end",1,e)}}function mt(e,t){return Array.isArray(e)?ft(e):void 0===e||void 0===t?ft():ft([[e,t]])}function gt(e,t){var i,n,r=0;if(!t)return 0;e&&e.length||(e=mt(0,0));for(var a=0;a<e.length;a++)i=e.start(a),(n=e.end(a))>t&&(n=t),r+=n-i;return r/t}for(var vt,yt={prefixed:!0},_t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],bt=_t[0],Tt=0;Tt<_t.length;Tt++)if(_t[Tt][1]in l){vt=_t[Tt];break}if(vt){for(var St=0;St<vt.length;St++)yt[bt[St]]=vt[St];yt.prefixed=vt[0]!==bt[0]}function wt(e){if(e instanceof wt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:v(e)&&("number"==typeof e.code&&(this.code=e.code),g(this,e)),this.message||(this.message=wt.defaultMessages[this.code]||"")}wt.prototype.code=0,wt.prototype.message="",wt.prototype.status=null,wt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],wt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ct=0;Ct<wt.errorTypes.length;Ct++)wt[wt.errorTypes[Ct]]=Ct,wt.prototype[wt.errorTypes[Ct]]=Ct;function kt(e){return null!=e&&"function"==typeof e.then}function xt(e){kt(e)&&e.then(null,function(e){})}var Et=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,i,n){return e[i]&&(t[i]=e[i]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},At=n(function(e,t){function i(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return s[e];var i,a=String(e);return(i=n[a.toLowerCase()])?i:(i=r[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}i.isEventKey=function(e,t){if(e&&"object"==typeof e){var i=e.which||e.keyCode||e.charCode;if(null==i)return!1;if("string"==typeof t){var a;if(a=n[t.toLowerCase()])return a===i;if(a=r[t.toLowerCase()])return a===i}else if("number"==typeof t)return t===i;return!1}};var n=(t=e.exports=i).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
     * Programatically add the following
     */
for(a=97;a<123;a++)n[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)n[a-48]=a;for(a=1;a<13;a++)n["f"+a]=a+111;for(a=0;a<10;a++)n["numpad "+a]=a+96;var s=t.names=t.title={};for(a in n)s[n[a]]=a;for(var o in r)n[o]=r[o]}),Pt=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=x("div",{className:"vjs-modal-dialog-content"},{role:"document"}),n.descEl_=x("p",{className:"vjs-modal-dialog-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),E(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+e.prototype.buildCSSClass.call(this)},i.label=function(){return this.localize(this.options_.label||"Modal Window")},i.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},i.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},i.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},i.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},i.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close)}!t&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},i.fill=function(){this.fillWith(this.content())},i.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),X(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},i.empty=function(){this.trigger("beforemodalempty"),W(this.contentEl()),this.trigger("modalempty")},i.content=function(e){return void 0!==e&&(this.content_=e),this.content_},i.conditionalFocus_=function(){var e=l.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},i.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},i.handleKeyDown=function(e){if(e.stopPropagation(),At.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(At.isEventKey(e,"Tab")){for(var t,i=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(n===i[r]){t=r;break}l.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||t!==i.length-1||(i[0].focus(),e.preventDefault())}},i.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof a.HTMLAnchorElement||e instanceof a.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof a.HTMLInputElement||e instanceof a.HTMLSelectElement||e instanceof a.HTMLTextAreaElement||e instanceof a.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof a.HTMLIFrameElement||e instanceof a.HTMLObjectElement||e instanceof a.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},t}(qe);Pt.prototype.options_={pauseOnOpen:!0,temporary:!0},qe.registerComponent("ModalDialog",Pt);var Ot=function(e){function t(t){var i;void 0===t&&(t=[]),(i=e.call(this)||this).tracks_=[],Object.defineProperty(Ve(i),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<t.length;n++)i.addTrack(t[n]);return i}ze(t,e);var i=t.prototype;return i.addTrack=function(e){var t=this,i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},xe(e)&&e.addEventListener("labelchange",e.labelchange_)},i.removeTrack=function(e){for(var t,i=0,n=this.length;i<n;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},i.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},t}(Ce);for(var It in Ot.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Ot.prototype.allowedEvents_)Ot.prototype["on"+It]=null;var Dt=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)},Lt=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].enabled){Dt(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,i}ze(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.enabled&&Dt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){i.changing_||(i.changing_=!0,Dt(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(Ot),Rt=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)},Mt=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].selected){Rt(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,Object.defineProperty(Ve(i),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}ze(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.selected&&Rt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){i.changing_||(i.changing_=!0,Rt(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(Ot),Nt=function(e){function t(){return e.apply(this,arguments)||this}ze(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return i.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(Ot),jt=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},t.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),Ut=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,i=0,n=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<n)for(i=t;i<n;i++)r.call(this,i)},t.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},e}(),Ft={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Bt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ht={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},qt={disabled:"disabled",hidden:"hidden",showing:"showing"},Vt=function(e){function t(t){var i;void 0===t&&(t={}),i=e.call(this)||this;var n={id:t.id||"vjs_track_"+oe(),kind:t.kind||"",language:t.language||""},r=t.label||"",a=function(e){Object.defineProperty(Ve(i),e,{get:function(){return n[e]},set:function(){}})};for(var s in n)a(s);return Object.defineProperty(Ve(i),"label",{get:function(){return r},set:function(e){e!==r&&(r=e,this.trigger("labelchange"))}}),i}return ze(t,e),t}(Ce),Wt=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=l.createElement("a");i.href=e;var n,r=""===i.host&&"file:"!==i.protocol;r&&((n=l.createElement("div")).innerHTML='<a href="'+e+'"></a>',i=n.firstChild,n.setAttribute("style","display:none; position:absolute;"),l.body.appendChild(n));for(var s={},o=0;o<t.length;o++)s[t[o]]=i[t[o]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=a.location.protocol),r&&l.body.removeChild(n),s},zt=function(e){if(!e.match(/^https?:\/\//)){var t=l.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},Gt=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},Xt=function(e,t){void 0===t&&(t=a.location);var i=Wt(e);return(":"===i.protocol?t.protocol:i.protocol)+i.host!==t.protocol+t.host},Jt=Object.freeze({__proto__:null,parseUrl:Wt,getAbsoluteURL:zt,getFileExtension:Gt,isCrossOrigin:Xt}),Yt="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},Kt=Object.prototype.toString,$t=ei,Qt=ei;function Zt(e,t,i){var n,r,a=e;return"[object Function]"===(r=Kt.call(n=t))||"function"==typeof n&&"[object RegExp]"!==r||"undefined"!=typeof window&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)?(i=t,"string"==typeof e&&(a={uri:e})):a=d({},t,{uri:e}),a.callback=i,a}function ei(e,t,i){return ti(t=Zt(e,t,i))}function ti(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,i=function(i,n,r){t||(t=!0,e.callback(i,n,r))};function n(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;if(""===e.responseType&&(!e.responseXML||"parsererror"!==e.responseXML.documentElement.nodeName))return e.responseXML}catch(t){}return null}(l),m)try{e=JSON.parse(e)}catch(t){}return e}function r(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,i(e,g)}function a(){if(!o){var t;clearTimeout(u);var r=g,a=null;return 0!==(t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status)?(r={body:n(),statusCode:t,method:h,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(r.headers=function(e){var t={};return e?(e.trim().split("\n").forEach(function(e){var i=e.indexOf(":"),n=e.slice(0,i).trim().toLowerCase(),r=e.slice(i+1).trim();void 0===t[n]?t[n]=r:Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]}),t):t}(l.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),i(a,r,r.body)}}var s,o,l=e.xhr||null;l||(l=e.cors||e.useXDR?new ei.XDomainRequest:new ei.XMLHttpRequest);var u,c=l.url=e.uri||e.url,h=l.method=e.method||"GET",d=e.body||e.data,p=l.headers=e.headers||{},f=!!e.sync,m=!1,g={body:void 0,headers:{},statusCode:0,method:h,url:c,rawRequest:l};if("json"in e&&!1!==e.json&&(m=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),d=JSON.stringify(!0===e.json?d:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(a,0)},l.onload=a,l.onerror=r,l.onprogress=function(){},l.onabort=function(){o=!0},l.ontimeout=r,l.open(h,c,!f,e.username,e.password),f||(l.withCredentials=!!e.withCredentials),!f&&e.timeout>0&&(u=setTimeout(function(){if(!o){o=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}},e.timeout)),l.setRequestHeader)for(s in p)p.hasOwnProperty(s)&&l.setRequestHeader(s,p[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(d||null),l}ei.XMLHttpRequest=Yt.XMLHttpRequest||function(){},ei.XDomainRequest="withCredentials"in new ei.XMLHttpRequest?ei.XMLHttpRequest:Yt.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(e){ei["delete"===e?"del":e]=function(t,i,n){return(i=Zt(t,i,n)).method=e.toUpperCase(),ti(i)}}),$t.default=Qt;var ii=function(e,t){var i=new a.WebVTT.Parser(a,a.vttjs,a.WebVTT.StringDecoder()),n=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){n.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),n.length>0&&(a.console&&a.console.groupCollapsed&&a.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach(function(e){return c.error(e)}),a.console&&a.console.groupEnd&&a.console.groupEnd()),i.flush()},ni=function(e,t){var i={uri:e},n=Xt(e);n&&(i.cors=n);var r="use-credentials"===t.tech_.crossOrigin();r&&(i.withCredentials=r),$t(i,Se(this,function(e,i,n){if(e)return c.error(e,i);t.loaded_=!0,"function"!=typeof a.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(e){if("vttjserror"!==e.type)return ii(n,t);c.error("vttjs failed to load, stopping trying to process "+t.src)}):ii(n,t)}))},ri=function(e){function t(t){var i;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var n=Fe(t,{kind:Ht[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=qt[n.mode]||"disabled",a=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(r="hidden"),(i=e.call(this,n)||this).tech_=n.tech,i.cues_=[],i.activeCues_=[],i.preload_=!1!==i.tech_.preloadTextTracks;var s=new Ut(i.cues_),o=new Ut(i.activeCues_),l=!1,u=Se(Ve(i),function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1))});return i.tech_.one("dispose",function(){i.tech_.off("timeupdate",u)}),"disabled"!==r&&i.tech_.on("timeupdate",u),Object.defineProperties(Ve(i),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return r},set:function(e){qt[e]&&r!==e&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||ni(this.src,this),this.tech_.off("timeupdate",u),"disabled"!==r&&this.tech_.on("timeupdate",u),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(l=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),n.src?(i.src=n.src,i.preload_||(i.loaded_=!0),(i.preload_||a||"subtitles"!==n.kind&&"captions"!==n.kind)&&ni(i.src,Ve(i))):i.loaded_=!0,i}ze(t,e);var i=t.prototype;return i.addCue=function(e){var t=e;if(a.vttjs&&!(e instanceof a.vttjs.VTTCue)){for(var i in t=new a.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},i.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(Vt);ri.prototype.allowedEvents_={cuechange:"cuechange"};var ai=function(e){function t(t){var i;void 0===t&&(t={});var n=Fe(t,{kind:Bt[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(Ve(i),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return ze(t,e),t}(Vt),si=function(e){function t(t){var i;void 0===t&&(t={});var n=Fe(t,{kind:Ft[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(Ve(i),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return ze(t,e),t}(Vt),oi=function(e){function t(t){var i,n;void 0===t&&(t={}),i=e.call(this)||this;var r=new ri(t);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i.default=r.default,Object.defineProperties(Ve(i),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=0,r.addEventListener("loadeddata",function(){n=2,i.trigger({type:"load",target:Ve(i)})}),i}return ze(t,e),t}(Ce);oi.prototype.allowedEvents_={load:"load"},oi.NONE=0,oi.LOADING=1,oi.LOADED=2,oi.ERROR=3;var li={audio:{ListClass:Lt,TrackClass:ai,capitalName:"Audio"},video:{ListClass:Mt,TrackClass:si,capitalName:"Video"},text:{ListClass:Nt,TrackClass:ri,capitalName:"Text"}};Object.keys(li).forEach(function(e){li[e].getterName=e+"Tracks",li[e].privateName=e+"Tracks_"});var ui={remoteText:{ListClass:Nt,TrackClass:ri,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:jt,TrackClass:oi,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ci=d({},li,ui);ui.names=Object.keys(ui),li.names=Object.keys(li),ci.names=[].concat(ui.names).concat(li.names);var hi=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function di(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function pi(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function fi(){this.values=hi(null)}function mi(e,t,i,n){var r=n?e.split(n):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(i);2===s.length&&t(s[0],s[1])}}function gi(e,t,i){var n=e;function r(){var t=pi(e);if(null===t)throw new di(di.Errors.BadTimeStamp,"Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new di(di.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var n=new fi;mi(e,function(e,t){switch(e){case"region":for(var r=i.length-1;r>=0;r--)if(i[r].id===t){n.set(e,i[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];n.integer(e,s),n.percent(e,s)&&n.set("snapToLines",!1),n.alt(e,s,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start","center","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");try{t.line=n.get("line","auto")}catch(r){}t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100);try{t.align=n.get("align","center")}catch(r){t.align=n.get("align","middle")}try{t.position=n.get("position","auto")}catch(r){t.position=n.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=n.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}(di.prototype=hi(Error.prototype)).constructor=di,di.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},fi.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var vi=l.createElement("textarea"),yi={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},_i={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},bi={v:"title",lang:"lang"},Ti={rt:"ruby"};function Si(e,t){function i(){if(!t)return null;var e,i=t.match(/^([^<]*)(<[^>]*>?)?/);return t=t.substr((e=i[1]?i[1]:i[2]).length),e}function n(e,t){return!Ti[t.localName]||Ti[t.localName]===e.localName}function r(t,i){var n=yi[t];if(!n)return null;var r=e.document.createElement(n),a=bi[t];return a&&i&&(r[a]=i.trim()),r}for(var a,s,o=e.document.createElement("div"),l=o,u=[];null!==(a=i());)if("<"!==a[0])l.appendChild(e.document.createTextNode((vi.innerHTML=a,s=vi.textContent,vi.textContent="",s)));else{if("/"===a[1]){u.length&&u[u.length-1]===a.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var c,h=pi(a.substr(1,a.length-2));if(h){c=e.document.createProcessingInstruction("timestamp",h),l.appendChild(c);continue}var d=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!d)continue;if(!(c=r(d[1],d[3])))continue;if(!n(l,c))continue;if(d[2]){var p=d[2].split(".");p.forEach(function(e){var t=/^bg_/.test(e),i=t?e.slice(3):e;_i.hasOwnProperty(i)&&(c.style[t?"background-color":"color"]=_i[i])}),c.className=p.join(" ")}u.push(d[1]),l.appendChild(c),l=c}return o}var wi=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Ci(e){for(var t=0;t<wi.length;t++){var i=wi[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function ki(e){var t=[],i="";if(!e||!e.childNodes)return"ltr";function n(e,t){for(var i=t.childNodes.length-1;i>=0;i--)e.push(t.childNodes[i])}function r(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var a=i.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):i}return"ruby"===t.tagName?r(e):t.childNodes?(n(e,t),r(e)):void 0}for(n(t,e);i=r(t);)for(var a=0;a<i.length;a++)if(Ci(i.charCodeAt(a)))return"rtl";return"ltr"}function xi(){}function Ei(e,t,i){xi.call(this),this.cue=t,this.cueDiv=Si(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:ki(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}this.applyStyles(""===t.vertical?{left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}:{top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Ai(e){var t,i,n,r;if(e.div){i=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||i,this.bottom=e.bottom||r+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function Pi(e,t,i,n){var r=new Ai(t),a=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,r=0;r<i.length&&i[r]!==t;r++)"showing"===i[r].mode&&n++;return-1*++n}(a),o=[];if(a.snapToLines){var l;switch(a.vertical){case"":o=["+y","-y"],l="height";break;case"rl":o=["+x","-x"],l="width";break;case"lr":o=["-x","+x"],l="width"}var u=r.lineHeight,c=u*Math.round(s),h=i[l]+u,d=o[0];Math.abs(c)>h&&(c=c<0?-1:1,c*=Math.ceil(h/u)*u),s<0&&(c+=""===a.vertical?i.height:i.width,o=o.reverse()),r.move(d,c)}else{var p=r.lineHeight/i.height*100;switch(a.lineAlign){case"center":s-=p/2;break;case"end":s-=p}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}o=["+y","-x","+x","-y"],r=new Ai(t)}var f=function(e,t){for(var r,a=new Ai(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(i,t[o])||e.within(i)&&e.overlapsAny(n);)e.move(t[o]);if(e.within(i))return e;var l=e.intersectPercentage(i);s>l&&(r=new Ai(e),s=l),e=new Ai(a)}return r||a}(r,o);t.move(f.toCSSCompatValues(i))}function Oi(){}xi.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},xi.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Ei.prototype=hi(xi.prototype)).constructor=Ei,Ai.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Ai.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Ai.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Ai.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Ai.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Ai.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Ai.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Ai.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},Oi.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Oi.convertCueToDOMTree=function(e,t){return e&&t?Si(e,t):null},Oi.processCues=function(e,t,i){if(!e||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=e.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",i.appendChild(n),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],a=Ai.getSimpleBoxPosition(n),s={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var i,o,l=0;l<t.length;l++)i=new Ei(e,o=t[l],s),n.appendChild(i.div),Pi(0,i,a,r),o.displayState=i.div,r.push(Ai.getSimpleBoxPosition(i))}()}else for(var o=0;o<t.length;o++)n.appendChild(t[o].displayState)},(Oi.Parser=function(e,t,i){i||(i=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof di))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,i=this;function n(){for(var e=i.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,i.buffer=e.substr(t),n}e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var a=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new di(di.Errors.BadSignature);i.state="HEADER"}for(var s=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(s?s=!1:r=n(),i.state){case"HEADER":/:/.test(r)?(t=r).match(/X-TIMESTAMP-MAP/)?mi(t,function(e,t){switch(e){case"X-TIMESTAMP-MAP":!function(e){var t=new fi;mi(e,function(e,i){switch(e){case"MPEGT":t.integer(e+"S",i);break;case"LOCA":t.set(e+"L",pi(i))}},/[^\d]:/,/,/),i.ontimestampmap&&i.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}(t)}},/=/):mi(t,function(e,t){switch(e){case"Region":!function(e){var t=new fi;if(mi(e,function(e,i){switch(e){case"id":t.set(e,i);break;case"width":t.percent(e,i);break;case"lines":t.integer(e,i);break;case"regionanchor":case"viewportanchor":var n=i.split(",");if(2!==n.length)break;var r=new fi;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;t.set(e+"X",r.get("x")),t.set(e+"Y",r.get("y"));break;case"scroll":t.alt(e,i,["up"])}},/=/,/\s/),t.has("id")){var n=new(i.vttjs.VTTRegion||i.window.VTTRegion);n.width=t.get("width",100),n.lines=t.get("lines",3),n.regionAnchorX=t.get("regionanchorX",0),n.regionAnchorY=t.get("regionanchorY",100),n.viewportAnchorX=t.get("viewportanchorX",0),n.viewportAnchorY=t.get("viewportanchorY",100),n.scroll=t.get("scroll",""),i.onregion&&i.onregion(n),i.regionList.push({id:t.get("id"),region:n})}}(t)}},/:/):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;i.cue=new(i.vttjs.VTTCue||i.window.VTTCue)(0,0,"");try{i.cue.align="center"}catch(l){i.cue.align="middle"}if(i.state="CUE",-1===r.indexOf("--\x3e")){i.cue.id=r;continue}case"CUE":try{gi(r,i.cue,i.regionList)}catch(l){i.reportOrThrowError(l),i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(s=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(i.state="ID");continue}}}catch(l){i.reportOrThrowError(l),"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new di(di.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var Ii=Oi,Di={"":1,lr:1,rl:1},Li={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Ri(e){return"string"==typeof e&&!!Li[e.toLowerCase()]&&e.toLowerCase()}function Mi(e,t,i){this.hasBeenReset=!1;var n="",r=!1,a=e,s=t,o=i,l=null,u="",c=!0,h="auto",d="start",p="auto",f="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!Di[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return d},set:function(e){var t=Ri(e);t?(d=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=Ri(e);t?(f=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=Ri(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}Mi.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Ni=Mi,ji={"":!0,up:!0};function Ui(e){return"number"==typeof e&&e>=0&&e<=100}var Fi=function(){var e=100,t=3,i=0,n=100,r=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Ui(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(e){if(!Ui(e))throw new Error("RegionAnchorX must be between 0 and 100.");n=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!Ui(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!Ui(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!Ui(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){var t=function(e){return"string"==typeof e&&!!ji[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):s=t}}})},Bi=n(function(e){var t=e.exports={WebVTT:Ii,VTTCue:Ni,VTTRegion:Fi};a.vttjs=t,a.WebVTT=t.WebVTT;var i=t.VTTCue,n=t.VTTRegion,r=a.VTTCue,s=a.VTTRegion;t.shim=function(){a.VTTCue=i,a.VTTRegion=n},t.restore=function(){a.VTTCue=r,a.VTTRegion=s},a.VTTCue||t.shim()}),Hi=function(e){function t(t,i){var n;return void 0===t&&(t={}),void 0===i&&(i=function(){}),t.reportTouchActivity=!1,(n=e.call(this,null,t,i)||this).hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),ci.names.forEach(function(e){var i=ci[e];t&&t[i.getterName]&&(n[i.privateName]=t[i.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(n["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=!1!==t.preloadTextTracks,n.autoRemoteTextTracks_=new ci.text.ListClass,n.initTrackListeners(),t.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}ze(t,e);var i=t.prototype;return i.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},i.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},i.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},i.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Se(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},i.onDurationChange=function(e){this.duration_=this.duration()},i.buffered=function(){return mt(0,0)},i.bufferedPercent=function(){return gt(this.buffered(),this.duration_)},i.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},i.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},i.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},i.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.dispose=function(){this.clearTracks(li.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},i.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var i=t[e+"Tracks"]()||[],n=i.length;n--;){var r=i[n];"text"===e&&t.removeRemoteTextTrack(r),i.removeTrack(r)}})},i.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;)this.removeRemoteTextTrack(e[t])},i.reset=function(){},i.crossOrigin=function(){},i.setCrossOrigin=function(){},i.error=function(e){return void 0!==e&&(this.error_=new wt(e),this.trigger("error")),this.error_},i.played=function(){return this.hasStarted_?mt(0,0):mt()},i.play=function(){},i.setScrubbing=function(){},i.scrubbing=function(){},i.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.initTrackListeners=function(){var e=this;li.names.forEach(function(t){var i=function(){e.trigger(t+"trackchange")},n=e[li[t].getterName]();n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),e.on("dispose",function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i)})})},i.addWebVttScript_=function(){var e=this;if(!a.WebVTT)if(l.body.contains(this.el())){if(!this.options_["vtt.js"]&&y(Bi)&&Object.keys(Bi).length>0)return void this.trigger("vttjsloaded");var t=l.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),a.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},i.emulateTextTracks=function(){var e=this,t=this.textTracks(),i=this.remoteTextTracks(),n=function(e){return t.addTrack(e.track)},r=function(e){return t.removeTrack(e.track)};i.on("addtrack",n),i.on("removetrack",r),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},s=function(){a();for(var e=0;e<t.length;e++){var i=t[e];i.removeEventListener("cuechange",a),"showing"===i.mode&&i.addEventListener("cuechange",a)}};s(),t.addEventListener("change",s),t.addEventListener("addtrack",s),t.addEventListener("removetrack",s),this.on("dispose",function(){i.off("addtrack",n),i.off("removetrack",r),t.removeEventListener("change",s),t.removeEventListener("addtrack",s),t.removeEventListener("removetrack",s);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",a)})},i.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,i,n,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,i&&(r.label=i),n&&(r.language=n),r.tech=e;var s=new ci.text.TrackClass(r);return a.addTrack(s),s}(this,e,t,i)},i.createRemoteTextTrack=function(e){var t=Fe(e,{tech:this});return new ui.remoteTextEl.TrackClass(t)},i.addRemoteTextTrack=function(e,t){var i=this;void 0===e&&(e={});var n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(c.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(n.track)}),n},i.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=function(){var e=this.options_.Promise||a.Promise;if(e)return e.reject()},i.disablePictureInPicture=function(){return!0},i.setDisablePictureInPicture=function(){},i.setPoster=function(){},i.playsinline=function(){},i.setPlaysinline=function(){},i.overrideNativeAudioTracks=function(){},i.overrideNativeVideoTracks=function(){},i.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,i){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,i){if(t.techs_||(t.techs_={}),!t.isTech(i))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Ue(e),t.techs_[e]=i,t.techs_[je(e)]=i,"Tech"!==e&&t.defaultTechOrder_.push(e),i},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=Ue(e),a&&a.videojs&&a.videojs[e]?(c.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),a.videojs[e]):void 0)},t}(qe);ci.names.forEach(function(e){var t=ci[e];Hi.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Hi.prototype.featuresVolumeControl=!0,Hi.prototype.featuresMuteControl=!0,Hi.prototype.featuresFullscreenResize=!1,Hi.prototype.featuresPlaybackRate=!1,Hi.prototype.featuresProgressEvents=!1,Hi.prototype.featuresSourceset=!1,Hi.prototype.featuresTimeupdateEvents=!1,Hi.prototype.featuresNativeTextTracks=!1,Hi.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,t)},e.canPlayType=function(t){for(var i,n=e.sourceHandlers||[],r=0;r<n.length;r++)if(i=n[r].canPlayType(t))return i;return""},e.selectSourceHandler=function(t,i){for(var n=e.sourceHandlers||[],r=0;r<n.length;r++)if(n[r].canHandleSource(t,i))return n[r];return null},e.canPlaySource=function(t,i){var n=e.selectSourceHandler(t,i);return n?n.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);i||(e.nativeSourceHandler?i=e.nativeSourceHandler:c.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),i!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},qe.registerComponent("Tech",Hi),Hi.registerTech("Tech",Hi),Hi.defaultTechOrder_=[];var qi={},Vi={},Wi={};function zi(e,t,i){e.setTimeout(function(){return $i(t,qi[t.type],i,e)},1)}function Gi(e,t,i,n){void 0===n&&(n=null);var r="call"+Ue(i),a=e.reduce(Ki(r),n),s=a===Wi,o=s?null:t[i](a);return function(e,t,i,n){for(var r=e.length-1;r>=0;r--){var a=e[r];a[t]&&a[t](n,i)}}(e,i,o,s),o}var Xi={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Ji={setCurrentTime:1,setMuted:1,setVolume:1},Yi={play:1,pause:1};function Ki(e){return function(t,i){return t===Wi?Wi:i[e]?i[e](t):t}}function $i(e,t,i,n,r,a){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===a&&(a=!1);var s=t[0],o=t.slice(1);if("string"==typeof s)$i(e,qi[s],i,n,r,a);else if(s){var l=function(e,t){var i=Vi[e.id()],n=null;if(null==i)return n=t(e),Vi[e.id()]=[[t,n]],n;for(var r=0;r<i.length;r++){var a=i[r];a[0]===t&&(n=a[1])}return null===n&&(n=t(e),i.push([t,n])),n}(n,s);if(!l.setSource)return r.push(l),$i(e,o,i,n,r,a);l.setSource(g({},e),function(t,s){if(t)return $i(e,o,i,n,r,a);r.push(l),$i(s,e.type===s.type?o:qi[s.type],i,n,r,a)})}else o.length?$i(e,o,i,n,r,a):a?i(e,r):$i(e,qi["*"],i,n,r,!0)}var Qi={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Zi=function(e){void 0===e&&(e="");var t=Gt(e);return Qi[t.toLowerCase()]||""},en=function e(t){if(Array.isArray(t)){var i=[];t.forEach(function(t){t=e(t),Array.isArray(t)?i=i.concat(t):v(t)&&i.push(t)}),t=i}else t="string"==typeof t&&t.trim()?[tn({src:t})]:v(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[tn(t)]:[];return t};function tn(e){if(!e.type){var t=Zi(e.src);t&&(e.type=t)}return e}var nn=function(e){function t(t,i,n){var r,a=Fe({createEl:!1},i);if(r=e.call(this,t,a,n)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)t.src(i.playerOptions.sources);else for(var s=0,o=i.playerOptions.techOrder;s<o.length;s++){var l=Ue(o[s]),u=Hi.getTech(l);if(l||(u=qe.getComponent(l)),u&&u.isSupported()){t.loadTech_(l);break}}return r}return ze(t,e),t}(qe);qe.registerComponent("MediaLoader",nn);var rn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).emitTapEvents(),n.enable(),n}ze(t,e);var i=t.prototype;return i.createEl=function(t,i,n){void 0===t&&(t="div"),void 0===i&&(i={}),void 0===n&&(n={}),i=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),"button"===t&&c.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=g({role:"button"},n),this.tabIndex_=i.tabIndex;var r=e.prototype.createEl.call(this,t,i,n);return this.createControlTextEl(r),r},i.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},i.createControlTextEl=function(e){return this.controlTextEl_=x("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},i.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,E(this.controlTextEl_,i),this.nonIconControl||t.setAttribute("title",i)},i.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(t){At.isEventKey(t,"Space")||At.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(qe);qe.registerComponent("ClickableComponent",rn),qe.registerComponent("PosterImage",function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update(),t.on("posterchange",Se(Ve(n),n.update)),n}ze(t,e);var i=t.prototype;return i.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},i.createEl=function(){return x("div",{className:"vjs-poster",tabIndex:-1})},i.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},i.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},i.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(rt||tt)&&t||this.player_.tech(!0).focus(),this.player_.paused()?xt(this.player_.play()):this.player_.pause()}},t}(rn));var an={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function sn(e,t){var i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function on(e,t,i){try{e.style[t]=i}catch(n){return}}qe.registerComponent("TextTrackDisplay",function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var s=Se(Ve(r),r.updateDisplay);return t.on("loadstart",Se(Ve(r),r.toggleDisplay)),t.on("texttrackchange",s),t.on("loadedmetadata",Se(Ve(r),r.preselectTrack)),t.ready(Se(Ve(r),function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",s),t.on("playerresize",s),a.addEventListener("orientationchange",s),t.on("dispose",function(){return a.removeEventListener("orientationchange",s)});for(var e=this.options_.playerOptions.tracks||[],i=0;i<e.length;i++)this.player_.addRemoteTextTrack(e[i],!0);this.preselectTrack()}})),r}ze(t,e);var i=t.prototype;return i.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var o=r[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in n?o.kind===a.kind?i=o:i||(i=o):a&&!a.enabled?(i=null,e=null,t=null):o.default&&("descriptions"!==o.kind||e?o.kind in n&&!t&&(t=o):e=o)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){"function"==typeof a.WebVTT&&a.WebVTT.processCues(a,[],this.el_)},i.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var i=[],n=0;n<e.length;++n){var r=e[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var a=null,s=null,o=e.length;o--;){var l=e[o];"showing"===l.mode&&("descriptions"===l.kind?a=l:s=l)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},i.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),i=e.activeCues,n=i.length;n--;){var r=i[n];if(r){var s=r.displayState;if(t.color&&(s.firstChild.style.color=t.color),t.textOpacity&&on(s.firstChild,"color",sn(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(s.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&on(s.firstChild,"backgroundColor",sn(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?on(s,"backgroundColor",sn(t.windowColor,t.windowOpacity)):s.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent){var o=a.parseFloat(s.style.fontSize);s.style.fontSize=o*t.fontPercent+"px",s.style.height="auto",s.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=an[t.fontFamily])}}},i.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof a.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],i=0;i<e.length;++i)for(var n=e[i],r=0;r<n.activeCues.length;++r)t.push(n.activeCues[r]);a.WebVTT.processCues(a,t,this.el_);for(var s=0;s<e.length;++s){for(var o=e[s],l=0;l<o.activeCues.length;++l){var u=o.activeCues[l].displayState;O(u,"vjs-text-track-cue"),O(u,"vjs-text-track-cue-"+(o.language?o.language:s))}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},t}(qe)),qe.registerComponent("LoadingSpinner",function(e){function t(){return e.apply(this,arguments)||this}return ze(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),i=this.localize(t?"Audio Player":"Video Player"),n=x("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r},t}(qe));var ln=function(e){function t(){return e.apply(this,arguments)||this}ze(t,e);var i=t.prototype;return i.createEl=function(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),t=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=g({type:"button"},i);var n=qe.prototype.createEl.call(this,"button",t,i);return this.createControlTextEl(n),n},i.addChild=function(e,t){return void 0===t&&(t={}),c.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),qe.prototype.addChild.call(this,e,t)},i.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(t){At.isEventKey(t,"Space")||At.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(rn);qe.registerComponent("Button",ln);var un=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return xt(t),void(!this.player_.tech(!0)||(rt||tt)&&i||this.player_.tech(!0).focus())}var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var a=function(){return r.focus()};kt(t)?t.then(a,function(){}):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},i.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},i.handleMouseDown=function(e){this.mouseused_=!0},t}(ln);un.prototype.controlText_="Play Video",qe.registerComponent("BigPlayButton",un),qe.registerComponent("CloseButton",function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).controlText(i&&i.controlText||n.localize("Close")),n}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(t){At.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(ln));var cn=function(e){function t(t,i){var n;return void 0===i&&(i={}),n=e.call(this,t,i)||this,i.replay=void 0===i.replay||i.replay,n.on(t,"play",n.handlePlay),n.on(t,"pause",n.handlePause),i.replay&&n.on(t,"ended",n.handleEnded),n}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},i.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(ln);cn.prototype.controlText_="Play",qe.registerComponent("PlayToggle",cn);var hn=function(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=n=i="-"),(r=r>0||s>0?r+":":"")+(n=((r||a>=10)&&n<10?"0"+n:n)+":")+(i<10?"0"+i:i)},dn=hn;function pn(e,t){return void 0===t&&(t=e),dn(e,t)}var fn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,["timeupdate","ended"],n.updateContent),n.updateTextNode_(),n}ze(t,e);var i=t.prototype;return i.createEl=function(){var t=this.buildCSSClass(),i=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=x("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),i.appendChild(this.contentEl_),i},i.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},i.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=pn(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(t.contentEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,c.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=l.createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}}))},i.updateContent=function(e){},t}(qe);fn.prototype.labelText_="Time",fn.prototype.controlText_="Time",qe.registerComponent("TimeDisplay",fn);var mn=function(e){function t(){return e.apply(this,arguments)||this}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(fn);mn.prototype.labelText_="Current Time",mn.prototype.controlText_="Current Time",qe.registerComponent("CurrentTimeDisplay",mn);var gn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",n.updateContent),n.on(t,"loadstart",n.updateContent),n.on(t,"loadedmetadata",n.updateContent),n}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(fn);gn.prototype.labelText_="Duration",gn.prototype.controlText_="Duration",qe.registerComponent("DurationDisplay",gn),qe.registerComponent("TimeDivider",function(e){function t(){return e.apply(this,arguments)||this}return ze(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(qe));var vn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",n.updateContent),n}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore(x("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},i.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(fn);vn.prototype.labelText_="Remaining Time",vn.prototype.controlText_="Remaining Time",qe.registerComponent("RemainingTimeDisplay",vn),qe.registerComponent("LiveDisplay",function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}ze(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=x("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},i.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},i.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(qe));var yn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatus),n}ze(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=x("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,e.prototype.dispose.call(this)},t}(ln);yn.prototype.controlText_="Seek to live, currently playing live",qe.registerComponent("SeekToLive",yn);var _n=function(e,t,i){return e=Number(e),Math.min(i,Math.max(t,isNaN(e)?t:e))},bn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}ze(t,e);var i=t.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(t,i,n){return void 0===i&&(i={}),void 0===n&&(n={}),i.className=i.className+" vjs-slider",i=g({tabIndex:0},i),n=g({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,i,n)},i.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||it||e.preventDefault(),U(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},i.handleMouseMove=function(e){},i.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;F(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},i.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",function(){var i=e.vertical()?"height":"width";e.bar.el().style[i]=(100*t).toFixed(2)+"%"})),t}},i.getProgress=function(){return Number(_n(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(e){var t=q(this.el_,e);return this.vertical()?t.y:t.x},i.handleKeyDown=function(t){At.isEventKey(t,"Left")||At.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):At.isEventKey(t,"Right")||At.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){e.stopPropagation(),e.preventDefault()},i.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},t}(qe);qe.registerComponent("Slider",bn);var Tn=function(e,t){return _n(e/t*100,0,100).toFixed(2)+"%"};qe.registerComponent("LoadProgressBar",function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).partEls_=[],n.on(t,"progress",n.update),n}ze(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),i=x("span",{className:"vjs-control-text"}),n=x("span",{textContent:this.localize("Loaded")}),r=l.createTextNode(": ");return this.percentageEl_=x("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(i),i.appendChild(n),i.appendChild(r),i.appendChild(this.percentageEl_),t},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},i.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var e=t.player_.liveTracker,i=t.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),a=t.partEls_,s=Tn(r,n);t.percent_!==s&&(t.el_.style.width=s,E(t.percentageEl_,s),t.percent_=s);for(var o=0;o<i.length;o++){var l=i.start(o),u=i.end(o),c=a[o];c||(c=t.el_.appendChild(x()),a[o]=c),c.dataset.start===l&&c.dataset.end===u||(c.dataset.start=l,c.dataset.end=u,c.style.left=Tn(l,r),c.style.width=Tn(u-l,r))}for(var h=a.length;h>i.length;h--)t.el_.removeChild(a[h-1]);a.length=i.length})},t}(qe)),qe.registerComponent("TimeTooltip",function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=we(Se(Ve(n),n.update),Te),n}ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(e,t,i){var n=H(this.el_),r=B(this.player_.el()),a=e.width*t;if(r&&n){var s=e.left-r.left+a,o=e.width-a+(r.right-e.right),l=n.width/2;s<l?l+=l-s:o<l&&(l=o),l<0?l=0:l>n.width&&(l=n.width),l=Math.round(l),this.el_.style.right="-"+l+"px",this.write(i)}},i.write=function(e){E(this.el_,e)},i.updateTime=function(e,t,i,n){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var a,s=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var o=r.player_.liveTracker.liveWindow(),l=o-t*o;a=(l<1?"":"-")+pn(l,o)}else a=pn(i,s);r.update(e,t,a),n&&n()})},t}(qe));var Sn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=we(Se(Ve(n),n.update),Te),n}ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(e,t){var i=this.getChild("timeTooltip");if(i){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,n)}},t}(qe);Sn.prototype.options_={children:[]},ct||$e||Sn.prototype.options_.children.push("timeTooltip"),qe.registerComponent("PlayProgressBar",Sn);var wn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=we(Se(Ve(n),n.update),Te),n}ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,t){var i=this,n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,function(){i.el_.style.left=e.width*t+"px"})},t}(qe);wn.prototype.options_={children:["timeTooltip"]},qe.registerComponent("MouseTimeDisplay",wn);var Cn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).setEventHandlers_(),n}ze(t,e);var i=t.prototype;return i.setEventHandlers_=function(){this.update_=Se(this,this.update),this.update=we(this.update_,Te),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in l&&"visibilityState"in l&&this.on(l,"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(e){l.hidden?this.disableInterval_(e):(this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Te))},i.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(t){var i=this,n=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var e=i.player_.ended()?i.player_.duration():i.getCurrentTime_(),t=i.player_.liveTracker,r=i.player_.duration();t&&t.isLive()&&(r=i.player_.liveTracker.liveCurrentTime()),i.percent_!==n&&(i.el_.setAttribute("aria-valuenow",(100*n).toFixed(2)),i.percent_=n),i.currentTime_===e&&i.duration_===r||(i.el_.setAttribute("aria-valuetext",i.localize("progress bar timing: currentTime={1} duration={2}",[pn(e,r),pn(r,r)],"{1} of {2}")),i.currentTime_=e,i.duration_=r),i.bar&&i.bar.update(B(i.el()),i.getProgress())}),n},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var e,t=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},i.handleMouseDown=function(t){J(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},i.handleMouseMove=function(e){if(J(e)){var t,i=this.calculateDistance(e),n=this.player_.liveTracker;if(n&&n.isLive()){if(i>=.99)return void n.seekToLiveEdge();var r=n.seekableStart(),a=n.liveCurrentTime();if((t=r+i*n.liveWindow())>=a&&(t=a),t<=r&&(t=r+.1),t===1/0)return}else(t=i*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},i.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},i.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},i.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?xt(this.player_.play()):this.update_()},i.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},i.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},i.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(t){if(At.isEventKey(t,"Space")||At.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(At.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(0);else if(At.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(At(t))){t.preventDefault(),t.stopPropagation();var i=10*(At.codes[At(t)]-At.codes[0])/100;this.player_.currentTime(this.player_.duration()*i)}else At.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):At.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableInterval_),this.off(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in l&&"visibilityState"in l&&this.off(l,"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(bn);Cn.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},ct||$e||Cn.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),qe.registerComponent("SeekBar",Cn);var kn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).handleMouseMove=we(Se(Ve(n),n.handleMouseMove),Te),n.throttledHandleMouseSeek=we(Se(Ve(n),n.handleMouseSeek),Te),n.enable(),n}ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var i=t.getChild("playProgressBar"),n=t.getChild("mouseTimeDisplay");if(i||n){var r=t.el(),a=H(r),s=q(r,e).x;s=_n(s,0,1),n&&n.update(a,s),i&&i.update(a,t.getProgress())}}},i.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},i.enabled=function(){return this.enabled_},i.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},i.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},i.handleMouseUp=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(qe);kn.prototype.options_={children:["seekBar"]},qe.registerComponent("ProgressControl",kn);var xn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],n.handlePictureInPictureChange),n.on(t,["disablepictureinpicturechanged","loadedmetadata"],n.handlePictureInPictureEnabledChange),n.disable(),n}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){l.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},i.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(ln);xn.prototype.controlText_="Picture-in-Picture",qe.registerComponent("PictureInPictureToggle",xn);var En=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"fullscreenchange",n.handleFullscreenChange),!1===l[t.fsApi_.fullscreenEnabled]&&n.disable(),n}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(ln);En.prototype.controlText_="Fullscreen",qe.registerComponent("FullscreenToggle",En),qe.registerComponent("VolumeLevel",function(e){function t(){return e.apply(this,arguments)||this}return ze(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(qe));var An=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on("slideractive",n.updateLastVolume_),n.on(t,"volumechange",n.updateARIAAttributes),t.ready(function(){return n.updateARIAAttributes()}),n}ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(t){J(t)&&e.prototype.handleMouseDown.call(this,t)},i.handleMouseMove=function(e){J(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},i.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},i.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},t}(bn);An.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},An.prototype.playerEvent="volumechange",qe.registerComponent("VolumeBar",An);var Pn=function(e){function t(t,i){var n;return void 0===i&&(i={}),i.vertical=i.vertical||!1,(void 0===i.volumeBar||y(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),n=e.call(this,t,i)||this,function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(Ve(n),t),n.throttledHandleMouseMove=we(Se(Ve(n),n.handleMouseMove),Te),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}ze(t,e);var i=t.prototype;return i.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},i.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},i.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},i.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(qe);Pn.prototype.options_={children:["volumeBar"]},qe.registerComponent("VolumeControl",Pn);var On=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(Ve(n),t),n.on(t,["loadstart","volumechange"],n.update),n}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();0===t?(this.player_.volume(i<.1?.1:i),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},i.update=function(e){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var e=this.player_.volume(),t=3;ct&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)I(this.el_,"vjs-vol-"+i);O(this.el_,"vjs-vol-"+t)},i.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(ln);On.prototype.controlText_="Mute",qe.registerComponent("MuteToggle",On);var In=function(e){function t(t,i){var n;return void 0===i&&(i={}),i.inline=void 0===i.inline||i.inline,(void 0===i.volumeControl||y(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(n=e.call(this,t,i)||this).on(t,["loadstart"],n.volumePanelState_),n.on(n.muteToggle,"keyup",n.handleKeyPress),n.on(n.volumeControl,"keyup",n.handleVolumeControlKeyUp),n.on("keydown",n.handleKeyPress),n.on("mouseover",n.handleMouseOver),n.on("mouseout",n.handleMouseOut),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}ze(t,e);var i=t.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},i.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(e){At.isEventKey(e,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(e){this.addClass("vjs-hover"),fe(l,"keyup",Se(this,this.handleKeyPress))},i.handleMouseOut=function(e){this.removeClass("vjs-hover"),me(l,"keyup",Se(this,this.handleKeyPress))},i.handleKeyPress=function(e){At.isEventKey(e,"Esc")&&this.handleMouseOut()},t}(qe);In.prototype.options_={children:["muteToggle","volumeControl"]},qe.registerComponent("VolumePanel",In);var Dn=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,i&&(n.menuButton_=i.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyDown),n.boundHandleBlur_=Se(Ve(n),n.handleBlur),n.boundHandleTapClick_=Se(Ve(n),n.handleTapClick),n}ze(t,e);var i=t.prototype;return i.addEventListenerForItem=function(e){e instanceof qe&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(e){e instanceof qe&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},i.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},i.createEl=function(){this.contentEl_=x(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),fe(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},i.handleBlur=function(e){var t=e.relatedTarget||l.activeElement;if(!this.children().some(function(e){return e.el()===t})){var i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}},i.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var i=t.filter(function(t){return t.el()===e.target})[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},i.handleKeyDown=function(e){At.isEventKey(e,"Left")||At.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(At.isEventKey(e,"Right")||At.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},i.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},i.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},i.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(qe);qe.registerComponent("Menu",Dn);var Ln=function(e){function t(t,i){var n;void 0===i&&(i={}),(n=e.call(this,t,i)||this).menuButton_=new ln(t,i),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var r=ln.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+r,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"keydown",n.handleKeyDown),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),fe(l,"keyup",Se(Ve(n),n.handleMenuKeyUp))}),n.on("mouseleave",n.handleMouseLeave),n.on("keydown",n.handleSubmenuKeyDown),n}ze(t,e);var i=t.prototype;return i.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},i.createMenu=function(){var e=new Dn(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=x("li",{className:"vjs-menu-title",innerHTML:Ue(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var i=new qe(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},i.createItems=function(){},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+ln.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+e.prototype.buildCSSClass.call(this)},i.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},i.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},i.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(e){this.removeClass("vjs-hover"),me(l,"keyup",Se(this,this.handleMenuKeyUp))},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(e){At.isEventKey(e,"Esc")||At.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),At.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(At.isEventKey(e,"Up")||At.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(e){(At.isEventKey(e,"Esc")||At.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},i.handleSubmenuKeyDown=function(e){(At.isEventKey(e,"Esc")||At.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),At.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ct&&C())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(qe);qe.registerComponent("MenuButton",Ln);var Rn=function(e){function t(t,i){var n,r=i.tracks;if((n=e.call(this,t,i)||this).items.length<=1&&n.hide(),!r)return Ve(n);var a=Se(Ve(n),n.update);return r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),r.addEventListener("labelchange",a),n.player_.on("ready",a),n.player_.on("dispose",function(){r.removeEventListener("removetrack",a),r.removeEventListener("addtrack",a),r.removeEventListener("labelchange",a)}),n}return ze(t,e),t}(Ln);qe.registerComponent("TrackButton",Rn);var Mn=["Tab","Esc","Up","Down","Right","Left"],Nn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).selectable=i.selectable,n.isSelected_=i.selected||!1,n.multiSelectable=i.multiSelectable,n.selected(n.isSelected_),n.el_.setAttribute("role",n.selectable?n.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),n}ze(t,e);var i=t.prototype;return i.createEl=function(t,i,n){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",g({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),n)},i.handleKeyDown=function(t){Mn.some(function(e){return At.isEventKey(t,e)})||e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){this.selected(!0)},i.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(rn);qe.registerComponent("MenuItem",Nn);var jn=function(e){function t(t,i){var n,r=i.track,s=t.textTracks();i.label=r.label||r.language||"Unknown",i.selected="showing"===r.mode,(n=e.call(this,t,i)||this).track=r,n.kinds=(i.kinds||[i.kind||n.track.kind]).filter(Boolean);var o,u=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(Ve(n),t)},c=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleSelectedLanguageChange.apply(Ve(n),t)};return t.on(["loadstart","texttrackchange"],u),s.addEventListener("change",u),s.addEventListener("selectedlanguagechange",c),n.on("dispose",function(){t.off(["loadstart","texttrackchange"],u),s.removeEventListener("change",u),s.removeEventListener("selectedlanguagechange",c)}),void 0===s.onchange&&n.on(["tap","click"],function(){if("object"!=typeof a.Event)try{o=new a.Event("change")}catch(e){}o||(o=l.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(o)}),n.handleTracksChange(),n}ze(t,e);var i=t.prototype;return i.handleClick=function(t){var i=this.track,n=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),n)for(var r=0;r<n.length;r++){var a=n[r];-1!==this.kinds.indexOf(a.kind)&&(a===i?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},i.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},i.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(Nn);qe.registerComponent("TextTrackMenuItem",jn);var Un=function(e){function t(t,i){return i.track={player:t,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.track.label=i.label?i.label:i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,e.call(this,t,i)||this}ze(t,e);var i=t.prototype;return i.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},i.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(jn);qe.registerComponent("OffTextTrackMenuItem",Un);var Fn=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.textTracks(),e.call(this,t,i)||this}return ze(t,e),t.prototype.createItems=function(e,t){var i;void 0===e&&(e=[]),void 0===t&&(t=jn),this.label_&&(i=this.label_+" off"),e.push(new Un(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var a=n[r];if(this.kinds_.indexOf(a.kind)>-1){var s=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},t}(Rn);qe.registerComponent("TextTrackButton",Fn);var Bn=function(e){function t(t,i){var n,r=i.track,a=i.cue,s=t.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=a.text,i.selected=a.startTime<=s&&s<a.endTime,(n=e.call(this,t,i)||this).track=r,n.cue=a,r.addEventListener("cuechange",Se(Ve(n),n.update)),n}ze(t,e);var i=t.prototype;return i.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},i.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},t}(Nn);qe.registerComponent("ChaptersTrackMenuItem",Bn);var Hn=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},i.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},i.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},i.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var i=e[t];if(i.kind===this.kind_)return i}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ue(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},i.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;i<n;i++){var r=new Bn(this.player_,{track:this.track_,cue:t[i]});e.push(r)}return e},t}(Fn);Hn.prototype.kind_="chapters",Hn.prototype.controlText_="Chapters",qe.registerComponent("ChaptersButton",Hn);var qn=function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var a=t.textTracks(),s=Se(Ve(r),r.handleTracksChange);return a.addEventListener("change",s),r.on("dispose",function(){a.removeEventListener("change",s)}),r}ze(t,e);var i=t.prototype;return i.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,r=t.length;n<r;n++){var a=t[n];if(a.kind!==this.kind_&&"showing"===a.mode){i=!0;break}}i?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Fn);qn.prototype.kind_="descriptions",qn.prototype.controlText_="Descriptions",qe.registerComponent("DescriptionsButton",qn);var Vn=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Fn);Vn.prototype.kind_="subtitles",Vn.prototype.controlText_="Subtitles",qe.registerComponent("SubtitlesButton",Vn);var Wn=function(e){function t(t,i){var n;return i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(n=e.call(this,t,i)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+i.kind+" settings dialog"),n}return ze(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(jn);qe.registerComponent("CaptionSettingsMenuItem",Wn);var zn=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Wn(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Fn);zn.prototype.kind_="captions",zn.prototype.controlText_="Captions",qe.registerComponent("CaptionsButton",zn);var Gn=function(e){function t(){return e.apply(this,arguments)||this}return ze(t,e),t.prototype.createEl=function(t,i,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),e.prototype.createEl.call(this,t,g({innerHTML:r+="</span>"},i),n)},t}(jn);qe.registerComponent("SubsCapsMenuItem",Gn);var Xn=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(Ue(n.label_)),n}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Wn(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t,Gn)},t}(Fn);Xn.prototype.kinds_=["captions","subtitles"],Xn.prototype.controlText_="Subtitles",qe.registerComponent("SubsCapsButton",Xn);var Jn=function(e){function t(t,i){var n,r=i.track,a=t.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled,(n=e.call(this,t,i)||this).track=r,n.addClass("vjs-"+r.kind+"-menu-item");var s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(Ve(n),t)};return a.addEventListener("change",s),n.on("dispose",function(){a.removeEventListener("change",s)}),n}ze(t,e);var i=t.prototype;return i.createEl=function(t,i,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),e.prototype.createEl.call(this,t,g({innerHTML:r+="</span>"},i),n)},i.handleClick=function(t){var i=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var n=0;n<i.length;n++){var r=i[n];r.enabled=r===this.track}},i.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Nn);qe.registerComponent("AudioTrackMenuItem",Jn);var Yn=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.audioTracks(),e.call(this,t,i)||this}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++)e.push(new Jn(this.player_,{track:t[i],selectable:!0,multiSelectable:!1}));return e},t}(Rn);Yn.prototype.controlText_="Audio Track",qe.registerComponent("AudioTrackButton",Yn);var Kn=function(e){function t(t,i){var n,r=i.rate,a=parseFloat(r,10);return i.label=r,i.selected=1===a,i.selectable=!0,i.multiSelectable=!1,(n=e.call(this,t,i)||this).label=r,n.rate=a,n.on(t,"ratechange",n.update),n}ze(t,e);var i=t.prototype;return i.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Nn);Kn.prototype.contentElType="button",qe.registerComponent("PlaybackRateMenuItem",Kn);var $n=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateVisibility(),n.updateLabel(),n.on(t,"loadstart",n.updateVisibility),n.on(t,"ratechange",n.updateLabel),n}ze(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=x("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},i.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},i.createMenu=function(){var e=new Dn(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;i>=0;i--)e.addChild(new Kn(this.player(),{rate:t[i]+"x"}));return e},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),n=i[0],r=0;r<i.length;r++)if(i[r]>t){n=i[r];break}this.player().playbackRate(n)},i.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(Ln);$n.prototype.controlText_="Playback Rate",qe.registerComponent("PlaybackRateMenuButton",$n);var Qn=function(e){function t(){return e.apply(this,arguments)||this}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(qe);qe.registerComponent("Spacer",Qn),qe.registerComponent("CustomControlSpacer",function(e){function t(){return e.apply(this,arguments)||this}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(Qn));var Zn=function(e){function t(){return e.apply(this,arguments)||this}return ze(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(qe);Zn.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in l&&Zn.prototype.options_.children.splice(Zn.prototype.options_.children.length-1,0,"pictureInPictureToggle"),qe.registerComponent("ControlBar",Zn);var er=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"error",n.open),n}ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},i.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Pt);er.prototype.options_=d({},Pt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),qe.registerComponent("ErrorDisplay",er);var tr="vjs-text-track-settings",ir=["#000","Black"],nr=["#00F","Blue"],rr=["#0FF","Cyan"],ar=["#0F0","Green"],sr=["#F0F","Magenta"],or=["#F00","Red"],lr=["#FFF","White"],ur=["#FF0","Yellow"],cr=["1","Opaque"],hr=["0.5","Semi-Transparent"],dr=["0","Transparent"],pr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ir,lr,or,ar,nr,ur,sr,rr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[cr,hr,dr]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[lr,ir,or,ar,nr,ur,sr,rr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[cr,hr]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[dr,hr,cr]}};function fr(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}pr.windowColor.options=pr.backgroundColor.options,qe.registerComponent("TextTrackSettings",function(e){function t(t,i){var n;return i.temporary=!1,(n=e.call(this,t,i)||this).updateDisplay=Se(Ve(n),n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=x("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===i.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),m(pr,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}ze(t,e);var i=t.prototype;return i.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},i.createElSelect_=function(e,t,i){var n=this;void 0===t&&(t=""),void 0===i&&(i="label");var r=pr[e],a=r.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return["<"+i+' id="'+a+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map(function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},i.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return x("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return x("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var e=this.localize("restore all settings to the default values");return x("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var e,t,i,n=this;return t=function(e,t,i){var r,a=fr((r=n.$(t.selector)).options[r.options.selectedIndex].value,t.parser);return void 0!==a&&(e[i]=a),e},void 0===(i={})&&(i=0),f(e=pr).reduce(function(i,n){return t(i,e[n],n)},i)},i.setValues=function(e){var t=this;m(pr,function(i,n){!function(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(fr(e.options[n].value,i)===t){e.selectedIndex=n;break}}(t.$(i.selector),e[n],i.parser)})},i.setDefaults=function(){var e=this;m(pr,function(t){var i=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=i})},i.restoreSettings=function(){var e;try{e=JSON.parse(a.localStorage.getItem(tr))}catch(t){c.warn(t)}e&&this.setValues(e)},i.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?a.localStorage.setItem(tr,JSON.stringify(e)):a.localStorage.removeItem(tr)}catch(t){c.warn(t)}}},i.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()},t}(Pt)),qe.registerComponent("ResizeManager",function(e){function t(t,i){var n,r=i.ResizeObserver||a.ResizeObserver;null===i.ResizeObserver&&(r=!1);var s=Fe({createEl:!r,reportTouchActivity:!1},i);return(n=e.call(this,t,s)||this).ResizeObserver=i.ResizeObserver||a.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=function(e,t,i,n){var r;void 0===n&&(n=a);var s=function(){var t=this,i=arguments,a=function(){r=null,a=null,e.apply(t,i)};n.clearTimeout(r),r=n.setTimeout(a,100)};return s.cancel=function(){n.clearTimeout(r),r=null},s}(function(){n.resizeHandler()},0,0,Ve(n)),r?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(t.el())):(n.loadListener_=function(){if(n.el_&&n.el_.contentWindow){var e=n.debouncedHandler_,t=n.unloadListener_=function(){me(this,"resize",e),me(this,"unload",t),t=null};fe(n.el_.contentWindow,"unload",t),fe(n.el_.contentWindow,"resize",e)}},n.one("load",n.loadListener_)),n}ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},i.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(qe));var mr={trackingThreshold:30,liveTolerance:15};qe.registerComponent("LiveTracker",function(e){function t(t,i){var n,r=Fe(mr,i,{createEl:!1});return(n=e.call(this,t,r)||this).reset_(),n.on(n.player_,"durationchange",n.handleDurationchange),rt&&"hidden"in l&&"visibilityState"in l&&n.on(l,"visibilitychange",n.handleVisibilityChange),n}ze(t,e);var i=t.prototype;return i.handleVisibilityChange=function(){this.player_.duration()===1/0&&(l.hidden?this.stopTracking():this.startTracking())},i.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(a.performance.now().toFixed(4)),i=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;var n=this.liveCurrentTime(),r=this.player_.currentTime(),s=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-r)>this.options_.liveTolerance;this.timeupdateSeen_&&n!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}},i.handleDurationchange=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},i.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,Te),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked):(this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)))},i.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked)},i.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=!this.skipNextSeeked_&&e>2,this.skipNextSeeked_=!1,this.trackLive_()},i.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},i.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.skipNextSeeked_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLive_),this.off(this.player_,"seeked",this.handleSeeked),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate),this.off(this.player_,"timeupdate",this.seekToLiveEdge)},i.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},i.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0},i.seekableStart=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0},i.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},i.isLive=function(){return this.isTracking()},i.atLiveEdge=function(){return!this.behindLiveEdge()},i.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},i.behindLiveEdge=function(){return this.behindLiveEdge_},i.isTracking=function(){return"number"==typeof this.trackingInterval_},i.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))},i.dispose=function(){this.off(l,"visibilitychange",this.handleVisibilityChange),this.stopTracking(),e.prototype.dispose.call(this)},t}(qe));var gr,vr=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),n=[],r="";if(!i.length)return!1;for(var a=0;a<i.length;a++){var s=i[a].src;s&&-1===n.indexOf(s)&&n.push(s)}return!!n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),!0)},yr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=l.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=l.createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",a.Element.prototype.appendChild.call(this,i),this.innerHTML}}),_r=function(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i},br=function(e){var t=e.el();if(!t.resetSourceWatch_){var i={},n=function(e){return _r([e.el(),a.HTMLMediaElement.prototype,a.Element.prototype,yr],"innerHTML")}(e),r=function(i){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i.apply(t,r);return vr(e),s}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){t[e]&&(i[e]=t[e],t[e]=r(i[e]))}),Object.defineProperty(t,"innerHTML",Fe(n,{set:r(n.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(i).forEach(function(e){t[e]=i[e]}),Object.defineProperty(t,"innerHTML",n)},e.one("sourceset",t.resetSourceWatch_)}},Tr=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?zt(a.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return a.Element.prototype.setAttribute.call(this,"src",e),e}}),Sr=function(e,t,i,n){void 0===n&&(n=!0);var r=function(i){return Object.defineProperty(e,t,{value:i,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var e=i();return r(e),e}};return n&&(a.set=r),Object.defineProperty(e,t,a)},wr=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;var r=t.source,a=!1;if(r&&(n.el_.currentSrc!==r.src||t.tag&&3===t.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),t.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){for(var s=n.el_.childNodes,o=s.length,l=[];o--;){var u=s[o];"track"===u.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(u),n.remoteTextTracks().addTrack(u.track),n.textTracks().addTrack(u.track),a||n.el_.hasAttribute("crossorigin")||!Xt(u.src)||(a=!0)):l.push(u))}for(var h=0;h<l.length;h++)n.el_.removeChild(l[h])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&a&&c.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(ot||ut||Ze)&&!0===t.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}ze(t,e);var i=t.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){!function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var i=function(e){return _r([e.el(),a.HTMLMediaElement.prototype,Tr],"src")}(e),n=t.setAttribute,r=t.load;Object.defineProperty(t,"src",Fe(i,{set:function(n){var r=i.set.call(t,n);return e.triggerSourceset(t.src),r}})),t.setAttribute=function(i,r){var a=n.call(t,i,r);return/src/i.test(i)&&e.triggerSourceset(t.src),a},t.load=function(){var i=r.call(t);return vr(e)||(e.triggerSourceset(""),br(e)),i},t.currentSrc?e.triggerSourceset(t.currentSrc):vr(e)||br(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=r,t.setAttribute=n,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),i=function(){e=[];for(var i=0;i<t.length;i++){var n=t[i];"metadata"===n.kind&&e.push({track:n,storedMode:n.mode})}};i(),t.addEventListener("change",i),this.on("dispose",function(){return t.removeEventListener("change",i)});var n=function i(){for(var n=0;n<e.length;n++){var r=e[n];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",i)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",i),t.removeEventListener("change",n),t.addEventListener("change",n)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",i),t.addEventListener("change",i),t.removeEventListener("change",n)})},i.overrideNative_=function(e,t){var i=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){i.el()[n+"Tracks"].removeEventListener(e,i[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},i.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},i.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},i.proxyNativeTracksForType_=function(e){var t=this,i=li[e],n=this.el()[i.getterName],r=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&n&&n.addEventListener){var a={change:function(i){var n={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(n),"text"===e&&t[ui.remoteText.getterName]().trigger(n)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},s=function(){for(var e=[],t=0;t<r.length;t++){for(var i=!1,a=0;a<n.length;a++)if(n[a]===r[t]){i=!0;break}i||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[i.getterName+"Listeners_"]=a,Object.keys(a).forEach(function(e){var i=a[e];n.addEventListener(e,i),t.on("dispose",function(t){return n.removeEventListener(e,i)})}),this.on("loadstart",s),this.on("dispose",function(e){return t.off("loadstart",s)})}},i.proxyNativeTracks_=function(){var e=this;li.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},i.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),t.disposeMediaElement(e),e=i}else{e=l.createElement("video");var n=Fe({},this.options_.tag&&R(this.options_.tag));ot&&!0===this.options_.nativeControlsForTouch||delete n.controls,L(e,g(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&N(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],a=0;a<r.length;a++){var s=r[a],o=this.options_[s];void 0!==o&&(o?N(e,s,s):j(e,s),e[s]=o)}return e},i.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},i.setScrubbing=function(e){this.isScrubbing_=e},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&ht?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){c(t,"Video is not ready. (Video.js)")}},i.duration=function(){var e=this;return this.el_.duration===1/0&&$e&&it&&0===this.el_.currentTime?(this.on("timeupdate",function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN):this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)})}},i.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=a.navigator&&a.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},i.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)xt(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},i.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},i.reset=function(){t.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(e){this.el_.controls=!!e},i.addTextTrack=function(t,i,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,i,n):e.prototype.addTextTrack.call(this,t,i,n)},i.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var i=l.createElement("track");return t.kind&&(i.kind=t.kind),t.label&&(i.label=t.label),(t.language||t.srclang)&&(i.srclang=t.language||t.srclang),t.default&&(i.default=t.default),t.id&&(i.id=t.id),t.src&&(i.src=t.src),i},i.addRemoteTextTrack=function(t,i){var n=e.prototype.addRemoteTextTrack.call(this,t,i);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},i.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var i=this.$$("track"),n=i.length;n--;)t!==i[n]&&t!==i[n].track||this.el().removeChild(i[n])},i.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),a.performance&&"function"==typeof a.performance.now?e.creationTime=a.performance.now():a.performance&&a.performance.timing&&"number"==typeof a.performance.timing.navigationStart&&(e.creationTime=a.Date.now()-a.performance.timing.navigationStart),e},t}(Hi);Sr(wr,"TEST_VID",function(){if(S()){var e=l.createElement("video"),t=l.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}}),wr.isSupported=function(){try{wr.TEST_VID.volume=.5}catch(e){return!1}return!(!wr.TEST_VID||!wr.TEST_VID.canPlayType)},wr.canPlayType=function(e){return wr.TEST_VID.canPlayType(e)},wr.canPlaySource=function(e,t){return wr.canPlayType(e.type)},wr.canControlVolume=function(){try{var e=wr.TEST_VID.volume;return wr.TEST_VID.volume=e/2+.1,e!==wr.TEST_VID.volume}catch(t){return!1}},wr.canMuteVolume=function(){try{var e=wr.TEST_VID.muted;return wr.TEST_VID.muted=!e,wr.TEST_VID.muted?N(wr.TEST_VID,"muted","muted"):j(wr.TEST_VID,"muted"),e!==wr.TEST_VID.muted}catch(t){return!1}},wr.canControlPlaybackRate=function(){if($e&&it&&nt<58)return!1;try{var e=wr.TEST_VID.playbackRate;return wr.TEST_VID.playbackRate=e/2+.1,e!==wr.TEST_VID.playbackRate}catch(t){return!1}},wr.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(l.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(l.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(l.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(l.createElement("audio"),"innerHTML",{get:e,set:e})}catch(t){return!1}return!0},wr.supportsNativeTextTracks=function(){return ht||ct&&it},wr.supportsNativeVideoTracks=function(){return!(!wr.TEST_VID||!wr.TEST_VID.videoTracks)},wr.supportsNativeAudioTracks=function(){return!(!wr.TEST_VID||!wr.TEST_VID.audioTracks)},wr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[1];Sr(wr.prototype,e[0],function(){return wr[t]()},!0)}),wr.prototype.movingMediaElementInDOM=!ct,wr.prototype.featuresFullscreenResize=!0,wr.prototype.featuresProgressEvents=!0,wr.prototype.featuresTimeupdateEvents=!0,wr.patchCanPlayType=function(){Qe>=4&&!et&&!it&&(gr=wr.TEST_VID&&wr.TEST_VID.constructor.prototype.canPlayType,wr.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":gr.call(this,e)})},wr.unpatchCanPlayType=function(){var e=wr.TEST_VID.constructor.prototype.canPlayType;return gr&&(wr.TEST_VID.constructor.prototype.canPlayType=gr),e},wr.patchCanPlayType(),wr.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(t){}}()}},wr.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){wr.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){wr.prototype["set"+Ue(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){wr.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){wr.prototype["set"+Ue(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){wr.prototype[e]=function(){return this.el_[e]()}}),Hi.withSourceHandlers(wr),wr.nativeSourceHandler={},wr.nativeSourceHandler.canPlayType=function(e){try{return wr.TEST_VID.canPlayType(e)}catch(t){return""}},wr.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return wr.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=Gt(e.src);return wr.nativeSourceHandler.canPlayType("video/"+i)}return""},wr.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},wr.nativeSourceHandler.dispose=function(){},wr.registerSourceHandler(wr.nativeSourceHandler),Hi.registerTech("Html5",wr);var Cr=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],kr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},xr=["tiny","xsmall","small","medium","large","xlarge","huge"],Er={};xr.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Er[e]="vjs-layout-"+t});var Ar={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Pr=function(t){function i(n,r,a){var s;if(n.id=n.id||r.id||"vjs_video_"+oe(),(r=g(i.getTagSettings(n),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof n.closest){var o=n.closest("[lang]");o&&o.getAttribute&&(r.language=o.getAttribute("lang"))}else for(var u=n;u&&1===u.nodeType;){if(R(u).hasOwnProperty("lang")){r.language=u.getAttribute("lang");break}u=u.parentNode}if((s=t.call(this,null,r,a)||this).boundDocumentFullscreenChange_=function(e){return s.documentFullscreenChange_(e)},s.boundFullWindowOnEscKey_=function(e){return s.fullWindowOnEscKey(e)},s.isFullscreen_=!1,s.log=h(s.id_),s.fsApi_=yt,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=n,s.tagAttributes=n&&R(n),s.language(s.options_.language),r.languages){var c={};Object.getOwnPropertyNames(r.languages).forEach(function(e){c[e.toLowerCase()]=r.languages[e]}),s.languages_=c}else s.languages_=i.prototype.options_.languages;s.resetCache_(),s.poster_=r.poster||"",s.controls_=!!r.controls,n.controls=!1,n.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],n.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach(function(e){if("function"!=typeof s[e])throw new Error('plugin "'+e+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),Re(Ve(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(fe(l,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.updateStyleEl_);var d=Fe(s.options_);r.plugins&&Object.keys(r.plugins).forEach(function(e){s[e](r.plugins[e])}),r.debug&&s.debug(!0),s.options_.playerOptions=d,s.middleware_=[],s.initChildren(),s.isAudio("audio"===n.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),ot&&s.addClass("vjs-touch-enabled"),ct||s.addClass("vjs-workinghover"),i.players[s.id_]=Ve(s);var p=e.split(".")[0];return s.addClass("vjs-v"+p),s.userActive(!0),s.reportUserActivity(),s.one("play",s.listenForUserActivity_),s.on("stageclick",s.handleStageClick_),s.on("keydown",s.handleKeyDown),s.on("languagechange",s.handleLanguagechange),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s}ze(i,t);var n=i.prototype;return n.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),me(l,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),me(l,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),i.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Vi[this.id()]=null,ci.names.forEach(function(t){var i=e[ci[t].getterName]();i&&i.off&&i.off()}),t.prototype.dispose.call(this)},n.createEl=function(){var e,i=this.tag,n=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();n?e=this.el_=i.parentNode:r||(e=this.el_=t.prototype.createEl.call(this,"div"));var s=R(i);if(r){for(e=this.el_=i,i=this.tag=l.createElement("video");e.children.length;)i.appendChild(e.firstChild);P(e,"video-js")||O(e,"video-js"),e.appendChild(i),n=this.playerElIngest_=e,Object.keys(e).forEach(function(t){try{i[t]=e[t]}catch(n){}})}if(i.setAttribute("tabindex","-1"),s.tabindex="-1",(rt||it&&st)&&(i.setAttribute("role","application"),s.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(t){r&&"class"===t||e.setAttribute(t,s[t]),r&&i.setAttribute(t,s[t])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=e.player=this,this.addClass("vjs-paused"),!0!==a.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=re("vjs-styles-dimensions");var o=K(".vjs-styles-defaults"),u=K("head");u.insertBefore(this.styleEl_,o?o.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var c=i.getElementsByTagName("a"),h=0;h<c.length;h++){var d=c.item(h);O(d,"vjs-hidden"),d.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!n&&i.parentNode.insertBefore(e,i),A(i,e),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_=e,e},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):c.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t||"auto"===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?c.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},n.fluid=function(e){var t,i,n=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,xe(this)&&this.off(["playerreset","resize"],this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),i=function(){n.on(["playerreset","resize"],n.updateStyleEl_)},xe(t=this)?i():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(i))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==a.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,i,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=n[1]/n[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),ae(this.styleEl_,"\n      ."+i+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(s>=0&&(l.width=s),o>=0&&(l.height=o))}},n.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var n=Ue(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(Hi.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};ci.names.forEach(function(e){var t=ci[e];a[t.getterName]=i[t.privateName]}),g(a,this.options_[n]),g(a,this.options_[r]),g(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);var s,o=Hi.getTech(e);if(!o)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new o(a),this.tech_.ready(Se(this,this.handleTechReady_),!0),s=this.tech_,(this.textTracksJson_||[]).forEach(function(e){var t=s.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),s.textTracks(),Cr.forEach(function(e){i.on(i.tech_,e,i["handleTech"+Ue(e)+"_"])}),Object.keys(kr).forEach(function(e){i.on(i.tech_,e,function(t){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+kr[e]+"_"].bind(i),event:t}):i["handleTech"+kr[e]+"_"](t)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||A(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e,t,i,n=this;ci.names.forEach(function(e){var t=ci[e];n[t.privateName]=n[t.getterName]()}),this.textTracksJson_=(t=(e=this.tech_).$$("track"),i=Array.prototype.map.call(t,function(e){return e.track}),Array.prototype.map.call(t,function(e){var t=Et(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(Et))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&c.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var i,n=function(){var e=t.muted();t.muted(!0);var i=function(){t.muted(e)};t.playTerminatedQueue_.push(i);var n=t.play();if(kt(n))return n.catch(i)};if("any"===e&&!0!==this.muted()?kt(i=this.play())&&(i=i.catch(n)):i="muted"===e&&!0!==this.muted()?n():this.play(),kt(i))return i.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(i){t.trigger({type:"autoplay-failure",autoplay:e})})}},n.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var a=n[r];if(a.type&&a.src&&a.src===t)return a.type}return Zi(t)}(this,t)),this.cache_.source=Fe({},e,{src:t,type:i});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var l=R(a[o]);r.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var i=function(e){return t.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(i=function(){}),i(r),e.src||this.tech_.any(["sourceset","loadstart"],function(e){if("sourceset"!==e.type){var i=t.techGet("currentSrc");t.lastSource_.tech=i,t.updateSourceCaches_(i)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",function i(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",i))})},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(c.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){J(e)&&this.controls_&&(this.paused()?xt(this.play()):this.pause())},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var i=this.el(),n=l[this.fsApi_.fullscreenElement]===i;!n&&i.matches?n=i.matches(":"+this.fsApi_.fullscreen):!n&&i.msMatchesSelector&&(n=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}},n.handleTechFullscreenChange_=function(e,t){t&&(t.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},n.techCall_=function(e,t){this.ready(function(){if(e in Ji)return function(e,t,i,n){return t[i](e.reduce(Ki(i),n))}(this.middleware_,this.tech_,e,t);if(e in Yi)return Gi(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw c(i),i}},!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Xi)return function(e,t,i){return e.reduceRight(Ki(i),t[i]())}(this.middleware_,this.tech_,e);if(e in Yi)return Gi(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw c("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw c("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw c(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||a.Promise;return t?new t(function(t){e.play_(t)}):this.play_()},n.play_=function(e){var t=this;void 0===e&&(e=xt),this.playCallbacks_.push(e);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(i||!ht&&!ct||this.load());var n=this.techGet_("play");null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||mt(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.applyInitTime_),void this.one("canplay",this.applyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=mt(0,0)),e},n.bufferedPercent=function(){return gt(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return i>t&&(i=t),i},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},n.requestFullscreen=function(e){var t=this.options_.Promise||a.Promise;if(t){var i=this;return new t(function(t,n){function r(){i.off("fullscreenerror",s),i.off("fullscreenchange",a)}function a(){r(),t()}function s(e,t){r(),n(t)}i.one("fullscreenchange",a),i.one("fullscreenerror",s);var o=i.requestFullscreenHelper_(e);if(o)return o.then(r,r),o})}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var t,i=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](t);return n&&n.then(function(){return i.isFullscreen(!0)},function(){return i.isFullscreen(!1)}),n}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||a.Promise;if(e){var t=this;return new e(function(e,i){function n(){t.off("fullscreenerror",a),t.off("fullscreenchange",r)}function r(){n(),e()}function a(e,t){n(),i(t)}t.one("fullscreenchange",r),t.one("fullscreenerror",a);var s=t.exitFullscreenHelper_();if(s)return s.then(n,n),s})}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=l[this.fsApi_.exitFullscreen]();return t&&t.then(function(){return e.isFullscreen(!1)}),t}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=l.documentElement.style.overflow,fe(l,"keydown",this.boundFullWindowOnEscKey_),l.documentElement.style.overflow="hidden",O(l.body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){At.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,me(l,"keydown",this.boundFullWindowOnEscKey_),l.documentElement.style.overflow=this.docOrigOverflow,I(l.body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in l&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in l)return l.exitPictureInPicture()},n.handleKeyDown=function(e){var t,i,n=this.options_.userActions;n&&n.hotkeys&&(i=(t=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),t.isContentEditable||("input"===i?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(i))||("function"==typeof n.hotkeys?n.hotkeys.call(this,e):this.handleHotkeys(e)))},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},i=t.fullscreenKey,n=t.muteKey,r=void 0===n?function(e){return At.isEventKey(e,"m")}:n,a=t.playPauseKey,s=void 0===a?function(e){return At.isEventKey(e,"k")||At.isEventKey(e,"Space")}:a;if((void 0===i?function(e){return At.isEventKey(e,"f")}:i).call(this,e)){e.preventDefault(),e.stopPropagation();var o=qe.getComponent("FullscreenToggle");!1!==l[this.fsApi_.fullscreenEnabled]&&o.prototype.handleClick.call(this,e)}else r.call(this,e)?(e.preventDefault(),e.stopPropagation(),qe.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),qe.getComponent("PlayToggle").prototype.handleClick.call(this,e))},n.canPlayType=function(e){for(var t,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],a=Hi.getTech(r);if(a||(a=qe.getComponent(r)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else c.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){var t,i=this,n=this.options_.techOrder.map(function(e){return[e,Hi.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];return i?i.isSupported():(c.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(e,t,i){var n;return e.some(function(e){return t.some(function(t){if(n=i(e,t))return!0})}),n},a=function(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}};return(this.options_.sourceOrder?r(e,n,(t=a,function(e,i){return t(i,e)})):r(n,e,a))||!1},n.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var i=en(e);i.length?(this.changingSrc_=!0,this.cache_.sources=i,this.updateSourceCaches_(i[0]),zi(this,i[0],function(e,n){var r;if(t.middleware_=n,t.cache_.sources=i,t.updateSourceCaches_(e),t.src_(e))return i.length>1?t.src(i.slice(1)):(t.changingSrc_=!1,t.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void t.triggerReady());r=t.tech_,n.forEach(function(e){return e.setTech&&e.setTech(r)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},n.src_=function(e){var t,i=this,n=this.selectSource([e]);return!n||(t=this.techName_,Ue(n.tech)!==Ue(t)?(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){i.changingSrc_=!1}),!1):(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||a.Promise;this.paused()||!t?this.doReset_():xt(this.play().then(function(){return e.doReset_()}))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),xe(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,i=e.remainingTimeDisplay;t&&t.updateContent(),i&&i.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&4===e.code){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new wt(e),this.addClass("vjs-error"),c.error("(CODE:"+this.error_.code+" "+wt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,i,n=Se(this,this.reportUserActivity),r=function(t){n(),this.clearInterval(e)};this.on("mousedown",function(){n(),this.clearInterval(e),e=this.setInterval(n,250)}),this.on("mousemove",function(e){e.screenX===t&&e.screenY===i||(t=e.screenX,i=e.screenY,n())}),this.on("mouseup",r),this.on("mouseleave",r);var a,s=this.getChild("controlBar");!s||ct||$e||(s.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),s.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),xe(this)&&this.trigger("languagechange"))},n.languages=function(){return Fe(i.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=Fe(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=Fe(n)).player=void 0,e.tracks[i]=n}return e},n.createModal=function(e,t){var i=this;(t=t||{}).content=e||"";var n=new Pt(this,t);return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),i=0;i<xr.length;i++){var n=xr[i];if(t<=this.breakpoints_[n]){if(e===n)return;e&&this.removeClass(Er[e]),this.addClass(Er[n]),this.breakpoint_=n;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=g({},Ar,e),this.updateCurrentBreakpoint_()),g(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return Er[this.breakpoint_]||""},n.loadMedia=function(e,t){var i=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Fe(e);var n=this.cache_.media,r=n.poster,a=n.src,s=n.textTracks;!n.artwork&&r&&(this.cache_.media.artwork=[{src:r,type:Zi(r)}]),a&&this.src(a),r&&this.poster(r),Array.isArray(s)&&s.forEach(function(e){return i.addRemoteTextTrack(e,!1)}),this.ready(t)}},n.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Zi(t.poster)}]),t}return Fe(this.cache_.media)},i.getTagSettings=function(e){var t={sources:[],tracks:[]},i=R(e),n=i["data-setup"];if(P(e,"vjs-fill")&&(i.fill=!0),P(e,"vjs-fluid")&&(i.fluid=!0),null!==n){var r=function(e,t){var i,n=null;try{i=JSON.parse(e,void 0)}catch(a){n=a}return[n,i]}(n||"{}"),a=r[0],s=r[1];a&&c.error(a),g(i,s)}if(g(t,i),e.hasChildNodes())for(var o=e.childNodes,l=0,u=o.length;l<u;l++){var h=o[l],d=h.nodeName.toLowerCase();"source"===d?t.sources.push(R(h)):"track"===d&&t.tracks.push(R(h))}return t},n.flexNotSupported_=function(){var e=l.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},i}(qe);ci.names.forEach(function(e){var t=ci[e];Pr.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Pr.prototype.crossorigin=Pr.prototype.crossOrigin,Pr.players={};var Or=a.navigator;Pr.prototype.options_={techOrder:Hi.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Or&&(Or.languages&&Or.languages[0]||Or.userLanguage||Or.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Pr.prototype[e]=function(){return this.techGet_(e)}}),Cr.forEach(function(e){Pr.prototype["handleTech"+Ue(e)+"_"]=function(){return this.trigger(e)}}),qe.registerComponent("Player",Pr);var Ir=n(function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(i,n)}e.exports=t}),Dr=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}},Lr=n(function(e){function t(i,n,r){return e.exports=t=Dr()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&Ir(r,i.prototype),r},t.apply(null,arguments)}e.exports=t}),Rr="plugin",Mr={},Nr=function(e){return Mr.hasOwnProperty(e)},jr=function(e){return Nr(e)?Mr[e]:void 0},Ur=function(e,t){e.activePlugins_=e.activePlugins_||{},e.activePlugins_[t]=!0},Fr=function(e,t,i){var n=(i?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},Br=function(e,t){return t.prototype.name=e,function(){Fr(this,{name:e,plugin:t,instance:null},!0);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var a=Lr(t,[this].concat(n));return this[e]=function(){return a},Fr(this,a.getEventHash()),a}},Hr=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Re(this),delete this.trigger,Ne(this,this.constructor.defaultState),Ur(t,this.name),this.dispose=Se(this,this.dispose),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),ge(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t.activePlugins_[e]=!1,this.player=this.state=null,t[e]=Br(e,Mr[e])},e.isBasic=function(t){var i="string"==typeof t?jr(t):t;return"function"==typeof i&&!e.prototype.isPrototypeOf(i.prototype)},e.registerPlugin=function(t,i){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Nr(t))c.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Pr.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof i+".");return Mr[t]=i,t!==Rr&&(Pr.prototype[t]=e.isBasic(i)?function(e,t){var i=function(){Fr(this,{name:e,plugin:t,instance:null},!0);var i=t.apply(this,arguments);return Ur(this,e),Fr(this,{name:e,plugin:t,instance:i}),i};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i}(t,i):Br(t,i)),i},e.deregisterPlugin=function(e){if(e===Rr)throw new Error("Cannot de-register base plugin.");Nr(e)&&(delete Mr[e],delete Pr.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(Mr)),e.forEach(function(e){var i=jr(e);i&&((t=t||{})[e]=i)}),t},e.getPluginVersion=function(e){var t=jr(e);return t&&t.VERSION||""},e}();Hr.getPlugin=jr,Hr.BASE_PLUGIN_NAME=Rr,Hr.registerPlugin(Rr,Hr),Pr.prototype.usingPlugin=function(e){return!!this.activePlugins_&&!0===this.activePlugins_[e]},Pr.prototype.hasPlugin=function(e){return!!Nr(e)};var qr=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Vr(e,t,i){var n=Vr.getPlayer(e);if(n)return t&&c.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&n.ready(i),n;var r="string"==typeof e?K("#"+qr(e)):e;if(!w(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||c.warn("The element supplied is not included in the DOM"),t=t||{},Vr.hooks("beforesetup").forEach(function(e){var i=e(r,Fe(t));v(i)&&!Array.isArray(i)?t=Fe(t,i):c.error("please return an object in beforesetup hooks")});var a=qe.getComponent("Player");return n=new a(r,t,i),Vr.hooks("setup").forEach(function(e){return e(n)}),n}if(Vr.hooks_={},Vr.hooks=function(e,t){return Vr.hooks_[e]=Vr.hooks_[e]||[],t&&(Vr.hooks_[e]=Vr.hooks_[e].concat(t)),Vr.hooks_[e]},Vr.hook=function(e,t){Vr.hooks(e,t)},Vr.hookOnce=function(e,t){Vr.hooks(e,[].concat(t).map(function(t){return function i(){return Vr.removeHook(e,i),t.apply(void 0,arguments)}}))},Vr.removeHook=function(e,t){var i=Vr.hooks(e).indexOf(t);return!(i<=-1||((Vr.hooks_[e]=Vr.hooks_[e].slice()).splice(i,1),0))},!0!==a.VIDEOJS_NO_DYNAMIC_STYLE&&S()){var Wr=K(".vjs-styles-defaults");if(!Wr){Wr=re("vjs-styles-defaults");var zr=K("head");zr&&zr.insertBefore(Wr,zr.firstChild),ae(Wr,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}te(1,Vr),Vr.VERSION=e,Vr.options=Pr.prototype.options_,Vr.getPlayers=function(){return Pr.players},Vr.getPlayer=function(e){var t,i=Pr.players;if("string"==typeof e){var n=qr(e),r=i[n];if(r)return r;t=K("#"+n)}else t=e;if(w(t)){var a=t.player,s=t.playerId;if(a||i[s])return a||i[s]}},Vr.getAllPlayers=function(){return Object.keys(Pr.players).map(function(e){return Pr.players[e]}).filter(Boolean)},Vr.players=Pr.players,Vr.getComponent=qe.getComponent,Vr.registerComponent=function(e,t){Hi.isTech(t)&&c.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),qe.registerComponent.call(qe,e,t)},Vr.getTech=Hi.getTech,Vr.registerTech=Hi.registerTech,Vr.use=function(e,t){qi[e]=qi[e]||[],qi[e].push(t)},Object.defineProperty(Vr,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Vr.middleware,"TERMINATOR",{value:Wi,writeable:!1,enumerable:!0}),Vr.browser=dt,Vr.TOUCH_ENABLED=ot,Vr.extend=function(e,t){void 0===t&&(t={});var i=function(){e.apply(this,arguments)},n={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),n=t):"function"==typeof t&&(i=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}(i,e),e&&(i.super_=e),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},Vr.mergeOptions=Fe,Vr.bind=Se,Vr.registerPlugin=Hr.registerPlugin,Vr.deregisterPlugin=Hr.deregisterPlugin,Vr.plugin=function(e,t){return c.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Hr.registerPlugin(e,t)},Vr.getPlugins=Hr.getPlugins,Vr.getPlugin=Hr.getPlugin,Vr.getPluginVersion=Hr.getPluginVersion,Vr.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),(Vr.options.languages=Fe(Vr.options.languages,((i={})[e]=t,i)))[e]},Vr.log=c,Vr.createLogger=h,Vr.createTimeRange=Vr.createTimeRanges=mt,Vr.formatTime=pn,Vr.setFormatTime=function(e){dn=e},Vr.resetFormatTime=function(){dn=hn},Vr.parseUrl=Wt,Vr.isCrossOrigin=Xt,Vr.EventTarget=Ce,Vr.on=fe,Vr.one=ve,Vr.off=me,Vr.trigger=ge,Vr.xhr=$t,Vr.TextTrack=ri,Vr.AudioTrack=ai,Vr.VideoTrack=si,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Vr[e]=function(){return c.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Q[e].apply(null,arguments)}}),Vr.computedStyle=_,Vr.dom=Q,Vr.url=Jt,Vr.defineLazyProperty=Sr;var Gr,Xr=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},Jr=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},Yr=void 0!==t?t:"undefined"!=typeof window?window:{};"undefined"!=typeof document?Gr=document:(Gr=Yr["__GLOBAL_DOCUMENT_CACHE@4"])||(Gr=Yr["__GLOBAL_DOCUMENT_CACHE@4"]=s);var Kr=Gr,$r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function Qr(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var Zr,ea=Qr(n(function(e,t){!function(t){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,n=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=n.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,h=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(h)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s}()})),ta=Qr(a),ia=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=ea.buildAbsoluteURL(ta.location&&ta.location.href||"",e)),ea.buildAbsoluteURL(e,t))},na=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),ra=(Zr=a)&&"object"==typeof Zr&&"default"in Zr?Zr.default:Zr,aa=function(e){for(var t,i=(t=e,ra.atob?ra.atob(t):Buffer.from(t,"base64").toString("binary")),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n},sa=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return ze(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(na),oa=function(e){for(var t,i=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((t=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},la=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}ze(t,e);var i=t.prototype;return i.push=function(e){var t,i,n=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce(function(t,i){var n=i(e);return n===e?t:t.concat([n])},[e]).forEach(function(e){for(var r=0;r<n.customParsers.length;r++)if(n.customParsers[r].call(n,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void n.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"totalduration"},t[1]&&(i.duration=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void n.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"byterange"},t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),void n.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"map"},t[1]){var a=oa(t[1]);if(a.URI&&(i.uri=a.URI),a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=s[0],l=s[1];i.byterange={},o&&(i.byterange.length=parseInt(o,10)),l&&(i.byterange.offset=parseInt(l,10))}}n.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=oa(t[1]),i.attributes.RESOLUTION){var u=i.attributes.RESOLUTION.split("x"),c={};u[0]&&(c.width=parseInt(u[0],10)),u[1]&&(c.height=parseInt(u[1],10)),i.attributes.RESOLUTION=c}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}n.trigger("data",i)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=oa(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e))n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=oa(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void n.trigger("data",i);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=oa(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return(i={type:"tag",tagType:"cue-out-cont"}).data=t[1]?t[1]:"",void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return(i={type:"tag",tagType:"cue-out"}).data=t[1]?t[1]:"",void n.trigger("data",i);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return(i={type:"tag",tagType:"cue-in"}).data=t[1]?t[1]:"",void n.trigger("data",i);n.trigger("data",{type:"tag",data:e.slice(4)})}}}else n.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))},i.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:a}),!0})},i.addTagMapper=function(e){var t=e.expression,i=e.map;this.tagMappers.push(function(e){return t.test(e)?i(e):e})},t}(na),ua=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new sa,t.parseStream=new la,t.lineStream.pipe(t.parseStream);var i,n,r=Ve(t),a=[],s={},o=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var c=0;return t.parseStream.on("data",function(e){var t,h;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(e.offset=c)),"offset"in e&&(s.byterange=t,t.offset=e.offset),c=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:aa(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,u=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){i={},e.uri&&(i.uri=e.uri),e.byterange&&(i.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(s.attributes||(s.attributes={}),d(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var i=this.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes["GROUP-ID"]]=i[e.attributes["GROUP-ID"]]||{},t=i[e.attributes["GROUP-ID"]],(h={default:/yes/i.test(e.attributes.DEFAULT)}).autoselect=!!h.default||/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(h.language=e.attributes.LANGUAGE),e.attributes.URI&&(h.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(h.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(h.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(h.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=h}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data}}[e.tagType]||o).call(r)},uri:function(){s.uri=e.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),n&&(s.key=n),s.timeline=u,i&&(s.map=i),s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)}),t}ze(t,e);var i=t.prototype;return i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push("\n")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(na),ca=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,n=/^application\/dash\+xml/i;t.simpleTypeFromSourceType=function(e){return i.test(e)?"hls":n.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}});i(ca);var ha=ca.simpleTypeFromSourceType,da=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,pa=new RegExp("[\\-\\.0-9"+da.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),fa=new RegExp("^"+da.source+pa.source+"*(?::"+da.source+pa.source+"*)?$");function ma(){}function ga(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function va(e,t,i,n,r,a){for(var s,o=++t,l=0;;){var u=e.charAt(o);switch(u){case"=":if(1===l)s=e.slice(t,o),l=3;else{if(2!==l)throw new Error("attribute equal must after attrName");l=3}break;case"'":case'"':if(3===l||1===l){if(1===l&&(a.warning('attribute value must after "="'),s=e.slice(t,o)),!((o=e.indexOf(u,t=o+1))>0))throw new Error("attribute value no end '"+u+"' match");c=e.slice(t,o).replace(/&#?\w+;/g,r),i.add(s,c,t-1),l=5}else{if(4!=l)throw new Error('attribute value must after "="');c=e.slice(t,o).replace(/&#?\w+;/g,r),i.add(s,c,t),a.warning('attribute "'+s+'" missed start quot('+u+")!!"),t=o+1,l=5}break;case"/":switch(l){case 0:i.setTagName(e.slice(t,o));case 5:case 6:case 7:l=7,i.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==l&&i.setTagName(e.slice(t,o)),o;case">":switch(l){case 0:i.setTagName(e.slice(t,o));case 5:case 6:case 7:break;case 4:case 1:"/"===(c=e.slice(t,o)).slice(-1)&&(i.closed=!0,c=c.slice(0,-1));case 2:2===l&&(c=s),4==l?(a.warning('attribute "'+c+'" missed quot(")!!'),i.add(s,c.replace(/&#?\w+;/g,r),t)):("http://www.w3.org/1999/xhtml"===n[""]&&c.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),i.add(c,c,t));break;case 3:throw new Error("attribute value missed!!")}return o;case"":u=" ";default:if(u<=" ")switch(l){case 0:i.setTagName(e.slice(t,o)),l=6;break;case 1:s=e.slice(t,o),l=2;break;case 4:var c=e.slice(t,o).replace(/&#?\w+;/g,r);a.warning('attribute "'+c+'" missed quot(")!!'),i.add(s,c,t);case 5:l=6}else switch(l){case 2:"http://www.w3.org/1999/xhtml"===n[""]&&s.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),i.add(s,s,t),t=o,l=1;break;case 5:a.warning('attribute space is required"'+s+'"!!');case 6:l=1,t=o;break;case 3:l=4,t=o;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function ya(e,t,i){for(var n=e.tagName,r=null,a=e.length;a--;){var s=e[a],o=s.qName,l=s.value;if((d=o.indexOf(":"))>0)var u=s.prefix=o.slice(0,d),c=o.slice(d+1),h="xmlns"===u&&c;else c=o,u=null,h="xmlns"===o&&"";s.localName=c,!1!==h&&(null==r&&(r={},Ta(i,i={})),i[h]=r[h]=l,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,l))}for(a=e.length;a--;)(u=(s=e[a]).prefix)&&("xml"===u&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(s.uri=i[u||""]));var d;(d=n.indexOf(":"))>0?(u=e.prefix=n.slice(0,d),c=e.localName=n.slice(d+1)):(u=null,c=e.localName=n);var p=e.uri=i[u||""];if(t.startElement(p,c,n,e),!e.closed)return e.currentNSMap=i,e.localNSMap=r,!0;if(t.endElement(p,c,n),r)for(u in r)t.endPrefixMapping(u)}function _a(e,t,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var a=e.indexOf("</"+i+">",t),s=e.substring(t+1,a);if(/[&<]/.test(s))return/^script$/i.test(i)?(r.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,n),r.characters(s,0,s.length),a)}return t+1}function ba(e,t,i,n){var r=n[i];return null==r&&((r=e.lastIndexOf("</"+i+">"))<t&&(r=e.lastIndexOf("</"+i)),n[i]=r),r<t}function Ta(e,t){for(var i in e)t[i]=e[i]}function Sa(e,t,i,n){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(i.comment(e,t+4,r-t-4),r+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return i.startCDATA(),i.characters(e,t+9,r-t-9),i.endCDATA(),r+3}var a=function(e,t){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(e);i=r.exec(e);)if(n.push(i),i[1])return n}(e,t),s=a.length;if(s>1&&/!doctype/i.test(a[0][0])){var o=a[1][0],l=s>3&&/^public$/i.test(a[2][0])&&a[3][0],u=s>4&&a[4][0],c=a[s-1];return i.startDTD(o,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),i.endDTD(),c.index+c[0].length}}return-1}function wa(e,t,i){var n=e.indexOf("?>",t);if(n){var r=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(i.processingInstruction(r[1],r[2]),n+2):-1}return-1}function Ca(e){}function ka(e,t){return e.__proto__=t,e}ma.prototype={parse:function(e,t,i){var n=this.domBuilder;n.startDocument(),Ta(t,t={}),function(e,t,i,n,r){function a(e){var t,n=e.slice(1,-1);return n in i?i[n]:"#"===n.charAt(0)?(t=parseInt(n.substr(1).replace("x","0x")))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t):(r.error("entity not found:"+e),e)}function s(t){if(t>f){var i=e.substring(f,t).replace(/&#?\w+;/g,a);h&&o(f),n.characters(i,0,t-f),f=t}}function o(t,i){for(;t>=u&&(i=c.exec(e));)u=(l=i.index)+i[0].length,h.lineNumber++;h.columnNumber=t-l+1}for(var l=0,u=0,c=/.*(?:\r\n?|\n)|.*$/g,h=n.locator,d=[{currentNSMap:t}],p={},f=0;;){try{var m=e.indexOf("<",f);if(m<0){if(!e.substr(f).match(/^\s*$/)){var g=n.doc,v=g.createTextNode(e.substr(f));g.appendChild(v),n.currentElement=v}return}switch(m>f&&s(m),e.charAt(m+1)){case"/":var y=e.indexOf(">",m+3),_=e.substring(m+2,y),b=d.pop();y<0?(_=e.substring(m+2).replace(/[\s<].*/,""),r.error("end tag name: "+_+" is not complete:"+b.tagName),y=m+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),r.error("end tag name: "+_+" maybe not complete"),y=m+1+_.length);var T=b.localNSMap,S=b.tagName==_;if(S||b.tagName&&b.tagName.toLowerCase()==_.toLowerCase()){if(n.endElement(b.uri,b.localName,_),T)for(var w in T)n.endPrefixMapping(w);S||r.fatalError("end tag name: "+_+" is not match the current start tagName:"+b.tagName)}else d.push(b);y++;break;case"?":h&&o(m),y=wa(e,m,n);break;case"!":h&&o(m),y=Sa(e,m,n,r);break;default:h&&o(m);var C=new Ca,k=d[d.length-1].currentNSMap,x=(y=va(e,m,C,k,a,r),C.length);if(!C.closed&&ba(e,y,C.tagName,p)&&(C.closed=!0,i.nbsp||r.warning("unclosed xml attribute")),h&&x){for(var E=ga(h,{}),A=0;A<x;A++){var P=C[A];o(P.offset),P.locator=ga(h,{})}n.locator=E,ya(C,n,k)&&d.push(C),n.locator=h}else ya(C,n,k)&&d.push(C);"http://www.w3.org/1999/xhtml"!==C.uri||C.closed?y++:y=_a(e,y,C.tagName,a,n)}}catch(O){r.error("element parse error: "+O),y=-1}y>f?f=y:s(Math.max(m,f)+1)}}(e,t,i,n,this.errorHandler),n.endDocument()}},Ca.prototype={setTagName:function(e){if(!fa.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,i){if(!fa.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},ka({},ka.prototype)instanceof ka||(ka=function(e,t){function i(){}for(t in i.prototype=t,i=new i,e)i[t]=e[t];return i});var xa=ma;function Ea(e,t){for(var i in e)t[i]=e[i]}function Aa(e,t){var i=e.prototype;if(Object.create){var n=Object.create(t.prototype);i.__proto__=n}if(!(i instanceof t)){var r=function(){};r.prototype=t.prototype,Ea(i,r=new r),e.prototype=i=r}i.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),i.constructor=e)}var Pa={},Oa=Pa.ELEMENT_NODE=1,Ia=Pa.ATTRIBUTE_NODE=2,Da=Pa.TEXT_NODE=3,La=Pa.CDATA_SECTION_NODE=4,Ra=Pa.ENTITY_REFERENCE_NODE=5,Ma=Pa.ENTITY_NODE=6,Na=Pa.PROCESSING_INSTRUCTION_NODE=7,ja=Pa.COMMENT_NODE=8,Ua=Pa.DOCUMENT_NODE=9,Fa=Pa.DOCUMENT_TYPE_NODE=10,Ba=Pa.DOCUMENT_FRAGMENT_NODE=11,Ha=Pa.NOTATION_NODE=12,qa={},Va={},Wa=(qa.INDEX_SIZE_ERR=(Va[1]="Index size error",1),qa.DOMSTRING_SIZE_ERR=(Va[2]="DOMString size error",2),qa.HIERARCHY_REQUEST_ERR=(Va[3]="Hierarchy request error",3)),za=(qa.WRONG_DOCUMENT_ERR=(Va[4]="Wrong document",4),qa.INVALID_CHARACTER_ERR=(Va[5]="Invalid character",5),qa.NO_DATA_ALLOWED_ERR=(Va[6]="No data allowed",6),qa.NO_MODIFICATION_ALLOWED_ERR=(Va[7]="No modification allowed",7),qa.NOT_FOUND_ERR=(Va[8]="Not found",8)),Ga=(qa.NOT_SUPPORTED_ERR=(Va[9]="Not supported",9),qa.INUSE_ATTRIBUTE_ERR=(Va[10]="Attribute in use",10));function Xa(e,t){if(t instanceof Error)var i=t;else i=this,Error.call(this,Va[e]),this.message=Va[e],Error.captureStackTrace&&Error.captureStackTrace(this,Xa);return i.code=e,t&&(this.message=this.message+": "+t),i}function Ja(){}function Ya(e,t){this._node=e,this._refresh=t,Ka(this)}function Ka(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var i=e._refresh(e._node);As(e,"length",i.length),Ea(i,e),e._inc=t}}function $a(){}function Qa(e,t){for(var i=e.length;i--;)if(e[i]===t)return i}function Za(e,t,i,n){if(n?t[Qa(t,n)]=i:t[t.length++]=i,e){i.ownerElement=e;var r=e.ownerDocument;r&&(n&&ss(r,e,n),function(e,t,i){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&(t._nsMap[i.prefix?i.localName:""]=i.value)}(r,e,i))}}function es(e,t,i){var n=Qa(t,i);if(!(n>=0))throw Xa(za,new Error(e.tagName+"@"+i));for(var r=t.length-1;n<r;)t[n]=t[++n];if(t.length=r,e){var a=e.ownerDocument;a&&(ss(a,e,i),i.ownerElement=null)}}function ts(e){if(this._features={},e)for(var t in e)this._features=e[t]}function is(){}function ns(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function rs(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(rs(e,t))return!0}while(e=e.nextSibling)}function as(){}function ss(e,t,i,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&delete t._nsMap[i.prefix?i.localName:""]}function os(e,t,i){if(e&&e._inc){e._inc++;var n=t.childNodes;if(i)n[n.length++]=i;else{for(var r=t.firstChild,a=0;r;)n[a++]=r,r=r.nextSibling;n.length=a}}}function ls(e,t){var i=t.previousSibling,n=t.nextSibling;return i?i.nextSibling=n:e.firstChild=n,n?n.previousSibling=i:e.lastChild=i,os(e.ownerDocument,e),t}function us(e,t,i){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===Ba){var r=t.firstChild;if(null==r)return t;var a=t.lastChild}else r=a=t;var s=i?i.previousSibling:e.lastChild;r.previousSibling=s,a.nextSibling=i,s?s.nextSibling=r:e.firstChild=r,null==i?e.lastChild=a:i.previousSibling=a;do{r.parentNode=e}while(r!==a&&(r=r.nextSibling));return os(e.ownerDocument||e,e),t.nodeType==Ba&&(t.firstChild=t.lastChild=null),t}function cs(){this._nsMap={}}function hs(){}function ds(){}function ps(){}function fs(){}function ms(){}function gs(){}function vs(){}function ys(){}function _s(){}function bs(){}function Ts(){}function Ss(){}function ws(e,t){var i=[],n=9==this.nodeType?this.documentElement:this,r=n.prefix,a=n.namespaceURI;if(a&&null==r&&null==(r=n.lookupPrefix(a)))var s=[{namespace:a,prefix:null}];return ks(this,i,e,t,s),i.join("")}function Cs(e,t,i){var n=e.prefix||"",r=e.namespaceURI;if(!n&&!r)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===r||"http://www.w3.org/2000/xmlns/"==r)return!1;for(var a=i.length;a--;){var s=i[a];if(s.prefix==n)return s.namespace!=r}return!0}function ks(e,t,i,n,r){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case Oa:r||(r=[]);var a=e.attributes,s=a.length,o=e.firstChild,l=e.tagName;i="http://www.w3.org/1999/xhtml"===e.namespaceURI||i,t.push("<",l);for(var u=0;u<s;u++)"xmlns"==(c=a.item(u)).prefix?r.push({prefix:c.localName,namespace:c.value}):"xmlns"==c.nodeName&&r.push({prefix:"",namespace:c.value});for(u=0;u<s;u++){var c,h,d;Cs(c=a.item(u),0,r)&&(t.push((h=c.prefix||"")?" xmlns:"+h:" xmlns",'="',d=c.namespaceURI,'"'),r.push({prefix:h,namespace:d})),ks(c,t,i,n,r)}if(Cs(e,0,r)&&(t.push((h=e.prefix||"")?" xmlns:"+h:" xmlns",'="',d=e.namespaceURI,'"'),r.push({prefix:h,namespace:d})),o||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),i&&/^script$/i.test(l))for(;o;)o.data?t.push(o.data):ks(o,t,i,n,r),o=o.nextSibling;else for(;o;)ks(o,t,i,n,r),o=o.nextSibling;t.push("</",l,">")}else t.push("/>");return;case Ua:case Ba:for(o=e.firstChild;o;)ks(o,t,i,n,r),o=o.nextSibling;return;case Ia:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,ns),'"');case Da:return t.push(e.data.replace(/[<&]/g,ns));case La:return t.push("<![CDATA[",e.data,"]]>");case ja:return t.push("\x3c!--",e.data,"--\x3e");case Fa:var p=e.publicId,f=e.systemId;if(t.push("<!DOCTYPE ",e.name),p)t.push(' PUBLIC "',p),f&&"."!=f&&t.push('" "',f),t.push('">');else if(f&&"."!=f)t.push(' SYSTEM "',f,'">');else{var m=e.internalSubset;m&&t.push(" [",m,"]"),t.push(">")}return;case Na:return t.push("<?",e.target," ",e.data,"?>");case Ra:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function xs(e,t,i){var n;switch(t.nodeType){case Oa:(n=t.cloneNode(!1)).ownerDocument=e;case Ba:break;case Ia:i=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,i)for(var r=t.firstChild;r;)n.appendChild(xs(e,r,i)),r=r.nextSibling;return n}function Es(e,t,i){var n=new t.constructor;for(var r in t){var a=t[r];"object"!=typeof a&&a!=n[r]&&(n[r]=a)}switch(t.childNodes&&(n.childNodes=new Ja),n.ownerDocument=e,n.nodeType){case Oa:var s=t.attributes,o=n.attributes=new $a,l=s.length;o._ownerElement=n;for(var u=0;u<l;u++)n.setAttributeNode(Es(e,s.item(u),!0));break;case Ia:i=!0}if(i)for(var c=t.firstChild;c;)n.appendChild(Es(e,c,i)),c=c.nextSibling;return n}function As(e,t,i){e[t]=i}qa.INVALID_STATE_ERR=(Va[11]="Invalid state",11),qa.SYNTAX_ERR=(Va[12]="Syntax error",12),qa.INVALID_MODIFICATION_ERR=(Va[13]="Invalid modification",13),qa.NAMESPACE_ERR=(Va[14]="Invalid namespace",14),qa.INVALID_ACCESS_ERR=(Va[15]="Invalid access",15),Xa.prototype=Error.prototype,Ea(qa,Xa),Ja.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var i=[],n=0;n<this.length;n++)ks(this[n],i,e,t);return i.join("")}},Ya.prototype.item=function(e){return Ka(this),this[e]},Aa(Ya,Ja),$a.prototype={length:0,item:Ja.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==e)return i}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Xa(Ga);var i=this.getNamedItem(e.nodeName);return Za(this._ownerElement,this,e,i),i},setNamedItemNS:function(e){var t,i=e.ownerElement;if(i&&i!=this._ownerElement)throw new Xa(Ga);return t=this.getNamedItemNS(e.namespaceURI,e.localName),Za(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return es(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var i=this.getNamedItemNS(e,t);return es(this._ownerElement,this,i),i},getNamedItemNS:function(e,t){for(var i=this.length;i--;){var n=this[i];if(n.localName==t&&n.namespaceURI==e)return n}return null}},ts.prototype={hasFeature:function(e,t){var i=this._features[e.toLowerCase()];return!(!i||t&&!(t in i))},createDocument:function(e,t,i){var n=new as;if(n.implementation=this,n.childNodes=new Ja,n.doctype=i,i&&n.appendChild(i),t){var r=n.createElementNS(e,t);n.appendChild(r)}return n},createDocumentType:function(e,t,i){var n=new gs;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=i,n}},is.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return us(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return ls(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return Es(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==Da&&e.nodeType==Da?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var i=t._nsMap;if(i)for(var n in i)if(i[n]==e)return n;t=t.nodeType==Ia?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var i=t._nsMap;if(i&&e in i)return i[e];t=t.nodeType==Ia?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},Ea(Pa,is),Ea(Pa,is.prototype),as.prototype={nodeName:"#document",nodeType:Ua,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==Ba){for(var i=e.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,t),i=n}return e}return null==this.documentElement&&e.nodeType==Oa&&(this.documentElement=e),us(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),ls(this,e)},importNode:function(e,t){return xs(this,e,t)},getElementById:function(e){var t=null;return rs(this.documentElement,function(i){if(i.nodeType==Oa&&i.getAttribute("id")==e)return t=i,!0}),t},createElement:function(e){var t=new cs;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new Ja,(t.attributes=new $a)._ownerElement=t,t},createDocumentFragment:function(){var e=new bs;return e.ownerDocument=this,e.childNodes=new Ja,e},createTextNode:function(e){var t=new ps;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new fs;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new ms;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var i=new Ts;return i.ownerDocument=this,i.tagName=i.target=e,i.nodeValue=i.data=t,i},createAttribute:function(e){var t=new hs;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new _s;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var i=new cs,n=t.split(":"),r=i.attributes=new $a;return i.childNodes=new Ja,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=e,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,r._ownerElement=i,i},createAttributeNS:function(e,t){var i=new hs,n=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=e,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,i}},Aa(as,is),as.prototype.getElementsByTagName=(cs.prototype={nodeType:Oa,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var i=this.ownerDocument.createAttribute(e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===Ba?this.insertBefore(e,null):function(e,t){var i=t.parentNode;if(i){var n=e.lastChild;i.removeChild(t),n=e.lastChild}return n=e.lastChild,t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,os(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);return i&&i.value||""},setAttributeNS:function(e,t,i){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new Ya(this,function(t){var i=[];return rs(t,function(n){n===t||n.nodeType!=Oa||"*"!==e&&n.tagName!=e||i.push(n)}),i})},getElementsByTagNameNS:function(e,t){return new Ya(this,function(i){var n=[];return rs(i,function(r){r===i||r.nodeType!==Oa||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||n.push(r)}),n})}}).getElementsByTagName,as.prototype.getElementsByTagNameNS=cs.prototype.getElementsByTagNameNS,Aa(cs,is),hs.prototype.nodeType=Ia,Aa(hs,is),ds.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){this.nodeValue=this.data=e=this.data+e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(Va[Wa])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){var n=this.data.substring(0,e),r=this.data.substring(e+t);this.nodeValue=this.data=i=n+i+r,this.length=i.length}},Aa(ds,is),ps.prototype={nodeName:"#text",nodeType:Da,splitText:function(e){var t=this.data,i=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},Aa(ps,ds),fs.prototype={nodeName:"#comment",nodeType:ja},Aa(fs,ds),ms.prototype={nodeName:"#cdata-section",nodeType:La},Aa(ms,ds),gs.prototype.nodeType=Fa,Aa(gs,is),vs.prototype.nodeType=Ha,Aa(vs,is),ys.prototype.nodeType=Ma,Aa(ys,is),_s.prototype.nodeType=Ra,Aa(_s,is),bs.prototype.nodeName="#document-fragment",bs.prototype.nodeType=Ba,Aa(bs,is),Ts.prototype.nodeType=Na,Aa(Ts,is),Ss.prototype.serializeToString=function(e,t,i){return ws.call(e,t,i)},is.prototype.toString=ws;try{if(Object.defineProperty){var Ps=function e(t){switch(t.nodeType){case Oa:case Ba:var i=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&i.push(e(t)),t=t.nextSibling;return i.join("");default:return t.nodeValue}};Object.defineProperty(Ya.prototype,"length",{get:function(){return Ka(this),this.$$length}}),Object.defineProperty(is.prototype,"textContent",{get:function(){return Ps(this)},set:function(e){switch(this.nodeType){case Oa:case Ba:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),As=function(e,t,i){e["$$"+t]=i}}}catch(Hc){}var Os=ts,Is=Ss,Ds=n(function(e,t){function i(e){this.options=e||{locator:{}}}function n(){this.cdata=!1}function r(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,i){return"string"==typeof e?e.substr(t,i):e.length>=t+i||t?new java.lang.String(e,t,i)+"":e}function o(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}i.prototype.parseFromString=function(e,t){var i=this.options,r=new l,s=i.domBuilder||new n,o=i.errorHandler,u=i.locator,c=i.xmlns||{},h={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&s.setDocumentLocator(u),r.errorHandler=function(e,t,i){if(!e){if(t instanceof n)return t;e=t}var r={},s=e instanceof Function;function o(t){var n=e[t];!n&&s&&(n=2==e.length?function(i){e(t,i)}:e),r[t]=n&&function(e){n("[xmldom "+t+"]\t"+e+a(i))}||function(){}}return i=i||{},o("warning"),o("error"),o("fatalError"),r}(o,s,u),r.domBuilder=i.domBuilder||s,/\/x?html?$/.test(t)&&(h.nbsp=" ",h.copy="©",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,c,h):r.errorHandler.error("invalid doc source"),s.doc},n.prototype={startDocument:function(){this.doc=(new u).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,i,n){var a=this.doc,s=a.createElementNS(e,i||t),l=n.length;o(this,s),this.currentElement=s,this.locator&&r(this.locator,s);for(var u=0;u<l;u++){e=n.getURI(u);var c=n.getValue(u),h=(i=n.getQName(u),a.createAttributeNS(e,i));this.locator&&r(n.getLocator(u),h),h.value=h.nodeValue=c,s.setAttributeNode(h)}},endElement:function(e,t,i){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var i=this.doc.createProcessingInstruction(e,t);this.locator&&r(this.locator,i),o(this,i)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){if(e=s.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&r(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,i){e=s.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&r(this.locator,n),o(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var a=n.createDocumentType(e,t,i);this.locator&&r(this.locator,a),o(this,a)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){n.prototype[e]=function(){return null}});var l=xa,u=t.DOMImplementation=Os;t.XMLSerializer=Is,t.DOMParser=i}).DOMParser,Ls=function(e){return!!e&&"object"==typeof e},Rs=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.reduce(function(t,i){return"object"!=typeof i||Object.keys(i).forEach(function(n){t[n]=Array.isArray(t[n])&&Array.isArray(i[n])?t[n].concat(i[n]):Ls(t[n])&&Ls(i[n])?e(t[n],i[n]):i[n]}),t},{})},Ms=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},Ns=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},js=function(e){var t=e.baseUrl,i=e.source,n=void 0===i?"":i,r=e.range,a=void 0===r?"":r,s=e.indexRange,o=void 0===s?"":s,l={uri:n,resolvedUri:ia((void 0===t?"":t)||"",n)};if(a||o){var u=(a||o).split("-"),c=parseInt(u[0],10),h=parseInt(u[1],10);l.byterange={length:h-c+1,offset:c}}return l},Us={static:function(e){var t=e.timescale;return{start:0,end:Math.ceil(e.sourceDuration/(e.duration/(void 0===t?1:t)))}},dynamic:function(e){var t=e.timescale,i=void 0===t?1:t,n=e.duration,r=e.start,a=e.minimumUpdatePeriod,s=e.timeShiftBufferDepth,o=void 0===s?1/0:s,l=(e.NOW+e.clientOffset)/1e3,u=e.availabilityStartTime+(void 0===r?0:r),c=Math.ceil((l+(void 0===a?0:a)-u)*i/n),h=Math.floor((l-u-o)*i/n),d=Math.floor((l-u)*i/n);return{start:Math.max(0,h),end:Math.min(c,d)}}},Fs=function(e){var t=e.type,i=void 0===t?"static":t,n=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.sourceDuration,o=Us[i](e),l=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}(o.start,o.end).map(function(e){return function(t,i){var n=e.duration,r=e.timescale,a=e.startNumber;return{number:(void 0===a?1:a)+t,duration:n/(void 0===r?1:r),timeline:e.periodIndex,time:i*n}}}(e));if("static"===i){var u=l.length-1;l[u].duration=s-n/a*u}return l},Bs=function(e){var t=e.baseUrl,i=e.initialization,n=void 0===i?{}:i,r=e.sourceDuration,a=e.indexRange,s=void 0===a?"":a,o=e.duration;if(!t)throw new Error("NO_BASE_URL");var l=js({baseUrl:t,source:n.sourceURL,range:n.range}),u=js({baseUrl:t,source:t,indexRange:s});if(u.map=l,o){var c=Fs(e);c.length&&(u.duration=c[0].duration,u.timeline=c[0].timeline)}else r&&(u.duration=r,u.timeline=0);return u.number=0,[u]},Hs=function(e,t,i){for(var n=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,a=e.timeline||0,s=e.sidx.byterange,o=s.offset+s.length,l=t.timescale,u=t.references.filter(function(e){return 1!==e.referenceType}),c=[],h=o+t.firstOffset,d=0;d<u.length;d++){var p=t.references[d],f=p.referencedSize,m=Bs({baseUrl:i,timescale:l,timeline:a,periodIndex:a,duration:p.subsegmentDuration,sourceDuration:r,indexRange:h+"-"+(h+f-1)})[0];n&&(m.map=n),c.push(m),h+=f}return e.segments=c,e},qs=function(e){var t;return(t=e.reduce(function(e,t){var i,n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e},{}),Object.keys(t).map(function(e){return t[e]})).map(function(e){return e.discontinuityStarts=e.segments.reduce(function(e,t,i){return t.discontinuity&&e.push(i),e},[]),e})},Vs=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var i in e){var n=e[i];if(n.sidx){var r=n.sidx.uri+"-"+(s=n.sidx.byterange).offset+"-"+(s.offset+s.length-1),a=t[r]&&t[r].sidx;n.sidx&&a&&Hs(n,a,n.sidx.resolvedUri)}}var s;return e},Ws=function(e){var t,i=e.attributes,n=e.segments,r=e.sidx,a={attributes:(t={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a},zs=function(e){var t,i=e.attributes,n=e.segments;void 0===n&&(n=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var r=((t={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,t);return i.codecs&&(r.CODECS=i.codecs),{attributes:r,uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1}},Gs=function(e){var t,i=e.attributes,n=e.segments,r=e.sidx,a={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a},Xs=function(e,t,i){var n=e.timescale,r=e.start,a=e.minimumUpdatePeriod;return Math.ceil((((e.NOW+e.clientOffset)/1e3+(void 0===a?0:a)-(e.availabilityStartTime+(void 0===r?0:r)))*(void 0===n?1:n)-t)/i)},Js=function(e,t){for(var i=e.type,n=void 0===i?"static":i,r=e.minimumUpdatePeriod,a=void 0===r?0:r,s=e.media,o=void 0===s?"":s,l=e.sourceDuration,u=e.timescale,c=void 0===u?1:u,h=e.startNumber,d=void 0===h?1:h,p=e.periodIndex,f=[],m=-1,g=0;g<t.length;g++){var v=t[g],y=v.d,_=v.r||0,b=v.t||0;m<0&&(m=b),b&&b>m&&(m=b);var T=void 0;if(_<0){var S=g+1;T=S===t.length?"dynamic"===n&&a>0&&o.indexOf("$Number$")>0?Xs(e,m,y):(l*c-m)/y:(t[S].t-m)/y}else T=_+1;for(var w=d+f.length+T,C=d+f.length;C<w;)f.push({number:C,duration:y/c,time:m,timeline:p}),m+=y,C++}return f},Ys=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Ks=function(e,t){return e.replace(Ys,function(e){return function(t,i,n,r){if("$$"===t)return"$";if(void 0===e[i])return t;var a=""+e[i];return"RepresentationID"===i?a:(r=n?parseInt(r,10):1,a.length>=r?a:""+new Array(r-a.length+1).join("0")+a)}}(t))},$s=function(e,t){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,r=void 0===n?{sourceURL:"",range:""}:n,a=js({baseUrl:e.baseUrl,source:Ks(r.sourceURL,i),range:r.range});return function(e,t){return e.duration||t?e.duration?Fs(e):Js(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t).map(function(t){i.Number=t.number,i.Time=t.time;var n=Ks(e.media||"",i);return{uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:ia(e.baseUrl||"",n),map:a,number:t.number}})},Qs=function(e,t){var i=e.duration,n=e.segmentUrls,r=void 0===n?[]:n;if(!i&&!t||i&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var a,s=r.map(function(t){return function(e,t){var i=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,a=js({baseUrl:i,source:r.sourceURL,range:r.range}),s=js({baseUrl:i,source:t.media,range:t.mediaRange});return s.map=a,s}(e,t)});return i&&(a=Fs(e)),t&&(a=Js(e,t)),a.map(function(e,t){if(s[t]){var i=s[t];return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}}).filter(function(e){return e})},Zs=function(e){var t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=$s,t=Rs(n,r.template)):r.base?(i=Bs,t=Rs(n,r.base)):r.list&&(i=Qs,t=Rs(n,r.list));var a={attributes:n};if(!i)return a;var s=i(t,r.timeline);if(t.duration){var o=t.timescale;t.duration=t.duration/(void 0===o?1:o)}else t.duration=s.length?s.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):0;return a.attributes=t,a.segments=s,r.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a},eo=function(e,t){return Ns(e.childNodes).filter(function(e){return e.tagName===t})},to=function(e){return e.textContent.trim()},io=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var i=t.slice(1),n=i[1],r=i[2],a=i[3],s=i[4],o=i[5];return 31536e3*parseFloat(i[0]||0)+2592e3*parseFloat(n||0)+86400*parseFloat(r||0)+3600*parseFloat(a||0)+60*parseFloat(s||0)+parseFloat(o||0)},no={mediaPresentationDuration:function(e){return io(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return io(e)},suggestedPresentationDelay:function(e){return io(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return io(e)},start:function(e){return io(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?io(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},ro=function(e){return e&&e.attributes?Ns(e.attributes).reduce(function(e,t){return e[t.name]=(no[t.name]||no.DEFAULT)(t.value),e},{}):{}},ao={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},so=function(e,t){return t.length?Ms(e.map(function(e){return t.map(function(t){return ia(e,to(t))})})):e},oo=function(e){var t=eo(e,"SegmentTemplate")[0],i=eo(e,"SegmentList")[0],n=i&&eo(i,"SegmentURL").map(function(e){return Rs({tag:"SegmentURL"},ro(e))}),r=eo(e,"SegmentBase")[0],a=i||t,s=a&&eo(a,"SegmentTimeline")[0],o=i||r||t,l=o&&eo(o,"Initialization")[0],u=t&&ro(t);u&&l?u.initialization=l&&ro(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,timeline:s&&eo(s,"S").map(function(e){return ro(e)}),list:i&&Rs(ro(i),{segmentUrls:n,initialization:ro(l)}),base:r&&Rs(ro(r),{initialization:ro(l)})};return Object.keys(c).forEach(function(e){c[e]||delete c[e]}),c},lo=function(e,t){return function(i,n){var r=so(t,eo(i,"BaseURL")),s=ro(i),o=parseInt(s.id,10),l=a.isNaN(o)?n:o,u=Rs(e,{periodIndex:l}),c=eo(i,"AdaptationSet"),h=oo(i);return Ms(c.map(function(e,t,i){return function(n){var r=ro(n),a=so(t,eo(n,"BaseURL")),s=eo(n,"Role")[0],o={role:ro(s)},l=Rs(e,r,o),u=eo(n,"ContentProtection").reduce(function(e,t){var i=ro(t),n=ao[i.schemeIdUri];if(n){e[n]={attributes:i};var r=eo(t,"cenc:pssh")[0];if(r){var a=to(r),s=a&&aa(a);e[n].pssh=s}}return e},{});Object.keys(u).length&&(l=Rs(l,{contentProtection:u}));var c=oo(n),h=eo(n,"Representation"),d=Rs(i,c);return Ms(h.map(function(e,t,i){return function(n){var r=eo(n,"BaseURL"),a=so(t,r),s=Rs(e,ro(n)),o=oo(n);return a.map(function(e){return{segmentInfo:Rs(i,o),attributes:Rs(s,{baseUrl:e})}})}}(l,a,d)))}}(u,r,h)))}},uo=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var t,i,n=new Ds;try{i=(t=n.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(Hc){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return i},co=Hs,ho=Math.pow(2,32),po=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)},n=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,i(e));try{return decodeURIComponent(escape(t))}catch(Hc){}return t},r=function(e,t){void 0===t&&(t=0);var n=(e=i(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},a=function e(t,a){return void 0===a&&(a=0),(t=i(t)).length-a<10||"ID3"!==n(t.subarray(a,a+3))?a:e(t,a+=r(t,a))},s={aac:function(e){var t=a(e);return e.length>=t+2&&255==(255&e[t])&&224==(224&e[t+1])&&16==(22&e[t+1])},mp3:function(e){var t=a(e);return e.length>=t+2&&255==(255&e[t])&&224==(224&e[t+1])&&2==(6&e[t+1])},webm:function(e){return e.length>=4&&26==(255&e[0])&&69==(255&e[1])&&223==(255&e[2])&&163==(255&e[3])},mp4:function(e){return e.length>=8&&/^(f|s)typ$/.test(n(e.subarray(4,8)))&&!/^ftyp3g$/.test(n(e.subarray(4,10)))},"3gp":function(e){return e.length>=10&&/^ftyp3g$/.test(n(e.subarray(4,10)))},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){return e.length>=4&&/^fLaC$/.test(n(e.subarray(0,4)))},ogg:function(e){return e.length>=4&&/^OggS$/.test(n(e.subarray(0,4)))}},o=Object.keys(s).filter(function(e){return"ts"!==e}).concat("ts");o.forEach(function(e){var t=s[e];s[e]=function(e){return t(i(e))}}),t.detectContainerForBytes=function(e){e=i(e);for(var t=0;t<o.length;t++){var n=o[t];if(s[n](e))return n}return""},t.getId3Offset=a,t.id3Size=r,t.isLikely=s,t.isLikelyFmp4MediaSegment=function(e){e=i(e);for(var t=0;t<e.length;){var r=(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0;if("moof"===n(e.subarray(t+4,t+8)))return!0;0===r||r+t>e.length?t=e.length:t+=r}return!1}});i(po);var fo=po.detectContainerForBytes,mo=po.getId3Offset,go=po.isLikelyFmp4MediaSegment,vo=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)};t.bytesToString=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,i(e));try{return decodeURIComponent(escape(t))}catch(Hc){}return t},t.concatTypedArrays=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce(function(e,t){return e+(t&&(t.byteLength||t.length)||0)},0),a=new Uint8Array(r),s=0;return t.forEach(function(e){e=i(e),a.set(e,s),s+=e.byteLength}),a},t.isTypedArray=function(e){return ArrayBuffer.isView(e)},t.stringToBytes=function(e,t){return void 0===t&&(t=!1),"string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e?[]:(t||(e=unescape(encodeURIComponent(e))),e.split("").map(function(e){return 255&e.charCodeAt(0)}))},t.toUint8=i});i(vo);var yo=vo.concatTypedArrays,_o=vo.stringToBytes,bo=vo.toUint8,To=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,r,a;if(i=e[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){e={}}}};To.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},To.prototype.push=function(e){this.trigger("data",e)},To.prototype.flush=function(e){this.trigger("done",e)},To.prototype.partialFlush=function(e){this.trigger("partialdone",e)},To.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},To.prototype.reset=function(e){this.trigger("reset",e)};new To;var So=function(e){var t=31&e[1];return(t<<=8)|e[2]},wo=function(e){return!!(64&e[1])},Co=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},ko=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},xo=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Eo=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return i=i>=0?i:0,(16&e[t+5])>>4?i+20:i+10},Ao=function e(t,i){return t.length-i<10||t[i]!=="I".charCodeAt(0)||t[i+1]!=="D".charCodeAt(0)||t[i+2]!=="3".charCodeAt(0)?i:e(t,i+=Eo(t,i))},Po=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Oo={isLikelyAacData:function(e){var t=Ao(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:Eo,parseAdtsSize:function(e,t){return 6144&e[t+3]|e[t+4]<<3|(224&e[t+5])>>5},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return xo[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i,n;t=10,64&e[5]&&(t+=4,t+=Po(e.subarray(10,14)));do{if((i=Po(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,i){var n,r="";for(n=0;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r}(n,0,r))){var a=n.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(s*=4)+(3&a[7])}break}}t+=10,t+=i}while(t<e.byteLength);return null}},Io=9e4,Do=function(e,t){var i=1;for(e>t&&(i=-1);Math.abs(t-e)>4294967296;)e+=8589934592*i;return e},Lo={};Lo.ts={parseType:function(e,t){var i=So(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},parsePat:function(e){var t=wo(e),i=4+Co(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=wo(e),n=4+Co(e);if(i&&(n+=e[n]+1),1&e[n+5]){var r;r=3+((15&e[n+1])<<8|e[n+2])-4;for(var a=12+((15&e[n+10])<<8|e[n+11]);a<r;){var s=n+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:wo,parsePesType:function(e,t){switch(t[So(e)]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!wo(e))return null;var t=4+Co(e);if(t>=e.byteLength)return null;var i,n=null;return 192&(i=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+Co(e),i=e.subarray(t),n=0,r=0,a=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===ko(31&i[r+3])&&(a=!0);do{n++}while(1!==i[n]&&n<i.length);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===ko(31&i[r+3])&&(a=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===ko(31&i[r+3])&&(a=!0),a}},Lo.aac=Oo;var Ro,Mo=9e4,No=188,jo=71,Uo=function(e,t,i){for(var n,r,a,s,o=0,l=No,u=!1;l<=e.byteLength;)if(e[o]!==jo||e[l]!==jo&&l!==e.byteLength)o++,l++;else{switch(n=e.subarray(o,l),Lo.ts.parseType(n,t.pid)){case"pes":r=Lo.ts.parsePesType(n,t.table),a=Lo.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=Lo.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)}if(u)break;o+=No,l+=No}for(o=(l=e.byteLength)-No,u=!1;o>=0;)if(e[o]!==jo||e[l]!==jo&&l!==e.byteLength)o--,l--;else{switch(n=e.subarray(o,l),Lo.ts.parseType(n,t.pid)){case"pes":r=Lo.ts.parsePesType(n,t.table),a=Lo.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=Lo.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)}if(u)break;o-=No,l-=No}},Fo=function(e,t,i){for(var n,r,a,s,o,l,u,c=0,h=No,d=!1,p={data:[],size:0};h<e.byteLength;)if(e[c]!==jo||e[h]!==jo)c++,h++;else{switch(n=e.subarray(c,h),Lo.ts.parseType(n,t.pid)){case"pes":if(r=Lo.ts.parsePesType(n,t.table),a=Lo.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(a&&!d&&(s=Lo.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),d=!0),!i.firstKeyFrame)){if(a&&0!==p.size){for(o=new Uint8Array(p.size),l=0;p.data.length;)u=p.data.shift(),o.set(u,l),l+=u.byteLength;if(Lo.ts.videoPacketContainsKeyFrame(o)){var f=Lo.ts.parsePesTime(o);f?(i.firstKeyFrame=f,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(n),p.size+=n.byteLength}}if(d&&i.firstKeyFrame)break;c+=No,h+=No}for(c=(h=e.byteLength)-No,d=!1;c>=0;)if(e[c]!==jo||e[h]!==jo)c--,h--;else{switch(n=e.subarray(c,h),Lo.ts.parseType(n,t.pid)){case"pes":r=Lo.ts.parsePesType(n,t.table),a=Lo.ts.parsePayloadUnitStartIndicator(n),"video"===r&&a&&(s=Lo.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),d=!0)}if(d)break;c-=No,h-=No}},Bo=function(e){return e>>>0},Ho=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},qo=Bo,Vo=function e(t,i){var n,r,a,s,o,l=[];if(!i.length)return null;for(n=0;n<t.byteLength;)r=qo(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),a=Ho(t.subarray(n+4,n+8)),s=r>1?n+r:t.byteLength,a===i[0]&&(1===i.length?l.push(t.subarray(n+8,s)):(o=e(t.subarray(n+8,s),i.slice(1))).length&&(l=l.concat(o))),n=s;return l},Wo=Bo,zo=function(e){return("00"+e.toString(16)).slice(-2)},Go=(Ro=function(e){var t=0===e[0]?12:20;return Wo(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(a),n={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},r=["video","audio","text"],s=["Video","Audio","Text"],o=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)}):e},l=function(e){return e.map(o)},u=function(e){void 0===e&&(e="");var t=e.split(","),i={},a=[];return t.forEach(function(e){var t;e=e.trim(),r.forEach(function(r){var a=n[r].exec(e.toLowerCase());if(a&&!(a.length<=1)){t=r;var s=e.substring(0,a[1].length),o=e.replace(s,"");i[r]={type:s,details:o}}}),t||a.push(e)}),a.length&&(i.unknown=a),i},c=function(e){return void 0===e&&(e=""),n.audio.test(e.trim().toLowerCase())},h=function(e){return void 0===e&&(e=""),n.text.test(e.trim().toLowerCase())},d=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map(function(e){return o(e.trim())}),i="video";1===t.length&&c(t[0])?i="audio":1===t.length&&h(t[0])&&(i="application");var r="mp4";return t.every(function(e){return n.mp4.test(e)})?r="mp4":t.every(function(e){return n.webm.test(e)})?r="webm":t.every(function(e){return n.ogg.test(e)})&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}};t.DEFAULT_AUDIO_CODEC="mp4a.40.2",t.DEFAULT_VIDEO_CODEC="avc1.4d400d",t.browserSupportsCodec=function(e){return void 0===e&&(e=""),i.MediaSource&&i.MediaSource.isTypeSupported&&i.MediaSource.isTypeSupported(d(e))||!1},t.codecsFromDefault=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return u(r.playlists[0].attributes.CODECS)}return null},t.getMimeForCodec=d,t.isAudioCodec=c,t.isTextCodec=h,t.isVideoCodec=function(e){return void 0===e&&(e=""),n.video.test(e.trim().toLowerCase())},t.mapLegacyAvcCodecs=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return l([e])[0]})},t.muxerSupportsCodec=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(e){e=e.trim();for(var t=0;t<s.length;t++)if(n["muxer"+s[t]].test(e))return!0;return!1})},t.parseCodecs=u,t.translateLegacyCodec=o,t.translateLegacyCodecs=l}));i(Go);var Xo,Jo=Go.DEFAULT_AUDIO_CODEC,Yo=Go.DEFAULT_VIDEO_CODEC,Ko=Go.browserSupportsCodec,$o=Go.codecsFromDefault,Qo=Go.getMimeForCodec,Zo=Go.isAudioCodec,el=Go.isVideoCodec,tl=Go.muxerSupportsCodec,il=Go.parseCodecs,nl=Go.translateLegacyCodec,rl=ia,al=function(e,t,i){return e&&i&&i.responseURL&&t!==i.responseURL?i.responseURL:t},sl=Vr.log,ol=function(e,t){return e+"-"+t},ll=function(e){var t=e.manifestString,i=e.customTagParsers,n=void 0===i?[]:i,r=e.customTagMappers,a=void 0===r?[]:r,s=new ua;return n.forEach(function(e){return s.addParser(e)}),a.forEach(function(e){return s.addTagMapper(e)}),s.push(t),s.end(),s.manifest},ul=function(e,t){["AUDIO","SUBTITLES"].forEach(function(i){for(var n in e.mediaGroups[i])for(var r in e.mediaGroups[i][n])t(e.mediaGroups[i][n][r],i,n,r)})},cl=function(e){var t=e.playlist,i=e.uri;t.id=e.id,i&&(t.uri=i),t.attributes=t.attributes||{}},hl=function(e,t){e.uri=t;for(var i=0;i<e.playlists.length;i++)e.playlists[i].uri||(e.playlists[i].uri="placeholder-uri-"+i);ul(e,function(t,i,n,r){if(t.playlists&&t.playlists.length&&!t.playlists[0].uri){var a="placeholder-uri-"+i+"-"+n+"-"+r,s=ol(0,a);t.playlists[0].uri=a,t.playlists[0].id=s,e.playlists[s]=t.playlists[0],e.playlists[a]=t.playlists[0]}}),function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];cl({playlist:i,id:ol(t,i.uri)}),i.resolvedUri=rl(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||sl.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){ul(e,function(t){t.uri&&(t.resolvedUri=rl(e.uri,t.uri))})}(e)},dl=Vr.mergeOptions,pl=function(e,t){e.resolvedUri||(e.resolvedUri=rl(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=rl(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=rl(t,e.map.uri))},fl=function(e,t){var i=dl(e,{}),n=i.playlists[t.id];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.endList===t.endList&&n.mediaSequence===t.mediaSequence)return null;var r=dl(n,t);n.segments&&(r.segments=function(e,t,i){var n=t.slice();i=i||0;for(var r=Math.min(e.length,t.length+i),a=i;a<r;a++)n[a-i]=dl(e[a],n[a-i]);return n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach(function(e){pl(e,r.resolvedUri)});for(var a=0;a<i.playlists.length;a++)i.playlists[a].id===t.id&&(i.playlists[a]=r);return i.playlists[t.id]=r,i.playlists[t.uri]=r,i},ml=function(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)},gl=function(e){function t(t,i,n){var r;if(void 0===n&&(n={}),r=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");var a=n.withCredentials,s=void 0!==a&&a,o=n.handleManifestRedirects,l=void 0!==o&&o;r.src=t,r.vhs_=i,r.withCredentials=s,r.handleManifestRedirects=l;var u=i.options_;return r.customTagParsers=u&&u.customTagParsers||[],r.customTagMappers=u&&u.customTagMappers||[],r.state="HAVE_NOTHING",r.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.vhs_.xhr({uri:rl(r.master.uri,r.media().uri),withCredentials:r.withCredentials},function(e,t){if(r.request)return e?r.playlistRequestError(r.request,r.media(),"HAVE_METADATA"):void r.haveMetadata({playlistString:r.request.responseText,url:r.media().uri,id:r.media().id})}))}),r}Jr(t,e);var i=t.prototype;return i.playlistRequestError=function(e,t,i){var n=t.uri,r=t.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+n+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},i.haveMetadata=function(e){var t=this,i=e.playlistString,n=e.playlistObject,r=e.url,a=e.id;this.request=null,this.state="HAVE_METADATA";var s=n||ll({manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});s.lastRequest=Date.now(),cl({playlist:s,uri:r,id:a});var o=fl(this.master,s);this.targetDuration=s.targetDuration,o?(this.master=o,this.media_=this.master.playlists[a]):this.trigger("playlistunchanged"),this.media().endList||($r.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=$r.setTimeout(function(){t.trigger("mediaupdatetimeout")},ml(this.media(),!!o))),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),$r.clearTimeout(this.mediaUpdateTimeout),$r.clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e,t){var i=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if($r.clearTimeout(this.finalRenditionTimeout),t){var n=e.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=$r.setTimeout(this.media.bind(this,e,!1),n)}else{var r=this.state,a=!this.media_||e.id!==this.media_.id;if(this.master.playlists[e.id].endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(a&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===r?"loadedmetadata":"mediachange")));if(a){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(t,n){if(i.request){if(e.lastRequest=Date.now(),e.resolvedUri=al(i.handleManifestRedirects,e.resolvedUri,n),t)return i.playlistRequestError(i.request,e,r);i.haveMetadata({playlistString:n.responseText,url:e.uri,id:e.id}),i.trigger("HAVE_MASTER"===r?"loadedmetadata":"mediachange")}})}}},i.pause=function(){this.stopRequest(),$r.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},i.load=function(e){var t=this;$r.clearTimeout(this.mediaUpdateTimeout);var i=this.media();e?this.mediaUpdateTimeout=$r.setTimeout(function(){return t.load()},i?i.targetDuration/2*1e3:5e3):this.started?this.trigger(i&&!i.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},i.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=$r.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){e.setupInitialPlaylist(e.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=al(e.handleManifestRedirects,e.src,i);var n=ll({manifestString:i.responseText,customTagParsers:e.customTagParsers,customTagMappers:e.customTagMappers});e.setupInitialPlaylist(n)}})},i.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},i.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,hl(this.master,this.srcUri()),e.playlists.forEach(function(e){e.segments&&e.segments.forEach(function(t){pl(t,e.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||$r.location.href;this.master=function(e,t){var i=ol(0,t),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:$r.location.href,resolvedUri:$r.location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[t]=n.playlists[0],n}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(Vr.EventTarget),vl=1/30,yl=.1,_l=function(e,t){var i,n=[];if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Vr.createTimeRanges(n)},bl=function(e,t){return _l(e,function(e,i){return e-yl<=t&&i+yl>=t})},Tl=function(e,t){return _l(e,function(e){return e-vl>=t})},Sl=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},wl=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},Cl=Vr.createTimeRange,kl=function(e,t,i){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var n=function(e,t){var i=0,n=t-e.mediaSequence,r=e.segments[n];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if(void 0!==(r=e.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=r.duration,void 0!==r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(e,t);if(n.precise)return n.result;var r=function(e,t){for(var i,n=0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t);return r.precise?r.result:n.result+i},xl=function(e,t,i){if(!e)return 0;if("number"!=typeof i&&(i=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return $r.Infinity}return kl(e,t,i)},El=function(e,t,i){var n=0;if(t>i){var r=[i,t];t=r[0],i=r[1]}if(t<0){for(var a=t;a<Math.min(0,i);a++)n+=e.targetDuration;t=0}for(var s=t;s<i;s++)n+=e.segments[s].duration;return n},Al=function(e,t){if(!e.segments.length)return 0;var i=e.segments.length,n="number"==typeof t?t:(e.segments[i-1].duration||e.targetDuration)+2*e.targetDuration;if(0===n)return i;for(var r=0;i--&&!((r+=e.segments[i].duration)>=n););return Math.max(0,i)},Pl=function(e,t,i,n){if(!e||!e.segments)return null;if(e.endList)return xl(e);if(null===t)return null;t=t||0;var r=i?Al(e,n):e.segments.length;return kl(e,e.mediaSequence+r,t)},Ol=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Il=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Dl=function(e){var t=Ol(e);return!e.disabled&&!t},Ll=function(e,t){return t.attributes&&t.attributes[e]},Rl=function(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Dl(e)&&(e.attributes.BANDWIDTH||0)<i}).length},Ml={duration:xl,seekable:function(e,t,i){var n=t||0,r=Pl(e,t,!0,i);return null===r?Cl():Cl(n,r)},safeLiveIndex:Al,getMediaInfoForTime:function(e,t,i,n){var r,a=e.segments.length,s=t-n;if(s<0){if(i>0)for(r=i-1;r>=0;r--)if((s+=e.segments[r].duration+vl)>0)return{mediaIndex:r,startTime:n-El(e,i,r)};return{mediaIndex:0,startTime:t}}if(i<0){for(r=i;r<0;r++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(r=i;r<a;r++)if((s-=e.segments[r].duration+vl)<0)return{mediaIndex:r,startTime:n+El(e,i,r)};return{mediaIndex:a-1,startTime:t}},isEnabled:Dl,isDisabled:function(e){return e.disabled},isBlacklisted:Ol,isIncompatible:Il,playlistEnd:Pl,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:Ll,estimateSegmentRequestTime:function(e,t,i,n){return void 0===n&&(n=0),Ll("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*n)/t:NaN},isLowestEnabledRendition:Rl},Nl=Vr.xhr,jl=Vr.mergeOptions,Ul=function(e,t,i,n){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),n(t,e)},Fl=function(){return function e(t,i){t=jl({timeout:45e3},t);var n=e.beforeRequest||Vr.Vhs.xhr.beforeRequest;if(n&&"function"==typeof n){var r=n(t);r&&(t=r)}var a=Nl(t,function(e,t){return Ul(a,e,t,i)}),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a}},Bl=function(e){var t,i={};return e.byterange&&(i.Range="bytes="+(t=e.byterange).offset+"-"+(t.offset+t.length-1)),i},Hl=function(e,t){return e.start(t)+"-"+e.end(t)},ql=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},Vl=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Wl=function(e){var t={};return Object.keys(e).forEach(function(i){var n=e[i];t[i]=ArrayBuffer.isView(n)?{bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:n}),t},zl=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Gl=function(e){return e.resolvedUri},Xl=function(e){for(var t=Array.prototype.slice.call(e),i=16,n="",r=0;r<t.length/i;r++)n+=t.slice(r*i,r*i+i).map(ql).join("")+" "+t.slice(r*i,r*i+i).map(Vl).join("")+"\n";return n},Jl=Object.freeze({__proto__:null,createTransferableMessage:Wl,initSegmentId:zl,segmentKeyId:Gl,hexDump:Xl,tagDump:function(e){return Xl(e.bytes)},textRanges:function(e){var t,i="";for(t=0;t<e.length;t++)i+=Hl(e,t)+" ";return i}}),Yl=function e(t){var i=t.programTime,n=t.playlist,r=t.retryCount,a=void 0===r?2:r,s=t.seekTo,o=t.pauseAfterSeek,l=void 0===o||o,u=t.tech,c=t.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===i||!n||!s)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n))return c({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=function(e,t){var i;try{i=new Date(e)}catch(Hc){return null}if(!t||!t.segments||0===t.segments.length)return null;var n=t.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(n=t.segments[r],!(i<t.segments[r+1].dateTimeObject));r++);var a,s=t.segments[t.segments.length-1],o=s.dateTimeObject,l=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return i>new Date(o.getTime()+1e3*l)?null:(i>o&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Ml.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(i,n);if(!h)return c({message:i+" was not found in the stream"});var d=h.segment,p=function(e,t){var i,n;try{i=new Date(e),n=new Date(t)}catch(Hc){}var r=i.getTime();return(n.getTime()-r)/1e3}(d.dateTimeObject,i);if("estimate"===h.type)return 0===a?c({message:i+" is not buffered yet. Try again"}):(s(h.estimatedStart+p),void u.one("seeked",function(){e({programTime:i,playlist:n,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:u,callback:c})}));var f=d.start+p;u.one("seeked",function(){return c(null,u.currentTime())}),l&&u.pause(),s(f)},Kl=function(e,t){if(4===e.readyState)return t()},$l=Vr.mergeOptions,Ql=function(e){return e.uri+"-"+e.byterange.offset+"-"+(e.byterange.offset+e.byterange.length-1)},Zl=function(e,t){var i,n,r={};for(var a in e){var s=e[a].sidx;if(s){var o=Ql(s);if(!t[o])break;i=t[o].sidxInfo,n=s,(Boolean(!i.map&&!n.map)||Boolean(i.map&&n.map&&i.map.byterange.offset===n.map.byterange.offset&&i.map.byterange.length===n.map.byterange.length))&&i.uri===n.uri&&i.byterange.offset===n.byterange.offset&&i.byterange.length===n.byterange.length&&(r[o]=t[o])}}return r},eu=function(e){function t(t,i,n,r){var a;void 0===n&&(n={}),(a=e.call(this)||this).masterPlaylistLoader_=r||Xr(a),r||(a.isMaster_=!0);var s=n.withCredentials,o=void 0!==s&&s,l=n.handleManifestRedirects,u=void 0!==l&&l;if(a.vhs_=i,a.withCredentials=o,a.handleManifestRedirects=u,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",function(){a.refreshXml_()}),a.on("mediaupdatetimeout",function(){a.refreshMedia_(a.media().id)}),a.state="HAVE_NOTHING",a.loadedPlaylists_={},a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}Jr(t,e);var i=t.prototype;return i.requestErrored_=function(e,t,i){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,i&&(this.state=i),this.trigger("error"),!0):void 0)},i.addSidxSegments_=function(e,t,i){var n=this,r=e.sidx&&Ql(e.sidx);if(e.sidx&&r&&!this.masterPlaylistLoader_.sidxMapping_[r]){var a=al(this.handleManifestRedirects,e.sidx.resolvedUri),s=this.masterPlaylistLoader_.sidxMapping_;s[r]={sidxInfo:e.sidx};var o=function(a,o){if(!n.requestErrored_(a,o,t)){var l=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},n=12;0===i.version?(i.earliestPresentationTime=t.getUint32(n),i.firstOffset=t.getUint32(n+4),n+=8):(i.earliestPresentationTime=t.getUint32(n)*ho+t.getUint32(n+4),i.firstOffset=t.getUint32(n+8)*ho+t.getUint32(n+12),n+=16);var r=t.getUint16(n+=2);for(n+=2;r>0;n+=12,r--)i.references.push({referenceType:(128&e[n])>>>7,referencedSize:2147483647&t.getUint32(n),subsegmentDuration:t.getUint32(n+4),startsWithSap:!!(128&e[n+8]),sapType:(112&e[n+8])>>>4,sapDeltaTime:268435455&t.getUint32(n+8)});return i}(bo(o.response).subarray(8));return s[r].sidx=l,co(e,l,e.sidx.resolvedUri),i(!0)}};this.request=function(e,t,i){var n,r=[],a=!1,s=function(e,t,n,r){return t.abort(),a=!0,i(e,t,n,r)},o=function(e,t){if(!a){if(e)return s(e,t,"",r);var i=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=yo(r,_o(i,!0)),n=n||mo(r),r.length<10||n&&r.length<n+2)return Kl(t,function(){return s(e,t,"",r)});var o=fo(r);return"ts"===o&&r.length<188||!o&&r.length<376?Kl(t,function(){return s(e,t,"",r)}):s(null,t,o,r)}},l=t({uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",function(t){return Ul(e,null,{statusCode:e.status},o)})}},function(e,t){return Ul(l,e,t,o)});return l}(a,this.vhs_.xhr,function(t,i,r,s){if(t)return o(t,i);if(!r||"mp4"!==r)return o({status:i.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+a,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},i);var l=e.sidx.byterange,u=l.offset,c=l.length;if(s.length>=c+u)return o(t,{response:s.subarray(u,u+c),status:i.status,uri:i.uri});n.request=n.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:Bl({byterange:e.sidx.byterange})},o)})}else this.mediaRequest_=$r.setTimeout(function(){return i(!1)},0)},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},$r.clearTimeout(this.minimumUpdatePeriodTimeout_),$r.clearTimeout(this.mediaRequest_),$r.clearTimeout(this.mediaUpdateTimeout),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,i,function(n){t.haveMetadata({startingState:i,playlist:e})}))},i.haveMetadata=function(e){var t=e.startingState,i=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),this.trigger("HAVE_MASTER"===t?"loadedmetadata":"mediachange")},i.pause=function(){this.stopRequest(),$r.clearTimeout(this.mediaUpdateTimeout),$r.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)},i.load=function(e){var t=this;$r.clearTimeout(this.mediaUpdateTimeout),$r.clearTimeout(this.minimumUpdatePeriodTimeout_);var i=this.media();e?this.mediaUpdateTimeout=$r.setTimeout(function(){return t.load()},i?i.targetDuration/2*1e3:5e3):this.started?this.trigger(i&&!i.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},i.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_(function(t,i){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=$r.setTimeout(function(){return e.haveMaster_()},0)},i.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(i,n){if(!t.requestErrored_(i,n)){var r=n.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=n.responseText,t.masterLoaded_=n.responseHeaders&&n.responseHeaders.date?Date.parse(n.responseHeaders.date):Date.now(),t.masterPlaylistLoader_.srcUrl=al(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,n),r?(t.handleMaster_(),void t.syncClientServerClock_(function(){return e(n,r)})):e(n,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)})},i.syncClientServerClock_=function(e){var t=this,i=function(e){var t=eo(e,"UTCTiming")[0];if(!t)return null;var i=ro(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return i}(uo(this.masterPlaylistLoader_.masterXml_));return null===i?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===i.method?(this.masterPlaylistLoader_.clientOffset_=i.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:rl(this.masterPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},function(n,r){if(t.request){if(n)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();var a;a="HEAD"===i.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.masterPlaylistLoader_.clientOffset_=a-Date.now(),e()}}))},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var e,t,i,n=(i=function(e,t){void 0===t&&(t={});var i=function(e,t){void 0===t&&(t={});var i=t,n=i.manifestUri,r=void 0===n?"":n,a=i.NOW,s=void 0===a?Date.now():a,o=i.clientOffset,l=void 0===o?0:o,u=eo(e,"Period");if(!u.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var c=eo(e,"Location"),h=ro(e),d=so([r],eo(e,"BaseURL"));return h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=s,h.clientOffset=l,c.length&&(h.locations=c.map(to)),{locations:h.locations,representationInfo:Ms(u.map(lo(h,d)))}}(uo(e),t);return function(e,t,i){var n;if(void 0===i&&(i={}),!e.length)return{};var r=e[0].attributes,a=r.sourceDuration,s=r.type,o=void 0===s?"static":s,l=r.suggestedPresentationDelay,u=r.minimumUpdatePeriod,c=qs(e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType})).map(Gs),h=qs(e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType})),d=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:a,playlists:Vs(c,i)};return u>=0&&(p.minimumUpdatePeriod=1e3*u),t&&(p.locations=t),"dynamic"===o&&(p.suggestedPresentationDelay=l),h.length&&(p.mediaGroups.AUDIO.audio=function(e,t){var i;void 0===t&&(t={});var n=e.reduce(function(e,n){var r=n.attributes.role&&n.attributes.role.value||"",a=n.attributes.lang||"",s="main";return a&&(s=n.attributes.lang+(r?" ("+r+")":"")),e[s]&&e[s].playlists[0].attributes.BANDWIDTH>n.attributes.bandwidth||(e[s]={language:a,autoselect:!0,default:"main"===r,playlists:Vs([Ws(n)],t),uri:""},void 0===i&&"main"===r&&((i=n).default=!0)),e},{});return i||(n[Object.keys(n)[0]].default=!0),n}(h,i)),d.length&&(p.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),e.reduce(function(e,i){var n=i.attributes.lang||"text";return e[n]||(e[n]={language:n,default:!1,autoselect:!1,playlists:Vs([zs(i)],t),uri:""}),e},{})}(d,i)),p}(i.representationInfo.map(Zs),i.locations,t.sidxMapping)}((e={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}).masterXml,{manifestUri:t=e.srcUrl,clientOffset:e.clientOffset,sidxMapping:e.sidxMapping}),hl(i,t),i),r=this.masterPlaylistLoader_.master;r&&(n=function(e,t,i){for(var n=!0,r=$l(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),a=0;a<t.playlists.length;a++){var s=t.playlists[a];if(s.sidx){var o=Ql(s.sidx);i&&i[o]&&co(s,i[o].sidx,s.sidx.resolvedUri)}var l=fl(r,s);l&&(r=l,n=!1)}return ul(t,function(e,t,i,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,o=fl(r,e.playlists[0]);o&&((r=o).mediaGroups[t][i][a].playlists[0]=r.playlists[s],n=!1)}}),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(n=!1),n?null:r}(r,n,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=n||r;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!r||n&&r.minimumUpdatePeriod!==n.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(n)},i.updateMinimumUpdatePeriodTimeout_=function(){var e=this;$r.clearTimeout(this.minimumUpdatePeriodTimeout_);var t=function t(i){e.minimumUpdatePeriodTimeout_=$r.setTimeout(function(){e.trigger("minimumUpdatePeriod"),t(i)},i)},i=this.masterPlaylistLoader_.master&&this.masterPlaylistLoader_.master.minimumUpdatePeriod;i>0?t(i):0===i&&(this.media()?t(1e3*this.media().targetDuration):this.one("loadedplaylist",function(){t(1e3*e.media().targetDuration)}))},i.refreshXml_=function(){var e=this;this.requestMaster_(function(t,i){var n,r,a;i&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(a=Zl((n=e.masterPlaylistLoader_.master).playlists,r=e.masterPlaylistLoader_.sidxMapping_),ul(n,function(e,t,i,n){e.playlists&&e.playlists.length&&(a=$l(a,Zl(e.playlists,r)))}),a),e.addSidxSegments_(e.media(),e.state,function(t){e.refreshMedia_(e.media().id)}))})},i.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var i=this.masterPlaylistLoader_.master.playlists,n=!this.media_||this.media_!==i[e];n?this.media_=i[e]:this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=$r.setTimeout(function(){t.trigger("mediaupdatetimeout")},ml(this.media(),Boolean(n)))),this.trigger("loadedplaylist")},t}(Vr.EventTarget),tu={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},iu=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t.buffer},nu=[],ru=function(e){var t=e.transmuxer,i=e.bytes,n=e.audioAppendStart,r=e.gopsToAlignWith,a=e.isPartial,s=e.remux,o=e.onData,l=e.onTrackInfo,u=e.onAudioTimingInfo,c=e.onVideoTimingInfo,h=e.onVideoSegmentTimingInfo,d=e.onAudioSegmentTimingInfo,p=e.onId3,f=e.onCaptions,m=e.onDone,g={isPartial:a,buffer:[]};if(t.onmessage=function(e){Xo&&("data"===e.data.action&&function(e,t,i){var n=e.data.segment,r=n.type,a=n.initSegment,s=n.videoFrameDtsTime,o=n.videoFramePtsTime;t.buffer.push({captions:n.captions,captionStreams:n.captionStreams,metadata:n.metadata});var l=e.data.segment.boxes||{data:e.data.segment.data},u={type:r,data:new Uint8Array(l.data,l.data.byteOffset,l.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};void 0!==s&&(u.videoFrameDtsTime=s),void 0!==o&&(u.videoFramePtsTime=o),i(u)}(e,g,o),"trackinfo"===e.data.action&&l(e.data.trackInfo),"gopInfo"===e.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(e,g),"audioTimingInfo"===e.data.action&&u(e.data.audioTimingInfo),"videoTimingInfo"===e.data.action&&c(e.data.videoTimingInfo),"videoSegmentTimingInfo"===e.data.action&&h(e.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===e.data.action&&d(e.data.audioSegmentTimingInfo),"id3Frame"===e.data.action&&p([e.data.id3Frame],e.data.id3Frame.dispatchType),"caption"===e.data.action&&f(e.data.caption),"transmuxed"===e.data.type&&(t.onmessage=null,function(e){var t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)}({transmuxedData:g,callback:m}),au()))},n&&t.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==s&&t.postMessage({action:"setRemux",remux:s}),i.byteLength){var v=i instanceof ArrayBuffer?i:i.buffer,y=i instanceof ArrayBuffer?0:i.byteOffset;t.postMessage({action:"push",data:v,byteOffset:y,byteLength:i.byteLength},[v])}t.postMessage({action:a?"partialFlush":"flush"})},au=function(){Xo=null,nu.length&&("function"==typeof(Xo=nu.shift())?Xo():ru(Xo))},su=function(e,t){e.postMessage({action:t}),au()},ou=function(e,t){if(!Xo)return Xo=e,void su(t,e);nu.push(su.bind(null,t,e))},lu=function(e){ou("reset",e)},uu=-101,cu=-102,hu=function(e){e.forEach(function(e){e.abort()})},du=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:uu,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:cu,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:null},pu=function(e){var t=e.segment,i=e.bytes,n=e.isPartial,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.dataFn,h=e.doneFn,d=t.map&&t.map.tracks||{},p=Boolean(d.audio&&d.video),f=a.bind(null,t,"audio","start"),m=a.bind(null,t,"audio","end"),g=a.bind(null,t,"video","start"),v=a.bind(null,t,"video","end");if(!n&&!t.lastReachedChar){var y=function(e,t){var i=function(e,t){var i;return(i=Lo.aac.isLikelyAacData(e)?function(e){for(var t,i=!1,n=0,r=null,a=null,s=0,o=0;e.length-o>=3;){switch(Lo.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){i=!0;break}if((s=Lo.aac.parseId3TagSize(e,o))>e.length){i=!0;break}null===a&&(t=e.subarray(o,o+s),a=Lo.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){i=!0;break}if((s=Lo.aac.parseAdtsSize(e,o))>e.length){i=!0;break}null===r&&(t=e.subarray(o,o+s),r=Lo.aac.parseSampleRate(t)),n++,o+=s;break;default:o++}if(i)return null}if(null===r||null===a)return null;var l=Mo/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*n*l,pts:a+1024*n*l}]}}(e):function(e){var t={pid:null,table:null},i={};for(var n in function(e,t){for(var i,n=0,r=No;r<e.byteLength;)if(e[n]!==jo||e[r]!==jo)n++,r++;else{switch(i=e.subarray(n,r),Lo.ts.parseType(i,t.pid)){case"pat":t.pid||(t.pid=Lo.ts.parsePat(i));break;case"pmt":t.table||(t.table=Lo.ts.parsePmt(i))}if(t.pid&&t.table)return;n+=No,r+=No}}(e,t),t.table)if(t.table.hasOwnProperty(n))switch(t.table[n]){case 27:i.video=[],Fo(e,t,i),0===i.video.length&&delete i.video;break;case 15:i.audio=[],Uo(e,t,i),0===i.audio.length&&delete i.audio}return i}(e))&&(i.audio||i.video)?(function(e,t){if(e.audio&&e.audio.length){var i=t;void 0===i&&(i=e.audio[0].dts),e.audio.forEach(function(e){e.dts=Do(e.dts,i),e.pts=Do(e.pts,i),e.dtsTime=e.dts/Mo,e.ptsTime=e.pts/Mo})}if(e.video&&e.video.length){var n=t;if(void 0===n&&(n=e.video[0].dts),e.video.forEach(function(e){e.dts=Do(e.dts,n),e.pts=Do(e.pts,n),e.dtsTime=e.dts/Mo,e.ptsTime=e.pts/Mo}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Do(r.dts,n),r.pts=Do(r.pts,n),r.dtsTime=r.dts/Mo,r.ptsTime=r.dts/Mo}}}(i,t),i):null}(e,t*Io);if(!i)return null;var n={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1};return n.hasVideo&&(n.videoStart=i.video[0].ptsTime),n.hasAudio&&(n.audioStart=i.audio[0].ptsTime),n}(i,t.baseStartTime);y&&(r(t,{hasAudio:y.hasAudio,hasVideo:y.hasVideo,isMuxed:p}),r=null,y.hasAudio&&!p&&f(y.audioStart),y.hasVideo&&g(y.videoStart),f=null,g=null)}!function(e){if(!Xo)return Xo=e,void ru(e);nu.push(e)}({bytes:i,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,isPartial:n,remux:p,onData:function(e){e.type="combined"===e.type?"video":e.type,c(t,e)},onTrackInfo:function(e){r&&(p&&(e.isMuxed=!0),r(t,e))},onAudioTimingInfo:function(e){f&&void 0!==e.start&&(f(e.start),f=null),m&&void 0!==e.end&&m(e.end)},onVideoTimingInfo:function(e){g&&void 0!==e.start&&(g(e.start),g=null),v&&void 0!==e.end&&v(e.end)},onVideoSegmentTimingInfo:function(e){s(e)},onAudioSegmentTimingInfo:function(e){o(e)},onId3:function(e,i){l(t,e,i)},onCaptions:function(e){u(t,[e])},onDone:function(e){h&&!n&&(e.type="combined"===e.type?"video":e.type,h(null,t,e))}})},fu=function(e){var t,i,n,r,a=e.segment,s=e.bytes,o=e.isPartial,l=e.trackInfoFn,u=e.timingInfoFn,c=e.videoSegmentTimingInfoFn,h=e.audioSegmentTimingInfoFn,d=e.id3Fn,p=e.captionsFn,f=e.dataFn,m=e.doneFn,g=new Uint8Array(s);if(go(g)){a.isFmp4=!0;var v=a.map.tracks,y={isFmp4:!0,hasVideo:!!v.video,hasAudio:!!v.audio};v.audio&&v.audio.codec&&"enca"!==v.audio.codec&&(y.audioCodec=v.audio.codec),v.video&&v.video.codec&&"encv"!==v.video.codec&&(y.videoCodec=v.video.codec),v.video&&v.audio&&(y.isMuxed=!0),l(a,y);var _=(t=a.map.timescales,i=Vo(g,["moof","traf"]),n=[].concat.apply([],i.map(function(e){return Vo(e,["tfhd"]).map(function(i){var n,r,a;return n=Wo(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),r=t[n]||9e4,(a="number"!=typeof(a=Vo(e,["tfdt"]).map(function(e){var t,i;return t=e[0],i=Wo(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=Wo(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0])||isNaN(a)?1/0:a)/r})})),r=Math.min.apply(null,n),isFinite(r)?r:0);y.hasAudio&&!y.isMuxed&&u(a,"audio","start",_),y.hasVideo&&u(a,"video","start",_);var b=function(e){f(a,{data:s,type:y.hasAudio&&!y.isMuxed?"audio":"video"}),e&&e.length&&p(a,e),m(null,a,{})};if(!v.video||!s.byteLength||!a.transmuxer)return void b();var T=s instanceof ArrayBuffer?s:s.buffer,S=s instanceof ArrayBuffer?0:s.byteOffset;return a.transmuxer.addEventListener("message",function e(t){if("mp4Captions"===t.data.action){a.transmuxer.removeEventListener("message",e);var i=t.data.data;a.bytes=s=new Uint8Array(i,i.byteOffset||0,i.byteLength),b(t.data.captions)}}),void a.transmuxer.postMessage({action:"pushMp4Captions",timescales:a.map.timescales,trackIds:[v.video.id],data:T,byteOffset:S,byteLength:s.byteLength},[T])}if(a.transmuxer){if(void 0===a.container&&(a.container=fo(g)),"ts"!==a.container&&"aac"!==a.container)return l(a,{hasAudio:!1,hasVideo:!1}),void m(null,a,{});pu({segment:a,bytes:s,isPartial:o,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:d,captionsFn:p,dataFn:f,doneFn:m})}else m(null,a,{})},mu=function(e){var t=e.xhr,i=e.xhrOptions,n=e.segment,r=e.abortFn,a=e.progressFn,s=e.trackInfoFn,o=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,u=e.audioSegmentTimingInfoFn,c=e.id3Fn,h=e.captionsFn,d=e.dataFn,p=e.handlePartialData,f=[],m=function(e){var t=e.activeXhrs,i=e.decryptionWorker,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.dataFn,c=e.doneFn,h=0,d=!1;return function(e,p){if(!d){if(e)return d=!0,hu(t),c(e,p);if((h+=1)===t.length){if(p.endOfAllRequests=Date.now(),p.encryptedBytes)return function(e){var t,i=e.decryptionWorker,n=e.segment,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.dataFn,h=e.doneFn;i.addEventListener("message",function e(t){if(t.data.source===n.requestId){i.removeEventListener("message",e);var d=t.data.decrypted;n.bytes=new Uint8Array(d.bytes,d.byteOffset,d.byteLength),fu({segment:n,bytes:n.bytes,isPartial:!1,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,dataFn:c,doneFn:h})}}),t=n.key.bytes.slice?n.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(n.key.bytes)),i.postMessage(Wl({source:n.requestId,encrypted:n.encryptedBytes,key:t,iv:n.key.iv}),[n.encryptedBytes.buffer,t.buffer])}({decryptionWorker:i,segment:p,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u,doneFn:c});fu({segment:p,bytes:p.bytes,isPartial:!1,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u,doneFn:c})}}}}({activeXhrs:f,decryptionWorker:e.decryptionWorker,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,dataFn:d,doneFn:e.doneFn});if(n.key&&!n.key.bytes){var g=t(Vr.mergeOptions(i,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),function(e,t){return function(i,n){var r=n.response,a=du(i,n);if(a)return t(a,e);if(16!==r.byteLength)return t({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:2,xhr:n},e);var s=new DataView(r);return e.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),t(null,e)}}(n,m));f.push(g)}if(n.map&&!n.map.bytes){var v=t(Vr.mergeOptions(i,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:Bl(n.map)}),function(e){var t=e.segment,i=e.finishProcessingFn;return function(e,n){var r=n.response,a=du(e,n);if(a)return i(a,t);if(0===r.byteLength)return i({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:2,xhr:n},t);t.map.bytes=new Uint8Array(n.response);var s,o,l,u=fo(t.map.bytes);return"mp4"!==u?i({status:n.status,message:"Found unsupported "+(u||"unknown")+" container for initialization segment at URL: "+n.uri,code:2,internal:!0,xhr:n},t):((s=t.map.bytes,o=Vo(s,["moov","trak"]),l=[],o.forEach(function(e){var t,i,n={},r=Vo(e,["tkhd"])[0];r&&(i=(t=new DataView(r.buffer,r.byteOffset,r.byteLength)).getUint8(0),n.id=t.getUint32(0===i?12:20));var a=Vo(e,["mdia","hdlr"])[0];if(a){var s=Ho(a.subarray(8,12));n.type="vide"===s?"video":"soun"===s?"audio":s}var o=Vo(e,["mdia","minf","stbl","stsd"])[0];if(o){var u=o.subarray(8);n.codec=Ho(u.subarray(4,8));var c,h=Vo(u,[n.codec])[0];h&&(/^[a-z]vc[1-9]$/i.test(n.codec)?(c=h.subarray(78),"avcC"===Ho(c.subarray(4,8))&&c.length>11?(n.codec+=".",n.codec+=zo(c[9]),n.codec+=zo(c[10]),n.codec+=zo(c[11])):n.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(n.codec)?(c=h.subarray(28),"esds"===Ho(c.subarray(4,8))&&c.length>20&&0!==c[19]?(n.codec+="."+zo(c[19]),n.codec+="."+zo(c[20]>>>2&63).replace(/^0/,"")):n.codec="mp4a.40.2"):n.codec=n.codec.toLowerCase())}var d=Vo(e,["mdia","mdhd"])[0];d&&(n.timescale=Ro(d)),l.push(n)}),l).forEach(function(e){t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||(t.map.tracks[e.type]=e,"number"==typeof e.id&&e.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale))}),i(null,t))}}({segment:n,finishProcessingFn:m}));f.push(v)}var y=Vr.mergeOptions(i,{uri:n.resolvedUri,responseType:"arraybuffer",headers:Bl(n)});p&&(y.responseType="text",y.beforeSend=function(e){e.overrideMimeType("text/plain; charset=x-user-defined")});var _=t(y,function(e){var t=e.segment,i=e.finishProcessingFn,n=e.responseType;return function(e,r){var a=r.response,s=du(e,r);if(s)return i(s,t);var o="arraybuffer"!==n&&r.responseText?iu(r.responseText.substring(t.lastReachedChar||0)):r.response;return 0===a.byteLength?i({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:2,xhr:r},t):(t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),i(null,t))}}({segment:n,finishProcessingFn:m,responseType:y.responseType}));_.addEventListener("progress",function(e){var t=e.segment,i=e.progressFn,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.dataFn,c=e.handlePartialData;return function(e){var h=e.target;if(!h.aborted){if(c&&!t.key&&h.responseText&&h.responseText.length>=8){var d=iu(h.responseText.substring(t.lastReachedChar||0));!t.lastReachedChar&&go(new Uint8Array(d))||(t.lastReachedChar=h.responseText.length,fu({segment:t,bytes:d,isPartial:!0,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u}))}return t.stats=Vr.mergeOptions(t.stats,function(e){var t=e.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),i(e,t)}}}({segment:n,progressFn:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,dataFn:d,handlePartialData:p})),f.push(_);var b={};return f.forEach(function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,i=e.abortFn;return function(e){e.target.aborted&&i&&!t.calledAbortFn&&(i(),t.calledAbortFn=!0)}}({loadendState:b,abortFn:r}))}),function(){return hu(f)}},gu="undefined"!=typeof window?window:{},vu="undefined"==typeof Symbol?"__target":Symbol(),yu=gu.BlobBuilder||gu.WebKitBlobBuilder||gu.MozBlobBuilder||gu.MSBlobBuilder,_u=gu.URL||gu.webkitURL||_u&&_u.msURL,bu=gu.Worker;function Tu(e,t){return function(i){var n=this;if(!t)return new bu(e);if(bu&&!i){var r=ku(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[vu]=new bu(r),function(e,t){if(e&&t){var i=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&_u.revokeObjectURL(e.objURL),i.call(e)}}}(this[vu],r),this[vu]}var a={postMessage:function(e){n.onmessage&&setTimeout(function(){n.onmessage({data:e,target:a})})}};t.call(a),this.postMessage=function(e){setTimeout(function(){a.onmessage({data:e,target:n})})},this.isThisThread=!0}}if(bu){var Su,wu=ku("self.onmessage = function () {}"),Cu=new Uint8Array(1);try{(Su=new bu(wu)).postMessage(Cu,[Cu.buffer])}catch(Hc){bu=null}finally{_u.revokeObjectURL(wu),Su&&Su.terminate()}}function ku(e){try{return _u.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(Hc){var t=new yu;return t.append(e),_u.createObjectURL(t.getBlob(type))}}var xu=new Tu("./transmuxer-worker.worker.js",function(e,t){var i=this;
/*! @name @videojs/http-streaming @version 2.4.2 @license Apache-2.0 */!function(){var e=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,r,a;if(i=e[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,n,r,a,s,o,l,u,c,h,d,p,f,m,g,v,y,_,b,T,S,w,C,k,x,E,A,P,O,I,D,L,R,M,N,j,U,F,B,H,q=e,V=Math.pow(2,32)-1;!function(){var e;if(w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in w)w.hasOwnProperty(e)&&(w[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),x=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),P={video:E,audio:A},D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),R=L,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=L,O=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,i,n=[],r=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)r+=n[t].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,r=8;t<n.length;t++)i.set(n[t],r),r+=n[t].byteLength;return i},n=function(){return t(w.dinf,t(w.dref,D))},r=function(e){return t(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(w.hdlr,P[e])},m=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(i[12]=e.samplerate>>>24&255,i[13]=e.samplerate>>>16&255,i[14]=e.samplerate>>>8&255,i[15]=255&e.samplerate),t(w.mdhd,i)},f=function(e){return t(w.mdia,m(e),g(e.type),o(e))},s=function(e){return t(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return t(w.minf,"video"===e.type?t(w.vmhd,O):t(w.smhd,I),n(),y(e))},l=function(e,i){for(var n=[],r=i.length;r--;)n[r]=b(i[r]);return t.apply(null,[w.moof,s(e)].concat(n))},u=function(e){for(var i=e.length,n=[];i--;)n[i]=d(e[i]);return t.apply(null,[w.moov,h(4294967295)].concat(n).concat(c(e)))},c=function(e){for(var i=e.length,n=[];i--;)n[i]=T(e[i]);return t.apply(null,[w.mvex].concat(n))},h=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(w.mvhd,i)},v=function(e){var i,n,r=e.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)a[n+4]=(i=r[n].flags).dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t(w.sdtp,a)},y=function(e){return t(w.stbl,_(e),t(w.stts,N),t(w.stsc,R),t(w.stsz,M),t(w.stco,L))},_=function(e){return t(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?j(e):U(e))},j=function(e){var i,n,r=e.sps||[],a=e.pps||[],s=[],o=[];for(i=0;i<r.length;i++)s.push((65280&r[i].byteLength)>>>8),s.push(255&r[i].byteLength),s=s.concat(Array.prototype.slice.call(r[i]));for(i=0;i<a.length;i++)o.push((65280&a[i].byteLength)>>>8),o.push(255&a[i].byteLength),o=o.concat(Array.prototype.slice.call(a[i]));if(n=[w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(w.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],s,[a.length],o))),t(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];n.push(t(w.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return t.apply(null,n)},U=function(e){return t(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},p=function(e){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(w.tkhd,i)},b=function(e){var i,n,r,a,s,o;return i=t(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(V+1)),o=Math.floor(e.baseMediaDecodeTime%(V+1)),n=t(w.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===e.type?(r=S(e,92),t(w.traf,i,n,r)):(a=v(e),r=S(e,a.length+92),t(w.traf,i,n,r,a))},d=function(e){return e.duration=e.duration||4294967295,t(w.trak,p(e),f(e))},T=function(e){var i=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(i[i.length-1]=0),t(w.trex,i)},H=function(e,t){var i=0,n=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,i|n|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,i){var n,r,a,s,o,l;for(a=H(s=e.samples||[],i+=20+16*s.length),(r=new Uint8Array(a.length+16*s.length)).set(a),n=a.length,l=0;l<s.length;l++)r[n++]=(4278190080&(o=s[l]).duration)>>>24,r[n++]=(16711680&o.duration)>>>16,r[n++]=(65280&o.duration)>>>8,r[n++]=255&o.duration,r[n++]=(4278190080&o.size)>>>24,r[n++]=(16711680&o.size)>>>16,r[n++]=(65280&o.size)>>>8,r[n++]=255&o.size,r[n++]=o.flags.isLeading<<2|o.flags.dependsOn,r[n++]=o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,r[n++]=61440&o.flags.degradationPriority,r[n++]=15&o.flags.degradationPriority,r[n++]=(4278190080&o.compositionTimeOffset)>>>24,r[n++]=(16711680&o.compositionTimeOffset)>>>16,r[n++]=(65280&o.compositionTimeOffset)>>>8,r[n++]=255&o.compositionTimeOffset;return t(w.trun,r)},F=function(e,i){var n,r,a,s,o,l;for(a=H(s=e.samples||[],i+=20+8*s.length),(n=new Uint8Array(a.length+8*s.length)).set(a),r=a.length,l=0;l<s.length;l++)n[r++]=(4278190080&(o=s[l]).duration)>>>24,n[r++]=(16711680&o.duration)>>>16,n[r++]=(65280&o.duration)>>>8,n[r++]=255&o.duration,n[r++]=(4278190080&o.size)>>>24,n[r++]=(16711680&o.size)>>>16,n[r++]=(65280&o.size)>>>8,n[r++]=255&o.size;return t(w.trun,n)},S=function(e,t){return"audio"===e.type?F(e,t):B(e,t)},a=function(){return t(w.ftyp,C,k,C,x)};var W,z,G,X,J,Y,K,$,Q=function(e){return t(w.mdat,e)},Z=l,ee=function(e){var t,i=a(),n=u(e);return(t=new Uint8Array(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t},te=function(e,t){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=4*e.length,i.size+=e.byteLength,e.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},ie=function(e){var t,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,n.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},ne=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},re=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ae=function(e,t){var i,n=[];return i=te(e,t||0),n.push(i),n},se=function(e){var t,i,n=0,r=new Uint8Array(e.byteLength+4*e.length),a=new DataView(r.buffer);for(t=0;t<e.length;t++)a.setUint32(n,(i=e[t]).data.byteLength),r.set(i.data,n+=4),n+=i.data.byteLength;return r},oe=[33,16,5,32,164,27],le=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ue=function(e){for(var t=[];e--;)t.push(0);return t},ce=9e4;Y=function(e,t){return z(J(e,t))},K=function(e,t){return G(X(e),t)},$=function(e,t,i){return X(i?e:e-t)};var he=z=function(e){return e*ce},de=(G=function(e,t){return e*t},X=function(e){return e/ce}),pe=(J=function(e,t){return e/t},Y),fe=K,me=$,ge=function(e,t,i,n){var r,a,s,o,l,u=0,c=0,h=0;if(t.length&&(r=pe(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(9e4/(e.samplerate/1024)),i&&n&&(u=r-Math.max(i,n),h=(c=Math.floor(u/a))*a),!(c<1||h>45e3))){for((s=function(){if(!W){var e={96e3:[oe,[227,64],ue(154),[56]],88200:[oe,[231],ue(170),[56]],64e3:[oe,[248,192],ue(240),[56]],48e3:[oe,[255,192],ue(268),[55,148,128],ue(54),[112]],44100:[oe,[255,192],ue(268),[55,163,128],ue(84),[112]],32e3:[oe,[255,192],ue(268),[55,234],ue(226),[112]],24e3:[oe,[255,192],ue(268),[55,255,128],ue(268),[111,112],ue(126),[224]],16e3:[oe,[255,192],ue(268),[55,255,128],ue(268),[111,255],ue(269),[223,108],ue(195),[1,192]],12e3:[le,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,253,128],ue(259),[56]],11025:[le,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,255,192],ue(268),[55,175,128],ue(108),[112]],8e3:[le,ue(268),[3,121,16],ue(47),[7]]};t=e,W=Object.keys(t).reduce(function(e,i){return e[i]=new Uint8Array(t[i].reduce(function(e,t){return e.concat(t)},[])),e},{})}var t;return W}()[e.samplerate])||(s=t[0].data),o=0;o<c;o++)t.splice(0,0,{data:s,dts:(l=t[0]).dts-a,pts:l.pts-a});return e.baseMediaDecodeTime-=Math.floor(fe(h,e.samplerate)),h}},ve=function(e,t,i){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},ye=function(e){var t,i=[];for(t=0;t<e.length;t++)i.push({size:e[t].data.byteLength,duration:1024});return i},_e=function(e){var t,i,n=0,r=new Uint8Array(function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i}(e));for(t=0;t<e.length;t++)r.set((i=e[t]).data,n),n+=i.data.byteLength;return r},be=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Te=function(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/9e4,i=Math.floor(i)),i},Se=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),e.minSegmentPts=void 0===e.minSegmentPts?t.pts:Math.min(e.minSegmentPts,t.pts),e.maxSegmentPts=void 0===e.maxSegmentPts?t.pts:Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),e.minSegmentDts=void 0===e.minSegmentDts?t.dts:Math.min(e.minSegmentDts,t.dts),e.maxSegmentDts=void 0===e.maxSegmentDts?t.dts:Math.max(e.maxSegmentDts,t.dts))},we=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Le(0,0),new Le(0,1),new Le(1,0),new Le(1,1)],this.cc708Stream_=new Ae,this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this),this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done"))};(we.prototype=new q).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}i.payload=void 0}t+=r,n=0,r=0}return i}(e.escapedRBSP)).payload&&4===t.payloadType&&(i=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=function(e,t){var i,n,r,a,s=[];if(!(64&t[0]))return s;for(n=31&t[0],i=0;i<n;i++)a={type:3&t[2+(r=3*i)],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s}(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},we.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},we.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)},this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},we.prototype.flush=function(){return this.flushStream("flush")},we.prototype.partialFlush=function(){return this.flushStream("partialFlush")},we.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},we.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},we.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},we.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},we.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},we.prototype.dispatchCea708Packet=function(e){this.cc708Stream_.push(e)};var Ce={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ke=function(e){return 32<=e&&e<=127||160<=e&&e<=255},xe=function(e){this.windowNum=e,this.reset()};xe.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},xe.prototype.getText=function(){return this.rows.join("\n")},xe.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},xe.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},xe.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},xe.prototype.addText=function(e){this.rows[this.rowIdx]+=e},xe.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var Ee=function(e){this.serviceNum=e,this.text="",this.currentWindow=new xe(-1),this.windows=[]};Ee.prototype.init=function(e,t){this.startPts=e;for(var i=0;i<8;i++)this.windows[i]=new xe(i),"function"==typeof t&&(this.windows[i].beforeRowOverflow=t)},Ee.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]};var Ae=function e(){e.prototype.init.call(this);var t=this;this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(t.new708Packet(),t.add708Bytes(e)):(null===t.current708Packet&&t.new708Packet(),t.add708Bytes(e))}};Ae.prototype=new q,Ae.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ae.prototype.add708Bytes=function(e){var t=e.ccData,i=t>>>8,n=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(n)},Ae.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,i=null,n=null,r=0,a=t[r++];for(e.seq=a>>6,e.sizeCode=63&a;r<t.length;r++)n=31&(a=t[r++]),7==(i=a>>5)&&n>0&&(i=a=t[r++]),this.pushServiceBlock(i,r,n),n>0&&(r+=n-1)},Ae.prototype.pushServiceBlock=function(e,t,i){var n,r=t,a=this.current708Packet.data,s=this.services[e];for(s||(s=this.initService(e,r));r<t+i&&r<a.length;r++)ke(n=a[r])?r=this.handleText(r,s):16===n?r=this.extendedCommands(r,s):128<=n&&n<=135?r=this.setCurrentWindow(r,s):152<=n&&n<=159?r=this.defineWindow(r,s):136===n?r=this.clearWindows(r,s):140===n?r=this.deleteWindows(r,s):137===n?r=this.displayWindows(r,s):138===n?r=this.hideWindows(r,s):139===n?r=this.toggleWindows(r,s):151===n?r=this.setWindowAttributes(r,s):144===n?r=this.setPenAttributes(r,s):145===n?r=this.setPenColor(r,s):146===n?r=this.setPenLocation(r,s):143===n?s=this.reset(r,s):8===n?s.currentWindow.backspace():12===n?s.currentWindow.clearText():13===n?s.currentWindow.pendingNewLine=!0:14===n?s.currentWindow.clearText():141===n&&r++},Ae.prototype.extendedCommands=function(e,t){var i=this.current708Packet.data[++e];return ke(i)&&(e=this.handleText(e,t,!0)),e},Ae.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},Ae.prototype.initService=function(e,t){var i=this;return this.services[e]=new Ee(e),this.services[e].init(this.getPts(t),function(t){i.flushDisplayed(t,i.services[e])}),this.services[e]},Ae.prototype.handleText=function(e,t,i){var n,r,a=(r=Ce[n=(i?4096:0)|this.current708Packet.data[e]]||n,4096&n&&n===r?"":String.fromCharCode(r)),s=t.currentWindow;return s.pendingNewLine&&!s.isEmpty()&&s.newLine(this.getPts(e)),s.pendingNewLine=!1,s.addText(a),e},Ae.prototype.setCurrentWindow=function(e,t){return t.setCurrentWindow(7&this.current708Packet.data[e]),e},Ae.prototype.defineWindow=function(e,t){var i=this.current708Packet.data,n=i[e];t.setCurrentWindow(7&n);var r=t.currentWindow;return n=i[++e],r.visible=(32&n)>>5,r.rowLock=(16&n)>>4,r.columnLock=(8&n)>>3,r.priority=7&n,n=i[++e],r.relativePositioning=(128&n)>>7,r.anchorVertical=127&n,n=i[++e],r.anchorHorizontal=n,n=i[++e],r.anchorPoint=(240&n)>>4,r.rowCount=15&n,n=i[++e],r.columnCount=63&n,n=i[++e],r.windowStyle=(56&n)>>3,r.penStyle=7&n,r.virtualRowCount=r.rowCount+1,e},Ae.prototype.setWindowAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.winAttr;return n=i[++e],r.fillOpacity=(192&n)>>6,r.fillRed=(48&n)>>4,r.fillGreen=(12&n)>>2,r.fillBlue=3&n,n=i[++e],r.borderType=(192&n)>>6,r.borderRed=(48&n)>>4,r.borderGreen=(12&n)>>2,r.borderBlue=3&n,n=i[++e],r.borderType+=(128&n)>>5,r.wordWrap=(64&n)>>6,r.printDirection=(48&n)>>4,r.scrollDirection=(12&n)>>2,r.justify=3&n,n=i[++e],r.effectSpeed=(240&n)>>4,r.effectDirection=(12&n)>>2,r.displayEffect=3&n,e},Ae.prototype.flushDisplayed=function(e,t){for(var i=[],n=0;n<8;n++)t.windows[n].visible&&!t.windows[n].isEmpty()&&i.push(t.windows[n].getText());t.endPts=e,t.text=i.join("\n\n"),this.pushCaption(t),t.startPts=e},Ae.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},Ae.prototype.displayWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible=1);return e},Ae.prototype.hideWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible=0);return e},Ae.prototype.toggleWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible^=1);return e},Ae.prototype.clearWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&t.windows[r].clearText();return e},Ae.prototype.deleteWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&t.windows[r].reset();return e},Ae.prototype.setPenAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penAttr;return n=i[++e],r.textTag=(240&n)>>4,r.offset=(12&n)>>2,r.penSize=3&n,n=i[++e],r.italics=(128&n)>>7,r.underline=(64&n)>>6,r.edgeType=(56&n)>>3,r.fontStyle=7&n,e},Ae.prototype.setPenColor=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penColor;return n=i[++e],r.fgOpacity=(192&n)>>6,r.fgRed=(48&n)>>4,r.fgGreen=(12&n)>>2,r.fgBlue=3&n,n=i[++e],r.bgOpacity=(192&n)>>6,r.bgRed=(48&n)>>4,r.bgGreen=(12&n)>>2,r.bgBlue=3&n,n=i[++e],r.edgeRed=(48&n)>>4,r.edgeGreen=(12&n)>>2,r.edgeBlue=3&n,e},Ae.prototype.setPenLocation=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,n=i[++e],r.row=15&n,n=i[++e],r.column=63&n,e},Ae.prototype.reset=function(e,t){var i=this.getPts(e);return this.flushDisplayed(i,t),this.initService(t.serviceNum,e)};var Pe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Oe=function(e){return null===e?"":(e=Pe[e]||e,String.fromCharCode(e))},Ie=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],De=function(){for(var e=[],t=15;t--;)e.push("");return e},Le=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=De();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=De();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=De()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))a=Oe((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Oe((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=Ie.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=Oe(n),a+=Oe(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Le.prototype=new q,Le.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(Hc){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Le.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=De(),this.nonDisplayed_=De(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Le.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Le.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Le.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Le.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Le.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Le.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Le.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Le.prototype.isNormalChar=function(e){return e>=32&&e<=127},Le.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=De(),this.displayed_=De()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Le.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},Le.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},Le.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=i+=t},Le.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];this.displayed_[this.row_]=i+=t},Le.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Le.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];this.displayed_[this.row_]=i+=t};var Re={CaptionStream:we,Cea608Stream:Le,Cea708Stream:Ae},Me={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ne="shared",je=function(e,t){var i=1;for(e>t&&(i=-1);Math.abs(t-e)>4294967296;)e+=8589934592*i;return e},Ue=function e(t){var i,n;e.prototype.init.call(this),this.type_=t||Ne,this.push=function(e){this.type_!==Ne&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=je(e.dts,n),e.pts=je(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ue.prototype=new q;var Fe,Be=Ue,He=function(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r},qe=function(e,t,i){return decodeURIComponent(He(e,t,i))},Ve=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},We={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=qe(e.data,1,t),e.value=qe(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=qe(e.data,1,t),e.url=qe(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=unescape(He(e.data,0,t));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(Fe=function(e){var t,i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,r=[],a=0;if(Fe.prototype.init.call(this),this.dispatchType=Me.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,s,o,l,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))i.debug&&console.log("Skipping unrecognized metadata packet");else if(r.push(e),a+=e.data.byteLength,1===r.length&&(n=Ve(e.data.subarray(6,10)),n+=10),!(a<n)){for(t={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<n;)t.data.set(r[0].data.subarray(0,n-u),u),u+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();s=10,64&t.data[5]&&(s+=4,s+=Ve(t.data.subarray(10,14)),n-=Ve(t.data.subarray(16,20)));do{if((o=Ve(t.data.subarray(s+4,s+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((l={id:String.fromCharCode(t.data[s],t.data[s+1],t.data[s+2],t.data[s+3]),data:t.data.subarray(s+10,s+o+10)}).key=l.id,We[l.id]&&(We[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var c=l.data,h=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;h*=4,l.timeStamp=h+=3&c[7],void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),s+=10,s+=o}while(s<n);this.trigger("data",t)}}}).prototype=new q;var ze,Ge,Xe,Je=Fe,Ye=Be,Ke=188;(ze=function(){var e=new Uint8Array(Ke),t=0;ze.prototype.init.call(this),this.push=function(i){var n,r=0,a=Ke;for(t?((n=new Uint8Array(i.byteLength+t)).set(e.subarray(0,t)),n.set(i,t),t=0):n=i;a<n.byteLength;)71!==n[r]||71!==n[a]?(r++,a++):(this.trigger("data",n.subarray(r,a)),r+=Ke,a+=Ke);r<n.byteLength&&(e.set(n.subarray(r),0),t=n.byteLength-r)},this.flush=function(){t===Ke&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new q,(Ge=function(){var e,t,i,n;Ge.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var r=0;n.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},i=function(e,t){var i,r;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<i;){var a=e[r],s=(31&e[r+1])<<8|e[r+2];a===Me.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=s:a===Me.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=s:a===Me.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][s]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(e,t,i){i.streamType=i.pid===this.programMapTable.video?Me.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?Me.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new q,Ge.STREAM_TYPES={h264:27,adts:15},(Xe=function(){var e,t=this,i={data:[],size:0},n={data:[],size:0},r={data:[],size:0},a=function(e,i,n){var r,a,s=new Uint8Array(e.size),o={type:i},l=0,u=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,l=0;l<e.data.length;l++)s.set((a=e.data[l]).data,u),u+=a.data.byteLength;var c,h,d;(h=o).packetLength=6+((c=s)[4]<<8|c[5]),h.dataAlignmentIndicator=0!=(4&c[6]),192&(d=c[7])&&(h.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,h.pts*=4,h.pts+=(6&c[13])>>>1,h.dts=h.pts,64&d&&(h.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,h.dts*=4,h.dts+=(6&c[18])>>>1)),h.data=c.subarray(9+c[8]),r="video"===i||o.packetLength<=e.size,(n||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",o)}};Xe.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case Me.H264_STREAM_TYPE:e=i,t="video";break;case Me.ADTS_STREAM_TYPE:e=n,t="audio";break;case Me.METADATA_STREAM_TYPE:e=r,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}})[s.type]()},this.reset=function(){i.size=0,i.data.length=0,n.size=0,n.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(i,"video"),a(n,"audio"),a(r,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new q;var $e={PAT_PID:0,MP2T_PACKET_LENGTH:Ke,TransportPacketStream:ze,TransportParseStream:Ge,ElementaryStream:Xe,TimestampRolloverStream:Ye,CaptionStream:Re.CaptionStream,Cea608Stream:Re.Cea608Stream,Cea708Stream:Re.Cea708Stream,MetadataStream:Je};for(var Qe in Me)Me.hasOwnProperty(Qe)&&($e[Qe]=Me[Qe]);var Ze,et=$e,tt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Ze=function(e){var t,i=0;Ze.prototype.init.call(this),this.push=function(n){var r,a,s,o,l=0;if(e||(i=0),"audio"===n.type)for(t?(a=t,(t=new Uint8Array(a.byteLength+n.data.byteLength)).set(a),t.set(n.data,a.byteLength)):t=n.data;l+5<t.length;)if(255===t[l]&&240==(246&t[l+1])){if(t.byteLength<(r=l+((3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5)))return;if(this.trigger("data",{pts:n.pts+i*(o=9e4*(s=1024*(1+(3&t[l+6])))/tt[(60&t[l+2])>>>2]),dts:n.dts+i*o,sampleCount:s,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:tt[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+2*(1&~t[l+1]),r)}),i++,t.byteLength===r)return void(t=void 0);t=t.subarray(r)}else l++},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new q;var it,nt,rt,at=Ze,st=function(e){var t=e.byteLength,i=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(r,r+s)),i=new DataView(a.buffer).getUint32(0),n=8*s,t-=s},this.skipBits=function(e){var r;n>e?(i<<=e,n-=e):(e-=n,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),i<<=e,n-=e)},this.readBits=function(e){var r=Math.min(n,e),a=i>>>32-r;return(n-=r)>0?i<<=r:t>0&&this.loadWord(),(r=e-r)>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!=(i&2147483648>>>e))return i<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(nt=function(){var e,t,i=0;nt.prototype.init.call(this),this.push=function(n){var r;t?((r=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;for(var a=t.byteLength;i<a-3;i++)if(1===t[i+2]){e=i+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));do{e++}while(1!==t[e]&&e<a);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3}t=t.subarray(i),e-=i,i=0},this.reset=function(){t=null,i=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new q,rt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(it=function(){var e,t,i,n,r,a,s,o=new nt;it.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on("data",function(s){var o={trackId:t,pts:i,dts:n,data:s};switch(31&s[0]){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)}),o.on("done",function(){e.trigger("done")}),o.on("partialdone",function(){e.trigger("partialdone")}),o.on("reset",function(){e.trigger("reset")}),o.on("endedtimeline",function(){e.trigger("endedtimeline")}),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(e,t){var i,n=8,r=8;for(i=0;i<e;i++)0!==r&&(r=(n+t.readExpGolomb()+256)%256),n=0===r?n:r},r=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=e[s];return i},a=function(e){var t,i,n,r,a,o,l,u,c,h,d,p,f,m=0,g=0,v=0,y=0,_=1;if(i=(t=new st(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),rt[i]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==a?8:12,f=0;f<d;f++)t.readBoolean()&&s(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;f<l;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(h=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}p&&(_=p[0]/p[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:Math.ceil((16*(u+1)-2*m-2*g)*_),height:(2-h)*(c+1)*16-2*v-2*y,sarRatio:p}}}).prototype=new q;var ot,lt={H264Stream:it,NalByteStream:nt},ut=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return i=i>=0?i:0,(16&e[t+5])>>4?i+20:i+10},ct=function e(t,i){return t.length-i<10||t[i]!=="I".charCodeAt(0)||t[i+1]!=="D".charCodeAt(0)||t[i+2]!=="3".charCodeAt(0)?i:e(t,i+=ut(t,i))},ht=function(e){var t=ct(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},dt=ut,pt=function(e,t){return 6144&e[t+3]|e[t+4]<<3|(224&e[t+5])>>5};(ot=function(){var e=new Uint8Array,t=0;ot.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(i){var n,r,a,s=0,o=0;for(e.length?(a=e.length,(e=new Uint8Array(i.byteLength+a)).set(e.subarray(0,a)),e.set(i,a)):e=i;e.length-o>=3;)if(e[o]!=="I".charCodeAt(0)||e[o+1]!=="D".charCodeAt(0)||e[o+2]!=="3".charCodeAt(0))if(255!=(255&e[o])||240!=(240&e[o+1]))o++;else{if(e.length-o<7)break;if(o+(s=pt(e,o))>e.length)break;r={type:"audio",data:e.subarray(o,o+s),pts:t,dts:t},this.trigger("data",r),o+=s}else{if(e.length-o<10)break;if(o+(s=dt(e,o))>e.length)break;n={type:"timed-metadata",data:e.subarray(o,o+s)},this.trigger("data",n),o+=s}e=e.length-o>0?e.subarray(o):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new q;var ft,mt,gt,vt,yt=ot,_t=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],bt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Tt=lt.H264Stream,St=ht,wt=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},Ct=function(e,t,i,n,r,a){return{start:{dts:e,pts:e+(i-t)},end:{dts:e+(n-t),pts:e+(r-i)},prependedContentDuration:a,baseMediaDecodeTime:e}};(mt=function(e,t){var i=[],n=0,r=0,a=0,s=1/0;t=t||{},mt.prototype.init.call(this),this.push=function(t){Se(e,t),e&&_t.forEach(function(i){e[i]=t[i]}),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var o,l,u,c,h,d,p;0!==i.length?(o=ve(i,e,r),e.baseMediaDecodeTime=Te(e,t.keepOriginalTimestamps),p=ge(e,o,a,s),e.samples=ye(o),u=Q(_e(o)),i=[],l=Z(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),be(e),h=Math.ceil(9216e4/e.samplerate),o.length&&(d=o.length*h,this.trigger("segmentTimingInfo",Ct(pe(e.baseMediaDecodeTime,e.samplerate),o[0].dts,o[0].pts,o[0].dts+d,o[0].pts+d,p||0)),this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+d})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){be(e),i=[],this.trigger("reset")}}).prototype=new q,(ft=function(e,t){var i,n,r=0,a=[],s=[];t=t||{},ft.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){Se(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],bt.forEach(function(t){e[t]=i[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var i,n,o,l,u,c,h,d,p=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=ie(a),(o=ne(i))[0][0].keyFrame||((n=this.getGopForFusion_(a[0],e))?(p=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=re(o)),s.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");be(e),o=f}Se(e,o),e.samples=function(e,t){var i,n,r,a,s=0,o=[];for(i=0;i<e.length;i++)for(a=e[i],n=0;n<a.length;n++)s+=(r=te(a[n],s)).size,o.push(r);return o}(o),u=Q(function(e){var t,i,n,r,a,s,o=0,l=new Uint8Array(e.byteLength+4*e.nalCount),u=new DataView(l.buffer);for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for(a=r[i],n=0;n<a.length;n++)u.setUint32(o,(s=a[n]).data.byteLength),l.set(s.data,o+=4),o+=s.data.byteLength;return l}(o)),e.baseMediaDecodeTime=Te(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.trigger("segmentTimingInfo",Ct(e.baseMediaDecodeTime,(h=o[0]).dts,h.pts,(d=o[o.length-1]).dts+d.duration,d.pts+d.duration,p)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=Z(r,[e]),c=new Uint8Array(l.byteLength+u.byteLength),r++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){be(e),i=void 0,n=void 0},this.getGopForFusion_=function(t){var i,n,r,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)r=(a=this.gopCache_[s]).gop,e.pps&&wt(e.pps[0],a.pps[0])&&e.sps&&wt(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)>=-1e4&&i<=45e3&&(!n||o>i)&&(n=a,o=i));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,r,a,o,l,u;for(a=e.byteLength,o=e.nalCount,l=e.duration,t=i=0;t<s.length&&i<e.length&&(n=s[t]).pts!==(r=e[i]).pts;)r.pts>n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===i?e:i===e.length?null:((u=e.slice(i)).byteLength=a,u.duration=l,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,i,n,r,a,o,l;for(t=s.length-1,i=e.length-1,a=null,o=!1;t>=0&&i>=0;){if((n=s[t]).pts===(r=e[i]).pts){o=!0;break}n.pts>r.pts?t--:(t===s.length-1&&(a=i),i--)}if(!o&&null===a)return null;if(0===(l=o?i:a))return e;var u=e.slice(l),c=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){s=e}}).prototype=new q,(vt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,this.remuxTracks=void 0===(e=e||{}).remux||!!e.remux,this.keepOriginalTimestamps="boolean"==typeof e.keepOriginalTimestamps&&e.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,vt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new q,vt.prototype.flush=function(e){var t,i,n,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,bt.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,_t.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(s.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,n=ee(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=me(t.startPts,o,this.keepOriginalTimestamps),t.endTime=me(t.endPts,o,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=me(i.pts,o,this.keepOriginalTimestamps),s.metadata.push(i);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)this.trigger("caption",t=s.captions[r]);for(r=0;r<s.metadata.length;r++)this.trigger("id3Frame",i=s.metadata[r])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},vt.prototype.setRemux=function(e){this.remuxTracks=e},(gt=function(e){var t,i,n=this,r=!0;gt.prototype.init.call(this),this.baseMediaDecodeTime=(e=e||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new et.MetadataStream,r.aacStream=new yt,r.audioTimestampRolloverStream=new et.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new et.TimestampRolloverStream("timed-metadata"),r.adtsStream=new at,r.coalesceStream=new vt(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",function(e){r.aacStream.setTimestamp(e.timeStamp)}),r.aacStream.on("data",function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new mt(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t}))}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new et.MetadataStream,r.packetStream=new et.TransportPacketStream,r.parseStream=new et.TransportParseStream,r.elementaryStream=new et.ElementaryStream,r.timestampRolloverStream=new et.TimestampRolloverStream,r.adtsStream=new at,r.h264Stream=new Tt,r.captionStream=new et.CaptionStream,r.coalesceStream=new vt(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?i||"audio"!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new ft(t,e),r.videoSegmentStream.on("timelineStartInfo",function(t){i&&!e.keepOriginalTimestamps&&(i.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))}),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",function(e){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new mt(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t})}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",function(e){e.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",e)}),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,be(i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,be(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var i=this.transmuxPipeline_;e.remux=t,i&&i.coalesceStream&&i.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(r){var t=St(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new q;var kt={Transmuxer:gt,VideoSegmentStream:ft,AudioSegmentStream:mt,AUDIO_PROPERTIES:_t,VIDEO_PROPERTIES:bt,generateSegmentTimingInfo:Ct},xt={Adts:at,h264:lt},Et=function e(t,i){var n=[],r=0,a=0,s=0,o=1/0,l=null,u=null;i=i||{},e.prototype.init.call(this),this.push=function(e){Se(t,e),t&&_t.forEach(function(i){t[i]=e[i]}),n.push(e)},this.setEarliestDts=function(e){a=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){s=e},this.processFrames_=function(){var e,c,h,d;0!==n.length&&0!==(e=ve(n,t,a)).length&&(t.baseMediaDecodeTime=Te(t,i.keepOriginalTimestamps),ge(t,e,s,o),t.samples=ye(e),h=Q(_e(e)),n=[],c=Z(r,[t]),r++,t.initSegment=ee([t]),(d=new Uint8Array(c.byteLength+h.byteLength)).set(c),d.set(h,c.byteLength),be(t),null===l&&(u=l=e[0].pts),u+=e.length*(9216e4/t.samplerate),this.trigger("timingInfo",{start:l}),this.trigger("data",{track:t,boxes:d}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:l,end:u}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){be(t),l=null,u=null},this.reset=function(){this.resetTiming_(),n=[],this.trigger("reset")}};Et.prototype=new q;var At=Et,Pt=function e(t,i){var n,r,a,s=0,o=[],l=[],u=null,c=null,h=!0;i=i||{},e.prototype.init.call(this),this.push=function(e){Se(t,e),void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],bt.forEach(function(e){t[e]=n[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),o.push(e)},this.processNals_=function(e){var n;for(o=l.concat(o);o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0!==o.length){var r=ie(o);if(r.length)if(l=r[r.length-1],e&&(r.pop(),r.duration-=l.duration,r.nalCount-=l.length,r.byteLength-=l.byteLength),r.length){if(this.trigger("timelineStartInfo",t.timelineStartInfo),h){if(!(a=ne(r))[0][0].keyFrame){if(!(a=re(a))[0][0].keyFrame)return o=[].concat.apply([],r).concat(l),void(l=[]);(r=[].concat.apply([],a)).duration=a.duration}h=!1}for(null===u&&(c=u=r[0].pts),this.trigger("timingInfo",{start:u,end:c+=r.duration}),n=0;n<r.length;n++){var d=r[n];t.samples=ae(d);var p=Q(se(d));be(t),Se(t,d),t.baseMediaDecodeTime=Te(t,i.keepOriginalTimestamps);var f=Z(s,[t]);s++,t.initSegment=ee([t]);var m=new Uint8Array(f.byteLength+p.byteLength);m.set(f),m.set(p,f.byteLength),this.trigger("data",{track:t,boxes:m,sequence:s,videoFrameDts:d.dts,videoFramePts:d.pts})}o=[]}else o=[]}},this.resetTimingAndConfig_=function(){n=void 0,r=void 0,u=null,c=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),l=[],o=[],h=!0,this.trigger("reset")}};Pt.prototype=new q;var Ot=Pt,It=ht,Dt=function(e){return e.prototype=new q,e.prototype.init.call(e),e},Lt=function(e,t){e.on("data",t.trigger.bind(t,"data")),e.on("done",t.trigger.bind(t,"done")),e.on("partialdone",t.trigger.bind(t,"partialdone")),e.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),e.on("audioTimingInfo",t.trigger.bind(t,"audioTimingInfo")),e.on("videoTimingInfo",t.trigger.bind(t,"videoTimingInfo")),e.on("trackinfo",t.trigger.bind(t,"trackinfo")),e.on("id3Frame",function(i){i.dispatchType=e.metadataStream.dispatchType,i.cueTime=de(i.pts),t.trigger("id3Frame",i)}),e.on("caption",function(e){t.trigger("caption",e)})},Rt=function e(t){var i=null,n=!0;t=t||{},e.prototype.init.call(this),t.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.push=function(e){if(n){var r=It(e);!r||i&&"aac"===i.type?r||i&&"ts"===i.type||(i=function(e){var t={type:"ts",tracks:{audio:null,video:null},packet:new et.TransportPacketStream,parse:new et.TransportParseStream,elementary:new et.ElementaryStream,timestampRollover:new et.TimestampRolloverStream,adts:new xt.Adts,h264:new xt.h264.H264Stream,captionStream:new et.CaptionStream,metadataStream:new et.MetadataStream};return t.headOfPipeline=t.packet,t.packet.pipe(t.parse).pipe(t.elementary).pipe(t.timestampRollover),t.timestampRollover.pipe(t.h264),t.h264.pipe(t.captionStream),t.timestampRollover.pipe(t.metadataStream),t.timestampRollover.pipe(t.adts),t.elementary.on("data",function(i){if("metadata"===i.type){for(var n=0;n<i.tracks.length;n++)t.tracks[i.tracks[n].type]||(t.tracks[i.tracks[n].type]=i.tracks[n],t.tracks[i.tracks[n].type].timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime);t.tracks.video&&!t.videoSegmentStream&&(t.videoSegmentStream=new Ot(t.tracks.video,e),t.videoSegmentStream.on("timelineStartInfo",function(i){t.tracks.audio&&!e.keepOriginalTimestamps&&t.audioSegmentStream.setEarliestDts(i.dts-e.baseMediaDecodeTime)}),t.videoSegmentStream.on("timingInfo",t.trigger.bind(t,"videoTimingInfo")),t.videoSegmentStream.on("data",function(e){t.trigger("data",{type:"video",data:e})}),t.videoSegmentStream.on("done",t.trigger.bind(t,"done")),t.videoSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.videoSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.h264.pipe(t.videoSegmentStream)),t.tracks.audio&&!t.audioSegmentStream&&(t.audioSegmentStream=new At(t.tracks.audio,e),t.audioSegmentStream.on("data",function(e){t.trigger("data",{type:"audio",data:e})}),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adts.pipe(t.audioSegmentStream)),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video})}}),t.captionStream.on("data",function(i){var n;i.startTime=me(i.startPts,n=t.tracks.video&&t.tracks.video.timelineStartInfo.pts||0,e.keepOriginalTimestamps),i.endTime=me(i.endPts,n,e.keepOriginalTimestamps),t.trigger("caption",i)}),(t=Dt(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(t),Lt(i,this)):(i=function(e){var t={type:"aac",tracks:{audio:null},metadataStream:new et.MetadataStream,aacStream:new yt,audioRollover:new et.TimestampRolloverStream("audio"),timedMetadataRollover:new et.TimestampRolloverStream("timed-metadata"),adtsStream:new at(!0)};return t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioRollover).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataRollover).pipe(t.metadataStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(i){"timed-metadata"!==i.type&&"audio"!==i.type||t.audioSegmentStream||(t.tracks.audio=t.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:e.baseMediaDecodeTime},codec:"adts",type:"audio"},t.audioSegmentStream=new At(t.tracks.audio,e),t.audioSegmentStream.on("data",function(e){t.trigger("data",{type:"audio",data:e})}),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video}))}),(t=Dt(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(t),Lt(i,this)),n=!1}i.headOfPipeline.push(e)},this.flush=function(){i&&(n=!0,i.headOfPipeline.flush())},this.partialFlush=function(){i&&i.headOfPipeline.partialFlush()},this.endTimeline=function(){i&&i.headOfPipeline.endTimeline()},this.reset=function(){i&&i.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(e){t.keepOriginalTimestamps||(t.baseMediaDecodeTime=e),i&&(i.tracks.audio&&(i.tracks.audio.timelineStartInfo.dts=void 0,i.tracks.audio.timelineStartInfo.pts=void 0,be(i.tracks.audio),i.audioRollover&&i.audioRollover.discontinuity()),i.tracks.video&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),i.tracks.video.timelineStartInfo.dts=void 0,i.tracks.video.timelineStartInfo.pts=void 0,be(i.tracks.video)),i.timestampRollover&&i.timestampRollover.discontinuity())},this.setRemux=function(e){t.remux=e,i&&i.coalesceStream&&i.coalesceStream.setRemux(e)},this.setAudioAppendStart=function(e){i&&i.tracks.audio&&i.audioSegmentStream&&i.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){}};Rt.prototype=new q;var Mt=Rt,Nt=function(e){return e>>>0},jt=Nt,Ut=function e(t,i){var n,r,a,s,o,l,u,c=[];if(!i.length)return null;for(n=0;n<t.byteLength;)r=jt(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),l=t.subarray(n+4,n+8),u=void 0,u="",u+=String.fromCharCode(l[0]),u+=String.fromCharCode(l[1]),a=(u+=String.fromCharCode(l[2]))+String.fromCharCode(l[3]),s=r>1?n+r:t.byteLength,a===i[0]&&(1===i.length?c.push(t.subarray(n+8,s)):(o=e(t.subarray(n+8,s),i.slice(1))).length&&(c=c.concat(o))),n=s;return c},Ft=Nt,Bt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Ht=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=e[s];return i},qt=Re.CaptionStream,Vt=function(e,t){for(var i=e,n=0;n<t.length;n++){var r=t[n];if(i<r.size)return r;i-=r.size}return null},Wt=function(e,t){var i=Ut(e,["moof","traf"]),n=Ut(e,["mdat"]),r={},a=[];return n.forEach(function(e,t){a.push({mdat:e,traf:i[t]})}),a.forEach(function(e){var i,n,a,s=e.mdat,o=e.traf,l=function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],a=2&n.flags[2],s=8&n.flags[2],o=16&n.flags[2],l=32&n.flags[2],u=65536&n.flags[0],c=131072&n.flags[0];return t=8,r&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),a&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),s&&(n.defaultSampleDuration=i.getUint32(t),t+=4),o&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),u&&(n.durationIsEmpty=!0),!r&&c&&(n.baseDataOffsetIsMoof=!0),n}(Ut(o,["tfhd"])[0]),u=l.trackId,c=Ut(o,["tfdt"]),h=c.length>0?(n=c[0],a={version:n[0],flags:new Uint8Array(n.subarray(1,4)),baseMediaDecodeTime:Ft(n[4]<<24|n[5]<<16|n[6]<<8|n[7])},1===a.version&&(a.baseMediaDecodeTime*=Math.pow(2,32),a.baseMediaDecodeTime+=Ft(n[8]<<24|n[9]<<16|n[10]<<8|n[11])),a).baseMediaDecodeTime:0,d=Ut(o,["trun"]);t===u&&d.length>0&&(i=function(e,t,i){var n,r,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),c=Vt(r,t);if(n={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:Ht(u),trackId:i},c)n.pts=c.pts,n.dts=c.dts,s=c;else{if(!s){console.log("We've encountered a nal unit without data. See mux.js#233.");break}n.pts=s.pts,n.dts=s.dts}l.push(n)}return l}(s,function(e,t,i){var n=t,r=i.defaultSampleDuration||0,a=i.defaultSampleSize||0,s=i.trackId,o=[];return e.forEach(function(e){var t=function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],a=4&i.flags[2],s=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],u=8&i.flags[1],c=n.getUint32(4),h=8;for(r&&(i.dataOffset=n.getInt32(h),h+=4),a&&c&&(t={flags:Bt(e.subarray(h,h+4))},h+=4,s&&(t.duration=n.getUint32(h),h+=4),o&&(t.size=n.getUint32(h),h+=4),u&&(t.compositionTimeOffset=1===i.version?n.getInt32(h):n.getUint32(h),h+=4),i.samples.push(t),c--);c--;)t={},s&&(t.duration=n.getUint32(h),h+=4),o&&(t.size=n.getUint32(h),h+=4),l&&(t.flags=Bt(e.subarray(h,h+4)),h+=4),u&&(t.compositionTimeOffset=1===i.version?n.getInt32(h):n.getUint32(h),h+=4),i.samples.push(t);return i}(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration}),o=o.concat(t)}),o}(d,h,l),u),r[u]||(r[u]=[]),r[u]=r[u].concat(i))}),r},zt=function(){var e,t,i,n,r,a,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new qt,s=!0,a=!!t&&t.isPartial,e.on("data",function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||i===e[0]&&n===t[i])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))n=s[i=a[0]];else if(null===i||!n)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,a,s)}return null!==(o=function(e,t,i){return null===t?null:{seiNals:Wt(e,t)[t],timescale:i}}(e,i,n))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],i=null,n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},Gt=function(e){return"AudioSegmentStream"===e?"audio":"VideoSegmentStream"===e?"video":""},Xt=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=this.options.handlePartialData?new Mt(this.options):new kt.Transmuxer(this.options),this.options.handlePartialData?function(e,t){t.on("data",function(t){var i={boxes:{data:t.data.boxes.buffer,byteOffset:t.data.boxes.byteOffset,byteLength:t.data.boxes.byteLength},initSegment:{data:t.data.track.initSegment.buffer,byteOffset:t.data.track.initSegment.byteOffset,byteLength:t.data.track.initSegment.byteLength},type:t.type,sequence:t.data.sequence};void 0!==t.data.videoFrameDts&&(i.videoFrameDtsTime=de(t.data.videoFrameDts)),void 0!==t.data.videoFramePts&&(i.videoFramePtsTime=de(t.data.videoFramePts)),e.postMessage({action:"data",segment:i},[i.boxes.data,i.initSegment.data])}),t.on("id3Frame",function(t){e.postMessage({action:"id3Frame",id3Frame:t})}),t.on("caption",function(t){e.postMessage({action:"caption",caption:t})}),t.on("done",function(t){e.postMessage({action:"done",type:Gt(t)})}),t.on("partialdone",function(t){e.postMessage({action:"partialdone",type:Gt(t)})}),t.on("endedsegment",function(t){e.postMessage({action:"endedSegment",type:Gt(t)})}),t.on("trackinfo",function(t){e.postMessage({action:"trackinfo",trackInfo:t})}),t.on("audioTimingInfo",function(t){if(null!==t.start){var i={start:de(t.start)};t.end&&(i.end=de(t.end)),e.postMessage({action:"audioTimingInfo",audioTimingInfo:i})}else e.postMessage({action:"audioTimingInfo",audioTimingInfo:t})}),t.on("videoTimingInfo",function(t){var i={start:de(t.start)};t.end&&(i.end=de(t.end)),e.postMessage({action:"videoTimingInfo",videoTimingInfo:i})})}(this.self,this.transmuxer):function(e,t){t.on("data",function(t){var i=t.initSegment;t.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.on("done",function(t){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})}),t.on("videoSegmentTimingInfo",function(t){var i={start:{decode:de(t.start.dts),presentation:de(t.start.pts)},end:{decode:de(t.end.dts),presentation:de(t.end.pts)},baseMediaDecodeTime:de(t.baseMediaDecodeTime)};t.prependedContentDuration&&(i.prependedContentDuration=de(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})}),t.on("audioSegmentTimingInfo",function(t){var i={start:{decode:de(t.start.dts),presentation:de(t.start.pts)},end:{decode:de(t.end.dts),presentation:de(t.end.pts)},baseMediaDecodeTime:de(t.baseMediaDecodeTime)};t.prependedContentDuration&&(i.prependedContentDuration=de(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:i})}),t.on("id3Frame",function(t){e.postMessage({action:"id3Frame",id3Frame:t})}),t.on("caption",function(t){e.postMessage({action:"caption",caption:t})}),t.on("trackinfo",function(t){e.postMessage({action:"trackinfo",trackInfo:t})}),t.on("audioTimingInfo",function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:de(t.start),end:de(t.end)}})}),t.on("videoTimingInfo",function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:de(t.start),end:de(t.end)}})})}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new zt,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),i=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:i&&i.captions||[],data:t.buffer},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){this.transmuxer.setBaseMediaDecodeTime(Math.round(he(e.timestampOffset||0)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(he(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),i.postMessage({action:"done",type:"transmuxed"})},t.partialFlush=function(e){this.transmuxer.partialFlush(),i.postMessage({action:"partialdone",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),i.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new Xt(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new Xt(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(i)}()}),Eu=function(e,t){var i=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&i.AUDIO&&e.mediaGroups.AUDIO[i.AUDIO]},Au=function(e,t){var i=t.attributes||{},n=function(e){var t=e.attributes||{};if(t.CODECS)return il(t.CODECS)}(t)||{};if(Eu(e,t)&&!n.audio&&!function(e,t){if(!Eu(e,t))return!0;var i=e.mediaGroups.AUDIO[(t.attributes||{}).AUDIO];for(var n in i)if(!i[n].uri&&!i[n].playlists)return!0;return!1}(e,t)){var r=$o(e,i.AUDIO);r&&(n.audio=r.audio)}var a={};return n.video&&(a.video=nl(""+n.video.type+n.video.details)),n.audio&&(a.audio=nl(""+n.audio.type+n.audio.details)),n.text&&(a.text=n.text.type),n.unknown&&(a.unknown=n.unknown),a},Pu=function(e){return Vr.log.debug?Vr.log.debug.bind(Vr,"VHS:",e+" >"):function(){}},Ou=Pu("PlaylistSelector"),Iu=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Du=function(e,t){if(!e)return"";var i=$r.getComputedStyle(e);return i?i[t]:""},Lu=function(e,t){var i=e.slice();e.sort(function(e,n){var r=t(e,n);return 0===r?i.indexOf(e)-i.indexOf(n):r})},Ru=function(e,t){var i,n;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),(i=i||$r.Number.MAX_VALUE)-(n||$r.Number.MAX_VALUE)},Mu=function(e,t,i,n,r){if(e){var a={bandwidth:t,width:i,height:n,limitRenditionByPlayerDimensions:r},s=e.playlists.map(function(e){return{bandwidth:e.attributes.BANDWIDTH||$r.Number.MAX_VALUE,width:e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,height:e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,playlist:e}});Lu(s,function(e,t){return e.bandwidth-t.bandwidth});var o=(s=s.filter(function(e){return!Ml.isIncompatible(e.playlist)})).filter(function(e){return Ml.isEnabled(e.playlist)});o.length||(o=s.filter(function(e){return!Ml.isDisabled(e.playlist)}));var l=o.filter(function(e){return e.bandwidth*tu.BANDWIDTH_VARIANCE<t}),u=l[l.length-1],c=l.filter(function(e){return e.bandwidth===u.bandwidth})[0];if(!1===r){var h=c||o[0]||s[0];if(h&&h.playlist){var d="sortedPlaylistReps";return c&&(d="bandwidthBestRep"),o[0]&&(d="enabledPlaylistReps"),Ou("choosing "+Iu(h)+" using "+d+" with options",a),h.playlist}return Ou("could not choose a playlist with options",a),null}var p=l.filter(function(e){return e.width&&e.height});Lu(p,function(e,t){return e.width-t.width});var f=p.filter(function(e){return e.width===i&&e.height===n});u=f[f.length-1];var m,g,v,y=f.filter(function(e){return e.bandwidth===u.bandwidth})[0];y||(g=(m=p.filter(function(e){return e.width>i||e.height>n})).filter(function(e){return e.width===m[0].width&&e.height===m[0].height}),u=g[g.length-1],v=g.filter(function(e){return e.bandwidth===u.bandwidth})[0]);var _=v||y||c||o[0]||s[0];if(_&&_.playlist){var b="sortedPlaylistReps";return v?b="resolutionPlusOneRep":y?b="resolutionBestRep":c?b="bandwidthBestRep":o[0]&&(b="enabledPlaylistReps"),Ou("choosing "+Iu(_)+" using "+b+" with options",a),_.playlist}return Ou("could not choose a playlist with options",a),null}},Nu=function(){var e=this.useDevicePixelRatio&&$r.devicePixelRatio||1;return Mu(this.playlists.master,this.systemBandwidth,parseInt(Du(this.tech_.el(),"width"),10)*e,parseInt(Du(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions)},ju=function(e,t,i){var n,r;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime>=e&&r.endTime<=t&&i.removeCue(r)},Uu=function(e){return"number"==typeof e&&isFinite(e)},Fu=1/60,Bu=function(e){return e+"TimingInfo"},Hu=function(e){var t=e.segmentTimeline,i=e.currentTimeline,n=e.startOfSegment,r=e.buffered;return e.overrideCheck||t!==i?t<i?n:r.length?r.end(r.length-1):n:null},qu=function(e){var t=e.timelineChangeController,i=e.segmentTimeline,n=e.loaderType,r=e.audioDisabled;if(e.currentTimeline===i)return!1;if("audio"===n){var a=t.lastTimelineChange({type:"main"});return!a||a.to!==i}if("main"===n&&r){var s=t.pendingTimelineChange({type:"audio"});return!s||s.to!==i}return!1},Vu=function(e){var t=e.segmentDuration,i=e.maxDuration;return!!t&&Math.round(t)>i+vl},Wu=function(e){function t(t,i){var n;if(n=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=t.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.hasPlayed_=t.hasPlayed,n.currentTime_=t.currentTime,n.seekable_=t.seekable,n.seeking_=t.seeking,n.duration_=t.duration,n.mediaSource_=t.mediaSource,n.vhs_=t.vhs,n.loaderType_=t.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=t.segmentMetadataTrack,n.goalBufferLength_=t.goalBufferLength,n.sourceType_=t.sourceType,n.sourceUpdater_=t.sourceUpdater,n.inbandTextTracks_=t.inbandTextTracks,n.state_="INIT",n.handlePartialData_=t.handlePartialData,n.timelineChangeController_=t.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=Vr.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=t.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=t.decrypter,n.syncController_=t.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",function(){n.isEndOfStream_()||(n.ended_=!1)}),n.fetchAtBuffer_=!1,n.logger_=Pu("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(Xr(n),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),"main"===n.loaderType_&&n.timelineChangeController_.on("pendingtimelinechange",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),"audio"===n.loaderType_&&n.timelineChangeController_.on("timelinechange",function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n}Jr(t,e);var i=t.prototype;return i.createTransmuxer_=function(){var e=new xu;return e.postMessage({action:"init",options:{remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_}}),e},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&(this.transmuxer_.terminate(),Xo=null,nu.length=0),this.resetStats_(),this.checkBufferTimeout_&&$r.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)},i.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},i.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&lu(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return Vr.createTimeRanges();if("main"===this.loaderType_){var e=this.startingMediaInfo_,t=e.hasVideo;if(t&&e.hasAudio&&!this.audioDisabled_&&!e.isMuxed)return this.sourceUpdater_.buffered();if(t)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=zl(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e},i.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=Gl(e),n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(n||e).resolvedUri};return n&&(r.bytes=n.bytes),r},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(e,t){if(void 0===t&&(t={}),e){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri)return(null!==this.mediaIndex||this.handlePartialData_)&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),n&&(n.mediaIndex-=a,n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}},i.pause=function(){this.checkBufferTimeout_&&($r.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return null===this.checkBufferTimeout_},i.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&lu(this.transmuxer_),this.mediaIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(e,t,i){if(void 0===i&&(i=function(){}),t===1/0&&(t=this.duration_()),this.sourceUpdater_&&this.currentMediaInfo_){var n=1,r=function(){0==--n&&i()};for(var a in this.audioDisabled_||(n++,this.sourceUpdater_.removeAudio(e,t,r)),"main"===this.loaderType_&&this.currentMediaInfo_&&this.currentMediaInfo_.hasVideo&&(this.gopBuffer_=function(e,t,i,n){for(var r=Math.ceil((t-n)*Io),a=Math.ceil((i-n)*Io),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var l=o+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,o-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_),n++,this.sourceUpdater_.removeVideo(e,t,r)),this.inbandTextTracks_)ju(e,t,this.inbandTextTracks_[a]);ju(e,t,this.segmentMetadataTrack_),r()}},i.monitorBuffer_=function(){this.checkBufferTimeout_&&$r.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=$r.setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&$r.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=$r.setTimeout(this.monitorBufferTick_.bind(this),500)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.buffered_(),t=this.checkBuffer_(e,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);t&&(t.timestampOffset=Hu({segmentTimeline:t.timeline,currentTimeline:this.currentTimeline_,startOfSegment:t.startOfSegment,buffered:e,overrideCheck:this.isPendingTimestampOffset_}),this.isPendingTimestampOffset_=!1,"number"==typeof t.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loadSegment_(t))}},i.isEndOfStream_=function(e,t){return void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),!(!t||!this.mediaSource_)&&t.endList&&"open"===this.mediaSource_.readyState&&e+1===t.segments.length},i.checkBuffer_=function(e,t,i,n,r,a){var s=0;e.length&&(s=e.end(e.length-1));var o=Math.max(0,s-r);if(!t.segments.length)return null;if(o>=this.goalBufferLength_())return null;if(!n&&o>=1)return null;var l,u=null,c=!1;if(null===a)u=this.getSyncSegmentCandidate_(t),c=!0;else if(null!==i){var h=t.segments[i];l=h&&h.end?h.end:s,u=i+1}else if(this.fetchAtBuffer_){var d=Ml.getMediaInfoForTime(t,s,a.segmentIndex,a.time);u=d.mediaIndex,l=d.startTime}else{var p=Ml.getMediaInfoForTime(t,r,a.segmentIndex,a.time);u=p.mediaIndex,l=p.startTime}var f=this.generateSegmentInfo_(t,u,l,c);return!f||this.mediaSource_&&this.playlist_&&f.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?void 0:(this.logger_("checkBuffer_ returning "+f.uri,{segmentInfo:f,playlist:t,currentMediaIndex:i,nextMediaIndex:u,startOfSegment:l,isSyncRequest:c}),f)},i.getSyncSegmentCandidate_=function(e){var t=this;if(-1===this.currentTimeline_)return 0;var i=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)},i.generateSegmentInfo_=function(e,t,i,n){if(t<0||t>=e.segments.length)return null;var r,a,s=e.segments[t],o=this.sourceUpdater_.audioBuffered(),l=this.sourceUpdater_.videoBuffered();return o.length&&(r=o.end(o.length-1)-this.sourceUpdater_.audioTimestampOffset()),l.length&&(a=function(e,t,i){if(null==t||!e.length)return[];var n,r=Math.ceil((t-i+3)*Io);for(n=0;n<e.length&&!(e[n].pts>r);n++);return e.slice(n)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),{requestId:"segment-loader-"+Math.random(),uri:s.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:s.timeline,duration:s.duration,segment:s,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:r,gopsToAlignWith:a}},i.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,r=Ml.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),a=function(e,t,i){return void 0===i&&(i=1),((e.length?e.end(e.length-1):0)-t)/i}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(r<=a)){var s=function(e){var t=e.currentTime,i=e.bandwidth,n=e.duration,r=e.segmentDuration,a=e.timeUntilRebuffer,s=e.currentTimeline,o=e.syncController,l=e.master.playlists.filter(function(e){return!Ml.isIncompatible(e)}),u=l.filter(Ml.isEnabled);u.length||(u=l.filter(function(e){return!Ml.isDisabled(e)}));var c=u.filter(Ml.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var l=o.getSyncPoint(e,n,s,t)?1:2;return{playlist:e,rebufferingImpact:Ml.estimateSegmentRequestTime(r,i,e)*l-a}}),h=c.filter(function(e){return e.rebufferingImpact<=0});return Lu(h,function(e,t){return Ru(t.playlist,e.playlist)}),h.length?h[0]:(Lu(c,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),c[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=.5;a<=vl&&(o=1),!s.playlist||s.playlist.uri===this.playlist_.uri||r-a-s.rebufferingImpact<o||(this.bandwidth=s.playlist.attributes.BANDWIDTH*tu.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(){this.mediaRequestsAborted+=1},i.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},i.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var i=Object.keys(e).sort(),n=Object.keys(t).sort();if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++){var a=i[r];if(a!==n[r])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t=t||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},i.handleTimingInfo_=function(e,t,i,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var r=this.pendingSegment_,a=Bu(t);r[a]=r[a]||{},r[a][i]=n,this.logger_("timinginfo: "+t+" - "+i+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(e,t){var i=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach(function(e){r[e.stream]=r[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=r[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)}),Object.keys(r).forEach(function(e){var t=r[e],a=t.startTime,s=t.endTime,o=t.captions,l=i.inbandTextTracks_;i.logger_("adding cues from "+a+" -> "+s+" for "+e),function(e,t,i){if(!e[i]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var n=t.textTracks().getTrackById(i);e[i]=n||t.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}}(l,i.vhs_.tech_,e),ju(a,s,l[e]),function(e){var t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;if(i){var r=$r.WebKitDataCue||$r.VTTCue;i.forEach(function(e){t[e.stream].addCue(new r(e.startTime+n,e.endTime+n,e.text))})}}({captionArray:o,inbandTextTracks:l,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},i.handleId3_=function(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,i){e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,i,this.vhs_.tech_),function(e){var t=e.metadataArray,i=e.timestampOffset,n=e.videoDuration;if(t){var r=$r.WebKitDataCue||$r.VTTCue,a=e.inbandTextTracks.metadataTrack_;if(a&&(t.forEach(function(e){var t=e.cueTime+i;!("number"!=typeof t||$r.isNaN(t)||t<0)&&t<1/0&&e.frames.forEach(function(e){var i=new r(t,t,e.value||e.url||e.data||"");i.frame=e,i.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Vr.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Vr.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Vr.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(i),a.addCue(i)})}),a.cues&&a.cues.length)){for(var s=a.cues,o=[],l=0;l<s.length;l++)s[l]&&o.push(s[l]);var u=o.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),c=Object.keys(u).sort(function(e,t){return Number(e)-Number(t)});c.forEach(function(e,t){var i=u[e],r=Number(c[t+1])||n;i.forEach(function(e){e.endTime=r})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:n,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i))},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(e){return e()})},i.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(e){return e()})},i.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.currentMediaInfo_&&qu({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;var e=this.pendingSegment_;if(!e||!e.trackInfo)return!1;if(!this.handlePartialData_){var t=this.currentMediaInfo_;if(t.hasVideo&&!e.videoTimingInfo)return!1;if(t.hasAudio&&!this.audioDisabled_&&!t.isMuxed&&!e.audioTimingInfo)return!1}return!qu({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})},i.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[Bu(t.type)].start;else{var n,r="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;r&&(n=this.handlePartialData_?t.videoFramePtsTime:i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:n,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},i.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},i.getInitSegmentAndUpdateState_=function(e){var t=e.type,i=e.initSegment,n=e.map,r=e.playlist;if(n){var a=zl(n);if(this.activeInitSegmentId_===a)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=a}return i&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!!n,this.activeInitSegmentId_=null,i):null},i.appendToSourceBuffer_=function(e){var t=this,i=e.segmentInfo,n=e.type,r=e.initSegment,a=e.data,s=[a],o=a.byteLength;r&&(s.unshift(r),o+=r.byteLength);var l,u,c,h=(c=0,(l={bytes:o,segments:s}).bytes&&(u=new Uint8Array(l.bytes),l.segments.forEach(function(e){u.set(e,c),c+=e.byteLength})),u);this.sourceUpdater_.appendBuffer({segmentInfo:i,type:n,bytes:h},function(e){e&&(t.error(n+" append of "+h.length+"b failed for segment #"+i.mediaIndex+" in playlist "+i.playlist.id),t.trigger("appenderror"))})},i.handleSegmentTimingInfo_=function(e,t,i){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment,r=e+"TimingInfo";n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}},i.appendData_=function(e,t){var i=t.type,n=t.data;if(n&&n.byteLength&&("audio"!==i||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:r,data:n})}},i.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(function(){var i=t.buffered_();"number"==typeof e.timestampOffset&&(e.timestampOffset=Hu({segmentTimeline:e.timeline,currentTimeline:t.currentTimeline_,startOfSegment:e.startOfSegment,buffered:i,overrideCheck:!0})),delete e.audioAppendStart;var n=t.sourceUpdater_.audioBuffered();n.length&&(e.audioAppendStart=n.end(n.length-1)-t.sourceUpdater_.audioTimestampOffset()),t.updateTransmuxerAndRequestSegment_(e)})},i.updateTransmuxerAndRequestSegment_=function(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var t=this.createSimplifiedSegmentObj_(e);e.abortRequests=mu({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,handlePartialData:this.handlePartialData_,abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})},i.trimBackBuffer_=function(e){var t,i,n,r,a=(t=this.seekable_(),i=this.currentTime_(),n=this.playlist_.targetDuration||10,r=i-tu.BACK_BUFFER_LENGTH,t.length&&(r=Math.max(r,t.start(0))),Math.min(i-n,r));a>0&&this.remove(0,a)},i.createSimplifiedSegmentObj_=function(e){var t=e.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith},n=e.playlist.segments[e.mediaIndex-1];if(n&&n.timeline===t.timeline&&(n.videoTimingInfo?i.baseStartTime=n.videoTimingInfo.transmuxedDecodeEnd:n.audioTimingInfo&&(i.baseStartTime=n.audioTimingInfo.transmuxedDecodeEnd)),t.key){var r=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=r}return t.map&&(i.map=this.initSegmentForMap(t.map)),i},i.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<Fu?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record 0.016666666666666666"):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},i.segmentRequestFinished_=function(e,t,i){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===cu)return;return this.pause(),e.code===uu?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,r=0;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING";var r=this.isEndOfStream_(n.mediaIndex,n.playlist);!n.isFmp4&&(r||null!==this.mediaIndex&&n.timeline!==this.currentTimeline_&&n.timeline>0)&&ou("endTimeline",this.transmuxer_),this.trigger("appending"),this.waitForAppendsToComplete_(n)}},i.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},i.updateMediaSecondsLoaded_=function(e){this.mediaSecondsLoaded+="number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:e.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=function(e){var t=e.currentStart,i=e.mediaIndex,n=e.firstVideoFrameTimeForData;if(void 0!==t)return t;if(!e.useVideoTimingInfo)return e.audioTimingInfo.start;var r=e.playlist.segments[i-1];return 0!==i&&r&&void 0!==r.start&&r.end===n+e.currentVideoTimestampOffset?e.videoTimingInfo.start:n},i.waitForAppendsToComplete_=function(e){if(!this.currentMediaInfo_)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var t=this.currentMediaInfo_,i="main"===this.loaderType_&&t.hasVideo,n=!this.audioDisabled_&&t.hasAudio&&!t.isMuxed;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);i&&e.waitingOnAppends++,n&&e.waitingOnAppends++,i&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),n&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},i.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(e){var t=function(e,t,i){return"main"===e&&t&&i?i.hasAudio||i.hasVideo?t.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.currentMediaInfo_,e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},i.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},i.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;t&&(e.timingInfo.end="number"==typeof t.end?t.end:t.start+e.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_}),this.logger_(function(e){var t=e.segment,i=e.playlist,n=i.mediaSequence,r=i.segments;return["appending ["+e.mediaIndex+"] of ["+n+", "+(n+(void 0===r?[]:r).length)+"] from playlist ["+i.id+"]","["+t.start+" => "+t.end+"] in timeline ["+e.timeline+"]"].join(" ")}(e));var t=function(e,t){if("hls"!==t)return null;var i,n,r=(i=e.audioTimingInfo,n=e.videoTimingInfo,Math.max(i&&"number"==typeof i.start&&"number"==typeof i.end?i.end-i.start:0,n&&"number"==typeof n.start&&"number"==typeof n.end?n.end-n.start:0));if(!r)return null;var a=e.playlist.targetDuration,s=Vu({segmentDuration:r,maxDuration:2*a}),o=Vu({segmentDuration:r,maxDuration:a});return s||o?{severity:s?"warn":"info",message:"Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+r+" when the reported duration is "+e.duration+" and the target duration is "+a+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?Vr.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest)this.trigger("syncinfoupdate");else{this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var i=e.segment;i.end&&this.currentTime_()-i.end>3*e.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.isEndOfStream_(e.mediaIndex,e.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_())}},i.recordThroughput_=function(e){if(e.duration<Fu)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record 0.016666666666666666");else{var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}},i.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,i=t.start,n=t.end;if(Uu(i)&&Uu(n)){ju(i,n,this.segmentMetadataTrack_);var r={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:n},a=new($r.WebKitDataCue||$r.VTTCue)(i,n,JSON.stringify(r));a.value=r,this.segmentMetadataTrack_.addCue(a)}}},t}(Vr.EventTarget);function zu(){}var Gu,Xu=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})},Ju=["video","audio"],Yu=function(e,t){var i=t[e+"Buffer"];return i&&i.updating||t.queuePending[e]},Ku=function e(t,i){if(0!==i.queue.length){var n=0,r=i.queue[n];if("mediaSource"!==r.type){if("mediaSource"!==t&&i.ready()&&"closed"!==i.mediaSource.readyState&&!Yu(t,i)){if(r.type!==t){if(null===(n=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if("mediaSource"===n.type)return null;if(n.type===e)return i}return null}(t,i.queue)))return;r=i.queue[n]}i.queue.splice(n,1),r.action(t,i),r.doneFn?i.queuePending[t]=r:e(t,i)}}else i.updating()||"closed"===i.mediaSource.readyState||(i.queue.shift(),r.action(i),r.doneFn&&r.doneFn(),e("audio",i),e("video",i))}},$u=function(e,t){var i=t[e+"Buffer"],n=Xu(e);i&&(i.removeEventListener("updateend",t["on"+n+"UpdateEnd_"]),i.removeEventListener("error",t["on"+n+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},Qu=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},Zu=function(e,t){return function(i,n){var r=n[i+"Buffer"];Qu(n.mediaSource,r)&&(n.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer"),r.appendBuffer(e))}},ec=function(e,t){return function(i,n){var r=n[i+"Buffer"];Qu(n.mediaSource,r)&&(n.logger_("Removing "+e+" to "+t+" from "+i+"Buffer"),r.remove(e,t))}},tc=function(e){return function(t,i){var n=i[t+"Buffer"];Qu(i.mediaSource,n)&&(i.logger_("Setting "+t+"timestampOffset to "+e),n.timestampOffset=e)}},ic=function(e){return function(t,i){e()}},nc=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(Hc){Vr.log.warn("Failed to call media source endOfStream",Hc)}}}},rc=function(e,t){return function(i){var n=Xu(e),r=Qo(t);i.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=i.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",i["on"+n+"UpdateEnd_"]),a.addEventListener("error",i["on"+n+"Error_"]),i.codecs[e]=t,i[e+"Buffer"]=a}},ac=function(e){return function(t){var i=t[e+"Buffer"];if($u(e,t),Qu(t.mediaSource,i)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(i)}catch(Hc){Vr.log.warn("Failed to removeSourceBuffer "+e+"Buffer",Hc)}}}},sc=function(e){return function(t,i){var n=i[t+"Buffer"],r=Qo(e);Qu(i.mediaSource,n)&&i.codecs[t]!==e&&(i.logger_("changing "+t+"Buffer codec from "+i.codecs[t]+" to "+e),n.changeType(r),i.codecs[t]=e)}},oc=function(e){var t=e.type,i=e.sourceUpdater;i.queue.push({type:t,action:e.action,doneFn:e.doneFn,name:e.name}),Ku(t,i)},lc=function(e,t){return function(i){if(t.queuePending[e]){var n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[e+"Error_"])}Ku(e,t)}},uc=function(e){function t(t){var i;return(i=e.call(this)||this).mediaSource=t,i.sourceopenListener_=function(){return Ku("mediaSource",Xr(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=Pu("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=lc("video",Xr(i)),i.onAudioUpdateEnd_=lc("audio",Xr(i)),i.onVideoError_=function(e){i.videoError_=e},i.onAudioError_=function(e){i.audioError_=e},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}Jr(t,e);var i=t.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(e,t){oc({type:"mediaSource",sourceUpdater:this,action:rc(e,t),name:"addSourceBuffer"})},i.abort=function(e){oc({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var i=t[e+"Buffer"];if(Qu(t.mediaSource,i)){t.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(Hc){Vr.log.warn("Failed to abort on "+e+"Buffer",Hc)}}}},name:"abort"})},i.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?oc({type:"mediaSource",sourceUpdater:this,action:ac(e),name:"removeSourceBuffer"}):Vr.log.error("removeSourceBuffer is not supported!")},i.canRemoveSourceBuffer=function(){return!Vr.browser.IE_VERSION&&!Vr.browser.IS_FIREFOX&&$r.MediaSource&&$r.MediaSource.prototype&&"function"==typeof $r.MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return $r.SourceBuffer&&$r.SourceBuffer.prototype&&"function"==typeof $r.SourceBuffer.prototype.changeType},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(e,t){this.canChangeType()?oc({type:e,sourceUpdater:this,action:sc(t),name:"changeType"}):Vr.log.error("changeType is not supported!")},i.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(i){var n=e[i];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(i,n);t.canChangeType()&&t.changeType(i,n)})},i.appendBuffer=function(e,t){var i=this,n=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");if(oc({type:r,sourceUpdater:this,action:Zu(a,n||{mediaIndex:-1}),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+s.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,s.forEach(function(e){i.appendBuffer.apply(i,e)})}},i.audioBuffered=function(){return Qu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Vr.createTimeRange()},i.videoBuffered=function(){return Qu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Vr.createTimeRange()},i.buffered=function(){var e=Qu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Qu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var i=null,n=null,r=0,a=[],s=[];if(!(e&&e.length&&t&&t.length))return Vr.createTimeRange();for(var o=e.length;o--;)a.push({time:e.start(o),type:"start"}),a.push({time:e.end(o),type:"end"});for(o=t.length;o--;)a.push({time:t.start(o),type:"start"}),a.push({time:t.end(o),type:"end"});for(a.sort(function(e,t){return e.time-t.time}),o=0;o<a.length;o++)"start"===a[o].type?2==++r&&(i=a[o].time):"end"===a[o].type&&1==--r&&(n=a[o].time),null!==i&&null!==n&&(s.push([i,n]),i=null,n=null);return Vr.createTimeRanges(s)}(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(e,t){var i;void 0===t&&(t=zu),oc({type:"mediaSource",sourceUpdater:this,action:(i=e,function(e){e.logger_("Setting mediaSource duration to "+i);try{e.mediaSource.duration=i}catch(Hc){Vr.log.warn("Failed to set media source duration",Hc)}}),name:"duration",doneFn:t})},i.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=zu),"string"!=typeof e&&(e=void 0),oc({type:"mediaSource",sourceUpdater:this,action:nc(e),name:"endOfStream",doneFn:t})},i.removeAudio=function(e,t,i){void 0===i&&(i=zu),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?oc({type:"audio",sourceUpdater:this,action:ec(e,t),doneFn:i,name:"remove"}):i()},i.removeVideo=function(e,t,i){void 0===i&&(i=zu),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?oc({type:"video",sourceUpdater:this,action:ec(e,t),doneFn:i,name:"remove"}):i()},i.updating=function(){return!(!Yu("audio",this)&&!Yu("video",this))},i.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(oc({type:"audio",sourceUpdater:this,action:tc(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},i.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(oc({type:"video",sourceUpdater:this,action:tc(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},i.audioQueueCallback=function(e){this.audioBuffer&&oc({type:"audio",sourceUpdater:this,action:ic(e),name:"callback"})},i.videoQueueCallback=function(e){this.videoBuffer&&oc({type:"video",sourceUpdater:this,action:ic(e),name:"callback"})},i.dispose=function(){var e=this;this.trigger("dispose"),Ju.forEach(function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"](function(){return $u(t,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(Vr.EventTarget),cc=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},hc=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),dc=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).handlePartialData_=!1,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!1,n}Jr(t,e);var i=t.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Vr.createTimeRanges();var e=this.subtitlesTrack_.cues;return Vr.createTimeRanges([[e[0].startTime,e[e.length-1].startTime]])},i.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=zl(e),n=this.initSegments_[i];if(t&&!n&&e.bytes){var r=new Uint8Array(hc.byteLength+e.bytes.byteLength);r.set(e.bytes),r.set(hc,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:r}}return n||e},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},i.remove=function(e,t){ju(e,t,this.subtitlesTrack_)},i.fillBuffer_=function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},i.skipEmptySegments_=function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e},i.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(e,t,i){var n=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===uu&&this.handleTimeout_(),e.code===cu?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),this.state="APPENDING",this.trigger("appending");var a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof $r.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var s,o=function(){n.subtitlesTrack_.tech_.off("vttjsloaded",s),n.stopForError({message:"Error loading vtt.js"})};return s=function(){n.subtitlesTrack_.tech_.off("vttjserror",o),n.segmentRequestFinished_(e,t,i)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",s),void this.subtitlesTrack_.tech_.one("vttjserror",o)}a.requested=!0;try{this.parseVTTCues_(r)}catch(Hc){return void this.stopForError({message:Hc.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.timingInfo=r.cues.length?{start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:{start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach(function(e){n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?new $r.VTTCue(e.startTime,e.endTime,e.text):e)}),function(e){var t=e.cues;if(t)for(var i=0;i<t.length;i++){for(var n=[],r=0,a=0;a<t.length;a++)t[i].startTime===t[a].startTime&&t[i].endTime===t[a].endTime&&t[i].text===t[a].text&&++r>1&&n.push(t[a]);n.length&&n.forEach(function(t){return e.removeCue(t)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(e){var t,i=!1;"function"==typeof $r.TextDecoder?t=new $r.TextDecoder("utf8"):(t=$r.WebVTT.StringDecoder(),i=!0);var n=new $r.WebVTT.Parser($r,$r.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){e.timestampmap=t},n.onparsingerror=function(e){Vr.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var r=e.segment.map.bytes;i&&(r=cc(r)),n.parse(r)}var a=e.bytes;i&&(a=cc(a)),n.parse(a),n.flush()},i.updateTimeMapping_=function(e,t,i){var n=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/Io-r.LOCAL+t.mapping;e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),i.syncInfo||(i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(e.cues[0].startTime,e.cues[e.cues.length-1].startTime-n.duration)})}else n.empty=!0},t}(Wu),pc=function(e,t){for(var i=e.cues,n=0;n<i.length;n++){var r=i[n];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},fc=[{name:"VOD",run:function(e,t,i,n,r){return i!==1/0?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.dateTimeObject){var c=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,h=Math.abs(r-c);if(null!==o&&(0===h||o<h))break;o=h,s={time:c,segmentIndex:l}}}return s}},{name:"Segment",run:function(e,t,i,n,r){var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.timeline===n&&void 0!==u.start){var c=Math.abs(r-u.start);if(null!==o&&o<c)break;(!s||null===o||o>=c)&&(o=c,s={time:u.start,segmentIndex:l})}}return s}},{name:"Discontinuity",run:function(e,t,i,n,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],u=e.discontinuities[t.discontinuitySequence+o+1];if(u){var c=Math.abs(r-u.time);if(null!==s&&s<c)break;(!a||null===s||s>=c)&&(s=c,a={time:u.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(e,t,i,n,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],mc=function(e){function t(t){var i;return(i=e.call(this)||this).timelines=[],i.discontinuities=[],i.datetimeToDisplayTime=null,i.logger_=Pu("SyncController"),i}Jr(t,e);var i=t.prototype;return i.getSyncPoint=function(e,t,i,n){var r=this.runStrategies_(e,t,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null},i.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+El(e,n.segmentIndex,0))},i.runStrategies_=function(e,t,i,n){for(var r=[],a=0;a<fc.length;a++){var s=fc[a],o=s.run(this,e,t,i,n);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r},i.selectSyncPoint_=function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<n&&(n=s,i=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i},i.saveExpiredSegmentInfo=function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;i>=0;i--){var n=e.segments[i];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},i.setDateTimeMapping=function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}},i.saveSegmentTimingInfo=function(e){var t=e.segmentInfo;this.calculateSegmentTimeMapping_(t,t.timingInfo,e.shouldSaveTimelineMapping)&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:t.segment.start}))},i.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},i.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},i.calculateSegmentTimeMapping_=function(e,t,i){var n=e.segment,r=this.timelines[e.timeline];if(null!==e.timestampOffset)r={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=r,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+r.time+"] [mapping: "+r.mapping+"]")),n.start=e.startOfSegment,n.end=t.end+r.mapping;else{if(!r)return!1;n.start=t.start+r.mapping,n.end=t.end+r.mapping}return!0},i.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r,a=t.discontinuityStarts[n],s=t.discontinuitySequence+n+1,o=a-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>l)r=o<0?i.start-El(t,e.mediaIndex,a):i.end+El(t,e.mediaIndex+1,a),this.discontinuities[s]={time:r,accuracy:l}}},i.dispose=function(){this.trigger("dispose"),this.off()},t}(Vr.EventTarget),gc=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}Jr(t,e);var i=t.prototype;return i.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(e){var t=e.type,i=e.from,n=e.to;return"number"==typeof i&&"number"==typeof n&&(this.pendingTimelineChanges_[t]={type:t,from:i,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},i.lastTimelineChange=function(e){var t=e.type,i=e.from,n=e.to;return"number"==typeof i&&"number"==typeof n&&(this.lastTimelineChanges_[t]={type:t,from:i,to:n},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(Vr.EventTarget),vc=new Tu("./decrypter-worker.worker.js",function(e,t){var i=this;
/*! @name @videojs/http-streaming @version 2.4.2 @license Apache-2.0 */!function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),n=null,r=function(){function e(e){var t,i,r;n||(n=function(){var e,t,i,n,r,a,s,o,l=[[[],[],[],[],[]],[[],[],[],[],[]]],u=l[0],c=l[1],h=u[4],d=c[4],p=[],f=[];for(e=0;e<256;e++)f[(p[e]=e<<1^283*(e>>7))^e]=e;for(t=i=0;!h[t];t^=n||1,i=f[i]||1)for(h[t]=a=(a=i^i<<1^i<<2^i<<3^i<<4)>>8^255&a^99,d[a]=t,o=16843009*p[r=p[n=p[t]]]^65537*r^257*n^16843008*t,s=257*p[a]^16843008*a,e=0;e<4;e++)u[e][t]=s=s<<24^s>>>8,c[e][a]=o=o<<24^o>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),c[e]=c[e].slice(0);return l}()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];var a=this._tables[0][4],s=this._tables[1],o=e.length,l=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");var u=e.slice(0),c=[];for(this._key=[u,c],t=o;t<4*o+28;t++)r=u[t-1],(t%o==0||8===o&&t%o==4)&&(r=a[r>>>24]<<24^a[r>>16&255]<<16^a[r>>8&255]<<8^a[255&r],t%o==0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),u[t]=u[t-o]^r;for(i=0;t;i++,t--)r=u[3&i?t:t-4],c[i]=t<=4||i<4?r:s[0][a[r>>>24]]^s[1][a[r>>16&255]]^s[2][a[r>>8&255]]^s[3][a[255&r]]}return e.prototype.decrypt=function(e,t,i,n,r,a){var s,o,l,u,c=this._key[1],h=e^c[0],d=n^c[1],p=i^c[2],f=t^c[3],m=c.length/4-2,g=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],T=v[3],S=v[4];for(u=0;u<m;u++)s=y[h>>>24]^_[d>>16&255]^b[p>>8&255]^T[255&f]^c[g],o=y[d>>>24]^_[p>>16&255]^b[f>>8&255]^T[255&h]^c[g+1],l=y[p>>>24]^_[f>>16&255]^b[h>>8&255]^T[255&d]^c[g+2],f=y[f>>>24]^_[h>>16&255]^b[d>>8&255]^T[255&p]^c[g+3],g+=4,h=s,d=o,p=l;for(u=0;u<4;u++)r[(3&-u)+a]=S[h>>>24]<<24^S[d>>16&255]<<16^S[p>>8&255]<<8^S[255&f]^c[g++],s=h,h=d,d=p,p=f,f=s},e}(),a=function(e){function i(){var i;return(i=e.call(this,t)||this).jobs=[],i.delay=1,i.timeout_=null,i}var n,r;r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var a=i.prototype;return a.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},a.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},i}(t),s=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},o=function(){function t(e,i,n,r){var o=t.STEP,l=new Int32Array(e.buffer),u=new Uint8Array(e.byteLength),c=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(l.subarray(c,c+o),i,n,u)),c=o;c<l.length;c+=o)n=new Uint32Array([s(l[c-4]),s(l[c-3]),s(l[c-2]),s(l[c-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(c,c+o),i,n,u));this.asyncStream_.push(function(){
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
var e;
/*! @name aes-decrypter @version 3.1.0 @license Apache-2.0 */r(null,(e=u).subarray(0,e.byteLength-e[e.byteLength-1]))})}return t.prototype.decryptChunk_=function(e,t,i,n){return function(){var a=function(e,t,i){var n,a,o,l,u,c,h,d,p,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),m=new r(Array.prototype.slice.call(t)),g=new Uint8Array(e.byteLength),v=new Int32Array(g.buffer);for(n=i[0],a=i[1],o=i[2],l=i[3],p=0;p<f.length;p+=4)u=s(f[p]),c=s(f[p+1]),h=s(f[p+2]),d=s(f[p+3]),m.decrypt(u,c,h,d,v,p),v[p]=s(v[p]^n),v[p+1]=s(v[p+1]^a),v[p+2]=s(v[p+2]^o),v[p+3]=s(v[p+3]^l),n=u,a=c,o=h,l=d;return g}(e,t,i);n.set(a,e.byteOffset)}},i=t,n=[{key:"STEP",get:function(){return 32e3}}],null&&e(i.prototype,null),n&&e(i,n),t;var i,n}();new function(e){e.onmessage=function(t){var i=t.data,n=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4),a=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new o(n,r,a,function(t,n){var r,a;e.postMessage((r={source:i.source,decrypted:n},a={},Object.keys(r).forEach(function(e){var t=r[e];a[e]=ArrayBuffer.isView(t)?{bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:t}),a),[n.buffer])})}}(i)}()}),yc=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},_c=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},bc=function(e,t){t.activePlaylistLoader=e,e.load()},Tc={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e],n=t.blacklistCurrentPlaylist;_c(t.segmentLoaders[e],i);var r=i.activeTrack(),a=i.activeGroup(),s=(a.filter(function(e){return e.default})[0]||a[0]).id,o=i.tracks[s];if(r!==o){for(var l in Vr.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[l].enabled=i.tracks[l]===o;i.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e];Vr.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),_c(i,n);var r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}}},Sc={AUDIO:function(e,t,i){if(t){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",Tc[e](e,i))}},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",Tc[e](e,i))}},wc={AUDIO:function(e,t){var i=t.vhs,n=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,s=t.master,o=s.mediaGroups,l=s.playlists,u=t.mediaTypes[e],c=u.groups,h=u.tracks,d=t.masterPlaylistLoader;o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}});var p=function(r){c[r]||(c[r]=[]);var s=l.filter(function(t){return t.attributes[e]===r}),u=function(l){var u,p=o[e][r][l];if(!s.filter(function(e){return e.resolvedUri!==p.resolvedUri}).length&&s.length&&delete p.resolvedUri,u="vhs-json"===n&&p.playlists?new gl(p.playlists[0],i,a):p.resolvedUri?new gl(p.resolvedUri,i,a):p.playlists&&"dash"===n?new eu(p.playlists[0],i,a,d):null,p=Vr.mergeOptions({id:l,playlistLoader:u},p),Sc[e](e,p.playlistLoader,t),c[r].push(p),void 0===h[l]){var f=new Vr.AudioTrack({id:l,kind:yc(p),enabled:!1,language:p.language,default:p.default,label:l});h[l]=f}};for(var p in o[e][r])u(p)};for(var f in o[e])p(f);r.on("error",Tc[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,n=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,h=t.masterPlaylistLoader;for(var d in o[e])for(var p in u[d]||(u[d]=[]),o[e][d])if(!o[e][d][p].forced){var f=o[e][d][p],m=void 0;if("hls"===r)m=new gl(f.resolvedUri,n,s);else if("dash"===r){if(!f.playlists.filter(function(e){return e.excludeUntil!==1/0}).length)return;m=new eu(f.playlists[0],n,s,h)}else"vhs-json"===r&&(m=new gl(f.playlists?f.playlists[0]:f.resolvedUri,n,s));if(f=Vr.mergeOptions({id:p,playlistLoader:m},f),Sc[e](e,f.playlistLoader,t),u[d].push(f),void 0===c[p]){var g=i.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track;c[p]=g}}a.on("error",Tc[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;for(var o in n[e])for(var l in a[o]||(a[o]=[]),n[e][o]){var u=n[e][o][l];if(u.instreamId.match(/CC\d/)&&(a[o].push(Vr.mergeOptions({id:l},u)),void 0===s[l])){var c=i.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default&&u.autoselect,language:u.language,label:l},!1).track;s[l]=c}}}},Cc={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if("showing"===i[n].mode||"hidden"===i[n].mode)return i[n];return null}}},kc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],xc=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Ec=function(e){function t(t){var i;i=e.call(this)||this;var n=t.src,r=t.handleManifestRedirects,a=t.withCredentials,s=t.tech,o=t.bandwidth,l=t.externVhs,u=t.useCueTags,c=t.blacklistDuration,h=t.enableLowInitialPlaylist,d=t.sourceType,p=t.cacheEncryptionKeys,f=t.handlePartialData,m=t.experimentalBufferBasedABR;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");Gu=l,i.experimentalBufferBasedABR=Boolean(m),i.withCredentials=a,i.tech_=s,i.vhs_=s.vhs,i.sourceType_=d,i.useCueTags_=u,i.blacklistDuration=c,i.enableLowInitialPlaylist=h,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:a,handleManifestRedirects:r,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:zu,activeTrack:zu,onGroupChanged:zu,onTrackChanged:zu}}),e}(),i.mediaSource=new $r.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(Xr(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(Xr(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(Xr(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=Vr.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new mc(t),i.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new vc,i.sourceUpdater_=new uc(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new gc;var g={vhs:i.vhs_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:o,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:p,handlePartialData:f,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_};return i.masterPlaylistLoader_="dash"===i.sourceType_?new eu(n,i.vhs_,i.requestOptions_):new gl(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new Wu(Vr.mergeOptions(g,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),t),i.audioSegmentLoader_=new Wu(Vr.mergeOptions(g,{loaderType:"audio"}),t),i.subtitleSegmentLoader_=new dc(Vr.mergeOptions(g,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),t),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),kc.forEach(function(e){i[e+"_"]=xc.bind(Xr(i),e)}),i.logger_=Pu("MPC"),i.triggeredFmp4Usage=!1,i.masterPlaylistLoader_.load(),i}Jr(t,e);var i=t.prototype;return i.checkABR_=function(){var e=this.selectPlaylist();this.shouldSwitchToMedia_(e)&&this.masterPlaylistLoader_.media(e)},i.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=$r.setInterval(function(){return e.checkABR_()},250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||($r.clearInterval(this.abrTimer_),this.abrTimer_=null)},i.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;e.requestOptions_.timeout=Rl(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?0:i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){wc[t](t,e)});var t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.vhs;["AUDIO","SUBTITLES"].forEach(function(i){t[i].activeGroup=function(e,t){return function(i){var n=t.mediaTypes[e].groups,r=t.masterPlaylistLoader.media();if(!r)return null;var a=null;return r.attributes[e]&&(a=n[r.attributes[e]]),a=a||n.main,void 0===i?a:null===i?null:a.filter(function(e){return e.id===i.id})[0]||null}}(i,e),t[i].activeTrack=Cc[i](i,e),t[i].onGroupChanged=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),l=a.activePlaylistLoader;_c(n,a),o&&(o.playlistLoader?(n.resyncLoader(),bc(o.playlistLoader,a)):l&&r.resetEverything())}}(i,e),t[i].onGroupChanging=function(e,t){return function(){var i=t.segmentLoaders[e];i.abort(),i.pause()}}(i,e),t[i].onTrackChanged=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),l=a.activePlaylistLoader;if(_c(n,a),o){if("AUDIO"===e){if(!o.playlistLoader)return r.setAudio(!0),void r.resetEverything();n.setAudio(!0),r.setAudio(!1)}l!==o.playlistLoader?(n.track&&n.track(s),n.resetEverything(),bc(o.playlistLoader,a)):bc(o.playlistLoader,a)}}}(i,e)});var a=t.AUDIO.activeGroup();if(a){var s=(a.filter(function(e){return e.default})[0]||a[0]).id;t.AUDIO.tracks[s].enabled=!0,t.AUDIO.onTrackChanged()}i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanged()})}),i.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanging()})});var o=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"}),n.trigger({type:"usage",name:"hls-audio-change"})};for(var l in n.audioTracks().addEventListener("change",o),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",function(){n.audioTracks().removeEventListener("change",o),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[l])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();if(!t){var i;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),!i||!e.shouldSwitchToMedia_(i))return;if(e.initialMedia_=i,e.masterPlaylistLoader_.media(e.initialMedia_),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;e.requestOptions_.timeout=Rl(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?0:i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},i.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(e,t){var i=e.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var a in i.AUDIO)for(var s in i.AUDIO[a])i.AUDIO[a][s].uri||(n=!1);n&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(i.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Gu.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media(),i=this.tech_.buffered();return function(e){var t=e.currentPlaylist,i=e.nextPlaylist,n=e.forwardBuffer,r=e.bufferLowWaterLine,a=e.bufferHighWaterLine,s=e.duration,o=e.experimentalBufferBasedABR,l=e.log;if(!i)return Vr.log.warn("We received no playlist to switch to. Please check your stream."),!1;var u="allowing switch "+(t&&t.id||"null")+" -> "+i.id;if(!t||!t.endList)return l(u+" as current playlist "+(t?"is live":"is not set")),!0;if(i.id===t.id)return!1;var c=o?tu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:tu.MAX_BUFFER_LOW_WATER_LINE;if(s<c)return l(u+" as duration < max low water line ("+s+" < "+c+")"),!0;var h=i.attributes.BANDWIDTH,d=t.attributes.BANDWIDTH;if(h<d&&(!o||n<a)){var p=u+" as next bandwidth < current bandwidth ("+h+" < "+d+")";return o&&(p+=" and forwardBuffer < bufferHighWaterLine ("+n+" < "+a+")"),l(p),!0}if((!o||h>d)&&n>=r){var f=u+" as forwardBuffer >= bufferLowWaterLine ("+n+" >= "+r+")";return o&&(f+=" and next bandwidth > current bandwidth ("+h+" > "+d+")"),l(f),!0}return l("not "+u+" as no switching criteria met"),!1}({currentPlaylist:t,nextPlaylist:e,forwardBuffer:i.length?i.end(i.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())},i.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetEverything(function(){t.tech_.setCurrentTime(Vr.browser.IE_VERSION||Vr.browser.IS_EDGE?t.tech_.currentTime()+.04:t.tech_.currentTime())}))},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},i.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(Vr.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(i.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var i=Gu.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=yl;var a=r.end(r.length-1);return a-n<=yl&&i-a<=yl},i.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var i=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!i)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));var n=this.masterPlaylistLoader_.master.playlists,r=n.filter(Dl),a=1===r.length&&r[0]===i;if(1===n.length&&t!==1/0)return Vr.log.warn("Problem encountered with playlist "+i.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(a);if(a){var s=!1;n.forEach(function(e){if(e!==i){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(s=!0,delete e.excludeUntil)}}),s&&(Vr.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}i.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var o=this.selectPlaylist();if(!o)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(e.internal?this.logger_:Vr.log.warn)((e.internal?"Internal problem":"Problem")+" encountered with playlist "+i.id+"."+(e.message?" "+e.message:"")+" Switching to playlist "+o.id+"."),o.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),o.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var l=o.targetDuration/2*1e3||5e3,u="number"==typeof o.lastRequest&&Date.now()-o.lastRequest<=l;return this.masterPlaylistLoader_.media(o,a||u)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(e,t){var i=this,n=[],r="all"===e;(r||"main"===e)&&n.push(this.masterPlaylistLoader_);var a=[];(r||"audio"===e)&&a.push("AUDIO"),(r||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach(function(e){var t=i.mediaTypes_[e]&&i.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)}),["main","audio","subtitle"].forEach(function(t){var r=i[t+"SegmentLoader_"];!r||e!==t&&"all"!==e||n.push(r)}),n.forEach(function(e){return t.forEach(function(t){"function"==typeof e[t]&&e[t]()})})},i.setCurrentTime=function(e){var t=bl(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Gu.Playlist.duration(e):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var i=this.syncController_.getExpiredTime(t,this.duration());if(null!==i){var n=this.masterPlaylistLoader_.master.suggestedPresentationDelay,r=Gu.Playlist.seekable(t,i,n);if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=Gu.Playlist.seekable(t,i,n)).length)return}var a,s;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),s=this.seekable_.start(0)),this.seekable_=e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?r:Vr.createTimeRanges([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+Sl(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var i=this.tech_.buffered(),n=Gu.Playlist.duration(this.masterPlaylistLoader_.media());i.length>0&&(n=Math.max(n,i.end(i.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}},i.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var i=e.mediaTypes_[t].groups;for(var n in i)i[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){return!(!this.mainSegmentLoader_.currentMediaInfo_||this.mediaTypes_.AUDIO.activePlaylistLoader&&!this.audioSegmentLoader_.currentMediaInfo_)},i.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};t.video=t.main;var i=Au(this.master(),this.media()),n={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(n.video=i.video||t.main.videoCodec||Yo),t.main.isMuxed&&(n.video+=","+(i.audio||t.main.audioCodec||Jo)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(n.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||Jo,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),n.audio||n.video){var a,s={};if(["video","audio"].forEach(function(e){if(n.hasOwnProperty(e)&&(r=n[e],!(t[e].isFmp4?Ko(r):tl(r)))){var i=t[e].isFmp4?"browser":"muxer";s[i]=s[i]||[],s[i].push(n[e]),"audio"===e&&(a=i)}var r}),r&&a&&this.media().attributes.AUDIO){var o=this.media().attributes.AUDIO;this.master().playlists.forEach(function(t){(t.attributes&&t.attributes.AUDIO)===o&&t!==e.media()&&(t.excludeUntil=1/0)}),this.logger_("excluding audio group "+o+" as "+a+' does not support codec(s): "'+n.audio+'"')}if(!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var l=[];if(["video","audio"].forEach(function(t){var i=(il(e.sourceUpdater_.codecs[t]||"")[t]||{}).type,r=(il(n[t]||"")[t]||{}).type;i&&r&&i.toLowerCase()!==r.toLowerCase()&&l.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+n[t]+'"')}),l.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+l.join(", ")+".",blacklistDuration:1/0,internal:!0})}return n}var u=Object.keys(s).reduce(function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+s[t].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:u,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},i.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},i.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,i=[];Object.keys(t).forEach(function(n){var r=t[n];if(-1===i.indexOf(r.id)){i.push(r.id);var a=Au(e.master,r),s=[];!a.audio||tl(a.audio)||Ko(a.audio)||(r.excludeUntil=1/0,s.push("audio codec "+a.audio)),!a.video||tl(a.video)||Ko(a.video)||(r.excludeUntil=1/0,s.push("video codec "+a.video)),a.text&&"stpp.ttml.im1t"===a.text&&(r.excludeUntil=1/0,s.push("text codec "+a.text)),s.length&&e.logger_("excluding "+r.id+" as codecs "+s.join(", ")+" are unsupported")}})},i.excludeIncompatibleVariants_=function(e){var t=this,i=il(e),n=Object.keys(i).length;this.master().playlists.forEach(function(e){if(e.excludeUntil!==1/0){var r={},a=2,s=[],o=Au(t.masterPlaylistLoader_.master,e);if(o.audio||o.video){var l=[o.video,o.audio].filter(Boolean).join(",");r=il(l),a=Object.keys(r).length}a!==n&&(s.push('codec count "'+a+'" !== "'+n+'"'),e.excludeUntil=1/0),t.sourceUpdater_.canChangeType()||(r.video&&i.video&&r.video.type.toLowerCase()!==i.video.type.toLowerCase()&&(s.push('video codec "'+r.video.type+'" !== "'+i.video.type+'"'),e.excludeUntil=1/0),r.audio&&i.audio&&r.audio.type.toLowerCase()!==i.audio.type.toLowerCase()&&(e.excludeUntil=1/0,s.push('audio codec "'+r.audio.type+'" !== "'+i.audio.type+'"'))),s.length&&t.logger_("blacklisting "+e.id+": "+s.join(" && "))}})},i.updateAdCues_=function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),function(e,t,i){if(void 0===i&&(i=0),e.segments)for(var n,r=i,a=0;a<e.segments.length;a++){var s=e.segments[a];if(n||(n=pc(t,r+s.duration/2)),n){if("cueIn"in s){n.endTime=r,n.adEndTime=r,r+=s.duration,n=null;continue}if(r<n.endTime){r+=s.duration;continue}n.endTime+=s.duration}else if("cueOut"in s&&((n=new $r.VTTCue(r,r+s.duration,s.cueOut)).adStartTime=r,n.adEndTime=r+parseFloat(s.cueOut),t.addCue(n)),"cueOutCont"in s){var o=s.cueOutCont.split("/").map(parseFloat),l=o[0],u=o[1];(n=new $r.VTTCue(r,r+s.duration,"")).adStartTime=r-l,n.adEndTime=n.adStartTime+u,t.addCue(n)}r+=s.duration}}(e,this.cueTagsTrack_,t)},i.goalBufferLength=function(){var e=this.tech_.currentTime(),t=tu.GOAL_BUFFER_LENGTH,i=tu.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,tu.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)},i.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=tu.BUFFER_LOW_WATER_LINE,i=tu.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,tu.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,tu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.experimentalBufferBasedABR?r:n)},i.bufferHighWaterLine=function(){return tu.BUFFER_HIGH_WATER_LINE},t}(Vr.EventTarget),Ac=function(e,t,i){var n,r,a,s=e.masterPlaylistController_,o=s[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(t.attributes.RESOLUTION){var l=t.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=t.attributes.BANDWIDTH,this.codecs=Au(s.master(),t),this.playlist=t,this.id=i,this.enabled=(n=e.playlists,r=t.id,a=o,function(e){var t=n.master.playlists[r],i=Il(t),s=Dl(t);return void 0===e?s:(e?delete t.disabled:t.disabled=!0,e===s||i||(a(),n.trigger(e?"renditionenabled":"renditiondisabled")),e)})},Pc=["seeking","seeked","pause","playing","error"],Oc=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Pu("PlaybackWatcher"),this.logger_("initialize");var i=function(){return t.monitorCurrentTime_()},n=function(){return t.techWaiting_()},r=function(){return t.cancelTimer_()},a=function(){return t.fixesBadSeeks_()},s=this.masterPlaylistController_,o=["main","subtitle","audio"],l={};o.forEach(function(e){l[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},s[e+"SegmentLoader_"].on("appendsdone",l[e].updateend),s[e+"SegmentLoader_"].on("playlistupdate",l[e].reset),t.tech_.on(["seeked","seeking"],l[e].reset)}),this.tech_.on("seekablechanged",a),this.tech_.on("waiting",n),this.tech_.on(Pc,r),this.tech_.on("canplay",i),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",a),t.tech_.off("waiting",n),t.tech_.off(Pc,r),t.tech_.off("canplay",i),o.forEach(function(e){s[e+"SegmentLoader_"].off("appendsdone",l[e].updateend),s[e+"SegmentLoader_"].off("playlistupdate",l[e].reset),t.tech_.off(["seeked","seeking"],l[e].reset)}),t.checkCurrentTimeTimeout_&&$r.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&$r.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=$r.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,i=t[e+"SegmentLoader_"],n=i.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))return!0;return!1}(this[e+"Buffered_"],n);this[e+"Buffered_"]=n,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:wl(n)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+yl>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),i=this.tech_.currentTime();if(this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){var n=t.start(0);e=n+(n===t.end(0)?0:yl)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+Sl(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;var r=this.tech_.buffered();return!!function(e){var t=e.buffered,i=e.targetDuration,n=e.currentTime;return!(!t.length||t.end(0)-t.start(0)<2*i||n>t.start(0)||!(t.start(0)-n<i))}({buffered:r,targetDuration:this.media().targetDuration,currentTime:i})&&(e=r.start(0)+yl,this.logger_("Buffered region starts ("+r.start(0)+")  just beyond seek point ("+i+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),i=bl(t,e);return i.length&&e+3<=i.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var a=Tl(r,t);if(a.length>0){var s=a.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+a.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},t.afterSeekableWindow_=function(e,t,i,n){if(void 0===n&&(n=!1),!e.length)return!1;var r=e.end(e.length-1)+yl;return!i.endList&&n&&(r=e.end(e.length-1)+3*i.targetDuration),t>r},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,i=e.audioBuffered,n=e.currentTime;if(t){var r;if(t.length&&i.length){var a=bl(t,n-3),s=bl(t,n),o=bl(i,n);o.length&&!s.length&&a.length&&(r={start:a.end(0),end:o.end(0)})}else Tl(t,n).length||(r=this.gapFromVideoUnderflow_(t,n));return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),n=Tl(t,i);this.cancelTimer_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+vl),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var i=function(e){if(e.length<2)return Vr.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),r=e.start(i);t.push([n,r])}return Vr.createTimeRanges(t)}(e),n=0;n<i.length;n++){var r=i.start(n),a=i.end(n);if(t-r<4&&t-r>2)return{start:r,end:a}}return null},e}(),Ic={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Dc=function e(t,i){var n=0,r=0,a=Vr.mergeOptions(Ic,i);t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){r&&t.currentTime(r)},o=function(e){null!=e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){return Date.now()-n<1e3*a.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):a.getSource&&"function"==typeof a.getSource?(n=Date.now(),a.getSource.call(t,o)):void Vr.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},u=function e(){t.off("loadedmetadata",s),t.off("error",l),t.off("dispose",e)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(i){u(),e(t,i)}},Lc=function(e){Dc(this,e)},Rc="2.4.2",Mc={PlaylistLoader:gl,Playlist:Ml,utils:Jl,STANDARD_PLAYLIST_SELECTOR:Nu,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(Ml.isEnabled);return Lu(t,function(e,t){return Ru(e,t)}),t.filter(function(t){return!!Au(e.playlists.master,t).video})[0]||null},lastBandwidthSelector:Nu,movingAverageBandwidthSelector:function(e){var t=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&$r.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth),Mu(this.playlists.master,t=e*this.systemBandwidth+(1-e)*t,parseInt(Du(this.tech_.el(),"width"),10)*i,parseInt(Du(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions)}},comparePlaylistBandwidth:Ru,comparePlaylistResolution:function(e,t){var i,n;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),(i=i||$r.Number.MAX_VALUE)===(n=n||$r.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},xhr:Fl()};Object.keys(tu).forEach(function(e){Object.defineProperty(Mc,e,{get:function(){return Vr.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),tu[e]},set:function(t){Vr.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?Vr.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):tu[e]=t}})});var Nc="videojs-vhs",jc=function(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.id){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})};Mc.canPlaySource=function(){return Vr.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Uc=function(){if(!$r.localStorage)return null;var e=$r.localStorage.getItem(Nc);if(!e)return null;try{return JSON.parse(e)}catch(Hc){return null}};Mc.supportsNativeHls=function(){if(!Kr||!Kr.createElement)return!1;var e=Kr.createElement("video");return!!Vr.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),Mc.supportsNativeDash=!!(Kr&&Kr.createElement&&Vr.getTech("Html5").isSupported())&&/maybe|probably/i.test(Kr.createElement("video").canPlayType("application/dash+xml")),Mc.supportsTypeNatively=function(e){return"hls"===e?Mc.supportsNativeHls:"dash"===e&&Mc.supportsNativeDash},Mc.isSupported=function(){return Vr.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Fc=function(e){function t(t,i,n){var r;if(r=e.call(this,i,Vr.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&Vr.log.warn("Using hls options is deprecated. Use vhs instead."),r.logger_=Pu("VhsHandler"),i.options_&&i.options_.playerId){var a=Vr(i.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return Vr.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),Xr(r)},configurable:!0}),a.hasOwnProperty("vhs")||Object.defineProperty(a,"vhs",{get:function(){return Vr.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),Xr(r)},configurable:!0}),a.hasOwnProperty("dash")||Object.defineProperty(a,"dash",{get:function(){return Vr.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Xr(r)},configurable:!0}),r.player_=a}if(r.tech_=i,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(Kr,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=Kr.fullscreenElement||Kr.webkitFullscreenElement||Kr.mozFullScreenElement||Kr.msFullscreenElement;t&&t.contains(r.tech_.el())&&r.masterPlaylistController_.smoothQualityChange_()}),r.on(r.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),r.on(r.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),r.on(r.tech_,"play",r.play),r}Jr(t,e);var i=t.prototype;return i.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.handlePartialData=this.options_.handlePartialData||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Uc();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=tu.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===tu.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","handlePartialData","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta"].forEach(function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(e,t){var i=this;if(e){var n;this.setOptions_(),this.options_.src=0===(n=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n,this.options_.tech=this.tech_,this.options_.externVhs=Mc,this.options_.sourceType=ha(t),this.options_.seekTo=function(e){i.tech_.setCurrentTime(e)},this.masterPlaylistController_=new Ec(this.options_);var r=Vr.mergeOptions({liveRangeSafeTimeDelta:yl},this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Oc(r),this.masterPlaylistController_.on("error",function(){var e=Vr.players[i.tech_.options_.playerId],t=i.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)});var a=this.options_.experimentalBufferBasedABR?Mc.movingAverageBandwidthSelector(.55):Mc.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):a.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Mc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){Vr.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return wl(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return wl(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){i.options_.useBandwidthFromLocalStorage&&function(e){if(!$r.localStorage)return!1;var t=Uc();t=t?Vr.mergeOptions(t,e):e;try{$r.localStorage.setItem(Nc,JSON.stringify(t))}catch(Hc){return!1}}({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,t;t=(e=i).playlists,e.representations=function(){return t&&t.master&&t.master.playlists?t.master.playlists.filter(function(e){return!Il(e)}).map(function(t,i){return new Ac(e,t,t.id)}):[]}}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){i.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=$r.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.setupEme_=function(){var e,t,i,n=this,r=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=(t=(e={player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:r&&r.media()}).player,!(!(i=function(e,t,i){if(!e)return e;var n={video:t&&t.attributes&&t.attributes.CODECS,audio:i&&i.attributes&&i.attributes.CODECS};!n.audio&&n.video&&n.video.split(",").length>1&&n.video.split(",").forEach(function(e){e=e.trim(),Zo(e)?n.audio=e:el(e)&&(n.video=e)});var r=n.video?'video/mp4;codecs="'+n.video+'"':null,a=n.audio?'audio/mp4;codecs="'+n.audio+'"':null,s={};for(var o in e)s[o]={audioContentType:a,videoContentType:r},t.contentProtection&&t.contentProtection[o]&&t.contentProtection[o].pssh&&(s[o].pssh=t.contentProtection[o].pssh),"string"==typeof e[o]&&(s[o].url=e[o]);return Vr.mergeOptions(e,s)}(e.sourceKeySystems,e.media,e.audioMedia))||(t.currentSource().keySystems=i,i&&!t.eme&&(Vr.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))));11!==Vr.browser.IE_VERSION&&a?(this.logger_("waiting for EME key session creation"),function(e){var t=e.player,i=e.sourceKeySystems,n=e.audioMedia,r=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a,s,o=(a=n?r.concat([n]):r,s=Object.keys(i),a.reduce(function(e,t){if(!t.contentProtection)return e;var i=s.reduce(function(e,i){var n=t.contentProtection[i];return n&&n.pssh&&(e[i]={pssh:n.pssh}),e},{});return Object.keys(i).length&&e.push(i),e},[])),l=[],u=[];return o.forEach(function(e){u.push(new Promise(function(e,i){t.tech_.one("keysessioncreated",e)})),l.push(new Promise(function(i,n){t.eme.initializeMediaKeys({keySystems:e},function(e){e?n(e):i()})}))}),Promise.race([Promise.all(l),Promise.race(u)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:r&&r.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){n.logger_("created EME key session"),n.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(e){n.logger_("error while creating EME key session",e),n.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=function(){var e=this,t=Vr.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,i;t=e.qualityLevels_,(i=e).representations().forEach(function(e){t.addQualityLevel(e)}),jc(t,i.playlists)}),this.playlists.on("mediachange",function(){jc(e.qualityLevels_,e.playlists)}))},t.version=function(){return{"@videojs/http-streaming":Rc,"mux.js":"5.8.0","mpd-parser":"0.15.0","m3u8-parser":"4.5.0","aes-decrypter":"3.1.0"}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return uc.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&$r.URL.revokeObjectURL&&($r.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),e.prototype.dispose.call(this)},i.convertToProgramTime=function(e,t){return function(e){var t=e.playlist,i=e.time,n=void 0===i?void 0:i,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i,n=0,r=0;r<t.segments.length&&!(e<=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+.25*a.duration)return null;i=a}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(n,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:n},o=function(e,t){if(!t.dateTimeObject)return null;var i=e-(t.videoTimingInfo.transmuxedPresentationStart+t.videoTimingInfo.transmuxerPrependedSeconds);return new Date(t.dateTimeObject.getTime()+1e3*i)}(n,a.segment);return o&&(s.programDateTime=o.toISOString()),r(null,s)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},i.seekToProgramTime=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=2),Yl({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(Vr.getComponent("Component")),Bc={name:"videojs-http-streaming",VERSION:Rc,canHandleSource:function(e,t){void 0===t&&(t={});var i=Vr.mergeOptions(Vr.options,t);return Bc.canPlayType(e.type,i)},handleSource:function(e,t,i){void 0===i&&(i={});var n=Vr.mergeOptions(Vr.options,i);return t.vhs=new Fc(e,t,n),Vr.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Vr.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Fl(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var i=Vr.mergeOptions(Vr.options,t).vhs.overrideNative,n=void 0===i?!Vr.browser.IS_ANY_SAFARI:i,r=ha(e);return!r||Mc.supportsTypeNatively(r)&&!n?"":"maybe"}};return Ko("avc1.4d400d,mp4a.40.2")&&Vr.getTech("Html5").registerSourceHandler(Bc,0),Vr.VhsHandler=Fc,Object.defineProperty(Vr,"HlsHandler",{get:function(){return Vr.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Fc},configurable:!0}),Vr.VhsSourceHandler=Bc,Object.defineProperty(Vr,"HlsSourceHandler",{get:function(){return Vr.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Bc},configurable:!0}),Vr.Vhs=Mc,Object.defineProperty(Vr,"Hls",{get:function(){return Vr.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Mc},configurable:!0}),Vr.use||(Vr.registerComponent("Hls",Mc),Vr.registerComponent("Vhs",Mc)),Vr.options.vhs=Vr.options.vhs||{},Vr.options.hls=Vr.options.hls||{},Vr.registerPlugin?Vr.registerPlugin("reloadSourceOnError",Lc):Vr.plugin("reloadSourceOnError",Lc),Vr});